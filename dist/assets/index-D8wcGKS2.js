function Ly(i,a){for(var o=0;o<a.length;o++){const l=a[o];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in i)){const f=Object.getOwnPropertyDescriptor(l,c);f&&Object.defineProperty(i,c,f.get?f:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=o(c);fetch(c.href,f)}})();function Ip(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zu={exports:{}},ro={};var Mm;function jy(){if(Mm)return ro;Mm=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function o(l,c,f){var d=null;if(f!==void 0&&(d=""+f),c.key!==void 0&&(d=""+c.key),"key"in c){f={};for(var h in c)h!=="key"&&(f[h]=c[h])}else f=c;return c=f.ref,{$$typeof:i,type:l,key:d,ref:c!==void 0?c:null,props:f}}return ro.Fragment=a,ro.jsx=o,ro.jsxs=o,ro}var Om;function Py(){return Om||(Om=1,zu.exports=jy()),zu.exports}var B=Py(),Au={exports:{}},me={};var Bm;function Fy(){if(Bm)return me;Bm=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function T(R,V,$){this.props=R,this.context=V,this.refs=S,this.updater=$||E}T.prototype.isReactComponent={},T.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},T.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=T.prototype;function O(R,V,$){this.props=R,this.context=V,this.refs=S,this.updater=$||E}var U=O.prototype=new A;U.constructor=O,_(U,T.prototype),U.isPureReactComponent=!0;var H=Array.isArray;function X(){}var k={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function J(R,V,$){var ee=$.ref;return{$$typeof:i,type:R,key:V,ref:ee!==void 0?ee:null,props:$}}function ae(R,V){return J(R.type,V,R.props)}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function se(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function($){return V[$]})}var xe=/\/+/g;function be(R,V){return typeof R=="object"&&R!==null&&R.key!=null?se(""+R.key):V.toString(36)}function ye(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(X,X):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function P(R,V,$,ee,de){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var ve=!1;if(R===null)ve=!0;else switch(he){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(R.$$typeof){case i:case a:ve=!0;break;case v:return ve=R._init,P(ve(R._payload),V,$,ee,de)}}if(ve)return de=de(R),ve=ee===""?"."+be(R,0):ee,H(de)?($="",ve!=null&&($=ve.replace(xe,"$&/")+"/"),P(de,V,$,"",function(it){return it})):de!=null&&(Q(de)&&(de=ae(de,$+(de.key==null||R&&R.key===de.key?"":(""+de.key).replace(xe,"$&/")+"/")+ve)),V.push(de)),1;ve=0;var Ae=ee===""?".":ee+":";if(H(R))for(var Ne=0;Ne<R.length;Ne++)ee=R[Ne],he=Ae+be(ee,Ne),ve+=P(ee,V,$,he,de);else if(Ne=w(R),typeof Ne=="function")for(R=Ne.call(R),Ne=0;!(ee=R.next()).done;)ee=ee.value,he=Ae+be(ee,Ne++),ve+=P(ee,V,$,he,de);else if(he==="object"){if(typeof R.then=="function")return P(ye(R),V,$,ee,de);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ve}function G(R,V,$){if(R==null)return R;var ee=[],de=0;return P(R,ee,"","",function(he){return V.call($,he,de++)}),ee}function W(R){if(R._status===-1){var V=R._result;V=V(),V.then(function($){(R._status===0||R._status===-1)&&(R._status=1,R._result=$)},function($){(R._status===0||R._status===-1)&&(R._status=2,R._result=$)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var re=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},we={map:G,forEach:function(R,V,$){G(R,function(){V.apply(this,arguments)},$)},count:function(R){var V=0;return G(R,function(){V++}),V},toArray:function(R){return G(R,function(V){return V})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return me.Activity=y,me.Children=we,me.Component=T,me.Fragment=o,me.Profiler=c,me.PureComponent=O,me.StrictMode=l,me.Suspense=p,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,me.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},me.cache=function(R){return function(){return R.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(R,V,$){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ee=_({},R.props),de=R.key;if(V!=null)for(he in V.key!==void 0&&(de=""+V.key),V)!K.call(V,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&V.ref===void 0||(ee[he]=V[he]);var he=arguments.length-2;if(he===1)ee.children=$;else if(1<he){for(var ve=Array(he),Ae=0;Ae<he;Ae++)ve[Ae]=arguments[Ae+2];ee.children=ve}return J(R.type,de,ee)},me.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:f,_context:R},R},me.createElement=function(R,V,$){var ee,de={},he=null;if(V!=null)for(ee in V.key!==void 0&&(he=""+V.key),V)K.call(V,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=V[ee]);var ve=arguments.length-2;if(ve===1)de.children=$;else if(1<ve){for(var Ae=Array(ve),Ne=0;Ne<ve;Ne++)Ae[Ne]=arguments[Ne+2];de.children=Ae}if(R&&R.defaultProps)for(ee in ve=R.defaultProps,ve)de[ee]===void 0&&(de[ee]=ve[ee]);return J(R,he,de)},me.createRef=function(){return{current:null}},me.forwardRef=function(R){return{$$typeof:h,render:R}},me.isValidElement=Q,me.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:W}},me.memo=function(R,V){return{$$typeof:m,type:R,compare:V===void 0?null:V}},me.startTransition=function(R){var V=k.T,$={};k.T=$;try{var ee=R(),de=k.S;de!==null&&de($,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(X,re)}catch(he){re(he)}finally{V!==null&&$.types!==null&&(V.types=$.types),k.T=V}},me.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},me.use=function(R){return k.H.use(R)},me.useActionState=function(R,V,$){return k.H.useActionState(R,V,$)},me.useCallback=function(R,V){return k.H.useCallback(R,V)},me.useContext=function(R){return k.H.useContext(R)},me.useDebugValue=function(){},me.useDeferredValue=function(R,V){return k.H.useDeferredValue(R,V)},me.useEffect=function(R,V){return k.H.useEffect(R,V)},me.useEffectEvent=function(R){return k.H.useEffectEvent(R)},me.useId=function(){return k.H.useId()},me.useImperativeHandle=function(R,V,$){return k.H.useImperativeHandle(R,V,$)},me.useInsertionEffect=function(R,V){return k.H.useInsertionEffect(R,V)},me.useLayoutEffect=function(R,V){return k.H.useLayoutEffect(R,V)},me.useMemo=function(R,V){return k.H.useMemo(R,V)},me.useOptimistic=function(R,V){return k.H.useOptimistic(R,V)},me.useReducer=function(R,V,$){return k.H.useReducer(R,V,$)},me.useRef=function(R){return k.H.useRef(R)},me.useState=function(R){return k.H.useState(R)},me.useSyncExternalStore=function(R,V,$){return k.H.useSyncExternalStore(R,V,$)},me.useTransition=function(){return k.H.useTransition()},me.version="19.2.0",me}var Nm;function ff(){return Nm||(Nm=1,Au.exports=Fy()),Au.exports}var C=ff();const Ve=Ip(C),df=Ly({__proto__:null,default:Ve},[C]);var Ru={exports:{}},oo={},Mu={exports:{}},Ou={};var Um;function ky(){return Um||(Um=1,(function(i){function a(P,G){var W=P.length;P.push(G);e:for(;0<W;){var re=W-1>>>1,we=P[re];if(0<c(we,G))P[re]=G,P[W]=we,W=re;else break e}}function o(P){return P.length===0?null:P[0]}function l(P){if(P.length===0)return null;var G=P[0],W=P.pop();if(W!==G){P[0]=W;e:for(var re=0,we=P.length,R=we>>>1;re<R;){var V=2*(re+1)-1,$=P[V],ee=V+1,de=P[ee];if(0>c($,W))ee<we&&0>c(de,$)?(P[re]=de,P[ee]=W,re=ee):(P[re]=$,P[V]=W,re=V);else if(ee<we&&0>c(de,W))P[re]=de,P[ee]=W,re=ee;else break e}}return G}function c(P,G){var W=P.sortIndex-G.sortIndex;return W!==0?W:P.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var p=[],m=[],v=1,y=null,b=3,w=!1,E=!1,_=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U(P){for(var G=o(m);G!==null;){if(G.callback===null)l(m);else if(G.startTime<=P)l(m),G.sortIndex=G.expirationTime,a(p,G);else break;G=o(m)}}function H(P){if(_=!1,U(P),!E)if(o(p)!==null)E=!0,X||(X=!0,se());else{var G=o(m);G!==null&&ye(H,G.startTime-P)}}var X=!1,k=-1,K=5,J=-1;function ae(){return S?!0:!(i.unstable_now()-J<K)}function Q(){if(S=!1,X){var P=i.unstable_now();J=P;var G=!0;try{e:{E=!1,_&&(_=!1,A(k),k=-1),w=!0;var W=b;try{t:{for(U(P),y=o(p);y!==null&&!(y.expirationTime>P&&ae());){var re=y.callback;if(typeof re=="function"){y.callback=null,b=y.priorityLevel;var we=re(y.expirationTime<=P);if(P=i.unstable_now(),typeof we=="function"){y.callback=we,U(P),G=!0;break t}y===o(p)&&l(p),U(P)}else l(p);y=o(p)}if(y!==null)G=!0;else{var R=o(m);R!==null&&ye(H,R.startTime-P),G=!1}}break e}finally{y=null,b=W,w=!1}G=void 0}}finally{G?se():X=!1}}}var se;if(typeof O=="function")se=function(){O(Q)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,be=xe.port2;xe.port1.onmessage=Q,se=function(){be.postMessage(null)}}else se=function(){T(Q,0)};function ye(P,G){k=T(function(){P(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(P){P.callback=null},i.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<P?Math.floor(1e3/P):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(P){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var W=b;b=G;try{return P()}finally{b=W}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=b;b=P;try{return G()}finally{b=W}},i.unstable_scheduleCallback=function(P,G,W){var re=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?re+W:re):W=re,P){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=W+we,P={id:v++,callback:G,priorityLevel:P,startTime:W,expirationTime:we,sortIndex:-1},W>re?(P.sortIndex=W,a(m,P),o(p)===null&&P===o(m)&&(_?(A(k),k=-1):_=!0,ye(H,W-re))):(P.sortIndex=we,a(p,P),E||w||(E=!0,X||(X=!0,se()))),P},i.unstable_shouldYield=ae,i.unstable_wrapCallback=function(P){var G=b;return function(){var W=b;b=G;try{return P.apply(this,arguments)}finally{b=W}}}})(Ou)),Ou}var Dm;function Hy(){return Dm||(Dm=1,Mu.exports=ky()),Mu.exports}var Bu={exports:{}},mt={};var Lm;function Iy(){if(Lm)return mt;Lm=1;var i=ff();function a(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var l={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,mt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return f(p,m,null,v)},mt.flushSync=function(p){var m=d.T,v=l.p;try{if(d.T=null,l.p=2,p)return p()}finally{d.T=m,l.p=v,l.d.f()}},mt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(p,m))},mt.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},mt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?l.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):v==="script"&&l.d.X(p,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},mt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);l.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(p)},mt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin);l.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},mt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);l.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(p)},mt.requestFormReset=function(p){l.d.r(p)},mt.unstable_batchedUpdates=function(p,m){return p(m)},mt.useFormState=function(p,m,v){return d.H.useFormState(p,m,v)},mt.useFormStatus=function(){return d.H.useHostTransitionStatus()},mt.version="19.2.0",mt}var jm;function Vp(){if(jm)return Bu.exports;jm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Bu.exports=Iy(),Bu.exports}var Pm;function Vy(){if(Pm)return oo;Pm=1;var i=Hy(),a=ff(),o=Vp();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(l(188))}function m(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var u=s.alternate;if(u===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===u.child){for(u=s.child;u;){if(u===n)return p(s),e;if(u===r)return p(s),t;u=u.sibling}throw Error(l(188))}if(n.return!==r.return)n=s,r=u;else{for(var g=!1,x=s.child;x;){if(x===n){g=!0,n=s,r=u;break}if(x===r){g=!0,r=s,n=u;break}x=x.sibling}if(!g){for(x=u.child;x;){if(x===n){g=!0,n=u,r=s;break}if(x===r){g=!0,r=u,n=s;break}x=x.sibling}if(!g)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case H:return"Suspense";case X:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case O:return e.displayName||"Context";case A:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var ye=Array.isArray,P=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},re=[],we=-1;function R(e){return{current:e}}function V(e){0>we||(e.current=re[we],re[we]=null,we--)}function $(e,t){we++,re[we]=e.current,e.current=t}var ee=R(null),de=R(null),he=R(null),ve=R(null);function Ae(e,t){switch($(he,t),$(de,e),$(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jh(t),e=em(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ee),$(ee,e)}function Ne(){V(ee),V(de),V(he)}function it(e){e.memoizedState!==null&&$(ve,e);var t=ee.current,n=em(t,e.type);t!==n&&($(de,e),$(ee,n))}function Ct(e){de.current===e&&(V(ee),V(de)),ve.current===e&&(V(ve),to._currentValue=W)}var $t,jt;function zt(e){if($t===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$t=t&&t[1]||"",jt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$t+e+jt}var ln=!1;function sn(e,t){if(!e||ln)return"";ln=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(F){var j=F}Reflect.construct(e,[],q)}else{try{q.call()}catch(F){j=F}e.call(q.prototype)}}else{try{throw Error()}catch(F){j=F}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(F){if(F&&j&&typeof F.stack=="string")return[F.stack,j.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),g=u[0],x=u[1];if(g&&x){var z=g.split(`
`),L=x.split(`
`);for(s=r=0;r<z.length&&!z[r].includes("DetermineComponentFrameRoot");)r++;for(;s<L.length&&!L[s].includes("DetermineComponentFrameRoot");)s++;if(r===z.length||s===L.length)for(r=z.length-1,s=L.length-1;1<=r&&0<=s&&z[r]!==L[s];)s--;for(;1<=r&&0<=s;r--,s--)if(z[r]!==L[s]){if(r!==1||s!==1)do if(r--,s--,0>s||z[r]!==L[s]){var I=`
`+z[r].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=r&&0<=s);break}}}finally{ln=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?zt(n):""}function Kn(e,t){switch(e.tag){case 26:case 27:case 5:return zt(e.type);case 16:return zt("Lazy");case 13:return e.child!==t&&t!==null?zt("Suspense Fallback"):zt("Suspense");case 19:return zt("SuspenseList");case 0:case 15:return sn(e.type,!1);case 11:return sn(e.type.render,!1);case 1:return sn(e.type,!0);case 31:return zt("Activity");default:return""}}function cn(e){try{var t="",n=null;do t+=Kn(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var sa=Object.prototype.hasOwnProperty,Ui=i.unstable_scheduleCallback,ur=i.unstable_cancelCallback,ds=i.unstable_shouldYield,hs=i.unstable_requestPaint,gt=i.unstable_now,ms=i.unstable_getCurrentPriorityLevel,fr=i.unstable_ImmediatePriority,dr=i.unstable_UserBlockingPriority,Pt=i.unstable_NormalPriority,Tn=i.unstable_LowPriority,Cn=i.unstable_IdlePriority,Wn=i.log,ca=i.unstable_setDisableYieldValue,Di=null,lt=null;function Ft(e){if(typeof Wn=="function"&&ca(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(Di,e)}catch{}}var ht=Math.clz32?Math.clz32:wo,Li=Math.log,hr=Math.LN2;function wo(e){return e>>>=0,e===0?32:31-(Li(e)/hr|0)|0}var kt=256,ji=262144,Ke=4194304;function Ht(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var x=r&134217727;return x!==0?(r=x&~u,r!==0?s=Ht(r):(g&=x,g!==0?s=Ht(g):n||(n=x&~e,n!==0&&(s=Ht(n))))):(x=r&~u,x!==0?s=Ht(x):g!==0?s=Ht(g):n||(n=r&~e,n!==0&&(s=Ht(n)))),s===0?0:t!==0&&t!==s&&(t&u)===0&&(u=s&-s,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:s}function mr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ev(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uf(){var e=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),e}function ps(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _v(e,t,n,r,s,u){var g=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var x=e.entanglements,z=e.expirationTimes,L=e.hiddenUpdates;for(n=g&~n;0<n;){var I=31-ht(n),q=1<<I;x[I]=0,z[I]=-1;var j=L[I];if(j!==null)for(L[I]=null,I=0;I<j.length;I++){var F=j[I];F!==null&&(F.lane&=-536870913)}n&=~q}r!==0&&Df(e,r,0),u!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Df(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ht(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function Lf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ht(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function jf(e,t){var n=t&-t;return n=(n&42)!==0?1:gs(n),(n&(e.suspendedLanes|t))!==0?0:n}function gs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pf(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Em(e.type))}function Ff(e,t){var n=G.p;try{return G.p=e,t()}finally{G.p=n}}var $n=Math.random().toString(36).slice(2),st="__reactFiber$"+$n,xt="__reactProps$"+$n,ua="__reactContainer$"+$n,ys="__reactEvents$"+$n,Tv="__reactListeners$"+$n,Cv="__reactHandles$"+$n,kf="__reactResources$"+$n,gr="__reactMarker$"+$n;function xs(e){delete e[st],delete e[xt],delete e[ys],delete e[Tv],delete e[Cv]}function fa(e){var t=e[st];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ua]||n[st]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lm(e);e!==null;){if(n=e[st])return n;e=lm(e)}return t}e=n,n=e.parentNode}return null}function da(e){if(e=e[st]||e[ua]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function ha(e){var t=e[kf];return t||(t=e[kf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[gr]=!0}var Hf=new Set,If={};function Pi(e,t){ma(e,t),ma(e+"Capture",t)}function ma(e,t){for(If[e]=t,e=0;e<t.length;e++)Hf.add(t[e])}var zv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vf={},Yf={};function Av(e){return sa.call(Yf,e)?!0:sa.call(Vf,e)?!1:zv.test(e)?Yf[e]=!0:(Vf[e]=!0,!1)}function So(e,t,n){if(Av(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Eo(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function zn(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rv(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(g){n=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(g){n=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){if(!e._valueTracker){var t=qf(e)?"checked":"value";e._valueTracker=Rv(e,t,""+e[t])}}function Gf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mv=/[\n"\\]/g;function Vt(e){return e.replace(Mv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ws(e,t,n,r,s,u,g,x){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+It(t)):e.value!==""+It(t)&&(e.value=""+It(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Ss(e,g,It(t)):n!=null?Ss(e,g,It(n)):r!=null&&e.removeAttribute("value"),s==null&&u!=null&&(e.defaultChecked=!!u),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+It(x):e.removeAttribute("name")}function Xf(e,t,n,r,s,u,g,x){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){bs(e);return}n=n!=null?""+It(n):"",t=t!=null?""+It(t):n,x||t===e.value||(e.value=t),e.defaultValue=t}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=x?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),bs(e)}function Ss(e,t,n){t==="number"&&_o(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function pa(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+It(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qf(e,t,n){if(t!=null&&(t=""+It(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+It(n):""}function Zf(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(l(92));if(ye(r)){if(1<r.length)throw Error(l(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=It(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),bs(e)}function ga(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ov=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kf(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||Ov.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Wf(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Kf(e,s,r)}else for(var u in t)t.hasOwnProperty(u)&&Kf(e,u,t[u])}function Es(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function To(e){return Nv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function An(){}var _s=null;function Ts(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var va=null,ya=null;function $f(e){var t=da(e);if(t&&(e=t.stateNode)){var n=e[xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ws(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[xt]||null;if(!s)throw Error(l(90));ws(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Gf(r)}break e;case"textarea":Qf(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&pa(e,!!n.multiple,t,!1)}}}var Cs=!1;function Jf(e,t,n){if(Cs)return e(t,n);Cs=!0;try{var r=e(t);return r}finally{if(Cs=!1,(va!==null||ya!==null)&&(dl(),va&&(t=va,e=ya,ya=va=null,$f(t),e)))for(t=0;t<e.length;t++)$f(e[t])}}function yr(e,t){var n=e.stateNode;if(n===null)return null;var r=n[xt]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(Rn)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){zs=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{zs=!1}var Jn=null,As=null,Co=null;function ed(){if(Co)return Co;var e,t=As,n=t.length,r,s="value"in Jn?Jn.value:Jn.textContent,u=s.length;for(e=0;e<n&&t[e]===s[e];e++);var g=n-e;for(r=1;r<=g&&t[n-r]===s[u-r];r++);return Co=s.slice(e,1<r?1-r:void 0)}function zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ao(){return!0}function td(){return!1}function bt(e){function t(n,r,s,u,g){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(u):u[x]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ao:td,this.isPropagationStopped=td,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),t}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=bt(Fi),br=y({},Fi,{view:0,detail:0}),Uv=bt(br),Rs,Ms,wr,Mo=y({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(Rs=e.screenX-wr.screenX,Ms=e.screenY-wr.screenY):Ms=Rs=0,wr=e),Rs)},movementY:function(e){return"movementY"in e?e.movementY:Ms}}),nd=bt(Mo),Dv=y({},Mo,{dataTransfer:0}),Lv=bt(Dv),jv=y({},br,{relatedTarget:0}),Os=bt(jv),Pv=y({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=bt(Pv),kv=y({},Fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hv=bt(kv),Iv=y({},Fi,{data:0}),id=bt(Iv),Vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qv[e])?!!t[e]:!1}function Bs(){return Gv}var Xv=y({},br,{key:function(e){if(e.key){var t=Vv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(e){return e.type==="keypress"?zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qv=bt(Xv),Zv=y({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=bt(Zv),Kv=y({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),Wv=bt(Kv),$v=y({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jv=bt($v),e1=y({},Mo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t1=bt(e1),n1=y({},Fi,{newState:0,oldState:0}),i1=bt(n1),a1=[9,13,27,32],Ns=Rn&&"CompositionEvent"in window,Sr=null;Rn&&"documentMode"in document&&(Sr=document.documentMode);var r1=Rn&&"TextEvent"in window&&!Sr,rd=Rn&&(!Ns||Sr&&8<Sr&&11>=Sr),od=" ",ld=!1;function sd(e,t){switch(e){case"keyup":return a1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xa=!1;function o1(e,t){switch(e){case"compositionend":return cd(t);case"keypress":return t.which!==32?null:(ld=!0,od);case"textInput":return e=t.data,e===od&&ld?null:e;default:return null}}function l1(e,t){if(xa)return e==="compositionend"||!Ns&&sd(e,t)?(e=ed(),Co=As=Jn=null,xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rd&&t.locale!=="ko"?null:t.data;default:return null}}var s1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!s1[e.type]:t==="textarea"}function fd(e,t,n,r){va?ya?ya.push(r):ya=[r]:va=r,t=xl(t,"onChange"),0<t.length&&(n=new Ro("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Er=null,_r=null;function c1(e){Xh(e,0)}function Oo(e){var t=vr(e);if(Gf(t))return e}function dd(e,t){if(e==="change")return t}var hd=!1;if(Rn){var Us;if(Rn){var Ds="oninput"in document;if(!Ds){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ds=typeof md.oninput=="function"}Us=Ds}else Us=!1;hd=Us&&(!document.documentMode||9<document.documentMode)}function pd(){Er&&(Er.detachEvent("onpropertychange",gd),_r=Er=null)}function gd(e){if(e.propertyName==="value"&&Oo(_r)){var t=[];fd(t,_r,e,Ts(e)),Jf(c1,t)}}function u1(e,t,n){e==="focusin"?(pd(),Er=t,_r=n,Er.attachEvent("onpropertychange",gd)):e==="focusout"&&pd()}function f1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oo(_r)}function d1(e,t){if(e==="click")return Oo(t)}function h1(e,t){if(e==="input"||e==="change")return Oo(t)}function m1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:m1;function Tr(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sa.call(t,s)||!At(e[s],t[s]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var n=vd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vd(n)}}function xd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_o(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_o(e.document)}return t}function Ls(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var p1=Rn&&"documentMode"in document&&11>=document.documentMode,ba=null,js=null,Cr=null,Ps=!1;function wd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ps||ba==null||ba!==_o(r)||(r=ba,"selectionStart"in r&&Ls(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cr&&Tr(Cr,r)||(Cr=r,r=xl(js,"onSelect"),0<r.length&&(t=new Ro("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ba)))}function ki(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wa={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Fs={},Sd={};Rn&&(Sd=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Hi(e){if(Fs[e])return Fs[e];if(!wa[e])return e;var t=wa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sd)return Fs[e]=t[n];return e}var Ed=Hi("animationend"),_d=Hi("animationiteration"),Td=Hi("animationstart"),g1=Hi("transitionrun"),v1=Hi("transitionstart"),y1=Hi("transitioncancel"),Cd=Hi("transitionend"),zd=new Map,ks="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ks.push("scrollEnd");function en(e,t){zd.set(e,t),Pi(t,[e])}var Bo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yt=[],Sa=0,Hs=0;function No(){for(var e=Sa,t=Hs=Sa=0;t<e;){var n=Yt[t];Yt[t++]=null;var r=Yt[t];Yt[t++]=null;var s=Yt[t];Yt[t++]=null;var u=Yt[t];if(Yt[t++]=null,r!==null&&s!==null){var g=r.pending;g===null?s.next=s:(s.next=g.next,g.next=s),r.pending=s}u!==0&&Ad(n,s,u)}}function Uo(e,t,n,r){Yt[Sa++]=e,Yt[Sa++]=t,Yt[Sa++]=n,Yt[Sa++]=r,Hs|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Is(e,t,n,r){return Uo(e,t,n,r),Do(e)}function Ii(e,t){return Uo(e,null,null,t),Do(e)}function Ad(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var s=!1,u=e.return;u!==null;)u.childLanes|=n,r=u.alternate,r!==null&&(r.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(s=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,s&&t!==null&&(s=31-ht(n),e=u.hiddenUpdates,r=e[s],r===null?e[s]=[t]:r.push(t),t.lane=n|536870912),u):null}function Do(e){if(50<Qr)throw Qr=0,Wc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ea={};function x1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,r){return new x1(e,t,n,r)}function Vs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Rd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Lo(e,t,n,r,s,u){var g=0;if(r=e,typeof e=="function")Vs(e)&&(g=1);else if(typeof e=="string")g=_y(e,n,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=Rt(31,n,t,s),e.elementType=J,e.lanes=u,e;case _:return Vi(n.children,s,u,t);case S:g=8,s|=24;break;case T:return e=Rt(12,n,t,s|2),e.elementType=T,e.lanes=u,e;case H:return e=Rt(13,n,t,s),e.elementType=H,e.lanes=u,e;case X:return e=Rt(19,n,t,s),e.elementType=X,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:g=10;break e;case A:g=9;break e;case U:g=11;break e;case k:g=14;break e;case K:g=16,r=null;break e}g=29,n=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=Rt(g,n,t,s),t.elementType=e,t.type=r,t.lanes=u,t}function Vi(e,t,n,r){return e=Rt(7,e,r,t),e.lanes=n,e}function Ys(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function Md(e){var t=Rt(18,null,null,0);return t.stateNode=e,t}function qs(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Od=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var n=Od.get(e);return n!==void 0?n:(t={value:e,source:t,stack:cn(t)},Od.set(e,t),t)}return{value:e,source:t,stack:cn(t)}}var _a=[],Ta=0,jo=null,zr=0,Gt=[],Xt=0,ei=null,un=1,fn="";function On(e,t){_a[Ta++]=zr,_a[Ta++]=jo,jo=e,zr=t}function Bd(e,t,n){Gt[Xt++]=un,Gt[Xt++]=fn,Gt[Xt++]=ei,ei=e;var r=un;e=fn;var s=32-ht(r)-1;r&=~(1<<s),n+=1;var u=32-ht(t)+s;if(30<u){var g=s-s%5;u=(r&(1<<g)-1).toString(32),r>>=g,s-=g,un=1<<32-ht(t)+s|n<<s|r,fn=u+e}else un=1<<u|n<<s|r,fn=e}function Gs(e){e.return!==null&&(On(e,1),Bd(e,1,0))}function Xs(e){for(;e===jo;)jo=_a[--Ta],_a[Ta]=null,zr=_a[--Ta],_a[Ta]=null;for(;e===ei;)ei=Gt[--Xt],Gt[Xt]=null,fn=Gt[--Xt],Gt[Xt]=null,un=Gt[--Xt],Gt[Xt]=null}function Nd(e,t){Gt[Xt++]=un,Gt[Xt++]=fn,Gt[Xt++]=ei,un=t.id,fn=t.overflow,ei=e}var ct=null,ke=null,Ce=!1,ti=null,Qt=!1,Qs=Error(l(519));function ni(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ar(qt(t,e)),Qs}function Ud(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[st]=e,t[xt]=r,n){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(n=0;n<Kr.length;n++)Ee(Kr[n],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),Xf(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),Zf(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||Wh(t.textContent,n)?(r.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),r.onScroll!=null&&Ee("scroll",t),r.onScrollEnd!=null&&Ee("scrollend",t),r.onClick!=null&&(t.onclick=An),t=!0):t=!1,t||ni(e,!0)}function Dd(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:ct=ct.return}}function Ca(e){if(e!==ct)return!1;if(!Ce)return Dd(e),Ce=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||du(e.type,e.memoizedProps)),n=!n),n&&ke&&ni(e),Dd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=om(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=om(e)}else t===27?(t=ke,gi(e.type)?(e=vu,vu=null,ke=e):ke=t):ke=ct?Kt(e.stateNode.nextSibling):null;return!0}function Yi(){ke=ct=null,Ce=!1}function Zs(){var e=ti;return e!==null&&(_t===null?_t=e:_t.push.apply(_t,e),ti=null),e}function Ar(e){ti===null?ti=[e]:ti.push(e)}var Ks=R(null),qi=null,Bn=null;function ii(e,t,n){$(Ks,t._currentValue),t._currentValue=n}function Nn(e){e._currentValue=Ks.current,V(Ks)}function Ws(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $s(e,t,n,r){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){var g=s.child;u=u.firstContext;e:for(;u!==null;){var x=u;u=s;for(var z=0;z<t.length;z++)if(x.context===t[z]){u.lanes|=n,x=u.alternate,x!==null&&(x.lanes|=n),Ws(u.return,n,e),r||(g=null);break e}u=x.next}}else if(s.tag===18){if(g=s.return,g===null)throw Error(l(341));g.lanes|=n,u=g.alternate,u!==null&&(u.lanes|=n),Ws(g,n,e),g=null}else g=s.child;if(g!==null)g.return=s;else for(g=s;g!==null;){if(g===e){g=null;break}if(s=g.sibling,s!==null){s.return=g.return,g=s;break}g=g.return}s=g}}function za(e,t,n,r){e=null;for(var s=t,u=!1;s!==null;){if(!u){if((s.flags&524288)!==0)u=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var g=s.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var x=s.type;At(s.pendingProps.value,g.value)||(e!==null?e.push(x):e=[x])}}else if(s===ve.current){if(g=s.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(to):e=[to])}s=s.return}e!==null&&$s(t,e,n,r),t.flags|=262144}function Po(e){for(e=e.firstContext;e!==null;){if(!At(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Gi(e){qi=e,Bn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ut(e){return Ld(qi,e)}function Fo(e,t){return qi===null&&Gi(e),Ld(e,t)}function Ld(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Bn===null){if(e===null)throw Error(l(308));Bn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Bn=Bn.next=t;return n}var b1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},w1=i.unstable_scheduleCallback,S1=i.unstable_NormalPriority,We={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Js(){return{controller:new b1,data:new Map,refCount:0}}function Rr(e){e.refCount--,e.refCount===0&&w1(S1,function(){e.controller.abort()})}var Mr=null,ec=0,Aa=0,Ra=null;function E1(e,t){if(Mr===null){var n=Mr=[];ec=0,Aa=iu(),Ra={status:"pending",value:void 0,then:function(r){n.push(r)}}}return ec++,t.then(jd,jd),t}function jd(){if(--ec===0&&Mr!==null){Ra!==null&&(Ra.status="fulfilled");var e=Mr;Mr=null,Aa=0,Ra=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function _1(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var Pd=P.S;P.S=function(e,t){wh=gt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&E1(e,t),Pd!==null&&Pd(e,t)};var Xi=R(null);function tc(){var e=Xi.current;return e!==null?e:Fe.pooledCache}function ko(e,t){t===null?$(Xi,Xi.current):$(Xi,t.pool)}function Fd(){var e=tc();return e===null?null:{parent:We._currentValue,pool:e}}var Ma=Error(l(460)),nc=Error(l(474)),Ho=Error(l(542)),Io={then:function(){}};function kd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(An,An),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vd(e),e;default:if(typeof t.status=="string")t.then(An,An);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=r}},function(r){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vd(e),e}throw Zi=t,Ma}}function Qi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Zi=n,Ma):n}}var Zi=null;function Id(){if(Zi===null)throw Error(l(459));var e=Zi;return Zi=null,e}function Vd(e){if(e===Ma||e===Ho)throw Error(l(483))}var Oa=null,Or=0;function Vo(e){var t=Or;return Or+=1,Oa===null&&(Oa=[]),Hd(Oa,e,t)}function Br(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Yo(e,t){throw t.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Yd(e){function t(N,M){if(e){var D=N.deletions;D===null?(N.deletions=[M],N.flags|=16):D.push(M)}}function n(N,M){if(!e)return null;for(;M!==null;)t(N,M),M=M.sibling;return null}function r(N){for(var M=new Map;N!==null;)N.key!==null?M.set(N.key,N):M.set(N.index,N),N=N.sibling;return M}function s(N,M){return N=Mn(N,M),N.index=0,N.sibling=null,N}function u(N,M,D){return N.index=D,e?(D=N.alternate,D!==null?(D=D.index,D<M?(N.flags|=67108866,M):D):(N.flags|=67108866,M)):(N.flags|=1048576,M)}function g(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function x(N,M,D,Y){return M===null||M.tag!==6?(M=Ys(D,N.mode,Y),M.return=N,M):(M=s(M,D),M.return=N,M)}function z(N,M,D,Y){var le=D.type;return le===_?I(N,M,D.props.children,Y,D.key):M!==null&&(M.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===K&&Qi(le)===M.type)?(M=s(M,D.props),Br(M,D),M.return=N,M):(M=Lo(D.type,D.key,D.props,null,N.mode,Y),Br(M,D),M.return=N,M)}function L(N,M,D,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==D.containerInfo||M.stateNode.implementation!==D.implementation?(M=qs(D,N.mode,Y),M.return=N,M):(M=s(M,D.children||[]),M.return=N,M)}function I(N,M,D,Y,le){return M===null||M.tag!==7?(M=Vi(D,N.mode,Y,le),M.return=N,M):(M=s(M,D),M.return=N,M)}function q(N,M,D){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Ys(""+M,N.mode,D),M.return=N,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return D=Lo(M.type,M.key,M.props,null,N.mode,D),Br(D,M),D.return=N,D;case E:return M=qs(M,N.mode,D),M.return=N,M;case K:return M=Qi(M),q(N,M,D)}if(ye(M)||se(M))return M=Vi(M,N.mode,D,null),M.return=N,M;if(typeof M.then=="function")return q(N,Vo(M),D);if(M.$$typeof===O)return q(N,Fo(N,M),D);Yo(N,M)}return null}function j(N,M,D,Y){var le=M!==null?M.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return le!==null?null:x(N,M,""+D,Y);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case w:return D.key===le?z(N,M,D,Y):null;case E:return D.key===le?L(N,M,D,Y):null;case K:return D=Qi(D),j(N,M,D,Y)}if(ye(D)||se(D))return le!==null?null:I(N,M,D,Y,null);if(typeof D.then=="function")return j(N,M,Vo(D),Y);if(D.$$typeof===O)return j(N,M,Fo(N,D),Y);Yo(N,D)}return null}function F(N,M,D,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return N=N.get(D)||null,x(M,N,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return N=N.get(Y.key===null?D:Y.key)||null,z(M,N,Y,le);case E:return N=N.get(Y.key===null?D:Y.key)||null,L(M,N,Y,le);case K:return Y=Qi(Y),F(N,M,D,Y,le)}if(ye(Y)||se(Y))return N=N.get(D)||null,I(M,N,Y,le,null);if(typeof Y.then=="function")return F(N,M,D,Vo(Y),le);if(Y.$$typeof===O)return F(N,M,D,Fo(M,Y),le);Yo(M,Y)}return null}function ie(N,M,D,Y){for(var le=null,Re=null,oe=M,ge=M=0,Te=null;oe!==null&&ge<D.length;ge++){oe.index>ge?(Te=oe,oe=null):Te=oe.sibling;var Me=j(N,oe,D[ge],Y);if(Me===null){oe===null&&(oe=Te);break}e&&oe&&Me.alternate===null&&t(N,oe),M=u(Me,M,ge),Re===null?le=Me:Re.sibling=Me,Re=Me,oe=Te}if(ge===D.length)return n(N,oe),Ce&&On(N,ge),le;if(oe===null){for(;ge<D.length;ge++)oe=q(N,D[ge],Y),oe!==null&&(M=u(oe,M,ge),Re===null?le=oe:Re.sibling=oe,Re=oe);return Ce&&On(N,ge),le}for(oe=r(oe);ge<D.length;ge++)Te=F(oe,N,ge,D[ge],Y),Te!==null&&(e&&Te.alternate!==null&&oe.delete(Te.key===null?ge:Te.key),M=u(Te,M,ge),Re===null?le=Te:Re.sibling=Te,Re=Te);return e&&oe.forEach(function(wi){return t(N,wi)}),Ce&&On(N,ge),le}function fe(N,M,D,Y){if(D==null)throw Error(l(151));for(var le=null,Re=null,oe=M,ge=M=0,Te=null,Me=D.next();oe!==null&&!Me.done;ge++,Me=D.next()){oe.index>ge?(Te=oe,oe=null):Te=oe.sibling;var wi=j(N,oe,Me.value,Y);if(wi===null){oe===null&&(oe=Te);break}e&&oe&&wi.alternate===null&&t(N,oe),M=u(wi,M,ge),Re===null?le=wi:Re.sibling=wi,Re=wi,oe=Te}if(Me.done)return n(N,oe),Ce&&On(N,ge),le;if(oe===null){for(;!Me.done;ge++,Me=D.next())Me=q(N,Me.value,Y),Me!==null&&(M=u(Me,M,ge),Re===null?le=Me:Re.sibling=Me,Re=Me);return Ce&&On(N,ge),le}for(oe=r(oe);!Me.done;ge++,Me=D.next())Me=F(oe,N,ge,Me.value,Y),Me!==null&&(e&&Me.alternate!==null&&oe.delete(Me.key===null?ge:Me.key),M=u(Me,M,ge),Re===null?le=Me:Re.sibling=Me,Re=Me);return e&&oe.forEach(function(Dy){return t(N,Dy)}),Ce&&On(N,ge),le}function Pe(N,M,D,Y){if(typeof D=="object"&&D!==null&&D.type===_&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case w:e:{for(var le=D.key;M!==null;){if(M.key===le){if(le=D.type,le===_){if(M.tag===7){n(N,M.sibling),Y=s(M,D.props.children),Y.return=N,N=Y;break e}}else if(M.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===K&&Qi(le)===M.type){n(N,M.sibling),Y=s(M,D.props),Br(Y,D),Y.return=N,N=Y;break e}n(N,M);break}else t(N,M);M=M.sibling}D.type===_?(Y=Vi(D.props.children,N.mode,Y,D.key),Y.return=N,N=Y):(Y=Lo(D.type,D.key,D.props,null,N.mode,Y),Br(Y,D),Y.return=N,N=Y)}return g(N);case E:e:{for(le=D.key;M!==null;){if(M.key===le)if(M.tag===4&&M.stateNode.containerInfo===D.containerInfo&&M.stateNode.implementation===D.implementation){n(N,M.sibling),Y=s(M,D.children||[]),Y.return=N,N=Y;break e}else{n(N,M);break}else t(N,M);M=M.sibling}Y=qs(D,N.mode,Y),Y.return=N,N=Y}return g(N);case K:return D=Qi(D),Pe(N,M,D,Y)}if(ye(D))return ie(N,M,D,Y);if(se(D)){if(le=se(D),typeof le!="function")throw Error(l(150));return D=le.call(D),fe(N,M,D,Y)}if(typeof D.then=="function")return Pe(N,M,Vo(D),Y);if(D.$$typeof===O)return Pe(N,M,Fo(N,D),Y);Yo(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,M!==null&&M.tag===6?(n(N,M.sibling),Y=s(M,D),Y.return=N,N=Y):(n(N,M),Y=Ys(D,N.mode,Y),Y.return=N,N=Y),g(N)):n(N,M)}return function(N,M,D,Y){try{Or=0;var le=Pe(N,M,D,Y);return Oa=null,le}catch(oe){if(oe===Ma||oe===Ho)throw oe;var Re=Rt(29,oe,null,N.mode);return Re.lanes=Y,Re.return=N,Re}finally{}}}var Ki=Yd(!0),qd=Yd(!1),ai=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ac(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ri(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Be&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Do(e),Ad(e,null,n),t}return Uo(e,r,t,n),Do(e)}function Nr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lf(e,n)}}function rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var g={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?s=u=g:u=u.next=g,n=n.next}while(n!==null);u===null?s=u=t:u=u.next=t}else s=u=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var oc=!1;function Ur(){if(oc){var e=Ra;if(e!==null)throw e}}function Dr(e,t,n,r){oc=!1;var s=e.updateQueue;ai=!1;var u=s.firstBaseUpdate,g=s.lastBaseUpdate,x=s.shared.pending;if(x!==null){s.shared.pending=null;var z=x,L=z.next;z.next=null,g===null?u=L:g.next=L,g=z;var I=e.alternate;I!==null&&(I=I.updateQueue,x=I.lastBaseUpdate,x!==g&&(x===null?I.firstBaseUpdate=L:x.next=L,I.lastBaseUpdate=z))}if(u!==null){var q=s.baseState;g=0,I=L=z=null,x=u;do{var j=x.lane&-536870913,F=j!==x.lane;if(F?(_e&j)===j:(r&j)===j){j!==0&&j===Aa&&(oc=!0),I!==null&&(I=I.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ie=e,fe=x;j=t;var Pe=n;switch(fe.tag){case 1:if(ie=fe.payload,typeof ie=="function"){q=ie.call(Pe,q,j);break e}q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=fe.payload,j=typeof ie=="function"?ie.call(Pe,q,j):ie,j==null)break e;q=y({},q,j);break e;case 2:ai=!0}}j=x.callback,j!==null&&(e.flags|=64,F&&(e.flags|=8192),F=s.callbacks,F===null?s.callbacks=[j]:F.push(j))}else F={lane:j,tag:x.tag,payload:x.payload,callback:x.callback,next:null},I===null?(L=I=F,z=q):I=I.next=F,g|=j;if(x=x.next,x===null){if(x=s.shared.pending,x===null)break;F=x,x=F.next,F.next=null,s.lastBaseUpdate=F,s.shared.pending=null}}while(!0);I===null&&(z=q),s.baseState=z,s.firstBaseUpdate=L,s.lastBaseUpdate=I,u===null&&(s.shared.lanes=0),fi|=g,e.lanes=g,e.memoizedState=q}}function Gd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Xd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Gd(n[e],t)}var Ba=R(null),qo=R(0);function Qd(e,t){e=In,$(qo,e),$(Ba,t),In=e|t.baseLanes}function lc(){$(qo,In),$(Ba,Ba.current)}function sc(){In=qo.current,V(Ba),V(qo)}var Mt=R(null),Zt=null;function li(e){var t=e.alternate;$(Qe,Qe.current&1),$(Mt,e),Zt===null&&(t===null||Ba.current!==null||t.memoizedState!==null)&&(Zt=e)}function cc(e){$(Qe,Qe.current),$(Mt,e),Zt===null&&(Zt=e)}function Zd(e){e.tag===22?($(Qe,Qe.current),$(Mt,e),Zt===null&&(Zt=e)):si()}function si(){$(Qe,Qe.current),$(Mt,Mt.current)}function Ot(e){V(Mt),Zt===e&&(Zt=null),V(Qe)}var Qe=R(0);function Go(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||pu(n)||gu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Un=0,pe=null,Le=null,$e=null,Xo=!1,Na=!1,Wi=!1,Qo=0,Lr=0,Ua=null,T1=0;function qe(){throw Error(l(321))}function uc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function fc(e,t,n,r,s,u){return Un=u,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=e===null||e.memoizedState===null?B0:Cc,Wi=!1,u=n(r,s),Wi=!1,Na&&(u=Wd(t,n,r,s)),Kd(e),u}function Kd(e){P.H=Fr;var t=Le!==null&&Le.next!==null;if(Un=0,$e=Le=pe=null,Xo=!1,Lr=0,Ua=null,t)throw Error(l(300));e===null||Je||(e=e.dependencies,e!==null&&Po(e)&&(Je=!0))}function Wd(e,t,n,r){pe=e;var s=0;do{if(Na&&(Ua=null),Lr=0,Na=!1,25<=s)throw Error(l(301));if(s+=1,$e=Le=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}P.H=N0,u=t(n,r)}while(Na);return u}function C1(){var e=P.H,t=e.useState()[0];return t=typeof t.then=="function"?jr(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(pe.flags|=1024),t}function dc(){var e=Qo!==0;return Qo=0,e}function hc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function mc(e){if(Xo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Xo=!1}Un=0,$e=Le=pe=null,Na=!1,Lr=Qo=0,Ua=null}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?pe.memoizedState=$e=e:$e=$e.next=e,$e}function Ze(){if(Le===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?pe.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw pe.alternate===null?Error(l(467)):Error(l(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?pe.memoizedState=$e=e:$e=$e.next=e}return $e}function Zo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jr(e){var t=Lr;return Lr+=1,Ua===null&&(Ua=[]),e=Hd(Ua,e,t),t=pe,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,P.H=t===null||t.memoizedState===null?B0:Cc),e}function Ko(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jr(e);if(e.$$typeof===O)return ut(e)}throw Error(l(438,String(e)))}function pc(e){var t=null,n=pe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=pe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Zo(),pe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ae;return t.index++,n}function Dn(e,t){return typeof t=="function"?t(e):t}function Wo(e){var t=Ze();return gc(t,Le,e)}function gc(e,t,n){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=n;var s=e.baseQueue,u=r.pending;if(u!==null){if(s!==null){var g=s.next;s.next=u.next,u.next=g}t.baseQueue=s=u,r.pending=null}if(u=e.baseState,s===null)e.memoizedState=u;else{t=s.next;var x=g=null,z=null,L=t,I=!1;do{var q=L.lane&-536870913;if(q!==L.lane?(_e&q)===q:(Un&q)===q){var j=L.revertLane;if(j===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),q===Aa&&(I=!0);else if((Un&j)===j){L=L.next,j===Aa&&(I=!0);continue}else q={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},z===null?(x=z=q,g=u):z=z.next=q,pe.lanes|=j,fi|=j;q=L.action,Wi&&n(u,q),u=L.hasEagerState?L.eagerState:n(u,q)}else j={lane:q,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},z===null?(x=z=j,g=u):z=z.next=j,pe.lanes|=q,fi|=q;L=L.next}while(L!==null&&L!==t);if(z===null?g=u:z.next=x,!At(u,e.memoizedState)&&(Je=!0,I&&(n=Ra,n!==null)))throw n;e.memoizedState=u,e.baseState=g,e.baseQueue=z,r.lastRenderedState=u}return s===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function vc(e){var t=Ze(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,u=t.memoizedState;if(s!==null){n.pending=null;var g=s=s.next;do u=e(u,g.action),g=g.next;while(g!==s);At(u,t.memoizedState)||(Je=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function $d(e,t,n){var r=pe,s=Ze(),u=Ce;if(u){if(n===void 0)throw Error(l(407));n=n()}else n=t();var g=!At((Le||s).memoizedState,n);if(g&&(s.memoizedState=n,Je=!0),s=s.queue,bc(t0.bind(null,r,s,e),[e]),s.getSnapshot!==t||g||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,Da(9,{destroy:void 0},e0.bind(null,r,s,n,t),null),Fe===null)throw Error(l(349));u||(Un&127)!==0||Jd(r,t,n)}return n}function Jd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pe.updateQueue,t===null?(t=Zo(),pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function e0(e,t,n,r){t.value=n,t.getSnapshot=r,n0(t)&&i0(e)}function t0(e,t,n){return n(function(){n0(t)&&i0(e)})}function n0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function i0(e){var t=Ii(e,2);t!==null&&Tt(t,e,2)}function yc(e){var t=vt();if(typeof e=="function"){var n=e;if(e=n(),Wi){Ft(!0);try{n()}finally{Ft(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},t}function a0(e,t,n,r){return e.baseState=n,gc(e,Le,typeof r=="function"?r:Dn)}function z1(e,t,n,r,s){if(el(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};P.T!==null?n(!0):u.isTransition=!1,r(u),n=t.pending,n===null?(u.next=t.pending=u,r0(t,u)):(u.next=n.next,t.pending=n.next=u)}}function r0(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var u=P.T,g={};P.T=g;try{var x=n(s,r),z=P.S;z!==null&&z(g,x),o0(e,t,x)}catch(L){xc(e,t,L)}finally{u!==null&&g.types!==null&&(u.types=g.types),P.T=u}}else try{u=n(s,r),o0(e,t,u)}catch(L){xc(e,t,L)}}function o0(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){l0(e,t,r)},function(r){return xc(e,t,r)}):l0(e,t,n)}function l0(e,t,n){t.status="fulfilled",t.value=n,s0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,r0(e,n)))}function xc(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,s0(t),t=t.next;while(t!==r)}e.action=null}function s0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function c0(e,t){return t}function u0(e,t){if(Ce){var n=Fe.formState;if(n!==null){e:{var r=pe;if(Ce){if(ke){t:{for(var s=ke,u=Qt;s.nodeType!==8;){if(!u){s=null;break t}if(s=Kt(s.nextSibling),s===null){s=null;break t}}u=s.data,s=u==="F!"||u==="F"?s:null}if(s){ke=Kt(s.nextSibling),r=s.data==="F!";break e}}ni(r)}r=!1}r&&(t=n[0])}}return n=vt(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:t},n.queue=r,n=R0.bind(null,pe,r),r.dispatch=n,r=yc(!1),u=Tc.bind(null,pe,!1,r.queue),r=vt(),s={state:t,dispatch:null,action:e,pending:null},r.queue=s,n=z1.bind(null,pe,s,u,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function f0(e){var t=Ze();return d0(t,Le,e)}function d0(e,t,n){if(t=gc(e,t,c0)[0],e=Wo(Dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=jr(t)}catch(g){throw g===Ma?Ho:g}else r=t;t=Ze();var s=t.queue,u=s.dispatch;return n!==t.memoizedState&&(pe.flags|=2048,Da(9,{destroy:void 0},A1.bind(null,s,n),null)),[r,u,e]}function A1(e,t){e.action=t}function h0(e){var t=Ze(),n=Le;if(n!==null)return d0(t,n,e);Ze(),t=t.memoizedState,n=Ze();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Da(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Zo(),pe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function m0(){return Ze().memoizedState}function $o(e,t,n,r){var s=vt();pe.flags|=e,s.memoizedState=Da(1|t,{destroy:void 0},n,r===void 0?null:r)}function Jo(e,t,n,r){var s=Ze();r=r===void 0?null:r;var u=s.memoizedState.inst;Le!==null&&r!==null&&uc(r,Le.memoizedState.deps)?s.memoizedState=Da(t,u,n,r):(pe.flags|=e,s.memoizedState=Da(1|t,u,n,r))}function p0(e,t){$o(8390656,8,e,t)}function bc(e,t){Jo(2048,8,e,t)}function R1(e){pe.flags|=4;var t=pe.updateQueue;if(t===null)t=Zo(),pe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function g0(e){var t=Ze().memoizedState;return R1({ref:t,nextImpl:e}),function(){if((Be&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function v0(e,t){return Jo(4,2,e,t)}function y0(e,t){return Jo(4,4,e,t)}function x0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function b0(e,t,n){n=n!=null?n.concat([e]):null,Jo(4,4,x0.bind(null,t,e),n)}function wc(){}function w0(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&uc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function S0(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&uc(t,r[1]))return r[0];if(r=e(),Wi){Ft(!0);try{e()}finally{Ft(!1)}}return n.memoizedState=[r,t],r}function Sc(e,t,n){return n===void 0||(Un&1073741824)!==0&&(_e&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Eh(),pe.lanes|=e,fi|=e,n)}function E0(e,t,n,r){return At(n,t)?n:Ba.current!==null?(e=Sc(e,n,r),At(e,t)||(Je=!0),e):(Un&42)===0||(Un&1073741824)!==0&&(_e&261930)===0?(Je=!0,e.memoizedState=n):(e=Eh(),pe.lanes|=e,fi|=e,t)}function _0(e,t,n,r,s){var u=G.p;G.p=u!==0&&8>u?u:8;var g=P.T,x={};P.T=x,Tc(e,!1,t,n);try{var z=s(),L=P.S;if(L!==null&&L(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var I=_1(z,r);Pr(e,t,I,Ut(e))}else Pr(e,t,r,Ut(e))}catch(q){Pr(e,t,{then:function(){},status:"rejected",reason:q},Ut())}finally{G.p=u,g!==null&&x.types!==null&&(g.types=x.types),P.T=g}}function M1(){}function Ec(e,t,n,r){if(e.tag!==5)throw Error(l(476));var s=T0(e).queue;_0(e,s,t,W,n===null?M1:function(){return C0(e),n(r)})}function T0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:W},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function C0(e){var t=T0(e);t.next===null&&(t=e.alternate.memoizedState),Pr(e,t.next.queue,{},Ut())}function _c(){return ut(to)}function z0(){return Ze().memoizedState}function A0(){return Ze().memoizedState}function O1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ut();e=ri(n);var r=oi(t,e,n);r!==null&&(Tt(r,t,n),Nr(r,t,n)),t={cache:Js()},e.payload=t;return}t=t.return}}function B1(e,t,n){var r=Ut();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},el(e)?M0(t,n):(n=Is(e,t,n,r),n!==null&&(Tt(n,e,r),O0(n,t,r)))}function R0(e,t,n){var r=Ut();Pr(e,t,n,r)}function Pr(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(el(e))M0(t,s);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,x=u(g,n);if(s.hasEagerState=!0,s.eagerState=x,At(x,g))return Uo(e,t,s,0),Fe===null&&No(),!1}catch{}finally{}if(n=Is(e,t,s,r),n!==null)return Tt(n,e,r),O0(n,t,r),!0}return!1}function Tc(e,t,n,r){if(r={lane:2,revertLane:iu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},el(e)){if(t)throw Error(l(479))}else t=Is(e,n,r,2),t!==null&&Tt(t,e,2)}function el(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function M0(e,t){Na=Xo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function O0(e,t,n){if((n&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lf(e,n)}}var Fr={readContext:ut,use:Ko,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe};Fr.useEffectEvent=qe;var B0={readContext:ut,use:Ko,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:p0,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,$o(4194308,4,x0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $o(4194308,4,e,t)},useInsertionEffect:function(e,t){$o(4,2,e,t)},useMemo:function(e,t){var n=vt();t=t===void 0?null:t;var r=e();if(Wi){Ft(!0);try{e()}finally{Ft(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=vt();if(n!==void 0){var s=n(t);if(Wi){Ft(!0);try{n(t)}finally{Ft(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=B1.bind(null,pe,e),[r.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:function(e){e=yc(e);var t=e.queue,n=R0.bind(null,pe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:wc,useDeferredValue:function(e,t){var n=vt();return Sc(n,e,t)},useTransition:function(){var e=yc(!1);return e=_0.bind(null,pe,e.queue,!0,!1),vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=pe,s=vt();if(Ce){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),Fe===null)throw Error(l(349));(_e&127)!==0||Jd(r,t,n)}s.memoizedState=n;var u={value:n,getSnapshot:t};return s.queue=u,p0(t0.bind(null,r,u,e),[e]),r.flags|=2048,Da(9,{destroy:void 0},e0.bind(null,r,u,n,t),null),n},useId:function(){var e=vt(),t=Fe.identifierPrefix;if(Ce){var n=fn,r=un;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Qo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=T1++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:_c,useFormState:u0,useActionState:u0,useOptimistic:function(e){var t=vt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Tc.bind(null,pe,!0,n),n.dispatch=t,[e,t]},useMemoCache:pc,useCacheRefresh:function(){return vt().memoizedState=O1.bind(null,pe)},useEffectEvent:function(e){var t=vt(),n={impl:e};return t.memoizedState=n,function(){if((Be&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},Cc={readContext:ut,use:Ko,useCallback:w0,useContext:ut,useEffect:bc,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:y0,useMemo:S0,useReducer:Wo,useRef:m0,useState:function(){return Wo(Dn)},useDebugValue:wc,useDeferredValue:function(e,t){var n=Ze();return E0(n,Le.memoizedState,e,t)},useTransition:function(){var e=Wo(Dn)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:jr(e),t]},useSyncExternalStore:$d,useId:z0,useHostTransitionStatus:_c,useFormState:f0,useActionState:f0,useOptimistic:function(e,t){var n=Ze();return a0(n,Le,e,t)},useMemoCache:pc,useCacheRefresh:A0};Cc.useEffectEvent=g0;var N0={readContext:ut,use:Ko,useCallback:w0,useContext:ut,useEffect:bc,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:y0,useMemo:S0,useReducer:vc,useRef:m0,useState:function(){return vc(Dn)},useDebugValue:wc,useDeferredValue:function(e,t){var n=Ze();return Le===null?Sc(n,e,t):E0(n,Le.memoizedState,e,t)},useTransition:function(){var e=vc(Dn)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:jr(e),t]},useSyncExternalStore:$d,useId:z0,useHostTransitionStatus:_c,useFormState:h0,useActionState:h0,useOptimistic:function(e,t){var n=Ze();return Le!==null?a0(n,Le,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:pc,useCacheRefresh:A0};N0.useEffectEvent=g0;function zc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ac={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=ri(r);s.payload=t,n!=null&&(s.callback=n),t=oi(e,s,r),t!==null&&(Tt(t,e,r),Nr(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=ri(r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=oi(e,s,r),t!==null&&(Tt(t,e,r),Nr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ut(),r=ri(n);r.tag=2,t!=null&&(r.callback=t),t=oi(e,r,n),t!==null&&(Tt(t,e,n),Nr(t,e,n))}};function U0(e,t,n,r,s,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,g):t.prototype&&t.prototype.isPureReactComponent?!Tr(n,r)||!Tr(s,u):!0}function D0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ac.enqueueReplaceState(t,t.state,null)}function $i(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}function L0(e){Bo(e)}function j0(e){console.error(e)}function P0(e){Bo(e)}function tl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function F0(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Rc(e,t,n){return n=ri(n),n.tag=3,n.payload={element:null},n.callback=function(){tl(e,t)},n}function k0(e){return e=ri(e),e.tag=3,e}function H0(e,t,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var u=r.value;e.payload=function(){return s(u)},e.callback=function(){F0(t,n,r)}}var g=n.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){F0(t,n,r),typeof s!="function"&&(di===null?di=new Set([this]):di.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})})}function N1(e,t,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&za(t,n,s,!0),n=Mt.current,n!==null){switch(n.tag){case 31:case 13:return Zt===null?hl():n.alternate===null&&Ge===0&&(Ge=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Io?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),eu(e,r,s)),!1;case 22:return n.flags|=65536,r===Io?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),eu(e,r,s)),!1}throw Error(l(435,n.tag))}return eu(e,r,s),hl(),!1}if(Ce)return t=Mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==Qs&&(e=Error(l(422),{cause:r}),Ar(qt(e,n)))):(r!==Qs&&(t=Error(l(423),{cause:r}),Ar(qt(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,r=qt(r,n),s=Rc(e.stateNode,r,s),rc(e,s),Ge!==4&&(Ge=2)),!1;var u=Error(l(520),{cause:r});if(u=qt(u,n),Xr===null?Xr=[u]:Xr.push(u),Ge!==4&&(Ge=2),t===null)return!0;r=qt(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=Rc(n.stateNode,r,e),rc(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(di===null||!di.has(u))))return n.flags|=65536,s&=-s,n.lanes|=s,s=k0(s),H0(s,e,n,r),rc(n,s),!1}n=n.return}while(n!==null);return!1}var Mc=Error(l(461)),Je=!1;function ft(e,t,n,r){t.child=e===null?qd(t,null,n,r):Ki(t,e.child,n,r)}function I0(e,t,n,r,s){n=n.render;var u=t.ref;if("ref"in r){var g={};for(var x in r)x!=="ref"&&(g[x]=r[x])}else g=r;return Gi(t),r=fc(e,t,n,g,u,s),x=dc(),e!==null&&!Je?(hc(e,t,s),Ln(e,t,s)):(Ce&&x&&Gs(t),t.flags|=1,ft(e,t,r,s),t.child)}function V0(e,t,n,r,s){if(e===null){var u=n.type;return typeof u=="function"&&!Vs(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,Y0(e,t,u,r,s)):(e=Lo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Pc(e,s)){var g=u.memoizedProps;if(n=n.compare,n=n!==null?n:Tr,n(g,r)&&e.ref===t.ref)return Ln(e,t,s)}return t.flags|=1,e=Mn(u,r),e.ref=t.ref,e.return=t,t.child=e}function Y0(e,t,n,r,s){if(e!==null){var u=e.memoizedProps;if(Tr(u,r)&&e.ref===t.ref)if(Je=!1,t.pendingProps=r=u,Pc(e,s))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,Ln(e,t,s)}return Oc(e,t,n,r,s)}function q0(e,t,n,r){var s=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~u}else r=0,t.child=null;return G0(e,t,u,n,r)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ko(t,u!==null?u.cachePool:null),u!==null?Qd(t,u):lc(),Zd(t);else return r=t.lanes=536870912,G0(e,t,u!==null?u.baseLanes|n:n,n,r)}else u!==null?(ko(t,u.cachePool),Qd(t,u),si(),t.memoizedState=null):(e!==null&&ko(t,null),lc(),si());return ft(e,t,s,n),t.child}function kr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function G0(e,t,n,r,s){var u=tc();return u=u===null?null:{parent:We._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&ko(t,null),lc(),Zd(t),e!==null&&za(e,t,r,!0),t.childLanes=s,null}function nl(e,t){return t=al({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function X0(e,t,n){return Ki(t,e.child,null,n),e=nl(t,t.pendingProps),e.flags|=2,Ot(t),t.memoizedState=null,e}function U1(e,t,n){var r=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(r.mode==="hidden")return e=nl(t,r),t.lanes=536870912,kr(null,e);if(cc(t),(e=ke)?(e=rm(e,Qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ei!==null?{id:un,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},n=Md(e),n.return=t,t.child=n,ct=t,ke=null)):e=null,e===null)throw ni(t);return t.lanes=536870912,null}return nl(t,r)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(cc(t),s)if(t.flags&256)t.flags&=-257,t=X0(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Je||za(e,t,n,!1),s=(n&e.childLanes)!==0,Je||s){if(r=Fe,r!==null&&(g=jf(r,n),g!==0&&g!==u.retryLane))throw u.retryLane=g,Ii(e,g),Tt(r,e,g),Mc;hl(),t=X0(e,t,n)}else e=u.treeContext,ke=Kt(g.nextSibling),ct=t,Ce=!0,ti=null,Qt=!1,e!==null&&Nd(t,e),t=nl(t,r),t.flags|=4096;return t}return e=Mn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function il(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Oc(e,t,n,r,s){return Gi(t),n=fc(e,t,n,r,void 0,s),r=dc(),e!==null&&!Je?(hc(e,t,s),Ln(e,t,s)):(Ce&&r&&Gs(t),t.flags|=1,ft(e,t,n,s),t.child)}function Q0(e,t,n,r,s,u){return Gi(t),t.updateQueue=null,n=Wd(t,r,n,s),Kd(e),r=dc(),e!==null&&!Je?(hc(e,t,u),Ln(e,t,u)):(Ce&&r&&Gs(t),t.flags|=1,ft(e,t,n,u),t.child)}function Z0(e,t,n,r,s){if(Gi(t),t.stateNode===null){var u=Ea,g=n.contextType;typeof g=="object"&&g!==null&&(u=ut(g)),u=new n(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ac,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},ic(t),g=n.contextType,u.context=typeof g=="object"&&g!==null?ut(g):Ea,u.state=t.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(zc(t,n,g,r),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Ac.enqueueReplaceState(u,u.state,null),Dr(t,r,u,s),Ur(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var x=t.memoizedProps,z=$i(n,x);u.props=z;var L=u.context,I=n.contextType;g=Ea,typeof I=="object"&&I!==null&&(g=ut(I));var q=n.getDerivedStateFromProps;I=typeof q=="function"||typeof u.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,I||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x||L!==g)&&D0(t,u,r,g),ai=!1;var j=t.memoizedState;u.state=j,Dr(t,r,u,s),Ur(),L=t.memoizedState,x||j!==L||ai?(typeof q=="function"&&(zc(t,n,q,r),L=t.memoizedState),(z=ai||U0(t,n,z,r,j,L,g))?(I||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=L),u.props=r,u.state=L,u.context=g,r=z):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,ac(e,t),g=t.memoizedProps,I=$i(n,g),u.props=I,q=t.pendingProps,j=u.context,L=n.contextType,z=Ea,typeof L=="object"&&L!==null&&(z=ut(L)),x=n.getDerivedStateFromProps,(L=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==q||j!==z)&&D0(t,u,r,z),ai=!1,j=t.memoizedState,u.state=j,Dr(t,r,u,s),Ur();var F=t.memoizedState;g!==q||j!==F||ai||e!==null&&e.dependencies!==null&&Po(e.dependencies)?(typeof x=="function"&&(zc(t,n,x,r),F=t.memoizedState),(I=ai||U0(t,n,I,r,j,F,z)||e!==null&&e.dependencies!==null&&Po(e.dependencies))?(L||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,F,z),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,F,z)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),u.props=r,u.state=F,u.context=z,r=I):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,il(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=Ki(t,e.child,null,s),t.child=Ki(t,null,n,s)):ft(e,t,n,s),t.memoizedState=u.state,e=t.child):e=Ln(e,t,s),e}function K0(e,t,n,r){return Yi(),t.flags|=256,ft(e,t,n,r),t.child}var Bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nc(e){return{baseLanes:e,cachePool:Fd()}}function Uc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Nt),e}function W0(e,t,n){var r=t.pendingProps,s=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),g&&(s=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(s?li(t):si(),(e=ke)?(e=rm(e,Qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ei!==null?{id:un,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},n=Md(e),n.return=t,t.child=n,ct=t,ke=null)):e=null,e===null)throw ni(t);return gu(e)?t.lanes=32:t.lanes=536870912,null}var x=r.children;return r=r.fallback,s?(si(),s=t.mode,x=al({mode:"hidden",children:x},s),r=Vi(r,s,n,null),x.return=t,r.return=t,x.sibling=r,t.child=x,r=t.child,r.memoizedState=Nc(n),r.childLanes=Uc(e,g,n),t.memoizedState=Bc,kr(null,r)):(li(t),Dc(t,x))}var z=e.memoizedState;if(z!==null&&(x=z.dehydrated,x!==null)){if(u)t.flags&256?(li(t),t.flags&=-257,t=Lc(e,t,n)):t.memoizedState!==null?(si(),t.child=e.child,t.flags|=128,t=null):(si(),x=r.fallback,s=t.mode,r=al({mode:"visible",children:r.children},s),x=Vi(x,s,n,null),x.flags|=2,r.return=t,x.return=t,r.sibling=x,t.child=r,Ki(t,e.child,null,n),r=t.child,r.memoizedState=Nc(n),r.childLanes=Uc(e,g,n),t.memoizedState=Bc,t=kr(null,r));else if(li(t),gu(x)){if(g=x.nextSibling&&x.nextSibling.dataset,g)var L=g.dgst;g=L,r=Error(l(419)),r.stack="",r.digest=g,Ar({value:r,source:null,stack:null}),t=Lc(e,t,n)}else if(Je||za(e,t,n,!1),g=(n&e.childLanes)!==0,Je||g){if(g=Fe,g!==null&&(r=jf(g,n),r!==0&&r!==z.retryLane))throw z.retryLane=r,Ii(e,r),Tt(g,e,r),Mc;pu(x)||hl(),t=Lc(e,t,n)}else pu(x)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,ke=Kt(x.nextSibling),ct=t,Ce=!0,ti=null,Qt=!1,e!==null&&Nd(t,e),t=Dc(t,r.children),t.flags|=4096);return t}return s?(si(),x=r.fallback,s=t.mode,z=e.child,L=z.sibling,r=Mn(z,{mode:"hidden",children:r.children}),r.subtreeFlags=z.subtreeFlags&65011712,L!==null?x=Mn(L,x):(x=Vi(x,s,n,null),x.flags|=2),x.return=t,r.return=t,r.sibling=x,t.child=r,kr(null,r),r=t.child,x=e.child.memoizedState,x===null?x=Nc(n):(s=x.cachePool,s!==null?(z=We._currentValue,s=s.parent!==z?{parent:z,pool:z}:s):s=Fd(),x={baseLanes:x.baseLanes|n,cachePool:s}),r.memoizedState=x,r.childLanes=Uc(e,g,n),t.memoizedState=Bc,kr(e.child,r)):(li(t),n=e.child,e=n.sibling,n=Mn(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=n,t.memoizedState=null,n)}function Dc(e,t){return t=al({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function al(e,t){return e=Rt(22,e,null,t),e.lanes=0,e}function Lc(e,t,n){return Ki(t,e.child,null,n),e=Dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ws(e.return,t,n)}function jc(e,t,n,r,s,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=n,g.tailMode=s,g.treeForkCount=u)}function J0(e,t,n){var r=t.pendingProps,s=r.revealOrder,u=r.tail;r=r.children;var g=Qe.current,x=(g&2)!==0;if(x?(g=g&1|2,t.flags|=128):g&=1,$(Qe,g),ft(e,t,r,n),r=Ce?zr:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$0(e,n,t);else if(e.tag===19)$0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Go(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),jc(t,!1,s,n,u,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Go(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}jc(t,!0,n,null,u,r);break;case"together":jc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fi|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(za(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Po(e)))}function D1(e,t,n){switch(t.tag){case 3:Ae(t,t.stateNode.containerInfo),ii(t,We,e.memoizedState.cache),Yi();break;case 27:case 5:it(t);break;case 4:Ae(t,t.stateNode.containerInfo);break;case 10:ii(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,cc(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(li(t),t.flags|=128,null):(n&t.child.childLanes)!==0?W0(e,t,n):(li(t),e=Ln(e,t,n),e!==null?e.sibling:null);li(t);break;case 19:var s=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(za(e,t,n,!1),r=(n&t.childLanes)!==0),s){if(r)return J0(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$(Qe,Qe.current),r)break;return null;case 22:return t.lanes=0,q0(e,t,n,t.pendingProps);case 24:ii(t,We,e.memoizedState.cache)}return Ln(e,t,n)}function eh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Pc(e,n)&&(t.flags&128)===0)return Je=!1,D1(e,t,n);Je=(e.flags&131072)!==0}else Je=!1,Ce&&(t.flags&1048576)!==0&&Bd(t,zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Qi(t.elementType),t.type=e,typeof e=="function")Vs(e)?(r=$i(e,r),t.tag=1,t=Z0(null,t,e,r,n)):(t.tag=0,t=Oc(null,t,e,r,n));else{if(e!=null){var s=e.$$typeof;if(s===U){t.tag=11,t=I0(null,t,e,r,n);break e}else if(s===k){t.tag=14,t=V0(null,t,e,r,n);break e}}throw t=be(e)||e,Error(l(306,t,""))}}return t;case 0:return Oc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,s=$i(r,t.pendingProps),Z0(e,t,r,s,n);case 3:e:{if(Ae(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var u=t.memoizedState;s=u.element,ac(e,t),Dr(t,r,null,n);var g=t.memoizedState;if(r=g.cache,ii(t,We,r),r!==u.cache&&$s(t,[We],n,!0),Ur(),r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=K0(e,t,r,n);break e}else if(r!==s){s=qt(Error(l(424)),t),Ar(s),t=K0(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ke=Kt(e.firstChild),ct=t,Ce=!0,ti=null,Qt=!0,n=qd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Yi(),r===s){t=Ln(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 26:return il(e,t),e===null?(n=fm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ce||(n=t.type,e=t.pendingProps,r=bl(he.current).createElement(n),r[st]=t,r[xt]=e,dt(r,n,e),at(r),t.stateNode=r):t.memoizedState=fm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return it(t),e===null&&Ce&&(r=t.stateNode=sm(t.type,t.pendingProps,he.current),ct=t,Qt=!0,s=ke,gi(t.type)?(vu=s,ke=Kt(r.firstChild)):ke=s),ft(e,t,t.pendingProps.children,n),il(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((s=r=ke)&&(r=fy(r,t.type,t.pendingProps,Qt),r!==null?(t.stateNode=r,ct=t,ke=Kt(r.firstChild),Qt=!1,s=!0):s=!1),s||ni(t)),it(t),s=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,r=u.children,du(s,u)?r=null:g!==null&&du(s,g)&&(t.flags|=32),t.memoizedState!==null&&(s=fc(e,t,C1,null,null,n),to._currentValue=s),il(e,t),ft(e,t,r,n),t.child;case 6:return e===null&&Ce&&((e=n=ke)&&(n=dy(n,t.pendingProps,Qt),n!==null?(t.stateNode=n,ct=t,ke=null,e=!0):e=!1),e||ni(t)),null;case 13:return W0(e,t,n);case 4:return Ae(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ki(t,null,r,n):ft(e,t,r,n),t.child;case 11:return I0(e,t,t.type,t.pendingProps,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ii(t,t.type,r.value),ft(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Gi(t),s=ut(s),r=r(s),t.flags|=1,ft(e,t,r,n),t.child;case 14:return V0(e,t,t.type,t.pendingProps,n);case 15:return Y0(e,t,t.type,t.pendingProps,n);case 19:return J0(e,t,n);case 31:return U1(e,t,n);case 22:return q0(e,t,n,t.pendingProps);case 24:return Gi(t),r=ut(We),e===null?(s=tc(),s===null&&(s=Fe,u=Js(),s.pooledCache=u,u.refCount++,u!==null&&(s.pooledCacheLanes|=n),s=u),t.memoizedState={parent:r,cache:s},ic(t),ii(t,We,s)):((e.lanes&n)!==0&&(ac(e,t),Dr(t,null,null,n),Ur()),s=e.memoizedState,u=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),ii(t,We,r)):(r=u.cache,ii(t,We,r),r!==s.cache&&$s(t,[We],n,!0))),ft(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function jn(e){e.flags|=4}function Fc(e,t,n,r,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(zh())e.flags|=8192;else throw Zi=Io,nc}else e.flags&=-16777217}function th(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gm(t))if(zh())e.flags|=8192;else throw Zi=Io,nc}function rl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Uf():536870912,e.lanes|=t,Fa|=t)}function Hr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function L1(e,t,n){var r=t.pendingProps;switch(Xs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Nn(We),Ne(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ca(t)?jn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Zs())),He(t),null;case 26:var s=t.type,u=t.memoizedState;return e===null?(jn(t),u!==null?(He(t),th(t,u)):(He(t),Fc(t,s,null,r,n))):u?u!==e.memoizedState?(jn(t),He(t),th(t,u)):(He(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&jn(t),He(t),Fc(t,s,e,r,n)),null;case 27:if(Ct(t),n=he.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return He(t),null}e=ee.current,Ca(t)?Ud(t):(e=sm(s,r,n),t.stateNode=e,jn(t))}return He(t),null;case 5:if(Ct(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return He(t),null}if(u=ee.current,Ca(t))Ud(t);else{var g=bl(he.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?g.createElement(s,{is:r.is}):g.createElement(s)}}u[st]=t,u[xt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(dt(u,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&jn(t)}}return He(t),Fc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&jn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=he.current,Ca(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,s=ct,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}e[st]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Wh(e.nodeValue,n)),e||ni(t,!0)}else e=bl(e).createTextNode(r),e[st]=t,t.stateNode=e}return He(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Ca(t),n!==null){if(e===null){if(!r)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[st]=t}else Yi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),e=!1}else n=Zs(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Ot(t),t):(Ot(t),null);if((t.flags&128)!==0)throw Error(l(558))}return He(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Ca(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(l(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));s[st]=t}else Yi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),s=!1}else s=Zs(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Ot(t),t):(Ot(t),null)}return Ot(t),(t.flags&128)!==0?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),rl(t,t.updateQueue),He(t),null);case 4:return Ne(),e===null&&lu(t.stateNode.containerInfo),He(t),null;case 10:return Nn(t.type),He(t),null;case 19:if(V(Qe),r=t.memoizedState,r===null)return He(t),null;if(s=(t.flags&128)!==0,u=r.rendering,u===null)if(s)Hr(r,!1);else{if(Ge!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Go(e),u!==null){for(t.flags|=128,Hr(r,!1),e=u.updateQueue,t.updateQueue=e,rl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Rd(n,e),n=n.sibling;return $(Qe,Qe.current&1|2),Ce&&On(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&gt()>ul&&(t.flags|=128,s=!0,Hr(r,!1),t.lanes=4194304)}else{if(!s)if(e=Go(u),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,rl(t,e),Hr(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!Ce)return He(t),null}else 2*gt()-r.renderingStartTime>ul&&n!==536870912&&(t.flags|=128,s=!0,Hr(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=gt(),e.sibling=null,n=Qe.current,$(Qe,s?n&1|2:n&1),Ce&&On(t,r.treeForkCount),e):(He(t),null);case 22:case 23:return Ot(t),sc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(n&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),n=t.updateQueue,n!==null&&rl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&V(Xi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Nn(We),He(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function j1(e,t){switch(Xs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nn(We),Ne(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ct(t),null;case 31:if(t.memoizedState!==null){if(Ot(t),t.alternate===null)throw Error(l(340));Yi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ot(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Yi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(Qe),null;case 4:return Ne(),null;case 10:return Nn(t.type),null;case 22:case 23:return Ot(t),sc(),e!==null&&V(Xi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Nn(We),null;case 25:return null;default:return null}}function nh(e,t){switch(Xs(t),t.tag){case 3:Nn(We),Ne();break;case 26:case 27:case 5:Ct(t);break;case 4:Ne();break;case 31:t.memoizedState!==null&&Ot(t);break;case 13:Ot(t);break;case 19:V(Qe);break;case 10:Nn(t.type);break;case 22:case 23:Ot(t),sc(),e!==null&&V(Xi);break;case 24:Nn(We)}}function Ir(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var u=n.create,g=n.inst;r=u(),g.destroy=r}n=n.next}while(n!==s)}}catch(x){De(t,t.return,x)}}function ci(e,t,n){try{var r=t.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var u=s.next;r=u;do{if((r.tag&e)===e){var g=r.inst,x=g.destroy;if(x!==void 0){g.destroy=void 0,s=t;var z=n,L=x;try{L()}catch(I){De(s,z,I)}}}r=r.next}while(r!==u)}}catch(I){De(t,t.return,I)}}function ih(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Xd(t,n)}catch(r){De(e,e.return,r)}}}function ah(e,t,n){n.props=$i(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){De(e,t,r)}}function Vr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){De(e,t,s)}}function dn(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){De(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){De(e,t,s)}else n.current=null}function rh(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){De(e,e.return,s)}}function kc(e,t,n){try{var r=e.stateNode;ry(r,e.type,n,t),r[xt]=t}catch(s){De(e,e.return,s)}}function oh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&gi(e.type)||e.tag===4}function Hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&gi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ic(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=An));else if(r!==4&&(r===27&&gi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ic(e,t,n),e=e.sibling;e!==null;)Ic(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&gi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ol(e,t,n),e=e.sibling;e!==null;)ol(e,t,n),e=e.sibling}function lh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);dt(t,r,n),t[st]=e,t[xt]=n}catch(u){De(e,e.return,u)}}var Pn=!1,et=!1,Vc=!1,sh=typeof WeakSet=="function"?WeakSet:Set,rt=null;function P1(e,t){if(e=e.containerInfo,uu=zl,e=bd(e),Ls(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var g=0,x=-1,z=-1,L=0,I=0,q=e,j=null;t:for(;;){for(var F;q!==n||s!==0&&q.nodeType!==3||(x=g+s),q!==u||r!==0&&q.nodeType!==3||(z=g+r),q.nodeType===3&&(g+=q.nodeValue.length),(F=q.firstChild)!==null;)j=q,q=F;for(;;){if(q===e)break t;if(j===n&&++L===s&&(x=g),j===u&&++I===r&&(z=g),(F=q.nextSibling)!==null)break;q=j,j=q.parentNode}q=F}n=x===-1||z===-1?null:{start:x,end:z}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},zl=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){switch(t=rt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)s=e[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,s=u.memoizedProps,u=u.memoizedState,r=n.stateNode;try{var ie=$i(n.type,s);e=r.getSnapshotBeforeUpdate(ie,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(fe){De(n,n.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)mu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}}function ch(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:kn(e,n),r&4&&Ir(5,n);break;case 1:if(kn(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(g){De(n,n.return,g)}else{var s=$i(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){De(n,n.return,g)}}r&64&&ih(n),r&512&&Vr(n,n.return);break;case 3:if(kn(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Xd(e,t)}catch(g){De(n,n.return,g)}}break;case 27:t===null&&r&4&&lh(n);case 26:case 5:kn(e,n),t===null&&r&4&&rh(n),r&512&&Vr(n,n.return);break;case 12:kn(e,n);break;case 31:kn(e,n),r&4&&dh(e,n);break;case 13:kn(e,n),r&4&&hh(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=X1.bind(null,n),hy(e,n))));break;case 22:if(r=n.memoizedState!==null||Pn,!r){t=t!==null&&t.memoizedState!==null||et,s=Pn;var u=et;Pn=r,(et=t)&&!u?Hn(e,n,(n.subtreeFlags&8772)!==0):kn(e,n),Pn=s,et=u}break;case 30:break;default:kn(e,n)}}function uh(e){var t=e.alternate;t!==null&&(e.alternate=null,uh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ie=null,wt=!1;function Fn(e,t,n){for(n=n.child;n!==null;)fh(e,t,n),n=n.sibling}function fh(e,t,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(Di,n)}catch{}switch(n.tag){case 26:et||dn(n,t),Fn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:et||dn(n,t);var r=Ie,s=wt;gi(n.type)&&(Ie=n.stateNode,wt=!1),Fn(e,t,n),$r(n.stateNode),Ie=r,wt=s;break;case 5:et||dn(n,t);case 6:if(r=Ie,s=wt,Ie=null,Fn(e,t,n),Ie=r,wt=s,Ie!==null)if(wt)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(n.stateNode)}catch(u){De(n,t,u)}else try{Ie.removeChild(n.stateNode)}catch(u){De(n,t,u)}break;case 18:Ie!==null&&(wt?(e=Ie,im(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Xa(e)):im(Ie,n.stateNode));break;case 4:r=Ie,s=wt,Ie=n.stateNode.containerInfo,wt=!0,Fn(e,t,n),Ie=r,wt=s;break;case 0:case 11:case 14:case 15:ci(2,n,t),et||ci(4,n,t),Fn(e,t,n);break;case 1:et||(dn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&ah(n,t,r)),Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:et=(r=et)||n.memoizedState!==null,Fn(e,t,n),et=r;break;default:Fn(e,t,n)}}function dh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xa(e)}catch(n){De(t,t.return,n)}}}function hh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xa(e)}catch(n){De(t,t.return,n)}}function F1(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sh),t;default:throw Error(l(435,e.tag))}}function ll(e,t){var n=F1(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var s=Q1.bind(null,e,r);r.then(s,s)}})}function St(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],u=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 27:if(gi(x.type)){Ie=x.stateNode,wt=!1;break e}break;case 5:Ie=x.stateNode,wt=!1;break e;case 3:case 4:Ie=x.stateNode.containerInfo,wt=!0;break e}x=x.return}if(Ie===null)throw Error(l(160));fh(u,g,s),Ie=null,wt=!1,u=s.alternate,u!==null&&(u.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mh(t,e),t=t.sibling}var tn=null;function mh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:St(t,e),Et(e),r&4&&(ci(3,e,e.return),Ir(3,e),ci(5,e,e.return));break;case 1:St(t,e),Et(e),r&512&&(et||n===null||dn(n,n.return)),r&64&&Pn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=tn;if(St(t,e),Et(e),r&512&&(et||n===null||dn(n,n.return)),r&4){var u=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":u=s.getElementsByTagName("title")[0],(!u||u[gr]||u[st]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=s.createElement(r),s.head.insertBefore(u,s.querySelector("head > title"))),dt(u,r,n),u[st]=e,at(u),r=u;break e;case"link":var g=mm("link","href",s).get(r+(n.href||""));if(g){for(var x=0;x<g.length;x++)if(u=g[x],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){g.splice(x,1);break t}}u=s.createElement(r),dt(u,r,n),s.head.appendChild(u);break;case"meta":if(g=mm("meta","content",s).get(r+(n.content||""))){for(x=0;x<g.length;x++)if(u=g[x],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){g.splice(x,1);break t}}u=s.createElement(r),dt(u,r,n),s.head.appendChild(u);break;default:throw Error(l(468,r))}u[st]=e,at(u),r=u}e.stateNode=r}else pm(s,e.type,e.stateNode);else e.stateNode=hm(s,r,e.memoizedProps);else u!==r?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,r===null?pm(s,e.type,e.stateNode):hm(s,r,e.memoizedProps)):r===null&&e.stateNode!==null&&kc(e,e.memoizedProps,n.memoizedProps)}break;case 27:St(t,e),Et(e),r&512&&(et||n===null||dn(n,n.return)),n!==null&&r&4&&kc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(St(t,e),Et(e),r&512&&(et||n===null||dn(n,n.return)),e.flags&32){s=e.stateNode;try{ga(s,"")}catch(ie){De(e,e.return,ie)}}r&4&&e.stateNode!=null&&(s=e.memoizedProps,kc(e,s,n!==null?n.memoizedProps:s)),r&1024&&(Vc=!0);break;case 6:if(St(t,e),Et(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(ie){De(e,e.return,ie)}}break;case 3:if(El=null,s=tn,tn=wl(t.containerInfo),St(t,e),tn=s,Et(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(t.containerInfo)}catch(ie){De(e,e.return,ie)}Vc&&(Vc=!1,ph(e));break;case 4:r=tn,tn=wl(e.stateNode.containerInfo),St(t,e),Et(e),tn=r;break;case 12:St(t,e),Et(e);break;case 31:St(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ll(e,r)));break;case 13:St(t,e),Et(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cl=gt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ll(e,r)));break;case 22:s=e.memoizedState!==null;var z=n!==null&&n.memoizedState!==null,L=Pn,I=et;if(Pn=L||s,et=I||z,St(t,e),et=I,Pn=L,Et(e),r&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||z||Pn||et||Ji(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){z=n=t;try{if(u=z.stateNode,s)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{x=z.stateNode;var q=z.memoizedProps.style,j=q!=null&&q.hasOwnProperty("display")?q.display:null;x.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ie){De(z,z.return,ie)}}}else if(t.tag===6){if(n===null){z=t;try{z.stateNode.nodeValue=s?"":z.memoizedProps}catch(ie){De(z,z.return,ie)}}}else if(t.tag===18){if(n===null){z=t;try{var F=z.stateNode;s?am(F,!0):am(z.stateNode,!1)}catch(ie){De(z,z.return,ie)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,ll(e,n))));break;case 19:St(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ll(e,r)));break;case 30:break;case 21:break;default:St(t,e),Et(e)}}function Et(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(oh(r)){n=r;break}r=r.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var s=n.stateNode,u=Hc(e);ol(e,u,s);break;case 5:var g=n.stateNode;n.flags&32&&(ga(g,""),n.flags&=-33);var x=Hc(e);ol(e,x,g);break;case 3:case 4:var z=n.stateNode.containerInfo,L=Hc(e);Ic(e,L,z);break;default:throw Error(l(161))}}catch(I){De(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ph(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ph(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function kn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ch(e,t.alternate,t),t=t.sibling}function Ji(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ci(4,t,t.return),Ji(t);break;case 1:dn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ah(t,t.return,n),Ji(t);break;case 27:$r(t.stateNode);case 26:case 5:dn(t,t.return),Ji(t);break;case 22:t.memoizedState===null&&Ji(t);break;case 30:Ji(t);break;default:Ji(t)}e=e.sibling}}function Hn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,s=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Hn(s,u,n),Ir(4,u);break;case 1:if(Hn(s,u,n),r=u,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(L){De(r,r.return,L)}if(r=u,s=r.updateQueue,s!==null){var x=r.stateNode;try{var z=s.shared.hiddenCallbacks;if(z!==null)for(s.shared.hiddenCallbacks=null,s=0;s<z.length;s++)Gd(z[s],x)}catch(L){De(r,r.return,L)}}n&&g&64&&ih(u),Vr(u,u.return);break;case 27:lh(u);case 26:case 5:Hn(s,u,n),n&&r===null&&g&4&&rh(u),Vr(u,u.return);break;case 12:Hn(s,u,n);break;case 31:Hn(s,u,n),n&&g&4&&dh(s,u);break;case 13:Hn(s,u,n),n&&g&4&&hh(s,u);break;case 22:u.memoizedState===null&&Hn(s,u,n),Vr(u,u.return);break;case 30:break;default:Hn(s,u,n)}t=t.sibling}}function Yc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Rr(n))}function qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rr(e))}function nn(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gh(e,t,n,r),t=t.sibling}function gh(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:nn(e,t,n,r),s&2048&&Ir(9,t);break;case 1:nn(e,t,n,r);break;case 3:nn(e,t,n,r),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rr(e)));break;case 12:if(s&2048){nn(e,t,n,r),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,x=u.onPostCommit;typeof x=="function"&&x(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){De(t,t.return,z)}}else nn(e,t,n,r);break;case 31:nn(e,t,n,r);break;case 13:nn(e,t,n,r);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?nn(e,t,n,r):Yr(e,t):u._visibility&2?nn(e,t,n,r):(u._visibility|=2,La(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Yc(g,t);break;case 24:nn(e,t,n,r),s&2048&&qc(t.alternate,t);break;default:nn(e,t,n,r)}}function La(e,t,n,r,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,x=n,z=r,L=g.flags;switch(g.tag){case 0:case 11:case 15:La(u,g,x,z,s),Ir(8,g);break;case 23:break;case 22:var I=g.stateNode;g.memoizedState!==null?I._visibility&2?La(u,g,x,z,s):Yr(u,g):(I._visibility|=2,La(u,g,x,z,s)),s&&L&2048&&Yc(g.alternate,g);break;case 24:La(u,g,x,z,s),s&&L&2048&&qc(g.alternate,g);break;default:La(u,g,x,z,s)}t=t.sibling}}function Yr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Yr(n,r),s&2048&&Yc(r.alternate,r);break;case 24:Yr(n,r),s&2048&&qc(r.alternate,r);break;default:Yr(n,r)}t=t.sibling}}var qr=8192;function ja(e,t,n){if(e.subtreeFlags&qr)for(e=e.child;e!==null;)vh(e,t,n),e=e.sibling}function vh(e,t,n){switch(e.tag){case 26:ja(e,t,n),e.flags&qr&&e.memoizedState!==null&&Ty(n,tn,e.memoizedState,e.memoizedProps);break;case 5:ja(e,t,n);break;case 3:case 4:var r=tn;tn=wl(e.stateNode.containerInfo),ja(e,t,n),tn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=qr,qr=16777216,ja(e,t,n),qr=r):ja(e,t,n));break;default:ja(e,t,n)}}function yh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rt=r,bh(r,e)}yh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xh(e),e=e.sibling}function xh(e){switch(e.tag){case 0:case 11:case 15:Gr(e),e.flags&2048&&ci(9,e,e.return);break;case 3:Gr(e);break;case 12:Gr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,sl(e)):Gr(e);break;default:Gr(e)}}function sl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rt=r,bh(r,e)}yh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ci(8,t,t.return),sl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,sl(t));break;default:sl(t)}e=e.sibling}}function bh(e,t){for(;rt!==null;){var n=rt;switch(n.tag){case 0:case 11:case 15:ci(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,rt=r;else e:for(n=e;rt!==null;){r=rt;var s=r.sibling,u=r.return;if(uh(r),r===n){rt=null;break e}if(s!==null){s.return=u,rt=s;break e}rt=u}}}var k1={getCacheForType:function(e){var t=ut(We),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ut(We).controller.signal}},H1=typeof WeakMap=="function"?WeakMap:Map,Be=0,Fe=null,Se=null,_e=0,Ue=0,Bt=null,ui=!1,Pa=!1,Gc=!1,In=0,Ge=0,fi=0,ea=0,Xc=0,Nt=0,Fa=0,Xr=null,_t=null,Qc=!1,cl=0,wh=0,ul=1/0,fl=null,di=null,tt=0,hi=null,ka=null,Vn=0,Zc=0,Kc=null,Sh=null,Qr=0,Wc=null;function Ut(){return(Be&2)!==0&&_e!==0?_e&-_e:P.T!==null?iu():Pf()}function Eh(){if(Nt===0)if((_e&536870912)===0||Ce){var e=ji;ji<<=1,(ji&3932160)===0&&(ji=262144),Nt=e}else Nt=536870912;return e=Mt.current,e!==null&&(e.flags|=32),Nt}function Tt(e,t,n){(e===Fe&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),mi(e,_e,Nt,!1)),pr(e,n),((Be&2)===0||e!==Fe)&&(e===Fe&&((Be&2)===0&&(ea|=n),Ge===4&&mi(e,_e,Nt,!1)),hn(e))}function _h(e,t,n){if((Be&6)!==0)throw Error(l(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||mr(e,t),s=r?Y1(e,t):Jc(e,t,!0),u=r;do{if(s===0){Pa&&!r&&mi(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!I1(n)){s=Jc(e,t,!1),u=!1;continue}if(s===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var x=e;s=Xr;var z=x.current.memoizedState.isDehydrated;if(z&&(Ha(x,g).flags|=256),g=Jc(x,g,!1),g!==2){if(Gc&&!z){x.errorRecoveryDisabledLanes|=u,ea|=u,s=4;break e}u=_t,_t=s,u!==null&&(_t===null?_t=u:_t.push.apply(_t,u))}s=g}if(u=!1,s!==2)continue}}if(s===1){Ha(e,0),mi(e,t,0,!0);break}e:{switch(r=e,u=s,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:mi(r,t,Nt,!ui);break e;case 2:_t=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(s=cl+300-gt(),10<s)){if(mi(r,t,Nt,!ui),Jt(r,0,!0)!==0)break e;Vn=t,r.timeoutHandle=tm(Th.bind(null,r,n,_t,fl,Qc,t,Nt,ea,Fa,ui,u,"Throttled",-0,0),s);break e}Th(r,n,_t,fl,Qc,t,Nt,ea,Fa,ui,u,null,-0,0)}}break}while(!0);hn(e)}function Th(e,t,n,r,s,u,g,x,z,L,I,q,j,F){if(e.timeoutHandle=-1,q=t.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},vh(t,u,q);var ie=(u&62914560)===u?cl-gt():(u&4194048)===u?wh-gt():0;if(ie=Cy(q,ie),ie!==null){Vn=u,e.cancelPendingCommit=ie(Nh.bind(null,e,t,u,n,r,s,g,x,z,I,q,null,j,F)),mi(e,u,g,!L);return}}Nh(e,t,u,n,r,s,g,x,z)}function I1(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],u=s.getSnapshot;s=s.value;try{if(!At(u(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t,n,r){t&=~Xc,t&=~ea,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var u=31-ht(s),g=1<<u;r[u]=-1,s&=~g}n!==0&&Df(e,n,t)}function dl(){return(Be&6)===0?(Zr(0),!1):!0}function $c(){if(Se!==null){if(Ue===0)var e=Se.return;else e=Se,Bn=qi=null,mc(e),Oa=null,Or=0,e=Se;for(;e!==null;)nh(e.alternate,e),e=e.return;Se=null}}function Ha(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,sy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Vn=0,$c(),Fe=e,Se=n=Mn(e.current,null),_e=t,Ue=0,Bt=null,ui=!1,Pa=mr(e,t),Gc=!1,Fa=Nt=Xc=ea=fi=Ge=0,_t=Xr=null,Qc=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var s=31-ht(r),u=1<<s;t|=e[s],r&=~u}return In=t,No(),n}function Ch(e,t){pe=null,P.H=Fr,t===Ma||t===Ho?(t=Id(),Ue=3):t===nc?(t=Id(),Ue=4):Ue=t===Mc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bt=t,Se===null&&(Ge=1,tl(e,qt(t,e.current)))}function zh(){var e=Mt.current;return e===null?!0:(_e&4194048)===_e?Zt===null:(_e&62914560)===_e||(_e&536870912)!==0?e===Zt:!1}function Ah(){var e=P.H;return P.H=Fr,e===null?Fr:e}function Rh(){var e=P.A;return P.A=k1,e}function hl(){Ge=4,ui||(_e&4194048)!==_e&&Mt.current!==null||(Pa=!0),(fi&134217727)===0&&(ea&134217727)===0||Fe===null||mi(Fe,_e,Nt,!1)}function Jc(e,t,n){var r=Be;Be|=2;var s=Ah(),u=Rh();(Fe!==e||_e!==t)&&(fl=null,Ha(e,t)),t=!1;var g=Ge;e:do try{if(Ue!==0&&Se!==null){var x=Se,z=Bt;switch(Ue){case 8:$c(),g=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(t=!0);var L=Ue;if(Ue=0,Bt=null,Ia(e,x,z,L),n&&Pa){g=0;break e}break;default:L=Ue,Ue=0,Bt=null,Ia(e,x,z,L)}}V1(),g=Ge;break}catch(I){Ch(e,I)}while(!0);return t&&e.shellSuspendCounter++,Bn=qi=null,Be=r,P.H=s,P.A=u,Se===null&&(Fe=null,_e=0,No()),g}function V1(){for(;Se!==null;)Mh(Se)}function Y1(e,t){var n=Be;Be|=2;var r=Ah(),s=Rh();Fe!==e||_e!==t?(fl=null,ul=gt()+500,Ha(e,t)):Pa=mr(e,t);e:do try{if(Ue!==0&&Se!==null){t=Se;var u=Bt;t:switch(Ue){case 1:Ue=0,Bt=null,Ia(e,t,u,1);break;case 2:case 9:if(kd(u)){Ue=0,Bt=null,Oh(t);break}t=function(){Ue!==2&&Ue!==9||Fe!==e||(Ue=7),hn(e)},u.then(t,t);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:kd(u)?(Ue=0,Bt=null,Oh(t)):(Ue=0,Bt=null,Ia(e,t,u,7));break;case 5:var g=null;switch(Se.tag){case 26:g=Se.memoizedState;case 5:case 27:var x=Se;if(g?gm(g):x.stateNode.complete){Ue=0,Bt=null;var z=x.sibling;if(z!==null)Se=z;else{var L=x.return;L!==null?(Se=L,ml(L)):Se=null}break t}}Ue=0,Bt=null,Ia(e,t,u,5);break;case 6:Ue=0,Bt=null,Ia(e,t,u,6);break;case 8:$c(),Ge=6;break e;default:throw Error(l(462))}}q1();break}catch(I){Ch(e,I)}while(!0);return Bn=qi=null,P.H=r,P.A=s,Be=n,Se!==null?0:(Fe=null,_e=0,No(),Ge)}function q1(){for(;Se!==null&&!ds();)Mh(Se)}function Mh(e){var t=eh(e.alternate,e,In);e.memoizedProps=e.pendingProps,t===null?ml(e):Se=t}function Oh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Q0(n,t,t.pendingProps,t.type,void 0,_e);break;case 11:t=Q0(n,t,t.pendingProps,t.type.render,t.ref,_e);break;case 5:mc(t);default:nh(n,t),t=Se=Rd(t,In),t=eh(n,t,In)}e.memoizedProps=e.pendingProps,t===null?ml(e):Se=t}function Ia(e,t,n,r){Bn=qi=null,mc(t),Oa=null,Or=0;var s=t.return;try{if(N1(e,s,t,n,_e)){Ge=1,tl(e,qt(n,e.current)),Se=null;return}}catch(u){if(s!==null)throw Se=s,u;Ge=1,tl(e,qt(n,e.current)),Se=null;return}t.flags&32768?(Ce||r===1?e=!0:Pa||(_e&536870912)!==0?e=!1:(ui=e=!0,(r===2||r===9||r===3||r===6)&&(r=Mt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Bh(t,e)):ml(t)}function ml(e){var t=e;do{if((t.flags&32768)!==0){Bh(t,ui);return}e=t.return;var n=L1(t.alternate,t,In);if(n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ge===0&&(Ge=5)}function Bh(e,t){do{var n=j1(e.alternate,e);if(n!==null){n.flags&=32767,Se=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=n}while(e!==null);Ge=6,Se=null}function Nh(e,t,n,r,s,u,g,x,z){e.cancelPendingCommit=null;do pl();while(tt!==0);if((Be&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=Hs,_v(e,n,u,g,x,z),e===Fe&&(Se=Fe=null,_e=0),ka=t,hi=e,Vn=n,Zc=u,Kc=s,Sh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Z1(Pt,function(){return Ph(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=P.T,P.T=null,s=G.p,G.p=2,g=Be,Be|=4;try{P1(e,t,n)}finally{Be=g,G.p=s,P.T=r}}tt=1,Uh(),Dh(),Lh()}}function Uh(){if(tt===1){tt=0;var e=hi,t=ka,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=P.T,P.T=null;var r=G.p;G.p=2;var s=Be;Be|=4;try{mh(t,e);var u=fu,g=bd(e.containerInfo),x=u.focusedElem,z=u.selectionRange;if(g!==x&&x&&x.ownerDocument&&xd(x.ownerDocument.documentElement,x)){if(z!==null&&Ls(x)){var L=z.start,I=z.end;if(I===void 0&&(I=L),"selectionStart"in x)x.selectionStart=L,x.selectionEnd=Math.min(I,x.value.length);else{var q=x.ownerDocument||document,j=q&&q.defaultView||window;if(j.getSelection){var F=j.getSelection(),ie=x.textContent.length,fe=Math.min(z.start,ie),Pe=z.end===void 0?fe:Math.min(z.end,ie);!F.extend&&fe>Pe&&(g=Pe,Pe=fe,fe=g);var N=yd(x,fe),M=yd(x,Pe);if(N&&M&&(F.rangeCount!==1||F.anchorNode!==N.node||F.anchorOffset!==N.offset||F.focusNode!==M.node||F.focusOffset!==M.offset)){var D=q.createRange();D.setStart(N.node,N.offset),F.removeAllRanges(),fe>Pe?(F.addRange(D),F.extend(M.node,M.offset)):(D.setEnd(M.node,M.offset),F.addRange(D))}}}}for(q=[],F=x;F=F.parentNode;)F.nodeType===1&&q.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<q.length;x++){var Y=q[x];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}zl=!!uu,fu=uu=null}finally{Be=s,G.p=r,P.T=n}}e.current=t,tt=2}}function Dh(){if(tt===2){tt=0;var e=hi,t=ka,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=P.T,P.T=null;var r=G.p;G.p=2;var s=Be;Be|=4;try{ch(e,t.alternate,t)}finally{Be=s,G.p=r,P.T=n}}tt=3}}function Lh(){if(tt===4||tt===3){tt=0,hs();var e=hi,t=ka,n=Vn,r=Sh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?tt=5:(tt=0,ka=hi=null,jh(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(di=null),vs(n),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(Di,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=P.T,s=G.p,G.p=2,P.T=null;try{for(var u=e.onRecoverableError,g=0;g<r.length;g++){var x=r[g];u(x.value,{componentStack:x.stack})}}finally{P.T=t,G.p=s}}(Vn&3)!==0&&pl(),hn(e),s=e.pendingLanes,(n&261930)!==0&&(s&42)!==0?e===Wc?Qr++:(Qr=0,Wc=e):Qr=0,Zr(0)}}function jh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Rr(t)))}function pl(){return Uh(),Dh(),Lh(),Ph()}function Ph(){if(tt!==5)return!1;var e=hi,t=Zc;Zc=0;var n=vs(Vn),r=P.T,s=G.p;try{G.p=32>n?32:n,P.T=null,n=Kc,Kc=null;var u=hi,g=Vn;if(tt=0,ka=hi=null,Vn=0,(Be&6)!==0)throw Error(l(331));var x=Be;if(Be|=4,xh(u.current),gh(u,u.current,g,n),Be=x,Zr(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(Di,u)}catch{}return!0}finally{G.p=s,P.T=r,jh(e,t)}}function Fh(e,t,n){t=qt(n,t),t=Rc(e.stateNode,t,2),e=oi(e,t,2),e!==null&&(pr(e,2),hn(e))}function De(e,t,n){if(e.tag===3)Fh(e,e,n);else for(;t!==null;){if(t.tag===3){Fh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(di===null||!di.has(r))){e=qt(n,e),n=k0(2),r=oi(t,n,2),r!==null&&(H0(n,r,t,e),pr(r,2),hn(r));break}}t=t.return}}function eu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new H1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(Gc=!0,s.add(n),e=G1.bind(null,e,t,n),t.then(e,e))}function G1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Fe===e&&(_e&n)===n&&(Ge===4||Ge===3&&(_e&62914560)===_e&&300>gt()-cl?(Be&2)===0&&Ha(e,0):Xc|=n,Fa===_e&&(Fa=0)),hn(e)}function kh(e,t){t===0&&(t=Uf()),e=Ii(e,t),e!==null&&(pr(e,t),hn(e))}function X1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kh(e,n)}function Q1(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),kh(e,n)}function Z1(e,t){return Ui(e,t)}var gl=null,Va=null,tu=!1,vl=!1,nu=!1,pi=0;function hn(e){e!==Va&&e.next===null&&(Va===null?gl=Va=e:Va=Va.next=e),vl=!0,tu||(tu=!0,W1())}function Zr(e,t){if(!nu&&vl){nu=!0;do for(var n=!1,r=gl;r!==null;){if(e!==0){var s=r.pendingLanes;if(s===0)var u=0;else{var g=r.suspendedLanes,x=r.pingedLanes;u=(1<<31-ht(42|e)+1)-1,u&=s&~(g&~x),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,Yh(r,u))}else u=_e,u=Jt(r,r===Fe?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||mr(r,u)||(n=!0,Yh(r,u));r=r.next}while(n);nu=!1}}function K1(){Hh()}function Hh(){vl=tu=!1;var e=0;pi!==0&&ly()&&(e=pi);for(var t=gt(),n=null,r=gl;r!==null;){var s=r.next,u=Ih(r,t);u===0?(r.next=null,n===null?gl=s:n.next=s,s===null&&(Va=n)):(n=r,(e!==0||(u&3)!==0)&&(vl=!0)),r=s}tt!==0&&tt!==5||Zr(e),pi!==0&&(pi=0)}function Ih(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-ht(u),x=1<<g,z=s[g];z===-1?((x&n)===0||(x&r)!==0)&&(s[g]=Ev(x,t)):z<=t&&(e.expiredLanes|=x),u&=~x}if(t=Fe,n=_e,n=Jt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ur(r),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||mr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ur(r),vs(n)){case 2:case 8:n=dr;break;case 32:n=Pt;break;case 268435456:n=Cn;break;default:n=Pt}return r=Vh.bind(null,e),n=Ui(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ur(r),e.callbackPriority=2,e.callbackNode=null,2}function Vh(e,t){if(tt!==0&&tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(pl()&&e.callbackNode!==n)return null;var r=_e;return r=Jt(e,e===Fe?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_h(e,r,t),Ih(e,gt()),e.callbackNode!=null&&e.callbackNode===n?Vh.bind(null,e):null)}function Yh(e,t){if(pl())return null;_h(e,t,!0)}function W1(){cy(function(){(Be&6)!==0?Ui(fr,K1):Hh()})}function iu(){if(pi===0){var e=Aa;e===0&&(e=kt,kt<<=1,(kt&261888)===0&&(kt=256)),pi=e}return pi}function qh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:To(""+e)}function Gh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function $1(e,t,n,r,s){if(t==="submit"&&n&&n.stateNode===s){var u=qh((s[xt]||null).action),g=r.submitter;g&&(t=(t=g[xt]||null)?qh(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var x=new Ro("action","action",null,r,s);e.push({event:x,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(pi!==0){var z=g?Gh(s,g):new FormData(s);Ec(n,{pending:!0,data:z,method:s.method,action:u},null,z)}}else typeof u=="function"&&(x.preventDefault(),z=g?Gh(s,g):new FormData(s),Ec(n,{pending:!0,data:z,method:s.method,action:u},u,z))},currentTarget:s}]})}}for(var au=0;au<ks.length;au++){var ru=ks[au],J1=ru.toLowerCase(),ey=ru[0].toUpperCase()+ru.slice(1);en(J1,"on"+ey)}en(Ed,"onAnimationEnd"),en(_d,"onAnimationIteration"),en(Td,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(g1,"onTransitionRun"),en(v1,"onTransitionStart"),en(y1,"onTransitionCancel"),en(Cd,"onTransitionEnd"),ma("onMouseEnter",["mouseout","mouseover"]),ma("onMouseLeave",["mouseout","mouseover"]),ma("onPointerEnter",["pointerout","pointerover"]),ma("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kr));function Xh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var g=r.length-1;0<=g;g--){var x=r[g],z=x.instance,L=x.currentTarget;if(x=x.listener,z!==u&&s.isPropagationStopped())break e;u=x,s.currentTarget=L;try{u(s)}catch(I){Bo(I)}s.currentTarget=null,u=z}else for(g=0;g<r.length;g++){if(x=r[g],z=x.instance,L=x.currentTarget,x=x.listener,z!==u&&s.isPropagationStopped())break e;u=x,s.currentTarget=L;try{u(s)}catch(I){Bo(I)}s.currentTarget=null,u=z}}}}function Ee(e,t){var n=t[ys];n===void 0&&(n=t[ys]=new Set);var r=e+"__bubble";n.has(r)||(Qh(t,e,2,!1),n.add(r))}function ou(e,t,n){var r=0;t&&(r|=4),Qh(n,e,r,t)}var yl="_reactListening"+Math.random().toString(36).slice(2);function lu(e){if(!e[yl]){e[yl]=!0,Hf.forEach(function(n){n!=="selectionchange"&&(ty.has(n)||ou(n,!1,e),ou(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yl]||(t[yl]=!0,ou("selectionchange",!1,t))}}function Qh(e,t,n,r){switch(Em(t)){case 2:var s=Ry;break;case 8:s=My;break;default:s=Su}n=s.bind(null,t,n,e),s=void 0,!zs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function su(e,t,n,r,s){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var x=r.stateNode.containerInfo;if(x===s)break;if(g===4)for(g=r.return;g!==null;){var z=g.tag;if((z===3||z===4)&&g.stateNode.containerInfo===s)return;g=g.return}for(;x!==null;){if(g=fa(x),g===null)return;if(z=g.tag,z===5||z===6||z===26||z===27){r=u=g;continue e}x=x.parentNode}}r=r.return}Jf(function(){var L=u,I=Ts(n),q=[];e:{var j=zd.get(e);if(j!==void 0){var F=Ro,ie=e;switch(e){case"keypress":if(zo(n)===0)break e;case"keydown":case"keyup":F=Qv;break;case"focusin":ie="focus",F=Os;break;case"focusout":ie="blur",F=Os;break;case"beforeblur":case"afterblur":F=Os;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Wv;break;case Ed:case _d:case Td:F=Fv;break;case Cd:F=Jv;break;case"scroll":case"scrollend":F=Uv;break;case"wheel":F=t1;break;case"copy":case"cut":case"paste":F=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=ad;break;case"toggle":case"beforetoggle":F=i1}var fe=(t&4)!==0,Pe=!fe&&(e==="scroll"||e==="scrollend"),N=fe?j!==null?j+"Capture":null:j;fe=[];for(var M=L,D;M!==null;){var Y=M;if(D=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||D===null||N===null||(Y=yr(M,N),Y!=null&&fe.push(Wr(M,Y,D))),Pe)break;M=M.return}0<fe.length&&(j=new F(j,ie,null,n,I),q.push({event:j,listeners:fe}))}}if((t&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",j&&n!==_s&&(ie=n.relatedTarget||n.fromElement)&&(fa(ie)||ie[ua]))break e;if((F||j)&&(j=I.window===I?I:(j=I.ownerDocument)?j.defaultView||j.parentWindow:window,F?(ie=n.relatedTarget||n.toElement,F=L,ie=ie?fa(ie):null,ie!==null&&(Pe=f(ie),fe=ie.tag,ie!==Pe||fe!==5&&fe!==27&&fe!==6)&&(ie=null)):(F=null,ie=L),F!==ie)){if(fe=nd,Y="onMouseLeave",N="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(fe=ad,Y="onPointerLeave",N="onPointerEnter",M="pointer"),Pe=F==null?j:vr(F),D=ie==null?j:vr(ie),j=new fe(Y,M+"leave",F,n,I),j.target=Pe,j.relatedTarget=D,Y=null,fa(I)===L&&(fe=new fe(N,M+"enter",ie,n,I),fe.target=D,fe.relatedTarget=Pe,Y=fe),Pe=Y,F&&ie)t:{for(fe=ny,N=F,M=ie,D=0,Y=N;Y;Y=fe(Y))D++;Y=0;for(var le=M;le;le=fe(le))Y++;for(;0<D-Y;)N=fe(N),D--;for(;0<Y-D;)M=fe(M),Y--;for(;D--;){if(N===M||M!==null&&N===M.alternate){fe=N;break t}N=fe(N),M=fe(M)}fe=null}else fe=null;F!==null&&Zh(q,j,F,fe,!1),ie!==null&&Pe!==null&&Zh(q,Pe,ie,fe,!0)}}e:{if(j=L?vr(L):window,F=j.nodeName&&j.nodeName.toLowerCase(),F==="select"||F==="input"&&j.type==="file")var Re=dd;else if(ud(j))if(hd)Re=h1;else{Re=f1;var oe=u1}else F=j.nodeName,!F||F.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?L&&Es(L.elementType)&&(Re=dd):Re=d1;if(Re&&(Re=Re(e,L))){fd(q,Re,n,I);break e}oe&&oe(e,j,L),e==="focusout"&&L&&j.type==="number"&&L.memoizedProps.value!=null&&Ss(j,"number",j.value)}switch(oe=L?vr(L):window,e){case"focusin":(ud(oe)||oe.contentEditable==="true")&&(ba=oe,js=L,Cr=null);break;case"focusout":Cr=js=ba=null;break;case"mousedown":Ps=!0;break;case"contextmenu":case"mouseup":case"dragend":Ps=!1,wd(q,n,I);break;case"selectionchange":if(p1)break;case"keydown":case"keyup":wd(q,n,I)}var ge;if(Ns)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else xa?sd(e,n)&&(Te="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Te="onCompositionStart");Te&&(rd&&n.locale!=="ko"&&(xa||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&xa&&(ge=ed()):(Jn=I,As="value"in Jn?Jn.value:Jn.textContent,xa=!0)),oe=xl(L,Te),0<oe.length&&(Te=new id(Te,e,null,n,I),q.push({event:Te,listeners:oe}),ge?Te.data=ge:(ge=cd(n),ge!==null&&(Te.data=ge)))),(ge=r1?o1(e,n):l1(e,n))&&(Te=xl(L,"onBeforeInput"),0<Te.length&&(oe=new id("onBeforeInput","beforeinput",null,n,I),q.push({event:oe,listeners:Te}),oe.data=ge)),$1(q,e,L,n,I)}Xh(q,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,u=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||u===null||(s=yr(e,n),s!=null&&r.unshift(Wr(e,s,u)),s=yr(e,t),s!=null&&r.push(Wr(e,s,u))),e.tag===3)return r;e=e.return}return[]}function ny(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zh(e,t,n,r,s){for(var u=t._reactName,g=[];n!==null&&n!==r;){var x=n,z=x.alternate,L=x.stateNode;if(x=x.tag,z!==null&&z===r)break;x!==5&&x!==26&&x!==27||L===null||(z=L,s?(L=yr(n,u),L!=null&&g.unshift(Wr(n,L,z))):s||(L=yr(n,u),L!=null&&g.push(Wr(n,L,z)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var iy=/\r\n?/g,ay=/\u0000|\uFFFD/g;function Kh(e){return(typeof e=="string"?e:""+e).replace(iy,`
`).replace(ay,"")}function Wh(e,t){return t=Kh(t),Kh(e)===t}function je(e,t,n,r,s,u){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||ga(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&ga(e,""+r);break;case"className":Eo(e,"class",r);break;case"tabIndex":Eo(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Eo(e,n,r);break;case"style":Wf(e,r,u);break;case"data":if(t!=="object"){Eo(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=To(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&je(e,t,"name",s.name,s,null),je(e,t,"formEncType",s.formEncType,s,null),je(e,t,"formMethod",s.formMethod,s,null),je(e,t,"formTarget",s.formTarget,s,null)):(je(e,t,"encType",s.encType,s,null),je(e,t,"method",s.method,s,null),je(e,t,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=To(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=An);break;case"onScroll":r!=null&&Ee("scroll",e);break;case"onScrollEnd":r!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=To(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),So(e,"popover",r);break;case"xlinkActuate":zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":zn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":zn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":zn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":zn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":So(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Bv.get(n)||n,So(e,n,r))}}function cu(e,t,n,r,s,u){switch(n){case"style":Wf(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof r=="string"?ga(e,r):(typeof r=="number"||typeof r=="bigint")&&ga(e,""+r);break;case"onScroll":r!=null&&Ee("scroll",e);break;case"onScrollEnd":r!=null&&Ee("scrollend",e);break;case"onClick":r!=null&&(e.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!If.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),u=e[xt]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,s),typeof r=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):So(e,n,r)}}}function dt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var r=!1,s=!1,u;for(u in n)if(n.hasOwnProperty(u)){var g=n[u];if(g!=null)switch(u){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:je(e,t,u,g,n,null)}}s&&je(e,t,"srcSet",n.srcSet,n,null),r&&je(e,t,"src",n.src,n,null);return;case"input":Ee("invalid",e);var x=u=g=s=null,z=null,L=null;for(r in n)if(n.hasOwnProperty(r)){var I=n[r];if(I!=null)switch(r){case"name":s=I;break;case"type":g=I;break;case"checked":z=I;break;case"defaultChecked":L=I;break;case"value":u=I;break;case"defaultValue":x=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(l(137,t));break;default:je(e,t,r,I,n,null)}}Xf(e,u,x,z,L,g,s,!1);return;case"select":Ee("invalid",e),r=g=u=null;for(s in n)if(n.hasOwnProperty(s)&&(x=n[s],x!=null))switch(s){case"value":u=x;break;case"defaultValue":g=x;break;case"multiple":r=x;default:je(e,t,s,x,n,null)}t=u,n=g,e.multiple=!!r,t!=null?pa(e,!!r,t,!1):n!=null&&pa(e,!!r,n,!0);return;case"textarea":Ee("invalid",e),u=s=r=null;for(g in n)if(n.hasOwnProperty(g)&&(x=n[g],x!=null))switch(g){case"value":r=x;break;case"defaultValue":s=x;break;case"children":u=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(l(91));break;default:je(e,t,g,x,n,null)}Zf(e,r,s,u);return;case"option":for(z in n)if(n.hasOwnProperty(z)&&(r=n[z],r!=null))switch(z){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:je(e,t,z,r,n,null)}return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(r=0;r<Kr.length;r++)Ee(Kr[r],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in n)if(n.hasOwnProperty(L)&&(r=n[L],r!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:je(e,t,L,r,n,null)}return;default:if(Es(t)){for(I in n)n.hasOwnProperty(I)&&(r=n[I],r!==void 0&&cu(e,t,I,r,n,void 0));return}}for(x in n)n.hasOwnProperty(x)&&(r=n[x],r!=null&&je(e,t,x,r,n,null))}function ry(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,u=null,g=null,x=null,z=null,L=null,I=null;for(F in n){var q=n[F];if(n.hasOwnProperty(F)&&q!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":z=q;default:r.hasOwnProperty(F)||je(e,t,F,null,r,q)}}for(var j in r){var F=r[j];if(q=n[j],r.hasOwnProperty(j)&&(F!=null||q!=null))switch(j){case"type":u=F;break;case"name":s=F;break;case"checked":L=F;break;case"defaultChecked":I=F;break;case"value":g=F;break;case"defaultValue":x=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,t));break;default:F!==q&&je(e,t,j,F,r,q)}}ws(e,g,x,z,L,I,u,s);return;case"select":F=g=x=j=null;for(u in n)if(z=n[u],n.hasOwnProperty(u)&&z!=null)switch(u){case"value":break;case"multiple":F=z;default:r.hasOwnProperty(u)||je(e,t,u,null,r,z)}for(s in r)if(u=r[s],z=n[s],r.hasOwnProperty(s)&&(u!=null||z!=null))switch(s){case"value":j=u;break;case"defaultValue":x=u;break;case"multiple":g=u;default:u!==z&&je(e,t,s,u,r,z)}t=x,n=g,r=F,j!=null?pa(e,!!n,j,!1):!!r!=!!n&&(t!=null?pa(e,!!n,t,!0):pa(e,!!n,n?[]:"",!1));return;case"textarea":F=j=null;for(x in n)if(s=n[x],n.hasOwnProperty(x)&&s!=null&&!r.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:je(e,t,x,null,r,s)}for(g in r)if(s=r[g],u=n[g],r.hasOwnProperty(g)&&(s!=null||u!=null))switch(g){case"value":j=s;break;case"defaultValue":F=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(l(91));break;default:s!==u&&je(e,t,g,s,r,u)}Qf(e,j,F);return;case"option":for(var ie in n)if(j=n[ie],n.hasOwnProperty(ie)&&j!=null&&!r.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:je(e,t,ie,null,r,j)}for(z in r)if(j=r[z],F=n[z],r.hasOwnProperty(z)&&j!==F&&(j!=null||F!=null))switch(z){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:je(e,t,z,j,r,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in n)j=n[fe],n.hasOwnProperty(fe)&&j!=null&&!r.hasOwnProperty(fe)&&je(e,t,fe,null,r,j);for(L in r)if(j=r[L],F=n[L],r.hasOwnProperty(L)&&j!==F&&(j!=null||F!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(l(137,t));break;default:je(e,t,L,j,r,F)}return;default:if(Es(t)){for(var Pe in n)j=n[Pe],n.hasOwnProperty(Pe)&&j!==void 0&&!r.hasOwnProperty(Pe)&&cu(e,t,Pe,void 0,r,j);for(I in r)j=r[I],F=n[I],!r.hasOwnProperty(I)||j===F||j===void 0&&F===void 0||cu(e,t,I,j,r,F);return}}for(var N in n)j=n[N],n.hasOwnProperty(N)&&j!=null&&!r.hasOwnProperty(N)&&je(e,t,N,null,r,j);for(q in r)j=r[q],F=n[q],!r.hasOwnProperty(q)||j===F||j==null&&F==null||je(e,t,q,j,r,F)}function $h(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],u=s.transferSize,g=s.initiatorType,x=s.duration;if(u&&x&&$h(g)){for(g=0,x=s.responseEnd,r+=1;r<n.length;r++){var z=n[r],L=z.startTime;if(L>x)break;var I=z.transferSize,q=z.initiatorType;I&&$h(q)&&(z=z.responseEnd,g+=I*(z<x?1:(x-L)/(z-L)))}if(--r,t+=8*(u+g)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var uu=null,fu=null;function bl(e){return e.nodeType===9?e:e.ownerDocument}function Jh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function em(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hu=null;function ly(){var e=window.event;return e&&e.type==="popstate"?e===hu?!1:(hu=e,!0):(hu=null,!1)}var tm=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,cy=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(e){return nm.resolve(null).then(e).catch(uy)}:tm;function uy(e){setTimeout(function(){throw e})}function gi(e){return e==="head"}function im(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(s),Xa(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")$r(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,$r(n);for(var u=n.firstChild;u;){var g=u.nextSibling,x=u.nodeName;u[gr]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=g}}else n==="body"&&$r(e.ownerDocument.body);n=s}while(n);Xa(t)}function am(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mu(n),xs(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function fy(e,t,n,r){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[gr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function dy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Kt(e.nextSibling),e===null))return null;return e}function rm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Kt(e.nextSibling),e===null))return null;return e}function pu(e){return e.data==="$?"||e.data==="$~"}function gu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function hy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var vu=null;function om(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Kt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function lm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function sm(e,t,n){switch(t=bl(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function $r(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xs(e)}var Wt=new Map,cm=new Set;function wl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Yn=G.d;G.d={f:my,r:py,D:gy,C:vy,L:yy,m:xy,X:wy,S:by,M:Sy};function my(){var e=Yn.f(),t=dl();return e||t}function py(e){var t=da(e);t!==null&&t.tag===5&&t.type==="form"?C0(t):Yn.r(e)}var Ya=typeof document>"u"?null:document;function um(e,t,n){var r=Ya;if(r&&typeof t=="string"&&t){var s=Vt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),cm.has(s)||(cm.add(s),e={rel:e,crossOrigin:n,href:t},r.querySelector(s)===null&&(t=r.createElement("link"),dt(t,"link",e),at(t),r.head.appendChild(t)))}}function gy(e){Yn.D(e),um("dns-prefetch",e,null)}function vy(e,t){Yn.C(e,t),um("preconnect",e,t)}function yy(e,t,n){Yn.L(e,t,n);var r=Ya;if(r&&e&&t){var s='link[rel="preload"][as="'+Vt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Vt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Vt(n.imageSizes)+'"]')):s+='[href="'+Vt(e)+'"]';var u=s;switch(t){case"style":u=qa(e);break;case"script":u=Ga(e)}Wt.has(u)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Wt.set(u,e),r.querySelector(s)!==null||t==="style"&&r.querySelector(Jr(u))||t==="script"&&r.querySelector(eo(u))||(t=r.createElement("link"),dt(t,"link",e),at(t),r.head.appendChild(t)))}}function xy(e,t){Yn.m(e,t);var n=Ya;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Vt(r)+'"][href="'+Vt(e)+'"]',u=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ga(e)}if(!Wt.has(u)&&(e=y({rel:"modulepreload",href:e},t),Wt.set(u,e),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(eo(u)))return}r=n.createElement("link"),dt(r,"link",e),at(r),n.head.appendChild(r)}}}function by(e,t,n){Yn.S(e,t,n);var r=Ya;if(r&&e){var s=ha(r).hoistableStyles,u=qa(e);t=t||"default";var g=s.get(u);if(!g){var x={loading:0,preload:null};if(g=r.querySelector(Jr(u)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Wt.get(u))&&yu(e,n);var z=g=r.createElement("link");at(z),dt(z,"link",e),z._p=new Promise(function(L,I){z.onload=L,z.onerror=I}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Sl(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:x},s.set(u,g)}}}function wy(e,t){Yn.X(e,t);var n=Ya;if(n&&e){var r=ha(n).hoistableScripts,s=Ga(e),u=r.get(s);u||(u=n.querySelector(eo(s)),u||(e=y({src:e,async:!0},t),(t=Wt.get(s))&&xu(e,t),u=n.createElement("script"),at(u),dt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(s,u))}}function Sy(e,t){Yn.M(e,t);var n=Ya;if(n&&e){var r=ha(n).hoistableScripts,s=Ga(e),u=r.get(s);u||(u=n.querySelector(eo(s)),u||(e=y({src:e,async:!0,type:"module"},t),(t=Wt.get(s))&&xu(e,t),u=n.createElement("script"),at(u),dt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(s,u))}}function fm(e,t,n,r){var s=(s=he.current)?wl(s):null;if(!s)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=qa(n.href),n=ha(s).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=qa(n.href);var u=ha(s).hoistableStyles,g=u.get(e);if(g||(s=s.ownerDocument||s,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=s.querySelector(Jr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Wt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Wt.set(e,n),u||Ey(s,e,n,g.state))),t&&r===null)throw Error(l(528,""));return g}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ga(n),n=ha(s).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function qa(e){return'href="'+Vt(e)+'"'}function Jr(e){return'link[rel="stylesheet"]['+e+"]"}function dm(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ey(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),dt(t,"link",n),at(t),e.head.appendChild(t))}function Ga(e){return'[src="'+Vt(e)+'"]'}function eo(e){return"script[async]"+e}function hm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Vt(n.href)+'"]');if(r)return t.instance=r,at(r),r;var s=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),at(r),dt(r,"style",s),Sl(r,n.precedence,e),t.instance=r;case"stylesheet":s=qa(n.href);var u=e.querySelector(Jr(s));if(u)return t.state.loading|=4,t.instance=u,at(u),u;r=dm(n),(s=Wt.get(s))&&yu(r,s),u=(e.ownerDocument||e).createElement("link"),at(u);var g=u;return g._p=new Promise(function(x,z){g.onload=x,g.onerror=z}),dt(u,"link",r),t.state.loading|=4,Sl(u,n.precedence,e),t.instance=u;case"script":return u=Ga(n.src),(s=e.querySelector(eo(u)))?(t.instance=s,at(s),s):(r=n,(s=Wt.get(u))&&(r=y({},n),xu(r,s)),e=e.ownerDocument||e,s=e.createElement("script"),at(s),dt(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Sl(r,n.precedence,e));return t.instance}function Sl(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,u=s,g=0;g<r.length;g++){var x=r[g];if(x.dataset.precedence===t)u=x;else if(u!==s)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function yu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var El=null;function mm(e,t,n){if(El===null){var r=new Map,s=El=new Map;s.set(n,r)}else s=El,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var u=n[s];if(!(u[gr]||u[st]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var x=r.get(g);x?x.push(u):r.set(g,[u])}}return r}function pm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function _y(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ty(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var s=qa(r.href),u=t.querySelector(Jr(s));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_l.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,at(u);return}u=t.ownerDocument||t,r=dm(r),(s=Wt.get(s))&&yu(r,s),u=u.createElement("link"),at(u);var g=u;g._p=new Promise(function(x,z){g.onload=x,g.onerror=z}),dt(u,"link",r),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=_l.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var bu=0;function Cy(e,t){return e.stylesheets&&e.count===0&&Cl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Cl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&bu===0&&(bu=62500*oy());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>bu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}function _l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function Cl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,t.forEach(zy,e),Tl=null,_l.call(e))}function zy(e,t){if(!(t.state.loading&4)){var n=Tl.get(e);if(n)var r=n.get(null);else{n=new Map,Tl.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<s.length;u++){var g=s[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(n.set(g.dataset.precedence,g),r=g)}r&&n.set(null,r)}s=t.instance,g=s.getAttribute("data-precedence"),u=n.get(g)||r,u===r&&n.set(null,s),n.set(g,s),this.count++,r=_l.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),u?u.parentNode.insertBefore(s,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var to={$$typeof:O,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Ay(e,t,n,r,s,u,g,x,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function vm(e,t,n,r,s,u,g,x,z,L,I,q){return e=new Ay(e,t,n,g,z,L,I,q,x),t=1,u===!0&&(t|=24),u=Rt(3,null,null,t),e.current=u,u.stateNode=e,t=Js(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:n,cache:t},ic(u),e}function ym(e){return e?(e=Ea,e):Ea}function xm(e,t,n,r,s,u){s=ym(s),r.context===null?r.context=s:r.pendingContext=s,r=ri(t),r.payload={element:n},u=u===void 0?null:u,u!==null&&(r.callback=u),n=oi(e,r,t),n!==null&&(Tt(n,e,t),Nr(n,e,t))}function bm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wu(e,t){bm(e,t),(e=e.alternate)&&bm(e,t)}function wm(e){if(e.tag===13||e.tag===31){var t=Ii(e,67108864);t!==null&&Tt(t,e,67108864),wu(e,67108864)}}function Sm(e){if(e.tag===13||e.tag===31){var t=Ut();t=gs(t);var n=Ii(e,t);n!==null&&Tt(n,e,t),wu(e,t)}}var zl=!0;function Ry(e,t,n,r){var s=P.T;P.T=null;var u=G.p;try{G.p=2,Su(e,t,n,r)}finally{G.p=u,P.T=s}}function My(e,t,n,r){var s=P.T;P.T=null;var u=G.p;try{G.p=8,Su(e,t,n,r)}finally{G.p=u,P.T=s}}function Su(e,t,n,r){if(zl){var s=Eu(r);if(s===null)su(e,t,r,Al,n),_m(e,r);else if(By(s,e,t,n,r))r.stopPropagation();else if(_m(e,r),t&4&&-1<Oy.indexOf(e)){for(;s!==null;){var u=da(s);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=Ht(u.pendingLanes);if(g!==0){var x=u;for(x.pendingLanes|=2,x.entangledLanes|=2;g;){var z=1<<31-ht(g);x.entanglements[1]|=z,g&=~z}hn(u),(Be&6)===0&&(ul=gt()+500,Zr(0))}}break;case 31:case 13:x=Ii(u,2),x!==null&&Tt(x,u,2),dl(),wu(u,2)}if(u=Eu(r),u===null&&su(e,t,r,Al,n),u===s)break;s=u}s!==null&&r.stopPropagation()}else su(e,t,r,null,n)}}function Eu(e){return e=Ts(e),_u(e)}var Al=null;function _u(e){if(Al=null,e=fa(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Al=e,null}function Em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ms()){case fr:return 2;case dr:return 8;case Pt:case Tn:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var Tu=!1,vi=null,yi=null,xi=null,no=new Map,io=new Map,bi=[],Oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _m(e,t){switch(e){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":no.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(t.pointerId)}}function ao(e,t,n,r,s,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[s]},t!==null&&(t=da(t),t!==null&&wm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function By(e,t,n,r,s){switch(t){case"focusin":return vi=ao(vi,e,t,n,r,s),!0;case"dragenter":return yi=ao(yi,e,t,n,r,s),!0;case"mouseover":return xi=ao(xi,e,t,n,r,s),!0;case"pointerover":var u=s.pointerId;return no.set(u,ao(no.get(u)||null,e,t,n,r,s)),!0;case"gotpointercapture":return u=s.pointerId,io.set(u,ao(io.get(u)||null,e,t,n,r,s)),!0}return!1}function Tm(e){var t=fa(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,Ff(e.priority,function(){Sm(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,Ff(e.priority,function(){Sm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eu(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_s=r,n.target.dispatchEvent(r),_s=null}else return t=da(n),t!==null&&wm(t),e.blockedOn=n,!1;t.shift()}return!0}function Cm(e,t,n){Rl(e)&&n.delete(t)}function Ny(){Tu=!1,vi!==null&&Rl(vi)&&(vi=null),yi!==null&&Rl(yi)&&(yi=null),xi!==null&&Rl(xi)&&(xi=null),no.forEach(Cm),io.forEach(Cm)}function Ml(e,t){e.blockedOn===t&&(e.blockedOn=null,Tu||(Tu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ny)))}var Ol=null;function zm(e){Ol!==e&&(Ol=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ol===e&&(Ol=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if(typeof r!="function"){if(_u(r||n)===null)continue;break}var u=da(n);u!==null&&(e.splice(t,3),t-=3,Ec(u,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Xa(e){function t(z){return Ml(z,e)}vi!==null&&Ml(vi,e),yi!==null&&Ml(yi,e),xi!==null&&Ml(xi,e),no.forEach(t),io.forEach(t);for(var n=0;n<bi.length;n++){var r=bi[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)Tm(n),n.blockedOn===null&&bi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],u=n[r+1],g=s[xt]||null;if(typeof u=="function")g||zm(n);else if(g){var x=null;if(u&&u.hasAttribute("formAction")){if(s=u,g=u[xt]||null)x=g.formAction;else if(_u(s)!==null)continue}else x=g.action;typeof x=="function"?n[r+1]=x:(n.splice(r,3),r-=3),zm(n)}}}function Am(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return s=g})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Cu(e){this._internalRoot=e}Bl.prototype.render=Cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,r=Ut();xm(n,r,e,t,null,null)},Bl.prototype.unmount=Cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xm(e.current,2,null,e,null,null),dl(),t[ua]=null}};function Bl(e){this._internalRoot=e}Bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bi.length&&t!==0&&t<bi[n].priority;n++);bi.splice(n,0,e),n===0&&Tm(e)}};var Rm=a.version;if(Rm!=="19.2.0")throw Error(l(527,Rm,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Uy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{Di=Nl.inject(Uy),lt=Nl}catch{}}return oo.createRoot=function(e,t){if(!c(e))throw Error(l(299));var n=!1,r="",s=L0,u=j0,g=P0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=vm(e,1,!1,null,null,n,r,null,s,u,g,Am),e[ua]=t.current,lu(e),new Cu(t)},oo.hydrateRoot=function(e,t,n){if(!c(e))throw Error(l(299));var r=!1,s="",u=L0,g=j0,x=P0,z=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.formState!==void 0&&(z=n.formState)),t=vm(e,1,!0,t,n??null,r,s,z,u,g,x,Am),t.context=ym(null),n=t.current,r=Ut(),r=gs(r),s=ri(r),s.callback=null,oi(n,s,r),n=r,t.current.lanes=n,pr(t,n),hn(t),e[ua]=t.current,lu(e),new Bl(t)},oo.version="19.2.0",oo}var Fm;function Yy(){if(Fm)return Ru.exports;Fm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Ru.exports=Vy(),Ru.exports}var qy=Yy(),os=Vp();const Gy=Ip(os);function km(i){var a=i.onCommit,o=a===void 0?function(re){}:a,l=i.isValid,c=l===void 0?function(re){return!0}:l,f=i.initialValue,d=f===void 0?"":f,h=i.color,p=h===void 0?"var(--gray7)":h,m=i.bgColor,v=m===void 0?"var(--gray3)":m,y=i.bgActive,b=y===void 0?"var(--gray4)":y,w=i.bgInvalidInput,E=w===void 0?"var(--danger)":w,_=i.invalidInputColor,S=_===void 0?"var(--gray2)":_,T=i.charSize,A=T===void 0?void 0:T,O=i.maxCharSize,U=O===void 0?50:O,H=Ve.useState(!1),X=H[0],k=H[1],K=Ve.useState(!0),J=K[0],ae=K[1],Q=function(){return Math.random().toString(36).substring(7)},se=Ve.useState(Q()),xe=se[0],be=se[1],ye=Ve.useState(A||(d.length<=U?d.length:U)),P=ye[0],G=ye[1],W=function(){k(!1),ae(!0),be(Q())};return B.jsx("input",{type:"text",defaultValue:d,size:P,style:{backgroundColor:X?J?b:E:v,color:J?p:S,border:"none",padding:"5px",paddingLeft:"10px",borderRadius:"var(--borderRadiusSmall)",minWidth:"100px",fontSize:"16px"},readOnly:!X,onFocus:function(){return k(!0)},onChange:function(re){ae(c(re.target.value)),A||(re.target.value.length<=U?G(re.target.value.length):G(U))},onBlur:function(re){J?(W(),o(re.target.value)):(re.target.value=d,W())},onKeyDown:function(re){re.key==="Enter"&&(J?(W(),o(re.target.value)):W())}},xe)}var nt=function(){return nt=Object.assign||function(a){for(var o,l=1,c=arguments.length;l<c;l++)for(var f in o=arguments[l])Object.prototype.hasOwnProperty.call(o,f)&&(a[f]=o[f]);return a},nt.apply(this,arguments)};function oa(i,a){var o={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.indexOf(l)<0&&(o[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(l=Object.getOwnPropertySymbols(i);c<l.length;c++)a.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(i,l[c])&&(o[l[c]]=i[l[c]])}return o}function Xy(i,a,o){for(var l,c=0,f=a.length;c<f;c++)!l&&c in a||(l||(l=Array.prototype.slice.call(a,0,c)),l[c]=a[c]);return i.concat(l||Array.prototype.slice.call(a))}function Kl(i){var a=i.iconName,o=a===void 0?"home":a,l=i.bgColor,c=l===void 0?"transparent":l,f=i.hoverBgColor,d=f===void 0?"var(--gray3)":f,h=i.color,p=h===void 0?"var(--gray6)":h,m=i.hoverColor,v=m===void 0?"var(--gray7)":m,y=i.cursor,b=y===void 0?"pointer":y,w=i.onClick,E=w===void 0?function(){}:w,_=i.style,S=_===void 0?{}:_,T=Ve.useState(!1),A=T[0],O=T[1];return B.jsx("div",{style:nt({userSelect:"none",width:"35px",height:"35px",margin:"5px",cursor:b,borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:A?d:c,transition:"background-color 0.2s",fontSize:"20px",color:A?v:p},S),className:"materialSymbols",onMouseOver:function(){return O(!0)},onMouseOut:function(){return O(!1)},onClick:E,children:B.jsxs("div",{children:[" ",o]})})}function $u(i){var a=i.text,o=a===void 0?void 0:a,l=i.iconName,c=l===void 0?void 0:l,f=i.bgColor,d=f===void 0?"var(--gray3)":f,h=i.hoverBgColor,p=h===void 0?"var(--gray4)":h,m=i.color,v=m===void 0?"var(--gray7)":m,y=i.hoverColor,b=y===void 0?"var(--gray8)":y,w=i.cursor,E=w===void 0?"pointer":w,_=i.onClick,S=_===void 0?function(){}:_,T=i.style,A=T===void 0?{}:T;oa(i,["text","iconName","bgColor","hoverBgColor","color","hoverColor","cursor","onClick","style"]);var O=Ve.useState(!1),U=O[0],H=O[1];return B.jsxs("button",{onMouseOver:function(){return H(!0)},onMouseOut:function(){return H(!1)},onClick:S,style:nt({overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",padding:"0px",cursor:E,height:"35px",margin:"5px",userSelect:"none",backgroundColor:U?p:d,transition:"background-color 0.2s",fontSize:"var(--defaultFontSize)",color:U?b:v,border:"none",borderRadius:"5px"},A),children:[o?B.jsx("div",{style:{marginTop:"2px",marginRight:c?"2px":"15px",marginLeft:"15px"},children:o}):null,c?B.jsx("div",{style:{marginRight:o?"0px":"10px",marginLeft:o?"0px":"10px"},children:B.jsx(Kl,{iconName:c,color:U?b:v,hoverColor:U?b:v,bgColor:"transparent",hoverBgColor:"transparent"})}):null]})}function hf(i,a){a===void 0&&(a={});var o=a.insertAt;if(i&&typeof document<"u"){var l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",o==="top"&&l.firstChild?l.insertBefore(c,l.firstChild):l.appendChild(c),c.styleSheet?c.styleSheet.cssText=i:c.appendChild(document.createTextNode(i))}}hf(`
/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Remove default margin in favour of better control in authored CSS */
body, h1, h2, h3, h4, p,
figure, blockquote, dl, dd {
  margin-block-end: 0;
}

/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set core body defaults */
body {
  min-height: 100vh;
  line-height: 1.5;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2,
h3, h4 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture {
  max-width: 100%;
  display: block;
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
  font-family: inherit;
  font-size: inherit;
}

input:focus {
    outline: none;
  }
  

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5ex;
}




@font-face {
    font-family: 'Material Symbols';
    src: url('https://storage.googleapis.com/pinsandcurvesfontservice/MaterialSymbolsSharp%5BFILL%2CGRAD%2Copsz%2Cwght%5D.woff2') format('woff');
    font-weight: normal;
    font-style: normal;
}

.PinsAndCurvesStylesheet_materialSymbols__hO5CY {
    font-family: 'Material Symbols';
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 48;
}

:root {
    --gray1: #1D2126;
    --gray2: #2C333A;
    --gray3: #3B434B;
    --gray4: #49525B;
    --gray5: #59646E;
    --gray6: #708090;
    --gray7 : #C6D6E6;
    --gray8 : white;
    --danger: pink;

    --green2: #6EBD6F;
    --green1: #84D585;
    --green3: #429A44;
    --green4: #1D471E;

    --yellow1: #FFF8D3;
    --yellow2: #FFF1A8;
    --yellow3: #E6C622;
    --yellow4: #A48E20;

    --borderRadiusSmall: 5px;

    --defaultFontSize: 16px;

    --continuousBlue1: #243157;
    --continuousBlue2: #4A5F9D;
    --continuousBlue3: #94a3d0;
    --discreteRed1: #562F2F;
    --discreteRed2: #915050;


    font-family: 'Roboto', sans-serif;
}

hr {
    border: none;
    border-top: 2px solid var(--gray3);
    margin: 1em 0;
  
}`);function Qy(i){return o=(a=i).color,l=o===void 0?"var(--yellow3)":o,c=a.style,B.jsx("div",{style:nt({width:"100px",height:"100px",position:"relative"},c),children:B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.5",clipRule:"evenodd",viewBox:"0 0 1383 1384",style:{position:"absolute",width:"100%",height:"100%",top:0,left:0},children:B.jsx("g",{transform:"translate(-11290 -51923)",children:B.jsxs("g",{id:"Artboard10",children:[B.jsx("path",{fill:"none",d:"M11290.083 51923.766h1382.825v1382.824h-1382.825z"}),B.jsx("path",{fill:"none",stroke:l,strokeWidth:"179.17",d:"M11636.648 53004.745s-129.7-164.1-129.7-390.899 126.3-407.598 126.3-407.598"}),B.jsx("path",{fill:"none",stroke:l,strokeWidth:"187.5",d:"M11971.64 53053.006v-827.096"}),B.jsx("path",{fill:l,d:"m12205.948 52376.04 174.425-174.425 174.426 174.425-174.426 174.426z"})]})})})});var a,o,l,c}var Ul=150;function Si(i){var a,o=(function(y){var b=C.useState(y),w=b[0],E=b[1],_=C.useState(!1),S=_[0],T=_[1];return C.useLayoutEffect((function(){S||y!==w&&E(y)}),[y,S,w]),{setValue:E,value:w,setActive:T,active:S}})((a=i.initialValue)!==null&&a!==void 0?a:0),l=o.value,c=o.setValue,f=o.setActive,d=C.useState("inactive"),h=d[0],p=d[1],m=function(){p("inactive"),f(!1)};return h==="inactive"?B.jsx(Zy,nt({value:l,setValue:c,setEditing:function(){p("editing"),f(!0)},setDragging:function(){p("dragging"),f(!0)}},i)):h==="editing"?B.jsx(Ky,nt({value:l,setValue:c,setInactive:m},i)):h==="dragging"?B.jsx($y,nt({value:l,setValue:c,setInactive:m},i)):null}function Zy(i){var a=i.value;i.setValue;var o=i.setEditing,l=i.setDragging,c=oa(i,["value","setValue","setEditing","setDragging"]),f=C.useState(null),d=f[0],h=f[1],p=C.useState(!1),m=p[0],v=p[1];return B.jsx("div",{style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:c.bgColor||"var(--gray3)",color:c.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",userSelect:"none"},onPointerDown:function(y){y.preventDefault(),y.button===0&&h({x:y.clientX,y:y.clientY})},onPointerMove:function(y){if(d){var b=y.clientX-d.x,w=y.clientY-d.y;!m&&(Math.abs(b)>3||Math.abs(w)>3)&&(v(!0),l())}},onPointerUp:function(y){d&&(m||o(),h(null),v(!1))},children:a})}function Ky(i){var a=i.value,o=i.setValue,l=i.setInactive,c=oa(i,["value","setValue","setInactive"]),f=C.useState(!0),d=f[0],h=f[1],p=function(y){return!Number.isNaN(y)&&(c.min==null||y>=c.min)&&(c.max==null||y<=c.max)},m=Ve.useRef(null);C.useEffect((function(){var y,b;(y=m.current)===null||y===void 0||y.focus(),(b=m.current)===null||b===void 0||b.select()}),[]);var v=function(){var y,b,w=((y=m.current)===null||y===void 0?void 0:y.value)||"",E=parseFloat(w);p(E)&&o(E),(i.onCommit||i.onChange)&&p(E)&&(i.onCommit?i.onCommit(E):(b=i.onChange)===null||b===void 0||b.call(i,E)),l()};return B.jsx("input",{ref:m,type:"text",defaultValue:String(a),onChange:function(y){var b=y.target.value,w=parseFloat(b);h(p(w))},onBlur:v,onKeyDown:function(y){y.key==="Enter"?v():y.key==="Escape"&&l()},style:{padding:"5px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:c.bgActive||"var(--gray4)",color:d?c.color||"var(--gray7)":c.invalidInputColor||"var(--danger)",border:"1px solid",borderColor:d?c.color||"var(--gray7)":c.invalidInputColor||"var(--danger)",width:"10ch",height:"2em"}})}function Wy(i){var a,o,l,c=i.value,f=i.setValue,d=i.setInactive,h=oa(i,["value","setValue","setInactive"]),p=Ve.useRef(null),m=Ve.useRef(null),v=Ve.useRef(c).current,y=(a=h.min)!==null&&a!==void 0?a:0,b=(c-y)/(((o=h.max)!==null&&o!==void 0?o:100)-y),w=(l=h.step)!==null&&l!==void 0?l:.01,E=Ve.useMemo((function(){if(w==null)return 6;var S=w.toString(),T=S.indexOf(".");return T>=0?S.length-T-1:0}),[w]),_=function(S,T){var A,O,U=S.y-T.y,H=function(J,ae,Q){return Math.max(ae,Math.min(Q,J))};U=H(U,-150,Ul),U/=Ul;var X=(A=h.min)!==null&&A!==void 0?A:0,k=(O=h.max)!==null&&O!==void 0?O:100,K=H(v+(k-X)*U,X,k);return parseFloat(K.toFixed(E))};return C.useEffect((function(){console.log("DraggingNumberInput useEffect called");var S=function(O){if(p.current?p.current.releasePointerCapture(O.pointerId):console.warn("captureRef.current is null, cannot release pointer capture"),m.current!==null){var U={x:O.clientX,y:O.clientY},H=_(m.current,U);f(H),h.onCommit?h.onCommit(H):h.onChange&&h.onChange(H),m.current=null,d()}else d()},T=function(O){if(m.current!==null){var U={x:O.clientX,y:O.clientY},H=_(m.current,U);f(H),h.onChange&&h.onChange(H)}else{console.log("startPosition is null, setting it now",{x:O.clientX,y:O.clientY}),m.current={x:O.clientX,y:O.clientY};var X=O.pointerId;p.current?p.current.setPointerCapture(X):console.warn("captureRef.current is null, cannot set pointer capture")}},A=p.current;if(A)return A.addEventListener("pointerup",S),A.addEventListener("pointermove",T),function(){A.removeEventListener("pointermove",T),A.removeEventListener("pointerup",S)}}),[p.current]),os.createPortal(B.jsxs("div",{ref:p,style:{borderRadius:"25px",backgroundColor:h.bgColor||"var(--gray3)",color:h.color||"var(--gray7)",cursor:"ns-resize",height:"".concat(Ul,"px"),position:"absolute",top:"calc(".concat(h.top,"px + calc(1em - ").concat(75,"px))"),left:h.left,width:"10ch",boxShadow:"0 0 15px rgba(0,0,0,0.3)",overflow:"hidden"},children:[B.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",boxShadow:"inset 0 0 3px ".concat(h.color||"var(--gray7)"),borderRadius:"25px",opacity:.3}}),B.jsx("div",{style:{position:"absolute",background:"linear-gradient(to top, transparent -20%, ".concat(h.color||"var(--gray7)"," 100%)"),opacity:.5,width:"100%",height:"".concat(Ul*b,"px"),bottom:0,left:0}}),B.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) scale(".concat(h.hoverScale||1.8,")"),transformOrigin:"center",color:h.hoverColor||"var(--gray7)",textShadow:"0 0px 8px rgba(0,0,0,0.35)",fontWeight:500,pointerEvents:"none",userSelect:"none"},children:c})]}),document.body)}function $y(i){var a=i.value;i.setValue,i.setInactive;var o=oa(i,["value","setValue","setInactive"]),l=Ve.useRef(null),c=C.useState({top:0,left:0}),f=c[0],d=c[1];return C.useLayoutEffect((function(){if(l.current){var h=l.current.getBoundingClientRect();d({top:h.top,left:h.left})}else console.warn("captureRef.current is null, cannot get bounding rect")}),[l.current]),B.jsx("div",{ref:l,style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",color:o.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",position:"relative"},children:B.jsx(Wy,nt({top:f.top,left:f.left},i,{value:a}))})}var Jy="CollapsibleSection-modules_collapsibleSection__rrUX-",ex="CollapsibleSection-modules_collapsibleSectionClosed__bn2x7",tx="CollapsibleSection-modules_collapsibleHeader__9m5Zn",nx="CollapsibleSection-modules_collapsibleTitle__3MbqI",ix="CollapsibleSection-modules_collapsibleArrow__kSTsT",ax="CollapsibleSection-modules_collapsibleArrowOpen__y1sRM",rx="CollapsibleSection-modules_collapsibleContent__-D89D",ox="CollapsibleSection-modules_collapsibleContentClosed__WJoKk",lx="CollapsibleSection-modules_collapsibleInner__9YJk2",sx="CollapsibleSection-modules_collapsibleInnerClosed__-oM2n";function Dl(i){var a=i.title,o=i.children,l=i.iconName,c=i.defaultOpen,f=i.titleStyle,d=Ve.useState(c!=null&&c),h=d[0],p=d[1];return B.jsxs("div",{className:"".concat(Jy," ").concat(h?"":ex),children:[B.jsxs("div",{className:tx,onClick:function(){return p((function(m){return!m}))},children:[B.jsxs("span",{className:nx,style:nt({display:"flex",alignItems:"center",gap:"0.5rem"},f),children:[l?B.jsx(Kl,{iconName:l,hoverBgColor:"transparent",hoverColor:"var(--gray6)"}):null,a]}),B.jsx("span",{className:"materialSymbols ".concat(ix," ").concat(h?ax:""),children:"arrow_drop_down"})]}),B.jsx("div",{className:"".concat(rx," ").concat(h?"":ox),style:{maxHeight:h?"none":0},children:B.jsx("div",{className:"".concat(lx," ").concat(h?"":sx),children:o})})]})}function Hm(i,a){if(typeof i=="function")return i(a);i!=null&&(i.current=a)}function Yp(...i){return a=>{let o=!1;const l=i.map((c=>{const f=Hm(c,a);return o||typeof f!="function"||(o=!0),f}));if(o)return()=>{for(let c=0;c<l.length;c++){const f=l[c];typeof f=="function"?f():Hm(i[c],null)}}}}function Bi(...i){return C.useCallback(Yp(...i),i)}function qp(i){const a=cx(i),o=C.forwardRef(((l,c)=>{const{children:f,...d}=l,h=C.Children.toArray(f),p=h.find(fx);if(p){const m=p.props.children,v=h.map((y=>y===p?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:y));return B.jsx(a,{...d,ref:c,children:C.isValidElement(m)?C.cloneElement(m,void 0,v):null})}return B.jsx(a,{...d,ref:c,children:f})}));return o.displayName=`${i}.Slot`,o}function cx(i){const a=C.forwardRef(((o,l)=>{const{children:c,...f}=o;if(C.isValidElement(c)){const d=(function(m){let v=Object.getOwnPropertyDescriptor(m.props,"ref")?.get,y=v&&"isReactWarning"in v&&v.isReactWarning;return y?m.ref:(v=Object.getOwnPropertyDescriptor(m,"ref")?.get,y=v&&"isReactWarning"in v&&v.isReactWarning,y?m.props.ref:m.props.ref||m.ref)})(c),h=(function(m,v){const y={...v};for(const b in v){const w=m[b],E=v[b];/^on[A-Z]/.test(b)?w&&E?y[b]=(..._)=>{const S=E(..._);return w(..._),S}:w&&(y[b]=w):b==="style"?y[b]={...w,...E}:b==="className"&&(y[b]=[w,E].filter(Boolean).join(" "))}return{...m,...y}})(f,c.props);return c.type!==C.Fragment&&(h.ref=l?Yp(l,d):d),C.cloneElement(c,h)}return C.Children.count(c)>1?C.Children.only(null):null}));return a.displayName=`${i}.SlotClone`,a}hf(`.CollapsibleSection-modules_collapsibleSection__rrUX- {
  border-radius: var(--borderRadiusSmall);
  margin-bottom: 16px;
  border: 2px solid var(--gray3);
}
.CollapsibleSection-modules_collapsibleSectionClosed__bn2x7 {
  box-shadow: none;
}
.CollapsibleSection-modules_collapsibleHeader__9m5Zn {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.5rem 1rem;
  user-select: none;
}
.CollapsibleSection-modules_collapsibleTitle__3MbqI {
  color: white;
  font-size: 1.15rem;
  font-weight: 600;
  flex: 1;
}
.CollapsibleSection-modules_collapsibleArrow__kSTsT {
  font-size: 30px;
  color: var(--gray6);
  margin-left: 8px;
  transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
}
.CollapsibleSection-modules_collapsibleArrowOpen__y1sRM {
  transform: rotate(180deg);
}
.CollapsibleSection-modules_collapsibleContent__-D89D {
  padding: 0.75rem 1rem 1rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: none;
  overflow: hidden;
}
.CollapsibleSection-modules_collapsibleContentClosed__WJoKk {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
}
.CollapsibleSection-modules_collapsibleInner__9YJk2 {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.CollapsibleSection-modules_collapsibleInnerClosed__-oM2n {
  display: none;
}
`);var ux=Symbol("radix.slottable");function fx(i){return C.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===ux}var Zn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((i,a)=>{const o=qp(`Primitive.${a}`),l=C.forwardRef(((c,f)=>{const{asChild:d,...h}=c,p=d?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(p,{...h,ref:f})}));return l.displayName=`Primitive.${a}`,{...i,[a]:l}}),{});function Gp(i,a=[]){let o=[];const l=()=>{const c=o.map((f=>C.createContext(f)));return function(d){const h=d?.[i]||c;return C.useMemo((()=>({[`__scope${i}`]:{...d,[i]:h}})),[d,h])}};return l.scopeName=i,[function(f,d){const h=C.createContext(d),p=o.length;o=[...o,d];const m=v=>{const{scope:y,children:b,...w}=v,E=y?.[i]?.[p]||h,_=C.useMemo((()=>w),Object.values(w));return B.jsx(E.Provider,{value:_,children:b})};return m.displayName=f+"Provider",[m,function(y,b){const w=b?.[i]?.[p]||h,E=C.useContext(w);if(E)return E;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${f}\``)}]},dx(l,...a)]}function dx(...i){const a=i[0];if(i.length===1)return a;const o=()=>{const l=i.map((c=>({useScope:c(),scopeName:c.scopeName})));return function(f){const d=l.reduce(((h,{useScope:p,scopeName:m})=>({...h,...p(f)[`__scope${m}`]})),{});return C.useMemo((()=>({[`__scope${a.scopeName}`]:d})),[d])}};return o.scopeName=a.scopeName,o}function Ai(i,a,{checkForDefaultPrevented:o=!0}={}){return function(c){if(i?.(c),o===!1||!c.defaultPrevented)return a?.(c)}}var Ri=globalThis?.document?C.useLayoutEffect:()=>{},hx=df[" useInsertionEffect ".trim().toString()]||Ri;function mx({prop:i,defaultProp:a,onChange:o=()=>{},caller:l}){const[c,f,d]=(function({defaultProp:y,onChange:b}){const[w,E]=C.useState(y),_=C.useRef(w),S=C.useRef(b);return hx((()=>{S.current=b}),[b]),C.useEffect((()=>{_.current!==w&&(S.current?.(w),_.current=w)}),[w,_]),[w,E,S]})({defaultProp:a,onChange:o}),h=i!==void 0,p=h?i:c;{const v=C.useRef(i!==void 0);C.useEffect((()=>{const y=v.current;y!==h&&console.warn(`${l} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h}),[h,l])}const m=C.useCallback((v=>{if(h){const y=(function(w){return typeof w=="function"})(v)?v(i):v;y!==i&&d.current?.(y)}else f(v)}),[h,i,f,d]);return[p,m]}var mf=i=>{const{present:a,children:o}=i,l=(function(h){const[p,m]=C.useState(),v=C.useRef(null),y=C.useRef(h),b=C.useRef("none"),w=h?"mounted":"unmounted",[E,_]=(function(T,A){return C.useReducer(((O,U)=>A[O][U]??O),T)})(w,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect((()=>{const S=Ll(v.current);b.current=E==="mounted"?S:"none"}),[E]),Ri((()=>{const S=v.current,T=y.current;if(T!==h){const A=b.current,O=Ll(S);h?_("MOUNT"):O==="none"||S?.display==="none"?_("UNMOUNT"):_(T&&A!==O?"ANIMATION_OUT":"UNMOUNT"),y.current=h}}),[h,_]),Ri((()=>{if(p){let S;const T=p.ownerDocument.defaultView??window,A=U=>{const H=Ll(v.current).includes(U.animationName);if(U.target===p&&H&&(_("ANIMATION_END"),!y.current)){const X=p.style.animationFillMode;p.style.animationFillMode="forwards",S=T.setTimeout((()=>{p.style.animationFillMode==="forwards"&&(p.style.animationFillMode=X)}))}},O=U=>{U.target===p&&(b.current=Ll(v.current))};return p.addEventListener("animationstart",O),p.addEventListener("animationcancel",A),p.addEventListener("animationend",A),()=>{T.clearTimeout(S),p.removeEventListener("animationstart",O),p.removeEventListener("animationcancel",A),p.removeEventListener("animationend",A)}}_("ANIMATION_END")}),[p,_]),{isPresent:["mounted","unmountSuspended"].includes(E),ref:C.useCallback((S=>{v.current=S?getComputedStyle(S):null,m(S)}),[])}})(a),c=typeof o=="function"?o({present:l.isPresent}):C.Children.only(o),f=Bi(l.ref,(function(h){let p=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,m=p&&"isReactWarning"in p&&p.isReactWarning;return m?h.ref:(p=Object.getOwnPropertyDescriptor(h,"ref")?.get,m=p&&"isReactWarning"in p&&p.isReactWarning,m?h.props.ref:h.props.ref||h.ref)})(c));return typeof o=="function"||l.isPresent?C.cloneElement(c,{ref:f}):null};function Ll(i){return i?.animationName||"none"}mf.displayName="Presence";var px=df[" useId ".trim().toString()]||(()=>{}),gx=0;function vx(i){const[a,o]=C.useState(px());return Ri((()=>{o((l=>l??String(gx++)))}),[i]),i||(a?`radix-${a}`:"")}function tr(i){const a=C.useRef(i);return C.useEffect((()=>{a.current=i})),C.useMemo((()=>(...o)=>a.current?.(...o)),[])}var Im,Ju="dismissableLayer.update",yx="dismissableLayer.pointerDownOutside",xx="dismissableLayer.focusOutside",Xp=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qp=C.forwardRef(((i,a)=>{const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:f,onInteractOutside:d,onDismiss:h,...p}=i,m=C.useContext(Xp),[v,y]=C.useState(null),b=v?.ownerDocument??globalThis?.document,[,w]=C.useState({}),E=Bi(a,(k=>y(k))),_=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),T=_.indexOf(S),A=v?_.indexOf(v):-1,O=m.layersWithOutsidePointerEventsDisabled.size>0,U=A>=T,H=(function(K,J=globalThis?.document){const ae=tr(K),Q=C.useRef(!1),se=C.useRef((()=>{}));return C.useEffect((()=>{const xe=ye=>{if(ye.target&&!Q.current){let P=function(){Ym(yx,ae,G,{discrete:!0})};const G={originalEvent:ye};ye.pointerType==="touch"?(J.removeEventListener("click",se.current),se.current=P,J.addEventListener("click",se.current,{once:!0})):P()}else J.removeEventListener("click",se.current);Q.current=!1},be=window.setTimeout((()=>{J.addEventListener("pointerdown",xe)}),0);return()=>{window.clearTimeout(be),J.removeEventListener("pointerdown",xe),J.removeEventListener("click",se.current)}}),[J,ae]),{onPointerDownCapture:()=>Q.current=!0}})((k=>{const K=k.target,J=[...m.branches].some((ae=>ae.contains(K)));U&&!J&&(c?.(k),d?.(k),k.defaultPrevented||h?.())}),b),X=(function(K,J=globalThis?.document){const ae=tr(K),Q=C.useRef(!1);return C.useEffect((()=>{const se=xe=>{xe.target&&!Q.current&&Ym(xx,ae,{originalEvent:xe},{discrete:!1})};return J.addEventListener("focusin",se),()=>J.removeEventListener("focusin",se)}),[J,ae]),{onFocusCapture:()=>Q.current=!0,onBlurCapture:()=>Q.current=!1}})((k=>{const K=k.target;[...m.branches].some((J=>J.contains(K)))||(f?.(k),d?.(k),k.defaultPrevented||h?.())}),b);return(function(K,J=globalThis?.document){const ae=tr(K);C.useEffect((()=>{const Q=se=>{se.key==="Escape"&&ae(se)};return J.addEventListener("keydown",Q,{capture:!0}),()=>J.removeEventListener("keydown",Q,{capture:!0})}),[ae,J])})((k=>{A===m.layers.size-1&&(l?.(k),!k.defaultPrevented&&h&&(k.preventDefault(),h()))}),b),C.useEffect((()=>{if(v)return o&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Im=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),Vm(),()=>{o&&m.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Im)}}),[v,b,o,m]),C.useEffect((()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),Vm())}),[v,m]),C.useEffect((()=>{const k=()=>w({});return document.addEventListener(Ju,k),()=>document.removeEventListener(Ju,k)}),[]),B.jsx(Zn.div,{...p,ref:E,style:{pointerEvents:O?U?"auto":"none":void 0,...i.style},onFocusCapture:Ai(i.onFocusCapture,X.onFocusCapture),onBlurCapture:Ai(i.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Ai(i.onPointerDownCapture,H.onPointerDownCapture)})}));Qp.displayName="DismissableLayer";function Vm(){const i=new CustomEvent(Ju);document.dispatchEvent(i)}function Ym(i,a,o,{discrete:l}){const c=o.originalEvent.target,f=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:o});a&&c.addEventListener(i,a,{once:!0}),l?(function(h,p){h&&os.flushSync((()=>h.dispatchEvent(p)))})(c,f):c.dispatchEvent(f)}C.forwardRef(((i,a)=>{const o=C.useContext(Xp),l=C.useRef(null),c=Bi(a,l);return C.useEffect((()=>{const f=l.current;if(f)return o.branches.add(f),()=>{o.branches.delete(f)}}),[o.branches]),B.jsx(Zn.div,{...i,ref:c})})).displayName="DismissableLayerBranch";var Nu="focusScope.autoFocusOnMount",Uu="focusScope.autoFocusOnUnmount",qm={bubbles:!1,cancelable:!0},Zp=C.forwardRef(((i,a)=>{const{loop:o=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:f,...d}=i,[h,p]=C.useState(null),m=tr(c),v=tr(f),y=C.useRef(null),b=Bi(a,(_=>p(_))),w=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect((()=>{if(l){let _=function(O){if(w.paused||!h)return;const U=O.target;h.contains(U)?y.current=U:Ei(y.current,{select:!0})},S=function(O){if(w.paused||!h)return;const U=O.relatedTarget;U!==null&&(h.contains(U)||Ei(y.current,{select:!0}))},T=function(O){if(document.activeElement===document.body)for(const U of O)U.removedNodes.length>0&&Ei(h)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const A=new MutationObserver(T);return h&&A.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),A.disconnect()}}}),[l,h,w.paused]),C.useEffect((()=>{if(h){Qm.add(w);const _=document.activeElement;if(!h.contains(_)){const S=new CustomEvent(Nu,qm);h.addEventListener(Nu,m),h.dispatchEvent(S),S.defaultPrevented||((function(A,{select:O=!1}={}){const U=document.activeElement;for(const H of A)if(Ei(H,{select:O}),document.activeElement!==U)return})((function(A){return A.filter((O=>O.tagName!=="A"))})(Gm(h)),{select:!0}),document.activeElement===_&&Ei(h))}return()=>{h.removeEventListener(Nu,m),setTimeout((()=>{const S=new CustomEvent(Uu,qm);h.addEventListener(Uu,v),h.dispatchEvent(S),S.defaultPrevented||Ei(_??document.body,{select:!0}),h.removeEventListener(Uu,v),Qm.remove(w)}),0)}}}),[h,m,v,w]);const E=C.useCallback((_=>{if(!o&&!l||w.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,T=document.activeElement;if(S&&T){const A=_.currentTarget,[O,U]=(function(X){const k=Gm(X),K=Xm(k,X),J=Xm(k.reverse(),X);return[K,J]})(A);O&&U?_.shiftKey||T!==U?_.shiftKey&&T===O&&(_.preventDefault(),o&&Ei(U,{select:!0})):(_.preventDefault(),o&&Ei(O,{select:!0})):T===A&&_.preventDefault()}}),[o,l,w.paused]);return B.jsx(Zn.div,{tabIndex:-1,...d,ref:b,onKeyDown:E})}));function Gm(i){const a=[],o=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const c=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||c?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)a.push(o.currentNode);return a}function Xm(i,a){for(const o of i)if(!bx(o,{upTo:a}))return o}function bx(i,{upTo:a}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(a!==void 0&&i===a)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function Ei(i,{select:a=!1}={}){if(i&&i.focus){const o=document.activeElement;i.focus({preventScroll:!0}),i!==o&&(function(c){return c instanceof HTMLInputElement&&"select"in c})(i)&&a&&i.select()}}Zp.displayName="FocusScope";var Qm=(function(){let a=[];return{add(o){const l=a[0];o!==l&&l?.pause(),a=Zm(a,o),a.unshift(o)},remove(o){a=Zm(a,o),a[0]?.resume()}}})();function Zm(i,a){const o=[...i],l=o.indexOf(a);return l!==-1&&o.splice(l,1),o}var Kp=C.forwardRef(((i,a)=>{const{container:o,...l}=i,[c,f]=C.useState(!1);Ri((()=>f(!0)),[]);const d=o||c&&globalThis?.document?.body;return d?Gy.createPortal(B.jsx(Zn.div,{...l,ref:a}),d):null}));Kp.displayName="Portal";var Du=0;function Km(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Gl="right-scroll-bar-position",Xl="width-before-scroll-bar";function Lu(i,a){return typeof i=="function"?i(a):i&&(i.current=a),i}var wx=typeof window<"u"?C.useLayoutEffect:C.useEffect,Wm=new WeakMap;function Sx(i,a){var o=(function(c,f){var d=C.useState((function(){return{value:c,callback:f,facade:{get current(){return d.value},set current(h){var p=d.value;p!==h&&(d.value=h,d.callback(h,p))}}}}))[0];return d.callback=f,d.facade})(null,(function(l){return i.forEach((function(c){return Lu(c,l)}))}));return wx((function(){var l=Wm.get(o);if(l){var c=new Set(l),f=new Set(i),d=o.current;c.forEach((function(h){f.has(h)||Lu(h,null)})),f.forEach((function(h){c.has(h)||Lu(h,d)}))}Wm.set(o,i)}),[i]),o}function Ex(i){return i}var Wp=function(i){var a=i.sideCar,o=oa(i,["sideCar"]);if(!a)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=a.read();if(!l)throw new Error("Sidecar medium not found");return C.createElement(l,nt({},o))};Wp.isSideCarExport=!0;var $p=(function(a){a===void 0&&(a={});var o=(function(c,f){f===void 0&&(f=Ex);var d=[],h=!1;return{read:function(){if(h)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return d.length?d[d.length-1]:c},useMedium:function(p){var m=f(p,h);return d.push(m),function(){d=d.filter((function(v){return v!==m}))}},assignSyncMedium:function(p){for(h=!0;d.length;){var m=d;d=[],m.forEach(p)}d={push:function(v){return p(v)},filter:function(){return d}}},assignMedium:function(p){h=!0;var m=[];if(d.length){var v=d;d=[],v.forEach(p),m=d}var y=function(){var w=m;m=[],w.forEach(p)},b=function(){return Promise.resolve().then(y)};b(),d={push:function(w){m.push(w),b()},filter:function(w){return m=m.filter(w),d}}}}})(null);return o.options=nt({async:!0,ssr:!1},a),o})(),ju=function(){},Wl=C.forwardRef((function(i,a){var o=C.useRef(null),l=C.useState({onScrollCapture:ju,onWheelCapture:ju,onTouchMoveCapture:ju}),c=l[0],f=l[1],d=i.forwardProps,h=i.children,p=i.className,m=i.removeScrollBar,v=i.enabled,y=i.shards,b=i.sideCar,w=i.noRelative,E=i.noIsolation,_=i.inert,S=i.allowPinchZoom,T=i.as,A=T===void 0?"div":T,O=i.gapMode,U=oa(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=b,X=Sx([o,a]),k=nt(nt({},U),c);return C.createElement(C.Fragment,null,v&&C.createElement(H,{sideCar:$p,removeScrollBar:m,shards:y,noRelative:w,noIsolation:E,inert:_,setCallbacks:f,allowPinchZoom:!!S,lockRef:o,gapMode:O}),d?C.cloneElement(C.Children.only(h),nt(nt({},k),{ref:X})):C.createElement(A,nt({},k,{className:p,ref:X}),h))}));Wl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Wl.classNames={fullWidth:Xl,zeroRight:Gl};function _x(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var a=(function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__})();return a&&i.setAttribute("nonce",a),i}var Tx=function(){var i=0,a=null;return{add:function(o){i==0&&(a=_x())&&((function(c,f){c.styleSheet?c.styleSheet.cssText=f:c.appendChild(document.createTextNode(f))})(a,o),(function(c){(document.head||document.getElementsByTagName("head")[0]).appendChild(c)})(a)),i++},remove:function(){!--i&&a&&(a.parentNode&&a.parentNode.removeChild(a),a=null)}}},Jp=function(){var i,a=(i=Tx(),function(o,l){C.useEffect((function(){return i.add(o),function(){i.remove()}}),[o&&l])});return function(o){var l=o.styles,c=o.dynamic;return a(l,c),null}},Cx={left:0,top:0,right:0,gap:0},Pu=function(i){return parseInt(i||"",10)||0},zx=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return Cx;var a=(function(c){var f=window.getComputedStyle(document.body),d=f[c==="padding"?"paddingLeft":"marginLeft"],h=f[c==="padding"?"paddingTop":"marginTop"],p=f[c==="padding"?"paddingRight":"marginRight"];return[Pu(d),Pu(h),Pu(p)]})(i),o=document.documentElement.clientWidth,l=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,l-o+a[2]-a[0])}},Ax=Jp(),nr="data-scroll-locked",Rx=function(i,a,o,l){var c=i.left,f=i.top,d=i.right,h=i.gap;return o===void 0&&(o="margin"),`
  .`.concat("with-scroll-bars-hidden",` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(h,"px ").concat(l,`;
  }
  body[`).concat(nr,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([a&&"position: relative ".concat(l,";"),o==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(l,`;
    `),o==="padding"&&"padding-right: ".concat(h,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gl,` {
    right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Xl,` {
    margin-right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Gl," .").concat(Gl,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(Xl," .").concat(Xl,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(nr,`] {
    `).concat("--removed-body-scroll-bar-size",": ").concat(h,`px;
  }
`)},$m=function(){var i=parseInt(document.body.getAttribute(nr)||"0",10);return isFinite(i)?i:0},Mx=function(i){var a=i.noRelative,o=i.noImportant,l=i.gapMode,c=l===void 0?"margin":l;C.useEffect((function(){return document.body.setAttribute(nr,($m()+1).toString()),function(){var d=$m()-1;d<=0?document.body.removeAttribute(nr):document.body.setAttribute(nr,d.toString())}}),[]);var f=C.useMemo((function(){return zx(c)}),[c]);return C.createElement(Ax,{styles:Rx(f,!a,c,o?"":"!important")})},ef=!1;if(typeof window<"u")try{var jl=Object.defineProperty({},"passive",{get:function(){return ef=!0,!0}});window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{ef=!1}var Qa=!!ef&&{passive:!1},Jm=function(i,a){if(!(i instanceof Element))return!1;var o=window.getComputedStyle(i);return o[a]!=="hidden"&&!(o.overflowY===o.overflowX&&!(function(l){return l.tagName==="TEXTAREA"})(i)&&o[a]==="visible")},ep=function(i,a){var o=a.ownerDocument,l=a;do{if(typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host),eg(i,l)){var c=tg(i,l);if(c[1]>c[2])return!0}l=l.parentNode}while(l&&l!==o.body);return!1},eg=function(i,a){return i==="v"?(function(o){return Jm(o,"overflowY")})(a):(function(o){return Jm(o,"overflowX")})(a)},tg=function(i,a){return i==="v"?[(o=a).scrollTop,o.scrollHeight,o.clientHeight]:(function(l){return[l.scrollLeft,l.scrollWidth,l.clientWidth]})(a);var o},Pl=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},tp=function(i){return[i.deltaX,i.deltaY]},np=function(i){return i&&"current"in i?i.current:i},Ox=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},Bx=0,Za=[];function Nx(i){for(var a=null;i!==null;)i instanceof ShadowRoot&&(a=i.host,i=i.host),i=i.parentNode;return a}var Ux=(function(a,o){return a.useMedium(o),Wp})($p,(function(a){var o=C.useRef([]),l=C.useRef([0,0]),c=C.useRef(),f=C.useState(Bx++)[0],d=C.useState(Jp)[0],h=C.useRef(a);C.useEffect((function(){h.current=a}),[a]),C.useEffect((function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(f));var S=Xy([a.lockRef.current],(a.shards||[]).map(np)).filter(Boolean);return S.forEach((function(T){return T.classList.add("allow-interactivity-".concat(f))})),function(){document.body.classList.remove("block-interactivity-".concat(f)),S.forEach((function(T){return T.classList.remove("allow-interactivity-".concat(f))}))}}}),[a.inert,a.lockRef.current,a.shards]);var p=C.useCallback((function(S,T){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!h.current.allowPinchZoom;var A,O=Pl(S),U=l.current,H="deltaX"in S?S.deltaX:U[0]-O[0],X="deltaY"in S?S.deltaY:U[1]-O[1],k=S.target,K=Math.abs(H)>Math.abs(X)?"h":"v";if("touches"in S&&K==="h"&&k.type==="range")return!1;var J=ep(K,k);if(!J)return!0;if(J?A=K:(A=K==="v"?"h":"v",J=ep(K,k)),!J)return!1;if(!c.current&&"changedTouches"in S&&(H||X)&&(c.current=A),!A)return!0;var ae=c.current||A;return(function(Q,se,xe,be){var ye=(function(ve,Ae){return ve==="h"&&Ae==="rtl"?-1:1})(Q,window.getComputedStyle(se).direction),P=ye*be,G=xe.target,W=se.contains(G),re=!1,we=P>0,R=0,V=0;do{if(!G)break;var $=tg(Q,G),ee=$[0],de=$[1]-$[2]-ye*ee;(ee||de)&&eg(Q,G)&&(R+=de,V+=ee);var he=G.parentNode;G=he&&he.nodeType===Node.DOCUMENT_FRAGMENT_NODE?he.host:he}while(!W&&G!==document.body||W&&(se.contains(G)||se===G));return(we&&Math.abs(R)<1||!we&&Math.abs(V)<1)&&(re=!0),re})(ae,T,S,ae==="h"?H:X)}),[]),m=C.useCallback((function(S){var T=S;if(Za.length&&Za[Za.length-1]===d){var A="deltaY"in T?tp(T):Pl(T),O=o.current.filter((function(H){return H.name===T.type&&(H.target===T.target||T.target===H.shadowParent)&&(X=H.delta,k=A,X[0]===k[0]&&X[1]===k[1]);var X,k}))[0];if(O&&O.should)T.cancelable&&T.preventDefault();else if(!O){var U=(h.current.shards||[]).map(np).filter(Boolean).filter((function(H){return H.contains(T.target)}));(U.length>0?p(T,U[0]):!h.current.noIsolation)&&T.cancelable&&T.preventDefault()}}}),[]),v=C.useCallback((function(S,T,A,O){var U={name:S,delta:T,target:A,should:O,shadowParent:Nx(A)};o.current.push(U),setTimeout((function(){o.current=o.current.filter((function(H){return H!==U}))}),1)}),[]),y=C.useCallback((function(S){l.current=Pl(S),c.current=void 0}),[]),b=C.useCallback((function(S){v(S.type,tp(S),S.target,p(S,a.lockRef.current))}),[]),w=C.useCallback((function(S){v(S.type,Pl(S),S.target,p(S,a.lockRef.current))}),[]);C.useEffect((function(){return Za.push(d),a.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:w}),document.addEventListener("wheel",m,Qa),document.addEventListener("touchmove",m,Qa),document.addEventListener("touchstart",y,Qa),function(){Za=Za.filter((function(S){return S!==d})),document.removeEventListener("wheel",m,Qa),document.removeEventListener("touchmove",m,Qa),document.removeEventListener("touchstart",y,Qa)}}),[]);var E=a.removeScrollBar,_=a.inert;return C.createElement(C.Fragment,null,_?C.createElement(d,{styles:Ox(f)}):null,E?C.createElement(Mx,{noRelative:a.noRelative,gapMode:a.gapMode}):null)})),ng=C.forwardRef((function(i,a){return C.createElement(Wl,nt({},i,{ref:a,sideCar:Ux}))}));ng.classNames=Wl.classNames;var Ka=new WeakMap,Fl=new WeakMap,kl={},ip=0,ig=function(i){return i&&(i.host||ig(i.parentNode))},Dx=function(i,a,o,l){var c=(function(y,b){return b.map((function(w){if(y.contains(w))return w;var E=ig(w);return E&&y.contains(E)?E:(console.error("aria-hidden",w,"in not contained inside",y,". Doing nothing"),null)})).filter((function(w){return!!w}))})(a,Array.isArray(i)?i:[i]);kl[o]||(kl[o]=new WeakMap);var f=kl[o],d=[],h=new Set,p=new Set(c),m=function(y){y&&!h.has(y)&&(h.add(y),m(y.parentNode))};c.forEach(m);var v=function(y){y&&!p.has(y)&&Array.prototype.forEach.call(y.children,(function(b){if(h.has(b))v(b);else try{var w=b.getAttribute(l),E=w!==null&&w!=="false",_=(Ka.get(b)||0)+1,S=(f.get(b)||0)+1;Ka.set(b,_),f.set(b,S),d.push(b),_===1&&E&&Fl.set(b,!0),S===1&&b.setAttribute(o,"true"),E||b.setAttribute(l,"true")}catch(T){console.error("aria-hidden: cannot operate on ",b,T)}}))};return v(a),h.clear(),ip++,function(){d.forEach((function(y){var b=Ka.get(y)-1,w=f.get(y)-1;Ka.set(y,b),f.set(y,w),b||(Fl.has(y)||y.removeAttribute(l),Fl.delete(y)),w||y.removeAttribute(o)})),--ip||(Ka=new WeakMap,Ka=new WeakMap,Fl=new WeakMap,kl={})}},Lx=function(i,a,o){o===void 0&&(o="data-aria-hidden");var l=Array.from(Array.isArray(i)?i:[i]),c=(function(f){return typeof document>"u"?null:(Array.isArray(f)?f[0]:f).ownerDocument.body})(i);return c?(l.push.apply(l,Array.from(c.querySelectorAll("[aria-live], script"))),Dx(l,c,o,"aria-hidden")):function(){return null}};const jx=["top","right","bottom","left"],Oi=Math.min,Dt=Math.max,$l=Math.round,Hl=Math.floor,wn=i=>({x:i,y:i}),Px={left:"right",right:"left",bottom:"top",top:"bottom"},Fx={start:"end",end:"start"};function tf(i,a,o){return Dt(i,Oi(a,o))}function Xn(i,a){return typeof i=="function"?i(a):i}function Qn(i){return i.split("-")[0]}function sr(i){return i.split("-")[1]}function pf(i){return i==="x"?"y":"x"}function gf(i){return i==="y"?"height":"width"}const kx=new Set(["top","bottom"]);function xn(i){return kx.has(Qn(i))?"y":"x"}function vf(i){return pf(xn(i))}function nf(i){return i.replace(/start|end/g,(a=>Fx[a]))}const ap=["left","right"],rp=["right","left"],Hx=["top","bottom"],Ix=["bottom","top"];function Vx(i,a,o,l){const c=sr(i);let f=(function(h,p,m){switch(h){case"top":case"bottom":return m?p?rp:ap:p?ap:rp;case"left":case"right":return p?Hx:Ix;default:return[]}})(Qn(i),o==="start",l);return c&&(f=f.map((d=>d+"-"+c)),a&&(f=f.concat(f.map(nf)))),f}function Il(i){return i.replace(/left|right|bottom|top/g,(a=>Px[a]))}function ag(i){return typeof i!="number"?(function(o){return{top:0,right:0,bottom:0,left:0,...o}})(i):{top:i,right:i,bottom:i,left:i}}function Jl(i){const{x:a,y:o,width:l,height:c}=i;return{width:l,height:c,top:o,left:a,right:a+l,bottom:o+c,x:a,y:o}}function op(i,a,o){let{reference:l,floating:c}=i;const f=xn(a),d=vf(a),h=gf(d),p=Qn(a),m=f==="y",v=l.x+l.width/2-c.width/2,y=l.y+l.height/2-c.height/2,b=l[h]/2-c[h]/2;let w;switch(p){case"top":w={x:v,y:l.y-c.height};break;case"bottom":w={x:v,y:l.y+l.height};break;case"right":w={x:l.x+l.width,y};break;case"left":w={x:l.x-c.width,y};break;default:w={x:l.x,y:l.y}}switch(sr(a)){case"start":w[d]-=b*(o&&m?-1:1);break;case"end":w[d]+=b*(o&&m?-1:1)}return w}async function mo(i,a){var o;a===void 0&&(a={});const{x:l,y:c,platform:f,rects:d,elements:h,strategy:p}=i,{boundary:m="clippingAncestors",rootBoundary:v="viewport",elementContext:y="floating",altBoundary:b=!1,padding:w=0}=Xn(a,i),E=ag(w),_=h[b?y==="floating"?"reference":"floating":y],S=Jl(await f.getClippingRect({element:(o=await(f.isElement==null?void 0:f.isElement(_)))==null||o?_:_.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(h.floating)),boundary:m,rootBoundary:v,strategy:p})),T=y==="floating"?{x:l,y:c,width:d.floating.width,height:d.floating.height}:d.reference,A=await(f.getOffsetParent==null?void 0:f.getOffsetParent(h.floating)),O=await(f.isElement==null?void 0:f.isElement(A))&&await(f.getScale==null?void 0:f.getScale(A))||{x:1,y:1},U=Jl(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:T,offsetParent:A,strategy:p}):T);return{top:(S.top-U.top+E.top)/O.y,bottom:(U.bottom-S.bottom+E.bottom)/O.y,left:(S.left-U.left+E.left)/O.x,right:(U.right-S.right+E.right)/O.x}}function lp(i,a){return{top:i.top-a.height,right:i.right-a.width,bottom:i.bottom-a.height,left:i.left-a.width}}function sp(i){return jx.some((a=>i[a]>=0))}const rg=new Set(["left","top"]);function ls(){return typeof window<"u"}function rr(i){return og(i)?(i.nodeName||"").toLowerCase():"#document"}function Lt(i){var a;return(i==null||(a=i.ownerDocument)==null?void 0:a.defaultView)||window}function Sn(i){var a;return(a=(og(i)?i.ownerDocument:i.document)||window.document)==null?void 0:a.documentElement}function og(i){return!!ls()&&(i instanceof Node||i instanceof Lt(i).Node)}function rn(i){return!!ls()&&(i instanceof Element||i instanceof Lt(i).Element)}function En(i){return!!ls()&&(i instanceof HTMLElement||i instanceof Lt(i).HTMLElement)}function cp(i){return!(!ls()||typeof ShadowRoot>"u")&&(i instanceof ShadowRoot||i instanceof Lt(i).ShadowRoot)}const Yx=new Set(["inline","contents"]);function po(i){const{overflow:a,overflowX:o,overflowY:l,display:c}=on(i);return/auto|scroll|overlay|hidden|clip/.test(a+l+o)&&!Yx.has(c)}const qx=new Set(["table","td","th"]);function Gx(i){return qx.has(rr(i))}const Xx=[":popover-open",":modal"];function es(i){return Xx.some((a=>{try{return i.matches(a)}catch{return!1}}))}const Qx=["transform","translate","scale","rotate","perspective"],Zx=["transform","translate","scale","rotate","perspective","filter"],Kx=["paint","layout","strict","content"];function af(i){const a=yf(),o=rn(i)?on(i):i;return Qx.some((l=>!!o[l]&&o[l]!=="none"))||!!o.containerType&&o.containerType!=="normal"||!a&&!!o.backdropFilter&&o.backdropFilter!=="none"||!a&&!!o.filter&&o.filter!=="none"||Zx.some((l=>(o.willChange||"").includes(l)))||Kx.some((l=>(o.contain||"").includes(l)))}function yf(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Wx=new Set(["html","body","#document"]);function ir(i){return Wx.has(rr(i))}function on(i){return Lt(i).getComputedStyle(i)}function ss(i){return rn(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function zi(i){if(rr(i)==="html")return i;const a=i.assignedSlot||i.parentNode||cp(i)&&i.host||Sn(i);return cp(a)?a.host:a}function lg(i){const a=zi(i);return ir(a)?i.ownerDocument?i.ownerDocument.body:i.body:En(a)&&po(a)?a:lg(a)}function go(i,a,o){var l;a===void 0&&(a=[]),o===void 0&&(o=!0);const c=lg(i),f=c===((l=i.ownerDocument)==null?void 0:l.body),d=Lt(c);if(f){const h=rf(d);return a.concat(d,d.visualViewport||[],po(c)?c:[],h&&o?go(h):[])}return a.concat(c,go(c,[],o))}function rf(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function sg(i){const a=on(i);let o=parseFloat(a.width)||0,l=parseFloat(a.height)||0;const c=En(i),f=c?i.offsetWidth:o,d=c?i.offsetHeight:l,h=$l(o)!==f||$l(l)!==d;return h&&(o=f,l=d),{width:o,height:l,$:h}}function xf(i){return rn(i)?i:i.contextElement}function ar(i){const a=xf(i);if(!En(a))return wn(1);const o=a.getBoundingClientRect(),{width:l,height:c,$:f}=sg(a);let d=(f?$l(o.width):o.width)/l,h=(f?$l(o.height):o.height)/c;return d&&Number.isFinite(d)||(d=1),h&&Number.isFinite(h)||(h=1),{x:d,y:h}}const $x=wn(0);function cg(i){const a=Lt(i);return yf()&&a.visualViewport?{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}:$x}function na(i,a,o,l){a===void 0&&(a=!1),o===void 0&&(o=!1);const c=i.getBoundingClientRect(),f=xf(i);let d=wn(1);a&&(l?rn(l)&&(d=ar(l)):d=ar(i));const h=(function(w,E,_){return E===void 0&&(E=!1),!(!_||E&&_!==Lt(w))&&E})(f,o,l)?cg(f):wn(0);let p=(c.left+h.x)/d.x,m=(c.top+h.y)/d.y,v=c.width/d.x,y=c.height/d.y;if(f){const b=Lt(f),w=l&&rn(l)?Lt(l):l;let E=b,_=rf(E);for(;_&&l&&w!==E;){const S=ar(_),T=_.getBoundingClientRect(),A=on(_),O=T.left+(_.clientLeft+parseFloat(A.paddingLeft))*S.x,U=T.top+(_.clientTop+parseFloat(A.paddingTop))*S.y;p*=S.x,m*=S.y,v*=S.x,y*=S.y,p+=O,m+=U,E=Lt(_),_=rf(E)}}return Jl({width:v,height:y,x:p,y:m})}function bf(i,a){const o=ss(i).scrollLeft;return a?a.left+o:na(Sn(i)).left+o}function ug(i,a,o){o===void 0&&(o=!1);const l=i.getBoundingClientRect();return{x:l.left+a.scrollLeft-(o?0:bf(i,l)),y:l.top+a.scrollTop}}const Jx=new Set(["absolute","fixed"]);function up(i,a,o){let l;if(a==="viewport")l=(function(f,d){const h=Lt(f),p=Sn(f),m=h.visualViewport;let v=p.clientWidth,y=p.clientHeight,b=0,w=0;if(m){v=m.width,y=m.height;const E=yf();(!E||E&&d==="fixed")&&(b=m.offsetLeft,w=m.offsetTop)}return{width:v,height:y,x:b,y:w}})(i,o);else if(a==="document")l=(function(f){const d=Sn(f),h=ss(f),p=f.ownerDocument.body,m=Dt(d.scrollWidth,d.clientWidth,p.scrollWidth,p.clientWidth),v=Dt(d.scrollHeight,d.clientHeight,p.scrollHeight,p.clientHeight);let y=-h.scrollLeft+bf(f);const b=-h.scrollTop;return on(p).direction==="rtl"&&(y+=Dt(d.clientWidth,p.clientWidth)-m),{width:m,height:v,x:y,y:b}})(Sn(i));else if(rn(a))l=(function(f,d){const h=na(f,!0,d==="fixed"),p=h.top+f.clientTop,m=h.left+f.clientLeft,v=En(f)?ar(f):wn(1);return{width:f.clientWidth*v.x,height:f.clientHeight*v.y,x:m*v.x,y:p*v.y}})(a,o);else{const c=cg(i);l={x:a.x-c.x,y:a.y-c.y,width:a.width,height:a.height}}return Jl(l)}function fg(i,a){const o=zi(i);return!(o===a||!rn(o)||ir(o))&&(on(o).position==="fixed"||fg(o,a))}function eb(i,a,o){const l=En(a),c=Sn(a),f=o==="fixed",d=na(i,!0,f,a);let h={scrollLeft:0,scrollTop:0};const p=wn(0);function m(){p.x=bf(c)}if(l||!l&&!f)if((rr(a)!=="body"||po(c))&&(h=ss(a)),l){const y=na(a,!0,f,a);p.x=y.x+a.clientLeft,p.y=y.y+a.clientTop}else c&&m();f&&!l&&c&&m();const v=!c||l||f?wn(0):ug(c,h);return{x:d.left+h.scrollLeft-p.x-v.x,y:d.top+h.scrollTop-p.y-v.y,width:d.width,height:d.height}}function Fu(i){return on(i).position==="static"}function fp(i,a){if(!En(i)||on(i).position==="fixed")return null;if(a)return a(i);let o=i.offsetParent;return Sn(i)===o&&(o=o.ownerDocument.body),o}function dp(i,a){const o=Lt(i);if(es(i))return o;if(!En(i)){let c=zi(i);for(;c&&!ir(c);){if(rn(c)&&!Fu(c))return c;c=zi(c)}return o}let l=fp(i,a);for(;l&&Gx(l)&&Fu(l);)l=fp(l,a);return l&&ir(l)&&Fu(l)&&!af(l)?o:l||(function(f){let d=zi(f);for(;En(d)&&!ir(d);){if(af(d))return d;if(es(d))return null;d=zi(d)}return null})(i)||o}const tb={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let{elements:o,rect:l,offsetParent:c,strategy:f}=a;const d=f==="fixed",h=Sn(c),p=!!o&&es(o.floating);if(c===h||p&&d)return l;let m={scrollLeft:0,scrollTop:0},v=wn(1);const y=wn(0),b=En(c);if((b||!b&&!d)&&((rr(c)!=="body"||po(h))&&(m=ss(c)),En(c))){const E=na(c);v=ar(c),y.x=E.x+c.clientLeft,y.y=E.y+c.clientTop}const w=!h||b||d?wn(0):ug(h,m,!0);return{width:l.width*v.x,height:l.height*v.y,x:l.x*v.x-m.scrollLeft*v.x+y.x+w.x,y:l.y*v.y-m.scrollTop*v.y+y.y+w.y}},getDocumentElement:Sn,getClippingRect:function(a){let{element:o,boundary:l,rootBoundary:c,strategy:f}=a;const d=[...l==="clippingAncestors"?es(o)?[]:(function(v,y){const b=y.get(v);if(b)return b;let w=go(v,[],!1).filter((T=>rn(T)&&rr(T)!=="body")),E=null;const _=on(v).position==="fixed";let S=_?zi(v):v;for(;rn(S)&&!ir(S);){const T=on(S),A=af(S);A||T.position!=="fixed"||(E=null),(_?!A&&!E:!A&&T.position==="static"&&E&&Jx.has(E.position)||po(S)&&!A&&fg(v,S))?w=w.filter((O=>O!==S)):E=T,S=zi(S)}return y.set(v,w),w})(o,this._c):[].concat(l),c],h=d[0],p=d.reduce(((m,v)=>{const y=up(o,v,f);return m.top=Dt(y.top,m.top),m.right=Oi(y.right,m.right),m.bottom=Oi(y.bottom,m.bottom),m.left=Dt(y.left,m.left),m}),up(o,h,f));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}},getOffsetParent:dp,getElementRects:async function(i){const a=this.getOffsetParent||dp,o=this.getDimensions,l=await o(i.floating);return{reference:eb(i.reference,await a(i.floating),i.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}},getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){const{width:o,height:l}=sg(a);return{width:o,height:l}},getScale:ar,isElement:rn,isRTL:function(a){return on(a).direction==="rtl"}};function hp(i,a){return i.x===a.x&&i.y===a.y&&i.width===a.width&&i.height===a.height}function nb(i,a,o,l){l===void 0&&(l={});const{ancestorScroll:c=!0,ancestorResize:f=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=l,m=xf(i),v=c||f?[...m?go(m):[],...go(a)]:[];v.forEach((S=>{c&&S.addEventListener("scroll",o,{passive:!0}),f&&S.addEventListener("resize",o)}));const y=m&&h?(function(T,A){let O,U=null;const H=Sn(T);function X(){var k;clearTimeout(O),(k=U)==null||k.disconnect(),U=null}return(function k(K,J){K===void 0&&(K=!1),J===void 0&&(J=1),X();const ae=T.getBoundingClientRect(),{left:Q,top:se,width:xe,height:be}=ae;if(K||A(),!xe||!be)return;const ye={rootMargin:-Hl(se)+"px "+-Hl(H.clientWidth-(Q+xe))+"px "+-Hl(H.clientHeight-(se+be))+"px "+-Hl(Q)+"px",threshold:Dt(0,Oi(1,J))||1};let P=!0;function G(W){const re=W[0].intersectionRatio;if(re!==J){if(!P)return k();re?k(!1,re):O=setTimeout((()=>{k(!1,1e-7)}),1e3)}re!==1||hp(ae,T.getBoundingClientRect())||k(),P=!1}try{U=new IntersectionObserver(G,{...ye,root:H.ownerDocument})}catch{U=new IntersectionObserver(G,ye)}U.observe(T)})(!0),X})(m,o):null;let b,w=-1,E=null;d&&(E=new ResizeObserver((S=>{let[T]=S;T&&T.target===m&&E&&(E.unobserve(a),cancelAnimationFrame(w),w=requestAnimationFrame((()=>{var A;(A=E)==null||A.observe(a)}))),o()})),m&&!p&&E.observe(m),E.observe(a));let _=p?na(i):null;return p&&(function S(){const T=na(i);_&&!hp(_,T)&&o(),_=T,b=requestAnimationFrame(S)})(),o(),()=>{var S;v.forEach((T=>{c&&T.removeEventListener("scroll",o),f&&T.removeEventListener("resize",o)})),y?.(),(S=E)==null||S.disconnect(),E=null,p&&cancelAnimationFrame(b)}}const ib=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(a){var o,l;const{x:c,y:f,placement:d,middlewareData:h}=a,p=await(async function(v,y){const{placement:b,platform:w,elements:E}=v,_=await(w.isRTL==null?void 0:w.isRTL(E.floating)),S=Qn(b),T=sr(b),A=xn(b)==="y",O=rg.has(S)?-1:1,U=_&&A?-1:1,H=Xn(y,v);let{mainAxis:X,crossAxis:k,alignmentAxis:K}=typeof H=="number"?{mainAxis:H,crossAxis:0,alignmentAxis:null}:{mainAxis:H.mainAxis||0,crossAxis:H.crossAxis||0,alignmentAxis:H.alignmentAxis};return T&&typeof K=="number"&&(k=T==="end"?-1*K:K),A?{x:k*U,y:X*O}:{x:X*O,y:k*U}})(a,i);return d===((o=h.offset)==null?void 0:o.placement)&&(l=h.arrow)!=null&&l.alignmentOffset?{}:{x:c+p.x,y:f+p.y,data:{...p,placement:d}}}}},ab=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(a){const{x:o,y:l,placement:c}=a,{mainAxis:f=!0,crossAxis:d=!1,limiter:h={fn:S=>{let{x:T,y:A}=S;return{x:T,y:A}}},...p}=Xn(i,a),m={x:o,y:l},v=await mo(a,p),y=xn(Qn(c)),b=pf(y);let w=m[b],E=m[y];if(f){const S=b==="y"?"bottom":"right";w=tf(w+v[b==="y"?"top":"left"],w,w-v[S])}if(d){const S=y==="y"?"bottom":"right";E=tf(E+v[y==="y"?"top":"left"],E,E-v[S])}const _=h.fn({...a,[b]:w,[y]:E});return{..._,data:{x:_.x-o,y:_.y-l,enabled:{[b]:f,[y]:d}}}}}},rb=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(a){var o,l;const{placement:c,middlewareData:f,rects:d,initialPlacement:h,platform:p,elements:m}=a,{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:_=!0,...S}=Xn(i,a);if((o=f.arrow)!=null&&o.alignmentOffset)return{};const T=Qn(c),A=xn(h),O=Qn(h)===h,U=await(p.isRTL==null?void 0:p.isRTL(m.floating)),H=b||(O||!_?[Il(h)]:(function(ye){const P=Il(ye);return[nf(ye),P,nf(P)]})(h)),X=E!=="none";!b&&X&&H.push(...Vx(h,_,E,U));const k=[h,...H],K=await mo(a,S),J=[];let ae=((l=f.flip)==null?void 0:l.overflows)||[];if(v&&J.push(K[T]),y){const be=(function(P,G,W){W===void 0&&(W=!1);const re=sr(P),we=vf(P),R=gf(we);let V=we==="x"?re===(W?"end":"start")?"right":"left":re==="start"?"bottom":"top";return G.reference[R]>G.floating[R]&&(V=Il(V)),[V,Il(V)]})(c,d,U);J.push(K[be[0]],K[be[1]])}if(ae=[...ae,{placement:c,overflows:J}],!J.every((be=>be<=0))){var Q,se;const be=(((Q=f.flip)==null?void 0:Q.index)||0)+1,ye=k[be];if(ye&&(!(y==="alignment"&&A!==xn(ye))||ae.every((G=>G.overflows[0]>0&&xn(G.placement)===A))))return{data:{index:be,overflows:ae},reset:{placement:ye}};let P=(se=ae.filter((G=>G.overflows[0]<=0)).sort(((G,W)=>G.overflows[1]-W.overflows[1]))[0])==null?void 0:se.placement;if(!P)switch(w){case"bestFit":{var xe;const G=(xe=ae.filter((W=>{if(X){const re=xn(W.placement);return re===A||re==="y"}return!0})).map((W=>[W.placement,W.overflows.filter((re=>re>0)).reduce(((re,we)=>re+we),0)])).sort(((W,re)=>W[1]-re[1]))[0])==null?void 0:xe[0];G&&(P=G);break}case"initialPlacement":P=h}if(c!==P)return{reset:{placement:P}}}return{}}}},ob=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(a){var o,l;const{placement:c,rects:f,platform:d,elements:h}=a,{apply:p=()=>{},...m}=Xn(i,a),v=await mo(a,m),y=Qn(c),b=sr(c),w=xn(c)==="y",{width:E,height:_}=f.floating;let S,T;y==="top"||y==="bottom"?(S=y,T=b===(await(d.isRTL==null?void 0:d.isRTL(h.floating))?"start":"end")?"left":"right"):(T=y,S=b==="end"?"top":"bottom");const A=_-v.top-v.bottom,O=E-v.left-v.right,U=Oi(_-v[S],A),H=Oi(E-v[T],O),X=!a.middlewareData.shift;let k=U,K=H;if((o=a.middlewareData.shift)!=null&&o.enabled.x&&(K=O),(l=a.middlewareData.shift)!=null&&l.enabled.y&&(k=A),X&&!b){const ae=Dt(v.left,0),Q=Dt(v.right,0),se=Dt(v.top,0),xe=Dt(v.bottom,0);w?K=E-2*(ae!==0||Q!==0?ae+Q:Dt(v.left,v.right)):k=_-2*(se!==0||xe!==0?se+xe:Dt(v.top,v.bottom))}await p({...a,availableWidth:K,availableHeight:k});const J=await d.getDimensions(h.floating);return E!==J.width||_!==J.height?{reset:{rects:!0}}:{}}}},lb=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(a){const{rects:o}=a,{strategy:l="referenceHidden",...c}=Xn(i,a);switch(l){case"referenceHidden":{const f=lp(await mo(a,{...c,elementContext:"reference"}),o.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:sp(f)}}}case"escaped":{const f=lp(await mo(a,{...c,altBoundary:!0}),o.floating);return{data:{escapedOffsets:f,escaped:sp(f)}}}default:return{}}}}},mp=i=>({name:"arrow",options:i,async fn(a){const{x:o,y:l,placement:c,rects:f,platform:d,elements:h,middlewareData:p}=a,{element:m,padding:v=0}=Xn(i,a)||{};if(m==null)return{};const y=ag(v),b={x:o,y:l},w=vf(c),E=gf(w),_=await d.getDimensions(m),S=w==="y",T=S?"top":"left",A=S?"bottom":"right",O=S?"clientHeight":"clientWidth",U=f.reference[E]+f.reference[w]-b[w]-f.floating[E],H=b[w]-f.reference[w],X=await(d.getOffsetParent==null?void 0:d.getOffsetParent(m));let k=X?X[O]:0;k&&await(d.isElement==null?void 0:d.isElement(X))||(k=h.floating[O]||f.floating[E]);const K=U/2-H/2,J=k/2-_[E]/2-1,ae=Oi(y[T],J),Q=Oi(y[A],J),se=ae,xe=k-_[E]-Q,be=k/2-_[E]/2+K,ye=tf(se,be,xe),P=!p.arrow&&sr(c)!=null&&be!==ye&&f.reference[E]/2-(be<se?ae:Q)-_[E]/2<0,G=P?be<se?be-se:be-xe:0;return{[w]:b[w]+G,data:{[w]:ye,centerOffset:be-ye-G,...P&&{alignmentOffset:G}},reset:P}}}),sb=function(i){return i===void 0&&(i={}),{options:i,fn(a){const{x:o,y:l,placement:c,rects:f,middlewareData:d}=a,{offset:h=0,mainAxis:p=!0,crossAxis:m=!0}=Xn(i,a),v={x:o,y:l},y=xn(c),b=pf(y);let w=v[b],E=v[y];const _=Xn(h,a),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(p){const O=b==="y"?"height":"width",U=f.reference[b]-f.floating[O]+S.mainAxis,H=f.reference[b]+f.reference[O]-S.mainAxis;w<U?w=U:w>H&&(w=H)}if(m){var T,A;const O=b==="y"?"width":"height",U=rg.has(Qn(c)),H=f.reference[y]-f.floating[O]+(U&&((T=d.offset)==null?void 0:T[y])||0)+(U?0:S.crossAxis),X=f.reference[y]+f.reference[O]+(U?0:((A=d.offset)==null?void 0:A[y])||0)-(U?S.crossAxis:0);E<H?E=H:E>X&&(E=X)}return{[b]:w,[y]:E}}}},cb=(i,a,o)=>{const l=new Map,c={platform:tb,...o},f={...c.platform,_c:l};return(async(d,h,p)=>{const{placement:m="bottom",strategy:v="absolute",middleware:y=[],platform:b}=p,w=y.filter(Boolean),E=await(b.isRTL==null?void 0:b.isRTL(h));let _=await b.getElementRects({reference:d,floating:h,strategy:v}),{x:S,y:T}=op(_,m,E),A=m,O={},U=0;for(let H=0;H<w.length;H++){const{name:X,fn:k}=w[H],{x:K,y:J,data:ae,reset:Q}=await k({x:S,y:T,initialPlacement:m,placement:A,strategy:v,middlewareData:O,rects:_,platform:b,elements:{reference:d,floating:h}});S=K??S,T=J??T,O={...O,[X]:{...O[X],...ae}},Q&&U<=50&&(U++,typeof Q=="object"&&(Q.placement&&(A=Q.placement),Q.rects&&(_=Q.rects===!0?await b.getElementRects({reference:d,floating:h,strategy:v}):Q.rects),{x:S,y:T}=op(_,A,E)),H=-1)}return{x:S,y:T,placement:A,strategy:v,middlewareData:O}})(i,a,{...c,platform:f})};var Ql=typeof document<"u"?C.useLayoutEffect:function(){};function ts(i,a){if(i===a)return!0;if(typeof i!=typeof a)return!1;if(typeof i=="function"&&i.toString()===a.toString())return!0;let o,l,c;if(i&&a&&typeof i=="object"){if(Array.isArray(i)){if(o=i.length,o!==a.length)return!1;for(l=o;l--!=0;)if(!ts(i[l],a[l]))return!1;return!0}if(c=Object.keys(i),o=c.length,o!==Object.keys(a).length)return!1;for(l=o;l--!=0;)if(!{}.hasOwnProperty.call(a,c[l]))return!1;for(l=o;l--!=0;){const f=c[l];if((f!=="_owner"||!i.$$typeof)&&!ts(i[f],a[f]))return!1}return!0}return i!=i&&a!=a}function dg(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function pp(i,a){const o=dg(i);return Math.round(a*o)/o}function ku(i){const a=C.useRef(i);return Ql((()=>{a.current=i})),a}const ub=i=>({name:"arrow",options:i,fn(a){const{element:o,padding:l}=typeof i=="function"?i(a):i;return o&&(function(f){return{}.hasOwnProperty.call(f,"current")})(o)?o.current!=null?mp({element:o.current,padding:l}).fn(a):{}:o?mp({element:o,padding:l}).fn(a):{}}}),fb=(i,a)=>({...ib(i),options:[i,a]}),db=(i,a)=>({...ab(i),options:[i,a]}),hb=(i,a)=>({...sb(i),options:[i,a]}),mb=(i,a)=>({...rb(i),options:[i,a]}),pb=(i,a)=>({...ob(i),options:[i,a]}),gb=(i,a)=>({...lb(i),options:[i,a]}),vb=(i,a)=>({...ub(i),options:[i,a]});var hg=C.forwardRef(((i,a)=>{const{children:o,width:l=10,height:c=5,...f}=i;return B.jsx(Zn.svg,{...f,ref:a,width:l,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?o:B.jsx("polygon",{points:"0,0 30,0 15,10"})})}));hg.displayName="Arrow";var yb=hg,wf="Popper",[mg,pg]=Gp(wf),[xb,gg]=mg(wf),vg=i=>{const{__scopePopper:a,children:o}=i,[l,c]=C.useState(null);return B.jsx(xb,{scope:a,anchor:l,onAnchorChange:c,children:o})};vg.displayName=wf;var yg="PopperAnchor",xg=C.forwardRef(((i,a)=>{const{__scopePopper:o,virtualRef:l,...c}=i,f=gg(yg,o),d=C.useRef(null),h=Bi(a,d);return C.useEffect((()=>{f.onAnchorChange(l?.current||d.current)})),l?null:B.jsx(Zn.div,{...c,ref:h})}));xg.displayName=yg;var Sf="PopperContent",[bb,wb]=mg(Sf),bg=C.forwardRef(((i,a)=>{const{__scopePopper:o,side:l="bottom",sideOffset:c=0,align:f="center",alignOffset:d=0,arrowPadding:h=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:E,..._}=i,S=gg(Sf,o),[T,A]=C.useState(null),O=Bi(a,(ve=>A(ve))),[U,H]=C.useState(null),X=(function(Ae){const[Ne,it]=C.useState(void 0);return Ri((()=>{if(Ae){it({width:Ae.offsetWidth,height:Ae.offsetHeight});const Ct=new ResizeObserver(($t=>{if(!Array.isArray($t)||!$t.length)return;const jt=$t[0];let zt,ln;if("borderBoxSize"in jt){const sn=jt.borderBoxSize,Kn=Array.isArray(sn)?sn[0]:sn;zt=Kn.inlineSize,ln=Kn.blockSize}else zt=Ae.offsetWidth,ln=Ae.offsetHeight;it({width:zt,height:ln})}));return Ct.observe(Ae,{box:"border-box"}),()=>Ct.unobserve(Ae)}it(void 0)}),[Ae]),Ne})(U),k=X?.width??0,K=X?.height??0,J=l+(f!=="center"?"-"+f:""),ae=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},Q=Array.isArray(m)?m:[m],se=Q.length>0,xe={padding:ae,boundary:Q.filter(Eb),altBoundary:se},{refs:be,floatingStyles:ye,placement:P,isPositioned:G,middlewareData:W}=(function(Ae){Ae===void 0&&(Ae={});const{placement:Ne="bottom",strategy:it="absolute",middleware:Ct=[],platform:$t,elements:{reference:jt,floating:zt}={},transform:ln=!0,whileElementsMounted:sn,open:Kn}=Ae,[cn,sa]=C.useState({x:0,y:0,strategy:it,placement:Ne,middlewareData:{},isPositioned:!1}),[Ui,ur]=C.useState(Ct);ts(Ui,Ct)||ur(Ct);const[ds,hs]=C.useState(null),[gt,ms]=C.useState(null),fr=C.useCallback((Ke=>{Ke!==Cn.current&&(Cn.current=Ke,hs(Ke))}),[]),dr=C.useCallback((Ke=>{Ke!==Wn.current&&(Wn.current=Ke,ms(Ke))}),[]),Pt=jt||ds,Tn=zt||gt,Cn=C.useRef(null),Wn=C.useRef(null),ca=C.useRef(cn),Di=sn!=null,lt=ku(sn),Ft=ku($t),ht=ku(Kn),Li=C.useCallback((()=>{if(!Cn.current||!Wn.current)return;const Ke={placement:Ne,strategy:it,middleware:Ui};Ft.current&&(Ke.platform=Ft.current),cb(Cn.current,Wn.current,Ke).then((Ht=>{const Jt={...Ht,isPositioned:ht.current!==!1};hr.current&&!ts(ca.current,Jt)&&(ca.current=Jt,os.flushSync((()=>{sa(Jt)})))}))}),[Ui,Ne,it,Ft,ht]);Ql((()=>{Kn===!1&&ca.current.isPositioned&&(ca.current.isPositioned=!1,sa((Ke=>({...Ke,isPositioned:!1}))))}),[Kn]);const hr=C.useRef(!1);Ql((()=>(hr.current=!0,()=>{hr.current=!1})),[]),Ql((()=>{if(Pt&&(Cn.current=Pt),Tn&&(Wn.current=Tn),Pt&&Tn){if(lt.current)return lt.current(Pt,Tn,Li);Li()}}),[Pt,Tn,Li,lt,Di]);const wo=C.useMemo((()=>({reference:Cn,floating:Wn,setReference:fr,setFloating:dr})),[fr,dr]),kt=C.useMemo((()=>({reference:Pt,floating:Tn})),[Pt,Tn]),ji=C.useMemo((()=>{const Ke={position:it,left:0,top:0};if(!kt.floating)return Ke;const Ht=pp(kt.floating,cn.x),Jt=pp(kt.floating,cn.y);return ln?{...Ke,transform:"translate("+Ht+"px, "+Jt+"px)",...dg(kt.floating)>=1.5&&{willChange:"transform"}}:{position:it,left:Ht,top:Jt}}),[it,ln,kt.floating,cn.x,cn.y]);return C.useMemo((()=>({...cn,update:Li,refs:wo,elements:kt,floatingStyles:ji})),[cn,Li,wo,kt,ji])})({strategy:"fixed",placement:J,whileElementsMounted:(...ve)=>nb(...ve,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[fb({mainAxis:c+K,alignmentAxis:d}),p&&db({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?hb():void 0,...xe}),p&&mb({...xe}),pb({...xe,apply:({elements:ve,rects:Ae,availableWidth:Ne,availableHeight:it})=>{const{width:Ct,height:$t}=Ae.reference,jt=ve.floating.style;jt.setProperty("--radix-popper-available-width",`${Ne}px`),jt.setProperty("--radix-popper-available-height",`${it}px`),jt.setProperty("--radix-popper-anchor-width",`${Ct}px`),jt.setProperty("--radix-popper-anchor-height",`${$t}px`)}}),U&&vb({element:U,padding:h}),_b({arrowWidth:k,arrowHeight:K}),b&&gb({strategy:"referenceHidden",...xe})]}),[re,we]=Eg(P),R=tr(E);Ri((()=>{G&&R?.()}),[G,R]);const V=W.arrow?.x,$=W.arrow?.y,ee=W.arrow?.centerOffset!==0,[de,he]=C.useState();return Ri((()=>{T&&he(window.getComputedStyle(T).zIndex)}),[T]),B.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:G?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:B.jsx(bb,{scope:o,placedSide:re,onArrowChange:H,arrowX:V,arrowY:$,shouldHideArrow:ee,children:B.jsx(Zn.div,{"data-side":re,"data-align":we,..._,ref:O,style:{..._.style,animation:G?void 0:"none"}})})})}));bg.displayName=Sf;var wg="PopperArrow",Sb={top:"bottom",right:"left",bottom:"top",left:"right"},Sg=C.forwardRef((function(a,o){const{__scopePopper:l,...c}=a,f=wb(wg,l),d=Sb[f.placedSide];return B.jsx("span",{ref:f.onArrowChange,style:{position:"absolute",left:f.arrowX,top:f.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[f.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[f.placedSide],visibility:f.shouldHideArrow?"hidden":void 0},children:B.jsx(yb,{...c,ref:o,style:{...c.style,display:"block"}})})}));function Eb(i){return i!==null}Sg.displayName=wg;var _b=i=>({name:"transformOrigin",options:i,fn(a){const{placement:o,rects:l,middlewareData:c}=a,f=c.arrow?.centerOffset!==0,d=f?0:i.arrowWidth,h=f?0:i.arrowHeight,[p,m]=Eg(o),v={start:"0%",center:"50%",end:"100%"}[m],y=(c.arrow?.x??0)+d/2,b=(c.arrow?.y??0)+h/2;let w="",E="";return p==="bottom"?(w=f?v:`${y}px`,E=-h+"px"):p==="top"?(w=f?v:`${y}px`,E=`${l.floating.height+h}px`):p==="right"?(w=-h+"px",E=f?v:`${b}px`):p==="left"&&(w=`${l.floating.width+h}px`,E=f?v:`${b}px`),{data:{x:w,y:E}}}});function Eg(i){const[a,o="center"]=i.split("-");return[a,o]}var Tb=vg,_g=xg,Cb=bg,zb=Sg,cs="Popover",[Tg]=Gp(cs,[pg]),xo=pg(),[Ab,Ni]=Tg(cs),Cg=i=>{const{__scopePopover:a,children:o,open:l,defaultOpen:c,onOpenChange:f,modal:d=!1}=i,h=xo(a),p=C.useRef(null),[m,v]=C.useState(!1),[y,b]=mx({prop:l,defaultProp:c??!1,onChange:f,caller:cs});return B.jsx(Tb,{...h,children:B.jsx(Ab,{scope:a,contentId:vx(),triggerRef:p,open:y,onOpenChange:b,onOpenToggle:C.useCallback((()=>b((w=>!w))),[b]),hasCustomAnchor:m,onCustomAnchorAdd:C.useCallback((()=>v(!0)),[]),onCustomAnchorRemove:C.useCallback((()=>v(!1)),[]),modal:d,children:o})})};Cg.displayName=cs;var gp="PopoverAnchor";C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,c=Ni(gp,o),f=xo(o),{onCustomAnchorAdd:d,onCustomAnchorRemove:h}=c;return C.useEffect((()=>(d(),()=>h())),[d,h]),B.jsx(_g,{...f,...l,ref:a})})).displayName=gp;var zg="PopoverTrigger",Ag=C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,c=Ni(zg,o),f=xo(o),d=Bi(a,c.triggerRef),h=B.jsx(Zn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":Ng(c.open),...l,ref:d,onClick:Ai(i.onClick,c.onOpenToggle)});return c.hasCustomAnchor?h:B.jsx(_g,{asChild:!0,...f,children:h})}));Ag.displayName=zg;var Ef="PopoverPortal",[Rb,Mb]=Tg(Ef,{forceMount:void 0}),Rg=i=>{const{__scopePopover:a,forceMount:o,children:l,container:c}=i,f=Ni(Ef,a);return B.jsx(Rb,{scope:a,forceMount:o,children:B.jsx(mf,{present:o||f.open,children:B.jsx(Kp,{asChild:!0,container:c,children:l})})})};Rg.displayName=Ef;var or="PopoverContent",Mg=C.forwardRef(((i,a)=>{const o=Mb(or,i.__scopePopover),{forceMount:l=o.forceMount,...c}=i,f=Ni(or,i.__scopePopover);return B.jsx(mf,{present:l||f.open,children:f.modal?B.jsx(Bb,{...c,ref:a}):B.jsx(Nb,{...c,ref:a})})}));Mg.displayName=or;var Ob=qp("PopoverContent.RemoveScroll"),Bb=C.forwardRef(((i,a)=>{const o=Ni(or,i.__scopePopover),l=C.useRef(null),c=Bi(a,l),f=C.useRef(!1);return C.useEffect((()=>{const d=l.current;if(d)return Lx(d)}),[]),B.jsx(ng,{as:Ob,allowPinchZoom:!0,children:B.jsx(Og,{...i,ref:c,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ai(i.onCloseAutoFocus,(d=>{d.preventDefault(),f.current||o.triggerRef.current?.focus()})),onPointerDownOutside:Ai(i.onPointerDownOutside,(d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,m=h.button===2||p;f.current=m}),{checkForDefaultPrevented:!1}),onFocusOutside:Ai(i.onFocusOutside,(d=>d.preventDefault()),{checkForDefaultPrevented:!1})})})})),Nb=C.forwardRef(((i,a)=>{const o=Ni(or,i.__scopePopover),l=C.useRef(!1),c=C.useRef(!1);return B.jsx(Og,{...i,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:f=>{i.onCloseAutoFocus?.(f),f.defaultPrevented||(l.current||o.triggerRef.current?.focus(),f.preventDefault()),l.current=!1,c.current=!1},onInteractOutside:f=>{i.onInteractOutside?.(f),f.defaultPrevented||(l.current=!0,f.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const d=f.target;o.triggerRef.current?.contains(d)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&c.current&&f.preventDefault()}})})),Og=C.forwardRef(((i,a)=>{const{__scopePopover:o,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:f,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:v,...y}=i,b=Ni(or,o),w=xo(o);return(function(){C.useEffect((()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??Km()),document.body.insertAdjacentElement("beforeend",_[1]??Km()),Du++,()=>{Du===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach((S=>S.remove())),Du--}}),[])})(),B.jsx(Zp,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:c,onUnmountAutoFocus:f,children:B.jsx(Qp,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:v,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onDismiss:()=>b.onOpenChange(!1),children:B.jsx(Cb,{"data-state":Ng(b.open),role:"dialog",id:b.contentId,...w,...y,ref:a,style:{...y.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),vp="PopoverClose";C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,c=Ni(vp,o);return B.jsx(Zn.button,{type:"button",...l,ref:a,onClick:Ai(i.onClick,(()=>c.onOpenChange(!1)))})})).displayName=vp;var Bg=C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,c=xo(o);return B.jsx(zb,{...c,...l,ref:a})}));function Ng(i){return i?"open":"closed"}Bg.displayName="PopoverArrow";var Ub=Cg,Db=Ag,Lb=Rg,jb=Mg,Pb=Bg,ns=function(i){var a,o,l=i.r,c=i.g,f=i.b,d=Math.max(l,c,f),h=Math.min(l,c,f),p=d,m=d-h;if(o=d===0?0:m/d,d===h)a=void 0;else{switch(d){case l:a=(c-f)/m+(c<f?6:0);break;case c:a=(f-l)/m+2;break;case f:a=(l-c)/m+4}a!==void 0&&(a/=6)}return{h:a,s:o,v:p}},vn=function(i){var a,o,l,c=i.h,f=i.s,d=i.v,h=Math.floor(6*c),p=6*c-h,m=d*(1-f),v=d*(1-p*f),y=d*(1-(1-p)*f);switch(h%6){case 0:a=d,o=y,l=m;break;case 1:a=v,o=d,l=m;break;case 2:a=m,o=d,l=y;break;case 3:a=m,o=v,l=d;break;case 4:a=y,o=m,l=d;break;case 5:a=d,o=m,l=v;break;default:throw new Error("Invalid HSV color")}return{r:a,g:o,b:l}},uo=function(i){var a=i.r,o=i.g,l=i.b;if(a=Math.round(255*a),o=Math.round(255*o),l=Math.round(255*l),isNaN(a)||isNaN(o)||isNaN(l))throw new Error("Invalid RGB color");return"#".concat(((1<<24)+(a<<16)+(o<<8)+l).toString(16).slice(1).toUpperCase())},is=function(i){var a=parseInt(i.slice(1),16);return{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(255&a)/255}};function yp(i){return B.jsx("div",{style:{width:i.radius?"".concat(i.radius,"px"):"20px",height:i.radius?"".concat(i.radius,"px"):"20px",borderRadius:"50%",backgroundColor:i.color,border:"2px solid var(--gray7)",boxShadow:"0 0 2px 2px rgba(0, 0, 0, 0.2)"}})}function Fb(i){var a=i.colorMode,o=i.color,l=i.onChange,c=i.onCommit,f=C.useRef({h:0,s:0,v:0}),d=(function(m,v){if(v==="hex")return ns(is(m));if(v==="rgb")return ns(m);if(v==="hsv")return m;throw new Error("Unsupported color mode: ".concat(v))})(o,a);d.h===void 0&&(d.h=f.current.h),d.s===void 0&&(d.s=f.current.s),d.v===void 0&&(d.v=f.current.v);var h=C.useState(0);h[0];var p=h[1];return B.jsx(kb,{hsv:d,onHSVChange:function(m,v){f.current=m;var y=(function(b,w){if(w==="hex")return uo(vn(b));if(w==="rgb")return vn(b);if(w==="hsv")return b;throw new Error("Unsupported color mode: ".concat(w))})(m,a);v&&c?c(y):l?l(y):p((function(b){return b+1}))}})}function kb(i){var a=i.hsv,o=i.onHSVChange,l=C.useState(!1),c=l[0],f=l[1],d=C.useState(!1),h=d[0],p=d[1],m=function(S,T,A){return Math.max(T,Math.min(A,S))},v=C.useState(!1),y=v[0],b=v[1],w=Ve.useRef(null),E=Ve.useRef(null);C.useLayoutEffect((function(){var S=w.current;if(S){var T=S.getContext("2d");if(T){for(var A=S.width,O=S.height,U=T.createImageData(A,O),H=0;H<O;H++)for(var X=0;X<A;X++){var k=vn({h:a.h,s:X/A,v:1-H/O}),K=k.r,J=k.g,ae=k.b,Q=4*(H*A+X);U.data[Q]=Math.round(255*K),U.data[Q+1]=Math.round(255*J),U.data[Q+2]=Math.round(255*ae),U.data[Q+3]=255}T.putImageData(U,0,0)}}}),[a.h]),C.useLayoutEffect((function(){var S=E.current;if(S){var T=S.getContext("2d");if(T){for(var A=S.width,O=S.height,U=T.createImageData(A,O),H=0;H<A;H++)for(var X=0;X<O;X++){var k=vn({h:H/A,s:1,v:1}),K=4*(X*A+H);U.data[K]=Math.round(255*k.r),U.data[K+1]=Math.round(255*k.g),U.data[K+2]=Math.round(255*k.b),U.data[K+3]=255}T.putImageData(U,0,0)}}}),[a.s,a.v]);var _=vn(a);return B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",backgroundColor:"var(--gray2)",width:"250px"},children:[B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[B.jsxs("div",{style:{height:"250px",backgroundColor:"var(--gray3)",borderRadius:"var(--borderRadiusSmall)",position:"relative",border:"2px solid var(--gray5)",cursor:"move"},onPointerDown:function(S){p(!0),S.currentTarget.setPointerCapture(S.pointerId),document.body.style.cursor="move"},onPointerMove:function(S){if(h){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,O=S.clientY-T.top,U=m(A/T.width,.01,1),H=m(1-O/T.height,.01,1);S.currentTarget.style.cursor="none",f(!0),o({h:a.h,s:U,v:H})}},onPointerUp:function(S){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,O=S.clientY-T.top,U=m(A/T.width,.01,1),H=m(1-O/T.height,.01,1);o({h:a.h,s:U,v:H},!0),S.currentTarget.releasePointerCapture(S.pointerId),S.currentTarget.style.cursor="move",document.body.style.cursor="default",p(!1),f(!1)},children:[B.jsx("div",{style:{left:"".concat(100*a.s,"%"),top:"".concat(100*(1-a.v),"%"),position:"absolute",transform:"translate(-50%, -50%)"},children:B.jsx(yp,{color:uo(vn(a)),radius:c?30:20})}),B.jsx("canvas",{ref:w,style:{width:"100%",height:"100%"},width:250,height:250})]}),B.jsxs("div",{style:{width:"100%",height:"15px",backgroundColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",position:"relative",cursor:"move"},onPointerDown:function(S){b(!0),S.currentTarget.setPointerCapture(S.pointerId),document.body.style.cursor="ew-resize"},onPointerMove:function(S){if(y){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,O=m(A/T.width,0,.99);o({h:O,s:a.s,v:a.v})}},onPointerUp:function(S){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,O=m(A/T.width,0,.99);o({h:O,s:a.s,v:a.v},!0),b(!1),S.currentTarget.releasePointerCapture(S.pointerId),document.body.style.cursor="default"},children:[B.jsx("canvas",{ref:E,width:250,height:15,style:{width:"100%",height:"100%",top:"0",left:"0",position:"absolute",border:"2px solid var(--gray5)",borderRadius:"var(--borderRadiusSmall)"}}),B.jsx("div",{style:{left:"".concat(100*a.h,"%"),top:"50%",position:"absolute",transform:"translate(-50%, -50%)"},children:B.jsx(yp,{color:uo(vn({h:a.h,s:1,v:1}))})})]})]}),B.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"10px",width:"100%"},children:[B.jsx(km,{initialValue:"".concat(Math.round(255*_.r),", ").concat(Math.round(255*_.g),", ").concat(Math.round(255*_.b)),onCommit:function(S){var T=S.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(T){var A=T.map(Number);A[0];var O=A[1],U=A[2],H=A[3];if(U/=255,H/=255,!((O/=255)<0||O>1||U<0||U>1||H<0||H>1)){var X=ns({r:O,g:U,b:H}),k=X.h,K=X.s,J=X.v;k||(k=a.h),K||(K=a.s),J||(J=a.v),o({h:k,s:K,v:J},!0)}}},isValid:function(S){var T=S.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(!T)return!1;var A=T.map(Number);A[0];var O=A[1],U=A[2],H=A[3];return O>=0&&O<=255&&U>=0&&U<=255&&H>=0&&H<=255}},"".concat(Math.round(255*_.r),", ").concat(Math.round(255*_.g),", ").concat(Math.round(255*_.b))),B.jsx(km,{initialValue:uo(vn(a)),onCommit:function(S){var T=is(S),A=T.r,O=T.g,U=T.b,H=ns({r:A,g:O,b:U}),X=H.h,k=H.s,K=H.v;X||(X=a.h),k||(k=a.s),K||(K=a.v),o({h:X,s:k,v:K},!0)},isValid:function(S){var T=is(S),A=T.r,O=T.g,U=T.b;return A>=0&&A<=255&&O>=0&&O<=255&&U>=0&&U<=255}},uo(vn(a)))]})]})}var Hb="styles-modules_Content__k1G29",Ib="styles-modules_Arrow__6BQL5";function Vb(i){var a=i.color,o=i.colorMode,l=o===void 0?"hex":o,c=i.onChange,f=i.onCommit,d=i.styleTrigger,h=d===void 0?null:d,p=l==="hex"?is(a):l==="rgb"?a:vn(a.h,a.s,a.v);return B.jsxs(Ub,{open:i.open,onOpenChange:i.onOpenChange,children:[B.jsx(Db,{asChild:!0,children:B.jsx("div",{style:nt({backgroundColor:"rgb(".concat(Math.round(255*p.r),", ").concat(Math.round(255*p.g),", ").concat(Math.round(255*p.b),")"),width:"35px",height:"35px",cursor:"pointer",border:"2px solid var(--gray6)",boxShadow:"inset 0 0 0 2px var(--gray1)",borderRadius:"var(--borderRadiusSmall)"},h)})}),B.jsx(Lb,{children:B.jsxs(jb,{sideOffset:5,className:Hb,children:[B.jsx("div",{style:{},children:B.jsx(Fb,{colorMode:"rgb",color:p,onChange:c,onCommit:f})}),B.jsx(Pb,{className:Ib})]})})]})}hf(`
.styles-modules_Content__k1G29 {
    background-color: var(--gray2);
    border: 2px solid var(--gray4);
    padding: 16px;
    border-radius: var(--borderRadiusSmall);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.styles-modules_Arrow__6BQL5 {
    fill: var(--gray4);
    width: 16px;
    height: 8px;
}`);const yt=[{params:{a:1,b:1,c:1,a_delta:0,b_delta:.8,c_delta:.6},integral:0},{params:{a:1,b:2,c:1,a_delta:.6,b_delta:.4,c_delta:1},integral:0},{params:{a:1,b:3,c:1,a_delta:.6,b_delta:1,c_delta:.2},integral:0},{params:{a:2,b:3,c:1,a_delta:.4,b_delta:1,c_delta:.4},integral:0},{params:{a:5,b:3,c:1,a_delta:.4,b_delta:.4,c_delta:.2},integral:0},{params:{a:5,b:7,c:1,a_delta:.4,b_delta:.8,c_delta:.8},integral:0}];function Ug(i,a){const o=Math.cos(a.a*i+a.a_delta),l=Math.cos(a.b*i+a.b_delta),c=Math.cos(a.c*i+a.c_delta);return[o,l,c]}function Yb(i,a=1e3){const o=[];for(let c=0;c<a;c++){const f=c/(a-1)*2*Math.PI,[d,h,p]=Ug(f,i);o.push([d,h,p])}let l=0;for(let c=1;c<o.length-1;c++){const[f,d,h]=o[c-1],[p,m,v]=o[c],y=Math.sqrt((p-f)**2+(m-d)**2+(v-h)**2);l+=y}return l}for(const i of yt)i.integral=Yb(i.params);const qb=Math.max(...yt.map(i=>i.integral||0));function Gb({params:i,stroke:a="black"}){const f=Array.from({length:100},(d,h)=>{const p=h/99*2*Math.PI,[m,v]=Ug(p,i);return[m,v]}).map(([d,h])=>[(d+1)*50,(-h+1)*50]).map(([d,h],p)=>`${p===0?"M":"L"} ${d},${h}`).join(" ");return B.jsx("svg",{style:{width:"100px",height:"100px"},viewBox:"-20 -20 140 140",children:B.jsx("path",{d:f,fill:"none",stroke:a,strokeWidth:3})})}function Xb({options:i,value:a,onChange:o,style:l={}}){return B.jsx("div",{style:{gap:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",alignItems:"center",justifyContent:"center",...l},children:i.map(c=>{const f=c.value.a===a.a&&c.value.b===a.b&&c.value.c===a.c&&c.value.a_delta===a.a_delta&&c.value.b_delta===a.b_delta&&c.value.c_delta===a.c_delta;return B.jsx("div",{onClick:()=>o(c.value,c.integral),style:{border:f?"2px solid var(--gray8)":"2px solid var(--gray4)",borderRadius:4,boxSizing:"content-box",backgroundColor:f?"var(--gray4)":"var(--gray2)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:c.label??"",children:B.jsx(Gb,{params:c.value,stroke:f?"var(--gray8)":"var(--gray6)"})},JSON.stringify(c.value))})})}function lo({label:i,preset:a,onClick:o}){const l=`
        linear-gradient(45deg, ${a.particleColors.map(f=>`rgb(${f.join(",")})`).join(", ")})
    `,c=a.particleColors.length;return B.jsx("div",{style:{background:l,borderRadius:"var(--borderRadiusSmall)",boxShadow:`inset 0 0 7px 5px rgba(${a.particleColors[c-1].join(",")},0.3)`,cursor:"pointer",width:"auto",padding:"8px 16px",border:`2px solid rgb(${a.particleColors[0].join(",")})`,height:"3em",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>o(a),children:B.jsx("div",{style:{color:"white",textShadow:"0 0px 3px rgba(0,0,0,0.8)",fontWeight:600},children:i})})}const $a={pastelDream:{lissajousParams:yt[0].params,lissajousIntegral:yt[0].integral},burningSunset:{particleColors:[[59,6,10],[138,0,0],[200,63,18],[255,242,135]],mixingIntensity:.6,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.65,lissajousParams:yt[1].params,lissajousIntegral:yt[1].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:138},oceanBlues:{particleColors:[[84,9,218],[78,113,255],[187,251,255]],mixingIntensity:.5,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.1,lissajousParams:yt[5].params,lissajousIntegral:yt[5].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:0},hotPink:{particleColors:[[172,23,84],[229,56,136],[243,113,153],[247,168,196]],mixingIntensity:1,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.1,lissajousParams:yt[2].params,lissajousIntegral:yt[2].integral,animationSpeed:2,rotateVertical:0,rotateHorizontal:0},forestGreens:{particleColors:[[47,82,73],[151,176,103],[227,222,97]],mixingIntensity:.45,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.3,lissajousParams:yt[0].params,lissajousIntegral:yt[0].integral,animationSpeed:1.2,rotateVertical:0,rotateHorizontal:34},tropicalDisco:{particleColors:[[24,1,97],[79,23,135],[235,54,120],[251,119,60]],mixingIntensity:.3,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.7,lissajousParams:yt[5].params,lissajousIntegral:yt[5].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:0}};function xp(i,a){if(typeof i=="function")return i(a);i!=null&&(i.current=a)}function Dg(...i){return a=>{let o=!1;const l=i.map(c=>{const f=xp(c,a);return!o&&typeof f=="function"&&(o=!0),f});if(o)return()=>{for(let c=0;c<l.length;c++){const f=l[c];typeof f=="function"?f():xp(i[c],null)}}}}function Lg(...i){return C.useCallback(Dg(...i),i)}function Qb(i){const a=Zb(i),o=C.forwardRef((l,c)=>{const{children:f,...d}=l,h=C.Children.toArray(f),p=h.find(Wb);if(p){const m=p.props.children,v=h.map(y=>y===p?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:y);return B.jsx(a,{...d,ref:c,children:C.isValidElement(m)?C.cloneElement(m,void 0,v):null})}return B.jsx(a,{...d,ref:c,children:f})});return o.displayName=`${i}.Slot`,o}function Zb(i){const a=C.forwardRef((o,l)=>{const{children:c,...f}=o;if(C.isValidElement(c)){const d=Jb(c),h=$b(f,c.props);return c.type!==C.Fragment&&(h.ref=l?Dg(l,d):d),C.cloneElement(c,h)}return C.Children.count(c)>1?C.Children.only(null):null});return a.displayName=`${i}.SlotClone`,a}var Kb=Symbol("radix.slottable");function Wb(i){return C.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===Kb}function $b(i,a){const o={...a};for(const l in a){const c=i[l],f=a[l];/^on[A-Z]/.test(l)?c&&f?o[l]=(...h)=>{const p=f(...h);return c(...h),p}:c&&(o[l]=c):l==="style"?o[l]={...c,...f}:l==="className"&&(o[l]=[c,f].filter(Boolean).join(" "))}return{...i,...o}}function Jb(i){let a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?i.ref:(a=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}var e2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jg=e2.reduce((i,a)=>{const o=Qb(`Primitive.${a}`),l=C.forwardRef((c,f)=>{const{asChild:d,...h}=c,p=d?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(p,{...h,ref:f})});return l.displayName=`Primitive.${a}`,{...i,[a]:l}},{});function t2(i,a=[]){let o=[];function l(f,d){const h=C.createContext(d),p=o.length;o=[...o,d];const m=y=>{const{scope:b,children:w,...E}=y,_=b?.[i]?.[p]||h,S=C.useMemo(()=>E,Object.values(E));return B.jsx(_.Provider,{value:S,children:w})};m.displayName=f+"Provider";function v(y,b){const w=b?.[i]?.[p]||h,E=C.useContext(w);if(E)return E;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${f}\``)}return[m,v]}const c=()=>{const f=o.map(d=>C.createContext(d));return function(h){const p=h?.[i]||f;return C.useMemo(()=>({[`__scope${i}`]:{...h,[i]:p}}),[h,p])}};return c.scopeName=i,[l,n2(c,...a)]}function n2(...i){const a=i[0];if(i.length===1)return a;const o=()=>{const l=i.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(f){const d=l.reduce((h,{useScope:p,scopeName:m})=>{const y=p(f)[`__scope${m}`];return{...h,...y}},{});return C.useMemo(()=>({[`__scope${a.scopeName}`]:d}),[d])}};return o.scopeName=a.scopeName,o}function i2(i,a,{checkForDefaultPrevented:o=!0}={}){return function(c){if(i?.(c),o===!1||!c.defaultPrevented)return a?.(c)}}var Pg=globalThis?.document?C.useLayoutEffect:()=>{},a2=df[" useInsertionEffect ".trim().toString()]||Pg;function r2({prop:i,defaultProp:a,onChange:o=()=>{},caller:l}){const[c,f,d]=o2({defaultProp:a,onChange:o}),h=i!==void 0,p=h?i:c;{const v=C.useRef(i!==void 0);C.useEffect(()=>{const y=v.current;y!==h&&console.warn(`${l} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,l])}const m=C.useCallback(v=>{if(h){const y=l2(v)?v(i):v;y!==i&&d.current?.(y)}else f(v)},[h,i,f,d]);return[p,m]}function o2({defaultProp:i,onChange:a}){const[o,l]=C.useState(i),c=C.useRef(o),f=C.useRef(a);return a2(()=>{f.current=a},[a]),C.useEffect(()=>{c.current!==o&&(f.current?.(o),c.current=o)},[o,c]),[o,l,f]}function l2(i){return typeof i=="function"}function s2(i){const a=C.useRef({value:i,previous:i});return C.useMemo(()=>(a.current.value!==i&&(a.current.previous=a.current.value,a.current.value=i),a.current.previous),[i])}function c2(i){const[a,o]=C.useState(void 0);return Pg(()=>{if(i){o({width:i.offsetWidth,height:i.offsetHeight});const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];let d,h;if("borderBoxSize"in f){const p=f.borderBoxSize,m=Array.isArray(p)?p[0]:p;d=m.inlineSize,h=m.blockSize}else d=i.offsetWidth,h=i.offsetHeight;o({width:d,height:h})});return l.observe(i,{box:"border-box"}),()=>l.unobserve(i)}else o(void 0)},[i]),a}var us="Switch",[u2]=t2(us),[f2,d2]=u2(us),Fg=C.forwardRef((i,a)=>{const{__scopeSwitch:o,name:l,checked:c,defaultChecked:f,required:d,disabled:h,value:p="on",onCheckedChange:m,form:v,...y}=i,[b,w]=C.useState(null),E=Lg(a,O=>w(O)),_=C.useRef(!1),S=b?v||!!b.closest("form"):!0,[T,A]=r2({prop:c,defaultProp:f??!1,onChange:m,caller:us});return B.jsxs(f2,{scope:o,checked:T,disabled:h,children:[B.jsx(jg.button,{type:"button",role:"switch","aria-checked":T,"aria-required":d,"data-state":Vg(T),"data-disabled":h?"":void 0,disabled:h,value:p,...y,ref:E,onClick:i2(i.onClick,O=>{A(U=>!U),S&&(_.current=O.isPropagationStopped(),_.current||O.stopPropagation())})}),S&&B.jsx(Ig,{control:b,bubbles:!_.current,name:l,value:p,checked:T,required:d,disabled:h,form:v,style:{transform:"translateX(-100%)"}})]})});Fg.displayName=us;var kg="SwitchThumb",Hg=C.forwardRef((i,a)=>{const{__scopeSwitch:o,...l}=i,c=d2(kg,o);return B.jsx(jg.span,{"data-state":Vg(c.checked),"data-disabled":c.disabled?"":void 0,...l,ref:a})});Hg.displayName=kg;var h2="SwitchBubbleInput",Ig=C.forwardRef(({__scopeSwitch:i,control:a,checked:o,bubbles:l=!0,...c},f)=>{const d=C.useRef(null),h=Lg(d,f),p=s2(o),m=c2(a);return C.useEffect(()=>{const v=d.current;if(!v)return;const y=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(y,"checked").set;if(p!==o&&w){const E=new Event("click",{bubbles:l});w.call(v,o),v.dispatchEvent(E)}},[p,o,l]),B.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...c,tabIndex:-1,ref:h,style:{...c.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ig.displayName=h2;function Vg(i){return i?"checked":"unchecked"}var m2=Fg,p2=Hg;const bp=({label:i="Toggle Section",children:a,activeOnToggled:o=!0,onToggle:l,checked:c})=>{const f=o?c:!c;return B.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[B.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1em"},children:[B.jsx("div",{children:i}),B.jsx(m2,{className:"SwitchRoot",onCheckedChange:d=>{l(d)},checked:c,children:B.jsx(p2,{className:"SwitchThumb"})})]}),B.jsx("div",{style:{opacity:f?1:.2,pointerEvents:f?"auto":"none",userSelect:f?"auto":"none",transition:"opacity 0.2s ease-in-out"},children:a})]})},wp=i=>{let a;const o=new Set,l=(m,v)=>{const y=typeof m=="function"?m(a):m;if(!Object.is(y,a)){const b=a;a=v??(typeof y!="object"||y===null)?y:Object.assign({},a,y),o.forEach(w=>w(a,b))}},c=()=>a,h={setState:l,getState:c,getInitialState:()=>p,subscribe:m=>(o.add(m),()=>o.delete(m))},p=a=i(l,c,h);return h},g2=(i=>i?wp(i):wp),v2=i=>i;function y2(i,a=v2){const o=Ve.useSyncExternalStore(i.subscribe,Ve.useCallback(()=>a(i.getState()),[i,a]),Ve.useCallback(()=>a(i.getInitialState()),[i,a]));return Ve.useDebugValue(o),o}const Sp=i=>{const a=g2(i),o=l=>y2(a,l);return Object.assign(o,a),o},x2=(i=>i?Sp(i):Sp),Ti=x2(i=>({...$a[1],width:800*3,height:600*3,exportPerfectLoop:!1,exportDuration:3,renderingInProgress:!1,updateStore:a=>i(o=>({...o,...a}))}));function b2(){const i=Ti(d=>d),a=Ti(d=>d.updateStore),o=(d,h)=>{const p=i.particleColors.slice();p[d]=h,a({particleColors:p})},l=()=>a({particleColors:[...i.particleColors,[255,255,255]]}),c=d=>{i.particleColors.length!==1&&a({particleColors:i.particleColors.filter((h,p)=>p!==d)})},f=d=>{a({...d,particleColors:d.particleColors.map(h=>[h[0]/255,h[1]/255,h[2]/255])})};return B.jsxs("div",{style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100%",height:"100vh",padding:"3rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[B.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:"1rem"},children:[B.jsx(Qy,{style:{width:"4rem",height:"4rem"},color:"var(--gray4)"}),B.jsx("span",{style:{color:"var(--gray7)",fontWeight:"normal",fontSize:"2.5em"},children:"Liquid Lissajous"})]}),B.jsx("hr",{}),"Pick a preset to get started",B.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[B.jsx(lo,{label:"Burning Sunset",preset:$a.burningSunset,onClick:f}),B.jsx(lo,{label:"Ocean Blues",preset:$a.oceanBlues,onClick:f}),B.jsx(lo,{label:"Forest Greens",preset:$a.forestGreens,onClick:f}),B.jsx(lo,{label:"Hot Pink",preset:$a.hotPink,onClick:f}),B.jsx(lo,{label:"Tropical Disco",preset:$a.tropicalDisco,onClick:f})]}),"Customize to your liking",B.jsxs(Dl,{title:"General",iconName:"settings",children:[B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["canvas size ",B.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[B.jsx(Si,{initialValue:i.width,min:100,max:1920*2,step:10,onCommit:d=>a({width:d})}),B.jsx("span",{children:"x"}),B.jsx(Si,{initialValue:i.height,min:100,max:1080*2,step:10,onCommit:d=>a({height:d})})]})]}),B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["animation speed ",B.jsx(Si,{initialValue:i.animationSpeed,min:1,max:5,step:1.5,onChange:d=>{a({animationSpeed:d})}})]}),B.jsx(bp,{label:"export perfect loop",activeOnToggled:!1,checked:i.exportPerfectLoop,onToggle:d=>a({exportPerfectLoop:d}),children:B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["export duration (seconds) ",B.jsx(Si,{initialValue:i.exportDuration,min:1,max:30,step:1,onCommit:d=>{a({exportDuration:d})}})]})})]}),B.jsxs(Dl,{title:"Colors",iconName:"palette",children:[B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["mixing softness ",B.jsx(Si,{initialValue:i.mixingIntensity,min:0,max:1,step:.01,onChange:d=>a({mixingIntensity:d})})]}),B.jsxs("fieldset",{style:{borderColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"0.5rem",alignContent:"center"},children:[B.jsx("legend",{children:"particle colours"}),i.particleColors.map((d,h)=>B.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,justifyContent:"center",borderRadius:"var(--borderRadiusSmall)",border:"1px solid var(--gray3)",padding:"0.0rem 0.5rem"},children:[B.jsx(Vb,{colorMode:"rgb",color:{r:i.particleColors[h][0],g:i.particleColors[h][1],b:i.particleColors[h][2]},onChange:p=>o(h,[p.r,p.g,p.b])}),B.jsx(Kl,{iconName:"delete",onClick:()=>c(h)})]},h)),B.jsx($u,{text:"+ add colour",onClick:l})]})]}),B.jsxs(Dl,{title:"Lissajous Knot",iconName:"all_inclusive",children:[B.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",padding:"1.5rem",borderWidth:"2px",backgroundColor:"var(--gray2)",borderRadius:"var(--borderRadiusSmall)",marginBottom:"1rem",alignItems:"center"},children:[B.jsx("div",{children:B.jsx(Kl,{iconName:"info",hoverBgColor:"var(--gray2)",color:"white"})}),B.jsxs("div",{children:[B.jsx("b",{style:{color:"white"},children:"What are Lissajous knots?"}),B.jsx("br",{}),"Lissajous knots are mathematical paths that are defined by equations involving sine and cosine functions. They are used here to create complex, looping paths on which color particles can move. Feel free to experiment with different parameters to create unique patterns."]})]}),B.jsx("div",{style:{},children:B.jsx(bp,{label:"display lissajous knot",checked:i.showLissajousFigure,onToggle:d=>a({showLissajousFigure:d}),children:B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[B.jsx(Xb,{value:i.lissajousParams,options:yt.map(d=>({label:`${d.params.a}:${d.params.b}`,value:d.params,integral:d.integral})),onChange:(d,h)=>{a({lissajousParams:d,lissajousIntegral:h})}}),B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["horizontal rotation ",B.jsx(Si,{initialValue:i.rotateHorizontal,min:0,max:360,step:1,onChange:d=>{a({rotateHorizontal:d})}})]}),B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["vertical rotation ",B.jsx(Si,{initialValue:i.rotateVertical,min:0,max:360,step:1,onChange:d=>{a({rotateVertical:d})}})]})]})})})]}),B.jsx(Dl,{title:"Effects",iconName:"star",children:B.jsx(B.Fragment,{children:B.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["noise intensity ",B.jsx(Si,{initialValue:i.noiseIntensity,min:0,max:1,step:.01,onChange:d=>{a({noiseIntensity:d})}})]})})})]})}function w2(){return B.jsx(b2,{})}class la{value;dependencyArray=[];constructor(a,o=[]){this.value=a,this.dependencyArray=o}__id;get id(){if(!this.__id)throw new Error("PreResource id not set yet");return this.__id}setId(a){this.__id=a}}function S2(i){const a={};function o(l,c){for(const[f,d]of Object.entries(l))if(f!=="data")if(d instanceof la){const h=[...c,f].join("/");a[h]=d}else o(d,[...c,f])}return o(i,[]),a}function E2(i){for(const[a,o]of Object.entries(i))o.setId(a);for(const a of Object.values(i)){const o=a.value.signature.type;if(o==="texture"||o==="rotating-texture"){const l=a.value.drawOps;for(const c of l){const f=c.vertices;if(f.stage!=="author"||f.resource.value.signature.type!=="vertices")throw new Error("DrawOp vertices must be a PreResource");c.vertices={stage:"render",resource:f.resource.id};const d=c.instances;if(d){if(d.stage!=="author"||d.resource.value.signature.type!=="instances")throw new Error("DrawOp instances must be a PreResource");c.instances={stage:"render",resource:d.resource.id}}for(const[h,p]of Object.entries(c.uniforms)){if(p.stage!=="author"||p.resource.value.signature.type!=="uniforms")throw new Error("DrawOp uniform bindings must be PreResources");c.uniforms[h]={stage:"render",resource:p.resource.id}}for(const[h,p]of Object.entries(c.textures)){const m=p.texture,v=["texture","rotating-texture","input-texture"];if(m.stage!=="author"||!v.includes(m.resource.value.signature.type))throw new Error("DrawOp texture bindings must be PreResources");p.texture={stage:"render",resource:m.resource.id}}}}}}function _2(i,a,o,l){const c={},f={},d={};for(const[h,p]of Object.entries(i)){let m=!1;a[h]&&a[h].signature!==p.value.signature&&(m=!0);const v=o[h];if(!v)m=!0;else{const b=p.dependencyArray;if(v.length!==b.length)console.error("Dependency array length mismatch for preResourceId:",h),m=!0;else for(let w=0;w<v.length;w++)if(v[w]!==b[w]){m=!0;break}}m?f[h]=p.dependencyArray:f[h]=v;const y=p.value.signature.type;if(y==="texture"||y==="rotating-texture"){const b=p.value.drawOps;for(let w=0;w<b.length;w++){const E=h+`/drawOp_${w}/vertices`,_=h+`/drawOp_${w}/fragments`;if(m){const S=b[w].vertexShaderData;if(S.stage!=="author")throw new Error("Expected author stage for vertex shader data");const T=S.data(),A=crypto.randomUUID();c[A]=T,d[E]=A,b[w].vertexShaderData={stage:"render",data:A};const O=b[w].fragmentShaderData;if(O.stage!=="author")throw new Error("Expected author stage for fragment shader data");const U=O.data(),H=crypto.randomUUID();c[H]=U,d[_]=H,b[w].fragmentShaderData={stage:"render",data:H}}else d[E]=l[E],d[_]=l[_],b[w].vertexShaderData={stage:"render",data:l[E]},b[w].fragmentShaderData={stage:"render",data:l[_]}}}if(y==="vertices"){const b=h+"/vertices",w=h+"/indices",E=p.value,_=p.value;if(m){const S=E.verticesData;if(S.stage!=="author")throw new Error("Expected author stage for vertices data");const T=S.data(),A=crypto.randomUUID();c[A]=T,d[b]=A,E.verticesData={stage:"render",data:A};const O=_.indicesData;if(O.stage!=="author")throw new Error("Expected author stage for indices data");const U=O.data(),H=crypto.randomUUID();c[H]=U,d[w]=H,_.indicesData={stage:"render",data:H}}else d[b]=l[b],d[w]=l[w],E.verticesData={stage:"render",data:l[b]},_.indicesData={stage:"render",data:l[w]}}if(y==="instances"){const b=h+"/instances",w=p.value;if(m){const E=w.instancesData;if(E.stage!=="author")throw new Error("Expected author stage for instances data");const _=E.data(),S=crypto.randomUUID();c[S]=_,d[b]=S,w.instancesData={stage:"render",data:S}}else d[b]=l[b],w.instancesData={stage:"render",data:l[b]}}if(y==="uniforms"){const b=h+"/uniforms",w=p.value;if(m){const E=w.uniformsData;if(E.stage!=="author")throw new Error("Expected author stage for uniforms data");const _=E.data(),S=crypto.randomUUID();c[S]=_,d[b]=S,w.uniformsData={stage:"render",data:S}}else d[b]=l[b],w.uniformsData={stage:"render",data:l[b]}}if(y==="input-texture"){const b=h+"/input-texture",w=p.value;if(m){const E=w.inputTextureData;if(E.stage!=="author")throw new Error("Expected author stage for input texture data");const _=E.data(),S=crypto.randomUUID();c[S]=_,d[b]=S,w.textureData={stage:"render",data:S}}else d[b]=l[b],w.textureData={stage:"render",data:l[b]}}}return[c,f,d]}function T2(i,a){const o=[],l=a[i];if(!l)throw new Error(`Resource with ID ${i} not found in graph`);switch(l.signature.type){case"vertices":o.push(l.verticesData.data),o.push(l.indicesData.data);break;case"instances":o.push(l.instancesData.data);break;case"uniforms":o.push(l.uniformsData.data);break;case"input-texture":o.push(l.textureData.data);break;case"rotating-texture":case"texture":break;default:throw new Error(`Unknown resource type: ${l.signature.type}`)}return o}class C2{assetRegistry={graphId:"",blobIds:[]};blobMap={};dependencyArrays={};graph={};constructor(){}update(a){const o=S2(a);E2(o);const[l,c,f]=_2(o,this.graph,this.dependencyArrays,this.blobMap);this.dependencyArrays=c,this.blobMap=f;const d=crypto.randomUUID(),h={};for(const[y,b]of Object.entries(o))h[y]=b.value;const p=Object.entries(h).map(([y,b])=>T2(y,h)).flat(1),m=[...this.assetRegistry.blobIds].filter(y=>!p.includes(y)),v=[this.assetRegistry.graphId,...m];return this.assetRegistry={graphId:d,blobIds:p},{graphId:this.assetRegistry.graphId,addedAssets:{...l,[d]:h},deletedAssetIds:v}}}function z2(i){const a=[];if(i.vertices.stage!=="render")throw new Error("Only render stage draw ops are supported");if(a.push(i.vertices.resource),i.instances&&i.instances.stage!=="render")throw new Error("Only render stage draw ops are supported");i.instances&&a.push(i.instances.resource);for(const o of Object.values(i.uniforms)){if(o.stage!=="render")throw new Error("Only render stage draw ops are supported");a.push(o.resource)}if(i.textures)for(const o of Object.values(i.textures)){if(o.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");a.push(o.texture.resource)}return a}function A2(i,a){const o=[];for(const[l,c]of Object.entries(a))switch(c.signature.type){case"vertices":case"instances":case"uniforms":case"input-texture":break;case"rotating-texture":case"texture":for(const f of c.drawOps)if(z2(f).includes(i)){o.push(l);break}break;default:throw new Error(`Unknown resource type: ${c.signature.type}`)}return o}function Ye(i,a,o){return`${i}::${JSON.stringify(a)}${o!==void 0?`::${o}`:""}`}function R2(i,a,o){function l(c){const f=A2(c,a);for(const d of f)if(!o[d]){const h=Ye(d,a[d].signature);o[h]=!0,l(d)}}l(i)}function M2(i,a,o){const l={};for(let c of Object.keys(a)){const f=Ye(c,a[c].signature);if(o[f]){l[f]=!0;continue}let d=!1;const h=i[c];h||(d=!0);const p=a[c];JSON.stringify(h)!==JSON.stringify(p)&&(d=!0),d&&(l[f]=!0),R2(c,a,l)}return l}function O2(i,a){const o=a[i];if(!o)throw new Error(`Resource ${i} not found in graph`);switch(o.signature.type){case"vertices":case"instances":case"uniforms":case"input-texture":return[];case"rotating-texture":case"texture":const l=[];for(const c of o.drawOps){if(c.vertices.stage!=="render")throw new Error("Only render stage draw ops are supported");if(l.push(c.vertices.resource),c.instances){if(c.instances.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(c.instances.resource)}for(const f of Object.values(c.uniforms)){if(f.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(f.resource)}if(c.textures)for(const f of Object.values(c.textures)){if(f.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(f.texture.resource)}}return l;default:throw new Error(`Unknown resource type: ${o.signature.type}`)}}function _f(i,a){const o=new Set,l=new Set,c=[];function f(d){if(!o.has(d)){if(l.has(d))throw new Error("Graph has cycles, topological sort not possible");if(l.add(d),i[d]){const h=O2(d,i);for(const p of h)f(p)}else throw new Error(`Resource ${d} not found in graph`);l.delete(d),o.add(d),c.push(d)}}return f(a),c}function of(i){return JSON.stringify(i)}function Ep(i,a,o,l,c,f){if(!(a in i))i[a]={firstUseRenderPassIdx:o,lastUseRenderPassIdx:c,firstUseDrawOpIdx:l,lastUseDrawOpIdx:f};else{const d=i[a];d.firstUseDrawOpIdx=d.firstUseRenderPassIdx===o?Math.min(d.firstUseDrawOpIdx,l):l,d.lastUseDrawOpIdx=d.lastUseRenderPassIdx===c?Math.max(d.lastUseDrawOpIdx,f):f,d.firstUseRenderPassIdx=Math.min(d.firstUseRenderPassIdx,o),d.lastUseRenderPassIdx=Math.max(d.lastUseRenderPassIdx,c)}}function Yg(i){const a=i.filter(([l,c])=>c.signature.type==="texture").map(([l,c])=>l),o={};for(let l=0;l<i.length;l++){const c=i[l][0];a.includes(c)&&Ep(o,c,l,0,l,i[l][1].drawOps.length-1);for(let f=0;f<i[l][1].drawOps.length;f++){const d=i[l][1].drawOps[f],h=Object.values(d.textures).map(p=>{if(p.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");return p.texture.resource});for(const p of h)a.includes(p)&&Ep(o,c,l,f,l,f)}}return o}function fs(i,a,o){return{type:"program",fragmentShader:o[i.fragmentShaderData.data],vertexShader:o[i.vertexShaderData.data],vertexSignature:a[i.vertices.resource].signature,instanceSignature:i.instances?a[i.instances.resource].signature:void 0,uniformSignatures:Object.fromEntries(Object.entries(i.uniforms).map(([l,c])=>[l,a[c.resource].signature])),textures:Object.fromEntries(Object.entries(i.textures).map(([l,c])=>[l,{textureSignature:a[c.texture.resource].signature,sampler:c.sampler}]))}}function B2(i,a,o){const l={namedResources:{},freeResources:{}};for(const[p,m]of Object.entries(a))if(["input-texture","vertices","instances","uniforms"].includes(m.signature.type)&&(l.namedResources[Ye(p,m.signature)]=m.signature),m.signature.type==="rotating-texture")for(let v=0;v<m.signature.historyLength;v++)l.namedResources[Ye(p,m.signature,v)]=m.signature;const c=_f(a,o).filter(p=>a[p].signature.type==="texture"||a[p].signature.type==="rotating-texture").map(p=>[p,a[p]]),f=new Set;for(const p of c)for(const m of p[1].drawOps){const v=fs(m,a,i),y=Ye("program",v);f.add(y),l.namedResources[y]=v}const d=Yg(c),h=new Set;for(const p of Object.keys(d)){const m=a[p].signature,v=of(m);h.add(v)}for(const p of h){const m=Object.entries(d).filter(([y,b])=>{const w=a[y].signature;return of(w)===p});let v=0;for(let y=0;y<c.length;y++)for(let b=0;b<c[y][1].drawOps.length;b++){let w=0;for(const[E,_]of m)_.firstUseRenderPassIdx<=y&&_.lastUseRenderPassIdx>=y&&_.firstUseDrawOpIdx<=b&&_.lastUseDrawOpIdx>=b&&w++;w>v&&(v=w)}l.freeResources[p]=[a[m[0][0]].signature,v+1]}return l}function N2(i,a,o){const l={namedResources:{...i.namedResources},freeResources:{...i.freeResources}};for(const c in a.namedResources)if(!(c in l.namedResources)){const f=a.namedResources[c],d=o.createResource(f);l.namedResources[c]={persistent:!0,gpuResource:d,signature:f}}for(const c in l.namedResources)l.namedResources[c].persistent&&(c in a.namedResources||(o.releaseResource(l.namedResources[c].gpuResource),delete l.namedResources[c]));for(const c in a.freeResources){const f=a.freeResources[c][0],d=a.freeResources[c][1];c in l.freeResources||(l.freeResources[c]={signature:f,gpuResources:[]});let h=l.freeResources[c].gpuResources.length;const p=Object.values(l.namedResources).filter(m=>!m.persistent&&JSON.stringify(m.signature)===JSON.stringify(f)).map(m=>m.gpuResource);for(h+=p.length;h!==d;)if(h<d){const m=o.createResource(f);l.freeResources[c].gpuResources.push(m),h++}else if(l.freeResources[c].gpuResources.length>0){const m=l.freeResources[c].gpuResources.pop();o.releaseResource(m),h--}else{const m=p.pop();o.releaseResource(m),h--}for(const m in l.freeResources)if(!(m in a.freeResources)){for(const y of l.freeResources[m].gpuResources)o.releaseResource(y);const v=Object.values(l.namedResources).filter(y=>!y.persistent&&JSON.stringify(y.signature)===JSON.stringify(l.freeResources[m].signature)).map(y=>y.gpuResource);for(const y of v)o.releaseResource(y);delete l.freeResources[m]}}return l}function qg(i){return{instanceProviderName:"WebGLInstanceProvider",instanceStructure:Object.keys(i.attributes).map(a=>({name:a,type:i.attributes[a]})),maxInstanceCount:i.maxInstanceCount}}class Gg{gl;instanceProviderSignature;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");const l=qg(o);this.instanceProviderSignature=l,this.setup()}instanceBuffer=null;instanceStructureObject=[];dispose(){this.instanceBuffer&&(this.gl.deleteBuffer(this.instanceBuffer),this.instanceBuffer=null)}setup(){if(this.instanceBuffer=this.gl.createBuffer(),!this.instanceBuffer)throw new Error("Failed to create instance buffer");const a=[];for(let o=0;o<this.instanceProviderSignature.instanceStructure.length;o++){const l=this.instanceProviderSignature.instanceStructure[o];a.push({...l,layoutIdx:o})}this.instanceStructureObject=a,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.instanceBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.instanceProviderSignature.maxInstanceCount*this.getBufferRowSize(this.instanceStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}getPropertyTypeSize(a){switch(a){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${a}`)}}getBufferRowSize(a){return a.reduce((o,l)=>{switch(l.type){case"float":case"int":return o+4;case"vec2":return o+8;case"vec4":return o+16;default:throw new Error(`Unknown vertex type: ${l.type}`)}},0)}setData(a,o,l,c){const f=new ArrayBuffer(this.getBufferRowSize(o)*l);for(let d=0;d<l;d++)for(const h of Object.keys(a)){const p=o.find(m=>m.name===h);if(p){const m=d*this.getBufferRowSize(o)+this.getBufferRowSize(o.slice(0,o.indexOf(p))),v=new DataView(f);let y;switch(p.type){case"float":case"vec2":case"vec4":y=(E,_)=>v.setFloat32(_,E,!0);break;case"int":y=(E,_)=>v.setInt32(_,E,!0);break;default:throw new Error(`Unknown vertex type: ${p.type}`)}const b=a[h],w=this.getPropertyTypeSize(p.type);for(let E=0;E<w;E++)E<b.length&&y(b[d*w+E],m+E*4)}}if(!c)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,f),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setInstanceData(a){if(!this.instanceBuffer)throw new Error("Instance buffer is not initialized. Call setup() first.");this.setData(a,this.instanceStructureObject,this.instanceProviderSignature.maxInstanceCount,this.instanceBuffer)}}function Xg(i){return{vertexProviderName:"WebGLVertexProvider",vertexStructure:Object.keys(i.attributes).map(a=>({name:a,type:i.attributes[a]})),maxVertexCount:i.maxVertexCount,maxTriangleCount:i.maxTriangleCount}}class Qg{gl;vertexProviderSignature;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.vertexProviderSignature=Xg(o),this.setup()}dispose(){this.vertexBuffer&&(this.gl.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),this.indexBuffer&&(this.gl.deleteBuffer(this.indexBuffer),this.indexBuffer=null)}vertexBuffer=null;indexBuffer=null;vertexStructureObject=[];setup(){if(this.vertexBuffer=this.gl.createBuffer(),this.indexBuffer=this.gl.createBuffer(),!this.vertexBuffer||!this.indexBuffer)throw new Error("Failed to create vertex or index buffer");const a=[];for(let l=0;l<this.vertexProviderSignature.vertexStructure.length;l++){const c=this.vertexProviderSignature.vertexStructure[l];a.push({...c,layoutIdx:l})}this.vertexStructureObject=a,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexProviderSignature.maxVertexCount*this.getBufferRowSize(this.vertexStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const o=this.vertexProviderSignature.maxTriangleCount*3;this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o*Uint16Array.BYTES_PER_ELEMENT,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}getPropertyTypeSize(a){switch(a){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${a}`)}}getBufferRowSize(a){return a.reduce((o,l)=>{switch(l.type){case"float":case"int":return o+4;case"vec2":return o+8;case"vec4":return o+16;default:throw new Error(`Unknown vertex type: ${l.type}`)}},0)}setData(a,o,l,c){const f=new ArrayBuffer(this.getBufferRowSize(o)*l);for(let d=0;d<l;d++)for(const h of Object.keys(a)){const p=o.find(m=>m.name===h);if(p){const m=d*this.getBufferRowSize(o)+this.getBufferRowSize(o.slice(0,o.indexOf(p))),v=new DataView(f);let y;switch(p.type){case"float":case"vec2":case"vec4":y=(E,_)=>v.setFloat32(_,E,!0);break;case"int":y=(E,_)=>v.setInt32(_,E,!0);break;default:throw new Error(`Unknown vertex type: ${p.type}`)}const b=a[h],w=this.getPropertyTypeSize(p.type);for(let E=0;E<w;E++)E<b.length&&y(b[d*w+E],m+E*4)}}if(!c)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,f),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setVertexData(a){if(!this.vertexBuffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.setData(a,this.vertexStructureObject,this.vertexProviderSignature.maxVertexCount,this.vertexBuffer)}setIndexData(a){if(!this.indexBuffer)throw new Error("Index buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const o=new Uint16Array(a);this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,o),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}}function Zg(i,a){return{uniformProviderName:a||"WebGLUniformProvider",uniformStructure:Object.keys(i.bindings).map(o=>({name:o,type:i.bindings[o]}))}}class Kg{gl;uniformStructure;uniformProviderName;constructor(a,o){const{uniformProviderName:l,uniformStructure:c}=Zg(o);if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.uniformProviderName=l,this.uniformStructure=c,this.setup()}dispose(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=null)}buffer=null;setup(){const a=this.gl.createBuffer();if(!a)throw new Error("Failed to create uniform buffer");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,a),this.gl.bufferData(this.gl.UNIFORM_BUFFER,this.uniformBufferSize,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null),this.buffer=a}getUniformSize(a){const o=this.uniformStructure.find(c=>c.name===a);if(!o)throw new Error(`Uniform ${a} not found in structure`);const l=o.type;switch(l){case"float":return 4;case"vec2":return 8;case"vec3":return 16;case"vec4":return 16;case"mat3":case"mat3x3":return 64;case"mat4":case"mat4x4":return 64;case"int":return 4;case"ivec2":return 8;case"ivec3":return 16;case"ivec4":return 16;default:throw new Error(`Unknown uniform type: ${l}`)}}getUniformType(a){const o=this.uniformStructure.find(c=>c.name===a);if(!o)throw new Error(`Uniform ${a} not found in structure`);const l=o.type;switch(l){case"float":case"vec2":case"vec3":case"vec4":case"mat3":case"mat3x3":case"mat4":case"mat4x4":return"float";case"int":case"ivec2":case"ivec3":case"ivec4":return"int";default:throw new Error(`Unknown uniform type: ${l}`)}}getUniformOffset(a){let o=0;for(let l=0;l<this.uniformStructure.length;l++){const c=this.uniformStructure[l];if(c.name===a)return o;o+=this.getUniformSize(c.name)}throw new Error(`Uniform ${a} not found in structure`)}get uniformBufferSize(){const a=this.uniformStructure.reduce((o,l)=>{const c=this.getUniformSize(l.name);return o+c},0);return Math.ceil(a/16)*16}setUniforms(a){if(!this.buffer)throw new Error("Uniform buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,this.buffer);for(const o of Object.keys(a)){const l=a[o],c=this.getUniformOffset(o),f=this.getUniformSize(o),d=this.getUniformType(o);if(Array.isArray(l)){if(l.length*4!==f)throw new Error(`Uniform ${o} has incorrect size. Expected ${f/4} elements, got ${l.length}`);const h=d==="int"?new Int32Array(l):new Float32Array(l);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,c,h)}else if(typeof l=="number"){if(f!==4)throw new Error(`Uniform ${o} has incorrect size. Expected ${f/4} elements, got 1`);const h=d==="int"?new Int32Array([l]):new Float32Array([l]);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,c,h)}else throw new Error(`Uniform ${o} has unsupported type. Expected number or array, got ${typeof l}`)}this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null)}}const Hu=(i,a)=>{switch(i){case"RGBA8":return{internalFormat:a.RGBA8,format:a.RGBA,type:a.UNSIGNED_BYTE};case"R8":return{internalFormat:a.R8,format:a.RED,type:a.UNSIGNED_BYTE};case"R32F":return{internalFormat:a.R32F,format:a.RED,type:a.FLOAT};case"RGBA32F":return{internalFormat:a.RGBA32F,format:a.RGBA,type:a.FLOAT};default:throw new Error("Unknown texture type")}};function U2(i){return{shape:[i.width,i.height],type:i.format.toUpperCase(),createFramebuffer:i.type==="texture"||i.type==="rotating-texture"}}class Wg{description;gl;constructor(a,o){this.gl=a,this.description=U2(o),this.setup()}dispose(){this.framebuffer&&(this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteRenderbuffer(this.depthRenderbuffer),this.framebuffer=null,this.depthRenderbuffer=null),this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}framebuffer=null;texture=null;depthRenderbuffer=null;setup(){const{internalFormat:a,format:o,type:l}=Hu(this.description.type,this.gl);if(this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,this.description.shape[0],this.description.shape[1],0,o,l,null),this.description.createFramebuffer){if(this.framebuffer=this.gl.createFramebuffer(),!this.framebuffer)throw new Error("Failed to create framebuffer");this.depthRenderbuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthRenderbuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.description.shape[0],this.description.shape[1]),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthRenderbuffer);const c=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(c!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error(`Framebuffer is not complete: ${c}`);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}this.gl.bindTexture(this.gl.TEXTURE_2D,null)}setData(a){if(!this.texture)throw new Error("Texture not initialized");const{format:o,type:l}=Hu(this.description.type,this.gl),[c,f]=this.description.shape,d=this.gl;if(d.bindTexture(d.TEXTURE_2D,this.texture),d.pixelStorei(d.UNPACK_ALIGNMENT,1),a instanceof HTMLImageElement){const{internalFormat:h}=Hu(this.description.type,d);d.texImage2D(d.TEXTURE_2D,0,h,o,l,a)}else if(a instanceof Float32Array||a instanceof Uint8Array)d.texSubImage2D(d.TEXTURE_2D,0,0,0,c,f,o,l,a);else{let h=null;this.description.type==="RGBA8"||this.description.type==="R8"?h=new Uint8Array(a):(this.description.type==="R32F"||this.description.type==="RGBA32F")&&(h=new Float32Array(a)),h&&d.texSubImage2D(d.TEXTURE_2D,0,0,0,c,f,o,l,h)}d.bindTexture(d.TEXTURE_2D,null)}}function D2(i){return{vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniformProviderSignatures:Object.entries(i.uniformSignatures).map(([a,o])=>Zg(o,a)),vertexProviderSignature:Xg(i.vertexSignature),instanceProviderSignature:i.instanceSignature?qg(i.instanceSignature):void 0,textureNames:Object.keys(i.textures)}}function _p(i){let a=`layout(std140) uniform ${i.uniformProviderName} {
`;for(const o of i.uniformStructure)a+=`    ${o.type} ${o.name};
`;return a+=`};
`,a}function L2(i,a){let o="";for(let l=0;l<i.vertexStructure.length;l++){const c=i.vertexStructure[l];o+=`layout(location = ${l}) in ${c.type} ${c.name};
`}if(a)for(let l=0;l<a.instanceStructure.length;l++){const c=a.instanceStructure[l];o+=`layout(location = ${l+i.vertexStructure.length}) in ${c.type} ${c.name};
`}return o}class j2{gl;programDescription;program=null;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.programDescription=D2(o),this.setup()}dispose(){this.program&&(this.gl.deleteProgram(this.program),this.program=null)}setup(){const a=`#version 300 es
        precision highp float;
        precision highp int;
        ${this.programDescription.uniformProviderSignatures.map(f=>_p(f)).join(`
`)}
        ${L2(this.programDescription.vertexProviderSignature,this.programDescription.instanceProviderSignature)}
        ${this.programDescription.textureNames.map(f=>`uniform sampler2D ${f};`).join(`
`)}
        ${this.programDescription.vertexShader}
        `,o=`#version 300 es
        precision highp float;
        precision highp int;
        out vec4 outColor;
        ${this.programDescription.uniformProviderSignatures.map(f=>_p(f)).join(`
`)}
        ${this.programDescription.textureNames.map(f=>`uniform sampler2D ${f};`).join(`
`)}
        ${this.programDescription.fragmentShader}
        `,l=this.gl.createShader(this.gl.VERTEX_SHADER);if(!l)throw new Error("Failed to create vertex shader");if(this.gl.shaderSource(l,a),this.gl.compileShader(l),!this.gl.getShaderParameter(l,this.gl.COMPILE_STATUS)){const f=this.gl.getShaderInfoLog(l);throw this.gl.deleteShader(l),console.log(a),new Error(`Vertex shader compilation failed: ${f}`)}const c=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(!c)throw new Error("Failed to create fragment shader");if(this.gl.shaderSource(c,o),this.gl.compileShader(c),!this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS)){const f=this.gl.getShaderInfoLog(c);throw this.gl.deleteShader(c),console.log(o),new Error(`Fragment shader compilation failed: ${f}`)}if(this.program=this.gl.createProgram(),!this.program)throw new Error("Failed to create program");if(this.gl.attachShader(this.program,l),this.gl.attachShader(this.program,c),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){const f=this.gl.getProgramInfoLog(this.program);throw this.gl.deleteProgram(this.program),new Error(`Program linking failed: ${f}`)}this.gl.deleteShader(l),this.gl.deleteShader(c)}}function P2(i,a,o,l,c,f){const d=Ye(i,a.signature),h=f.namedResources[d].gpuResource,p=c.getResource(h);switch(a.signature.type){case"vertices":if(!(p instanceof Qg))throw new Error(`uploadResourceData: Expected ${i} to be VertexProvider.`);const m=l[a.verticesData.data],v=l[a.indicesData.data];p.setVertexData(m),p.setIndexData(v);break;case"instances":if(!(p instanceof Gg))throw new Error(`uploadResourceData: Expected ${i} to be InstanceProvider.`);const y=l[a.instancesData.data];p.setInstanceData(y);break;case"uniforms":if(!(p instanceof Kg))throw new Error(`uploadResourceData: Expected ${i} to be UniformProvider.`);const b=l[a.uniformsData.data];p.setUniforms(b);break;case"input-texture":if(!(p instanceof Wg))throw new Error(`uploadResourceData: Expected ${i} to be TextureProvider.`);const w=l[a.textureData.data];p.setData(w);break;default:throw new Error(`uploadResourceData: Not an input resource. Wrong resource signature type ${a.signature.type}`)}}function F2(i,a,o,l,c,f){const d={...c},h=i[a],p=["input-texture","vertices","instances","uniforms"],m=_f(h,o).filter(v=>p.includes(h[v].signature.type)).map(v=>{const y=h[v].signature,b=Ye(v,y);return[v,b]}).filter(([v,y])=>Object.keys(d).includes(y));for(const[v,y]of m)delete d[y];for(const[v,y]of m){const b=h[v],w=b.signature,E=Ye(v,w);l.namedResources[E],P2(v,b,i[a],i,f,l)}return d}function k2(i,a){for(const[o,l]of Object.entries(i)){const c=l.signature;if(Ye(o,c)===a)return o}throw new Error(`Could not find virtual resource for physical id ${a}`)}function H2(i,a,o,l,c,f,d){const h=of(o),p=Ye(a,o),m=l.freeResources[h];if(l.namedResources[p]!==void 0)return l.namedResources[p].gpuResource;if(m.gpuResources.length>0){const v=m.gpuResources.pop();return l.namedResources[p]={signature:o,persistent:!1,gpuResource:v},v}else{const v=Object.entries(l.namedResources).filter(([w,E])=>JSON.stringify(E.signature)===JSON.stringify(o)).map(([w,E])=>w).filter(w=>{const E=k2(i,w),_=c[E];return _.lastUseRenderPassIdx<f||_.firstUseRenderPassIdx>f||_.lastUseRenderPassIdx===f&&_.lastUseDrawOpIdx<d});if(v.length===0)throw new Error("No available transient texture could be found for allocation. This should never happen.");const y=v[0],b=l.namedResources[y].gpuResource;return delete l.namedResources[y],l.namedResources[p]={signature:o,persistent:!1,gpuResource:b},b}}function I2(i,a,o,l,c,f,d,h){const p=fs(o,a,h),m=Ye("program",p),v=l.namedResources[m].gpuResource,y=i.getResource(v),b=o.textures;let w=0;for(const[E,_]of Object.entries(b))V2(E,_,w,i,a,o,l,c,f,d,y),w++}function V2(i,a,o,l,c,f,d,h,p,m,v){const y=l.gl,b=a.texture.resource,w=c[b].signature,E=Ye(b,w),_=d.namedResources[E].gpuResource,S=l.getResource(_);y.useProgram(v.program);const T=y.getUniformLocation(v.program,i);if(T===null)throw new Error("Something went wrong");y.activeTexture(y.TEXTURE0+o),y.bindTexture(y.TEXTURE_2D,S.texture);const A=a.sampler,O=A.filter==="linear"?y.LINEAR:y.NEAREST,U=A.wrap==="repeat"?y.REPEAT:y.CLAMP_TO_EDGE;y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,O),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,O),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,U),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,U),y.uniform1i(T,o)}function Y2(i,a,o,l,c){const f=o.uniforms,d=fs(o,a,c),h=Ye("program",d),p=l.namedResources[h].gpuResource,m=i.getResource(p),v=i.gl;let y=0;for(const[b,w]of Object.entries(f)){const E=w.resource,_=a[E].signature,S=Ye(E,_),T=l.namedResources[S].gpuResource,A=i.getResource(T);v.bindBuffer(v.UNIFORM_BUFFER,A.buffer),v.bindBufferBase(v.UNIFORM_BUFFER,y,A.buffer);const O=v.getUniformBlockIndex(m.program,b);v.uniformBlockBinding(m.program,O,y),y++}}function Tp(i){switch(i){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${i}`)}}function Cp(i,a){switch(i){case"float":case"vec2":case"vec4":return a.FLOAT;case"int":return a.INT;default:throw new Error(`Unknown vertex type: ${i}`)}}function Vl(i){return i.reduce((a,o)=>{switch(o.type){case"float":case"int":return a+4;case"vec2":return a+8;case"vec4":return a+16;default:throw new Error(`Unknown vertex type: ${o.type}`)}},0)}function q2(i,a,o,l,c){const f=i.gl,d=a[o].signature,h=Ye(o,d),p=c.namedResources[h].gpuResource,m=i.getResource(p),v=f.getParameter(f.MAX_VERTEX_ATTRIBS);for(let A=0;A<v;A++)f.disableVertexAttribArray(A),f.vertexAttribDivisor(A,0);f.bindBuffer(f.ARRAY_BUFFER,m.vertexBuffer),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,m.indexBuffer);const y=m.vertexStructureObject;for(let A=0;A<y.length;A++){const O=y[A],U=O.layoutIdx;f.enableVertexAttribArray(U),f.vertexAttribPointer(U,Tp(O.type),Cp(O.type,f),!1,Vl(y),Vl(y.slice(0,A))),f.enableVertexAttribArray(U)}if(f.bindBuffer(f.ARRAY_BUFFER,null),!l)return;const b=a[l].signature,w=Ye(l,b),E=c.namedResources[w].gpuResource,_=i.getResource(E),S=y.length;f.bindBuffer(f.ARRAY_BUFFER,_.instanceBuffer);const T=_.instanceStructureObject;for(let A=0;A<T.length;A++){const O=T[A],U=S+O.layoutIdx;f.enableVertexAttribArray(U),f.vertexAttribPointer(U,Tp(O.type),Cp(O.type,f),!1,Vl(T),Vl(T.slice(0,A))),f.enableVertexAttribArray(U),f.vertexAttribDivisor(U,1)}f.bindBuffer(f.ARRAY_BUFFER,null)}function G2(i,a,o,l,c,f,d,h){const p=f.gl;p.disable(p.BLEND),p.disable(p.DEPTH_TEST),i.depthTest===!0&&(p.disable(p.BLEND),p.enable(p.DEPTH_TEST)),i.blendMode!==void 0&&(i.blendMode==="additive"&&(p.enable(p.BLEND),p.blendFunc(p.SRC_ALPHA,p.ONE)),i.blendMode==="alpha"&&(p.enable(p.BLEND),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA)));const m=l[i.vertices.resource],v=i.instances!==void 0,y=v?l[i.instances.resource]:void 0;q2(f,l,i.vertices.resource,i.instances?.resource,c),Y2(f,l,i,c,h),I2(f,l,i,c,d,a,o,h);const b=fs(i,l,h),w=Ye("program",b),E=c.namedResources[w].gpuResource,_=f.getResource(E);p.useProgram(_.program),v?p.drawElementsInstanced(p.TRIANGLES,m.triangleCount*3,p.UNSIGNED_SHORT,0,y.instanceCount):p.drawElements(p.TRIANGLES,m.triangleCount*3,p.UNSIGNED_SHORT,0),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null)}function X2(i,a,o,l,c,f,d){const h=c.gl,p=a[i],m=p.signature,v=m.type==="rotating-texture",y=Ye(i,m,v?0:void 0),b=v?o.namedResources[y].gpuResource:H2(a,i,m,o,l,f,0),w=c.getResource(b);h.viewport(0,0,m.width,m.height),h.bindFramebuffer(h.FRAMEBUFFER,w.framebuffer),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.depthFunc(h.LEQUAL),["r32f","r16f","rgba32f","rgba16f"].includes(m.format)&&(h.disable(h.BLEND),h.disable(h.DEPTH_TEST));let E=0;for(const _ of p.drawOps)G2(_,f,E,a,o,c,l,d),E++}function Q2(i,a,o,l,c,f){const d=Ye(o,i[a][o].signature),h=l.namedResources[d]!==void 0,p=c[d]!==void 0;if(h&&!p)return console.log("Skipping render passes, target texture is resident and not dirty"),[c,l];const m={...c},v={namedResources:{...l.namedResources},freeResources:{...l.freeResources}},y=_f(i[a],o).filter(E=>["rotating-texture","texture"].includes(i[a][E].signature.type)).filter((E=>{const _=i[a][E].signature,S=Ye(E,_),T=v.namedResources[S]!==void 0;return m[S]!==void 0||!T})).map(E=>[E,i[a][E]]),b=Yg(y);let w=0;for(const[E,_]of y){X2(E,i[a],v,b,f,w,i),w++;const S=Ye(E,_.signature);m[S]&&delete m[S]}return[m,v]}function Z2(i,a,o,l){const c=o[l].signature,f=Ye(l,c),d=a.namedResources[f].gpuResource,h=i.getResource(d),p=i.gl;p.bindFramebuffer(p.READ_FRAMEBUFFER,h.framebuffer),p.bindFramebuffer(p.DRAW_FRAMEBUFFER,null);const m=p.canvas;p.blitFramebuffer(0,0,c.width,c.height,0,0,m.width,m.height,p.COLOR_BUFFER_BIT,p.LINEAR)}function K2(i,a,o,l){const c=o[l].signature,f=Ye(l,c),d=a.namedResources[f].gpuResource,h=i.getResource(d),p=i.gl;p.bindFramebuffer(p.FRAMEBUFFER,h.framebuffer);const m=c.width,v=c.height,y=new Uint8Array(m*v*4);p.readPixels(0,0,m,v,p.RGBA,p.UNSIGNED_BYTE,y),p.bindFramebuffer(p.FRAMEBUFFER,null);const b=m*4;for(let w=0;w<Math.floor(v/2);w++){const E=w*b,_=(v-w-1)*b;for(let S=0;S<b;S++){const T=y[E+S];y[E+S]=y[_+S],y[_+S]=T}}return y}class W2{GPUBackend;constructor(a){this.GPUBackend=a}assets;graphId;dirtyResources={};submit(a,o){const l=this.graphId,c=this.assets;this.graphId=a,this.assets=o;const f=M2(l?c[l]:{},o[a],this.dirtyResources);this.dirtyResources=f}physicalResourceMap={namedResources:{},freeResources:{}};synchronize(a){if(!this.graphId||!this.assets)throw new Error("No assets submitted to Drawing");const o=this.assets[this.graphId],l=B2(this.assets,o,a);this.physicalResourceMap=N2(this.physicalResourceMap,l,this.GPUBackend)}materialize(a){if(!this.graphId||!this.assets)throw new Error("No assets submitted to Drawing");{const o=F2(this.assets,this.graphId,a,this.physicalResourceMap,this.dirtyResources,this.GPUBackend);this.dirtyResources=o}{const[o,l]=Q2(this.assets,this.graphId,a,this.physicalResourceMap,this.dirtyResources,this.GPUBackend);this.dirtyResources=o,this.physicalResourceMap=l}}readback(a){if(!this.graphId||!this.assets)throw new Error("Error");return K2(this.GPUBackend,this.physicalResourceMap,this.assets[this.graphId],a)}capture(a){return this.synchronize(a),this.materialize(a),this.readback(a)}blit(a){if(!this.graphId||!this.assets)throw new Error("Error");Z2(this.GPUBackend,this.physicalResourceMap,this.assets[this.graphId],a)}draw(a){this.synchronize(a),this.materialize(a),this.blit(a)}}class $2{resources;gl;constructor(a){this.gl=a,this.gl.getExtension("EXT_color_buffer_float"),this.resources=new Map}getResource(a){const o=this.resources.get(a);if(!o)throw new Error(`GPUBackend: getResource - resource with id ${a} not found`);return o}createResource(a){const o=crypto.randomUUID();switch(a.type){case"vertices":this.resources.set(o,new Qg(this.gl,a));break;case"instances":this.resources.set(o,new Gg(this.gl,a));break;case"uniforms":this.resources.set(o,new Kg(this.gl,a));break;case"program":this.resources.set(o,new j2(this.gl,a));break;case"input-texture":case"texture":case"rotating-texture":this.resources.set(o,new Wg(this.gl,a));break;default:throw new Error(`GPUBackend: createResource not implemented for signature type ${a.type}`)}return o}releaseResource(a){const o=this.resources.get(a);if(!o)throw new Error(`GPUBackend: releaseResource - resource with id ${a} not found`);o.dispose(),this.resources.delete(a)}}function J2(i,a,o){i={type:"vertices",attributes:{},maxVertexCount:1e3,maxTriangleCount:1e3,...i};const l={signature:i,triangleCount:a.triangleCount,verticesData:{stage:"author",data:()=>{const c=a.vertices(),f={};for(const d in i.attributes)f[d]=c.map(h=>typeof h[d]=="number"?[h[d]]:h[d]),f[d]=f[d].flat();return f}},indicesData:{stage:"author",data:()=>a.indices()}};return new la(l,o)}function ew(i,a,o){i={type:"instances",maxInstanceCount:1e3,attributes:{},...i};const l={signature:i,instanceCount:a.count,instancesData:{stage:"author",data:()=>{const c=a.instances(),f={};for(const d in i.attributes)f[d]=c.map(h=>typeof h[d]=="number"?[h[d]]:h[d]),f[d]=f[d].flat();return f}}};return new la(l,o)}function tw(i,a,o){const l={signature:{type:"uniforms",bindings:i||{}},uniformsData:{stage:"author",data:a}};return new la(l,o)}function nw(i,a,o){return"historyLength"in i&&i.historyLength>1?aw(i,a,o):typeof a=="function"?rw(i,a,o):iw(i,a,o)}function iw(i,a,o){i={type:"texture",format:"rgba8",width:256,height:256,...i};const l={signature:i,drawOps:a};return new la(l,o)}function aw(i,a,o){i={type:"rotating-texture",format:"rgba8",width:256,height:256,historyLength:2,...i};const l={signature:i,drawOps:a};return new la(l,o)}function rw(i,a,o){i={type:"input-texture",format:"rgba8",width:256,height:256,...i};const l={signature:i,inputTextureData:{stage:"author",data:a}};return new la(l,o)}function ow(i,a,o,l,c){const f={uniforms:{},textures:{},...l||{}},d={uniforms:Object.fromEntries(Object.entries(f.uniforms).map(([h,p])=>[h,{stage:"author",resource:p}])),textures:Object.fromEntries(Object.entries(f.textures).map(([h,p])=>[h,{texture:{stage:"author",resource:p.texture},sampler:p.sampler}])),vertices:{stage:"author",resource:i},vertexShaderData:{stage:"author",data:a},fragmentShaderData:{stage:"author",data:o}};return f.instances&&(d.instances={stage:"author",resource:f.instances}),c?.depthTest!==void 0&&(d.depthTest=c.depthTest),c?.blendMode!==void 0&&(d.blendMode=c.blendMode),d}const lw=J2,$g=ew,lf=tw,fo=nw,cr=ow;class sw{store;entryPointId=null;constructor(){this.store=new Map}transaction(a,o,l){for(const c of o)this.store.delete(c);for(const[c,f]of Object.entries(a))this.store.set(c,f);this.entryPointId=l,this.emitUpdate()}subscribers=new Set;subscribe(a){return this.subscribers.add(a),()=>{this.subscribers.delete(a)}}emitUpdate(){for(const a of this.subscribers)a(this.store,this.entryPointId)}}function cw(i,a){const o=Ve.useRef();Ve.useEffect(()=>{o.current=i},[i]),Ve.useEffect(()=>{let l,c;function f(){const h=Date.now()-l;l=Date.now(),d(),o.current&&o.current(h)}function d(){c=window.requestAnimationFrame(f)}return l=Date.now(),d(),()=>{window.cancelAnimationFrame(c)}},[a])}var uw=`flat out int v_numParticles;
out vec2 v_uv;
void main() {
    v_numParticles = numParticles;
    v_uv = position;
    gl_Position = vec4(position, 1.0, 1.0);
}`,fw=`#define FBM_OCTAVES 1
#define PI 3.14159265359
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef RANDOM_SCALE
#ifdef RANDOM_HIGHER_RANGE
#define RANDOM_SCALE vec4(.1031, .1030, .0973, .1099)
#else
#define RANDOM_SCALE vec4(443.897, 441.423, .0973, .1099)
#endif
#endif

#ifndef FNC_RANDOM
#define FNC_RANDOM
float random(in float x) {
#ifdef RANDOM_SINLESS
    x = fract(x * RANDOM_SCALE.x);
    x *= x + 33.33;
    x *= x + x;
    return fract(x);
#else
    return fract(sin(x) * 43758.5453);
#endif
}

float random(in vec2 st) {
#ifdef RANDOM_SINLESS
    vec3 p3  = fract(vec3(st.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 33.33);
    return fract((p3.x + p3.y) * p3.z);
#else
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
#endif
}

float random(in vec3 pos) {
#ifdef RANDOM_SINLESS
    pos  = fract(pos * RANDOM_SCALE.xyz);
    pos += dot(pos, pos.zyx + 31.32);
    return fract((pos.x + pos.y) * pos.z);
#else
    return fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
#endif
}

float random(in vec4 pos) {
#ifdef RANDOM_SINLESS
    pos = fract(pos * RANDOM_SCALE);
    pos += dot(pos, pos.wzxy + 33.33);
    return fract((pos.x + pos.y) * (pos.z + pos.w));
#else
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return fract(sin(dot_product) * 43758.5453);
#endif
}

vec2 random2(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec2 p) {
    vec3 p3 = fract(p.xyx * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec3 p3) {
    p3 = fract(p3 * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec3 random3(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx); 
}

vec3 random3(vec2 p) {
    vec3 p3 = fract(vec3(p.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yxz + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx);
}

vec3 random3(vec3 p) {
    p = fract(p * RANDOM_SCALE.xyz);
    p += dot(p, p.yxz + 19.19);
    return fract((p.xxy + p.yzz) * p.zyx);
}

vec4 random4(float p) {
    vec4 p4 = fract(p * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);   
}

vec4 random4(vec2 p) {
    vec4 p4 = fract(p.xyxy * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec3 p) {
    vec4 p4 = fract(p.xyzx * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec4 p4) {
    p4 = fract(p4  * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}
#endif
#ifndef FNC_SRANDOM
#define FNC_SRANDOM

float srandom(in float x) {
  return -1. + 2. * fract(sin(x) * 43758.5453);
}

float srandom(in vec2 st) {
  return -1. + 2. * fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float srandom(in vec3 pos) {
  return -1. + 2. * fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
}

float srandom(in vec4 pos) {
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return -1. + 2. * fract(sin(dot_product) * 43758.5453);
}

vec2 srandom2(in vec2 st) {
    const vec2 k = vec2(.3183099, .3678794);
    st = st * k + k.yx;
    return -1. + 2. * fract(16. * k * fract(st.x * st.y * (st.x + st.y)));
}

vec3 srandom3(in vec3 p) {
    p = vec3( dot(p, vec3(127.1, 311.7, 74.7)),
            dot(p, vec3(269.5, 183.3, 246.1)),
            dot(p, vec3(113.5, 271.9, 124.6)));
    return -1. + 2. * fract(sin(p) * 43758.5453123);
}

vec2 srandom2(in vec2 p, const in float tileLength) {
    p = mod(p, vec2(tileLength));
    return srandom2(p);
}

vec3 srandom3(in vec3 p, const in float tileLength) {
    p = mod(p, vec3(tileLength));
    return srandom3(p);
}

#endif
#ifndef FNC_CUBIC
#define FNC_CUBIC 
float cubic(const in float v) { return v*v*(3.0-2.0*v); }
vec2  cubic(const in vec2 v)  { return v*v*(3.0-2.0*v); }
vec3  cubic(const in vec3 v)  { return v*v*(3.0-2.0*v); }
vec4  cubic(const in vec4 v)  { return v*v*(3.0-2.0*v); }

float cubic(const in float v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    float v2 = v * v;
    float v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec2 cubic(const in vec2 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec2 v2 = v * v;
    vec2 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec3 cubic(const in vec3 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec3 v2 = v * v;
    vec3 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec4 cubic(const in vec4 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec4 v2 = v * v;
    vec4 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_GNOISE
#define FNC_GNOISE

float gnoise(float x) {
    float i = floor(x);  
    float f = fract(x);  
    return mix(random(i), random(i + 1.0), smoothstep(0.,1.,f)); 
}

float gnoise(vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);
    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));
    vec2 u = cubic(f);
    return mix( a, b, u.x) +
                (c - a)* u.y * (1.0 - u.x) +
                (d - b) * u.x * u.y;
}

float gnoise(vec3 p) {
    vec3 i = floor(p);
    vec3 f = fract(p);
    vec3 u = quintic(f);
    return -1.0 + 2.0 * mix( mix( mix( random(i + vec3(0.0,0.0,0.0)), 
                                        random(i + vec3(1.0,0.0,0.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,0.0)), 
                                        random(i + vec3(1.0,1.0,0.0)), u.x), u.y),
                            mix( mix( random(i + vec3(0.0,0.0,1.0)), 
                                        random(i + vec3(1.0,0.0,1.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,1.0)), 
                                        random(i + vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

float gnoise(vec3 p, float tileLength) {
    vec3 i = floor(p);
    vec3 f = fract(p);
            
    vec3 u = quintic(f);
        
    return mix( mix( mix( dot( srandom3(i + vec3(0.0,0.0,0.0), tileLength), f - vec3(0.0,0.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,0.0), tileLength), f - vec3(1.0,0.0,0.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,0.0), tileLength), f - vec3(0.0,1.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,0.0), tileLength), f - vec3(1.0,1.0,0.0)), u.x), u.y),
                mix( mix( dot( srandom3(i + vec3(0.0,0.0,1.0), tileLength), f - vec3(0.0,0.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,1.0), tileLength), f - vec3(1.0,0.0,1.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,1.0), tileLength), f - vec3(0.0,1.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,1.0), tileLength), f - vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

vec3 gnoise3(vec3 x) {
    return vec3(gnoise(x+vec3(123.456, 0.567, 0.37)),
                gnoise(x+vec3(0.11, 47.43, 19.17)),
                gnoise(x) );
}

#endif

#ifndef FBM_OCTAVES
#define FBM_OCTAVES 4
#endif

#ifndef FBM_NOISE_FNC
#define FBM_NOISE_FNC(UV) snoise(UV)
#endif

#ifndef FBM_NOISE2_FNC
#define FBM_NOISE2_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE3_FNC
#define FBM_NOISE3_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE_TILABLE_FNC
#define FBM_NOISE_TILABLE_FNC(UV, TILE) gnoise(UV, TILE)
#endif

#ifndef FBM_NOISE3_TILABLE_FNC
#define FBM_NOISE3_TILABLE_FNC(UV, TILE) FBM_NOISE_TILABLE_FNC(UV, TILE)
#endif

#ifndef FBM_NOISE_TYPE
#define FBM_NOISE_TYPE float
#endif

#ifndef FBM_VALUE_INITIAL
#define FBM_VALUE_INITIAL 0.0
#endif

#ifndef FBM_SCALE_SCALAR
#define FBM_SCALE_SCALAR 2.0
#endif

#ifndef FBM_AMPLITUDE_INITIAL
#define FBM_AMPLITUDE_INITIAL 0.5
#endif

#ifndef FBM_AMPLITUDE_SCALAR
#define FBM_AMPLITUDE_SCALAR 0.5
#endif

#ifndef FNC_FBM
#define FNC_FBM
FBM_NOISE_TYPE fbm(in vec2 st) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE2_FNC(st);
        st *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(in vec3 pos) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE3_FNC(pos);
        pos *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(vec3 p, float tileLength) {
    const float persistence = 0.5;
    const float lacunarity = 2.0;

    float amplitude = 0.5;
    FBM_NOISE_TYPE total = FBM_NOISE_TYPE(0.0);
    float normalization = 0.0;

    for (int i = 0; i < FBM_OCTAVES; ++i) {
        float noiseValue = FBM_NOISE3_TILABLE_FNC(p, tileLength * lacunarity * 0.5) * 0.5 + 0.5;
        total += noiseValue * amplitude;
        normalization += amplitude;
        amplitude *= persistence;
        p = p * lacunarity;
    }

    return total / normalization;
}
#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_CNOISE
#define FNC_CNOISE

float cnoise(in vec2 P) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod289(Pi); 
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float cnoise(in vec3 P) {
    vec3 Pi0 = floor(P); 
    vec3 Pi1 = Pi0 + vec3(1.0); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float cnoise(in vec4 P) {
    vec4 Pi0 = floor(P); 
    vec4 Pi1 = Pi0 + 1.0; 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef MAT_OKLAB2RGB
#define MAT_OKLAB2RGB
const mat3 OKLAB2RGB_A = mat3(
    1.0,           1.0,           1.0,
    0.3963377774, -0.1055613458, -0.0894841775,
    0.2158037573, -0.0638541728, -1.2914855480);

const mat3 OKLAB2RGB_B = mat3(
    4.0767416621, -1.2684380046, -0.0041960863,
    -3.3077115913, 2.6097574011, -0.7034186147,
    0.2309699292, -0.3413193965, 1.7076147010);
#endif

#ifndef FNC_OKLAB2RGB
#define FNC_OKLAB2RGB
vec3 oklab2rgb(const in vec3 oklab) {
    vec3 lms = OKLAB2RGB_A * oklab;
    return OKLAB2RGB_B * (lms * lms * lms);
}
vec4 oklab2rgb(const in vec4 oklab) { return vec4(oklab2rgb(oklab.xyz), oklab.a); }
#endif
#ifndef MAT_RGB2OKLAB
#define MAT_RGB2OKLAB
const mat3 RGB2OKLAB_A = mat3(
    0.2104542553, 1.9779984951, 0.0259040371,
    0.7936177850, -2.4285922050, 0.7827717662,
    -0.0040720468, 0.4505937099, -0.8086757660);

const mat3 RGB2OKLAB_B = mat3(
    0.4122214708, 0.2119034982, 0.0883024619,
    0.5363325363, 0.6806995451, 0.2817188376,
    0.0514459929, 0.1073969566, 0.6299787005);
#endif

#ifndef FNC_RGB2OKLAB
#define FNC_RGB2OKLAB
vec3 rgb2oklab(const in vec3 rgb) {
    vec3 lms = RGB2OKLAB_B * rgb;
    return RGB2OKLAB_A * (sign(lms)*pow(abs(lms), vec3(0.3333333333333)));

}
vec4 rgb2oklab(const in vec4 rgb) { return vec4(rgb2oklab(rgb.rgb), rgb.a); }
#endif
#ifndef FNC_GAUSSIAN
#define FNC_GAUSSIAN
float gaussian(float d, float s) { return exp(-(d*d) / (2.0 * s*s)); }
float gaussian( vec2 d, float s) { return exp(-( d.x*d.x + d.y*d.y) / (2.0 * s*s)); }
float gaussian( vec3 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z ) / (2.0 * s*s)); }
float gaussian( vec4 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z + d.w*d.w ) / (2.0 * s*s)); }
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef FNC_SAMPLECLAMP2EDGE
#define FNC_SAMPLECLAMP2EDGE
vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, vec2 texResolution) {
    vec2 pixel = 1.0/texResolution;
    return SAMPLER_FNC( tex, clamp(st, pixel, 1.0-pixel) );
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(0.01), vec2(0.99) ) ); 
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, float edge) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(edge), vec2(1.0 - edge) ) ); 
}
#endif

#ifndef GAUSSIANBLUR2D_TYPE
#ifdef GAUSSIANBLUR_TYPE
#define GAUSSIANBLUR2D_TYPE GAUSSIANBLUR_TYPE
#else
#define GAUSSIANBLUR2D_TYPE vec4
#endif
#endif

#ifndef GAUSSIANBLUR2D_SAMPLER_FNC
#ifdef GAUSSIANBLUR_SAMPLER_FNC
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) GAUSSIANBLUR_SAMPLER_FNC(TEX, UV)
#else
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) sampleClamp2edge(TEX, UV)
#endif
#endif

#ifndef FNC_GAUSSIANBLUR2D
#define FNC_GAUSSIANBLUR2D
GAUSSIANBLUR2D_TYPE gaussianBlur2D(in SAMPLER_TYPE tex, in vec2 st, in vec2 offset, const int kernelSize) {
    GAUSSIANBLUR2D_TYPE accumColor = GAUSSIANBLUR2D_TYPE(0.);
    
    #ifndef GAUSSIANBLUR2D_KERNELSIZE
    
        #if defined(PLATFORM_WEBGL)
            #define GAUSSIANBLUR2D_KERNELSIZE 20
            float kernelSizef = float(kernelSize);
        #else
            #define GAUSSIANBLUR2D_KERNELSIZE kernelSize
            float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
        #endif

    #else
        float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
    #endif

    float accumWeight = 0.;
    const float k = 0.15915494; 
    vec2 xy = vec2(0.0);
    for (int j = 0; j < GAUSSIANBLUR2D_KERNELSIZE; j++) {
        #if defined(PLATFORM_WEBGL)
        if (j >= kernelSize)
            break;
        #endif
        xy.y = -.5 * (kernelSizef - 1.) + float(j);
        for (int i = 0; i < GAUSSIANBLUR2D_KERNELSIZE; i++) {
            #if defined(PLATFORM_WEBGL)
            if (i >= kernelSize)
                break;
            #endif
            xy.x = -0.5 * (kernelSizef - 1.) + float(i);
            float weight = (k / kernelSizef) * gaussian(xy, kernelSizef);
            accumColor += weight * GAUSSIANBLUR2D_SAMPLER_FNC(tex, st + xy * offset);
            accumWeight += weight;
        }
    }
    return accumColor / accumWeight;
}
#endif
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

in vec2 v_uv;
flat in int v_numParticles;

const float THRESHOLD = 0.0001;

vec4 fetch(int index) {
  return texelFetch(colors, ivec2(index, 0),0);
}

float periodic2DNoise(vec2 p, float angle, float cylinderRadius) {
    vec3 wp = vec3(p, cylinderRadius);
    mat3 rotAroundZ = mat3(
        cos(angle), 0.,sin(angle),
        0., 1., 0.,
        -sin(angle), 0., cos(angle)
    );
    wp = rotAroundZ * wp;
    float u = cnoise(wp);
    return u;
}

vec3 parametricToSphere(vec2 uv) {
    float theta = (uv.x * 0.5 + 0.5) * 1.5* PI; 
    float phi = (uv.y * 0.5 + 0.5) * PI;         

    float x = sin(phi) * cos(theta);
    float y = sin(phi) * sin(theta);
    float z = cos(phi);

    return vec3(-x,-z,-y);
}

float weightFunction(float distance, float factor) {
    return 1. / pow((distance), 1.5 + factor * 3.);
}

vec4 getColor(vec3 p, float t) {
    int PCOUNT = v_numParticles; 
    float wTotal = 0.0;
    vec3 accumulatedColor = vec3(0.0);
    bool needsNormalization = true;
    for (int i = 0; i < PCOUNT; ++i) {
        vec3 center = lissajous(
            fract(((float(i) + 0.5) / float(PCOUNT)) + t) * 6.2831,
            0.,
            lissajous_a.x,lissajous_b.x,lissajous_c.x,
            lissajous_a.y, lissajous_b.y, lissajous_c.y,
            resolution
        );
        vec3 p_adj = p * vec3(1.,1.,2.5);
        vec3 center_adj = center * vec3(1.,1.,2.5);
        float distance = sqrt(dot(p_adj - center_adj, p_adj - center_adj));
        vec4 color = rgb2oklab(fetch(i));
        if (distance < THRESHOLD) {
            accumulatedColor = color.rgb;
            needsNormalization = false; 
            break;
        } else {
            float w = weightFunction(distance, mixingIntensity);
            wTotal += w;
            accumulatedColor += color.rgb * w;
        }
    }
    
    if (needsNormalization && wTotal > 0.0) {
        accumulatedColor /= vec3(wTotal);
    }

    return vec4(accumulatedColor, 1.0);
}

void main() {
    vec2 uv = v_uv;
    
    
    
    
    

    
    
    
    vec2 pixelDirection = vec2(0.05);
    const int kernelSize = 9;
    vec4 blurred = gaussianBlur2D(depth_src, (uv + 1.0) / 2.0, pixelDirection, kernelSize);
    float depthField = blurred.r; 
    float d = depthField * 2. - 1.;
    vec3 samplePos = vec3(v_uv, d); 

    vec4 col = getColor(samplePos, time);
    outColor = oklab2rgb(col);
    
}`;function dw({vertices:i,colorsTexture:a,depthSampleTex:o,lissajousUniforms:l,displayUniforms:c}){return{data:{draw:cr(i,()=>uw,()=>fw,{uniforms:{lissajousUniforms:l,displayUniforms:c},textures:{colors:{texture:a,sampler:{filter:"nearest",wrap:"clamp"}},depth_src:{texture:o,sampler:{filter:"nearest",wrap:"clamp"}}}},{})}}}var hw=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

out vec2 v_uv;
out float depth;
out float actualDepth;
void main() {
    v_uv = position * 0.5 + 0.5; 
    int selfInstanceId = gl_InstanceID;
    float startPos = float(selfInstanceId) / float(numLineSegments);
    float endPos = float(selfInstanceId + 1) / float(numLineSegments);
    startPos = fract(startPos);
    endPos = fract(endPos);
    vec3 startPoint = lissajous(
        startPos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    vec3 endPoint = lissajous(
        endPos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    depth = smoothstep(-0.4,0.4,(startPoint.z + endPoint.z) * 0.5);
    actualDepth = (startPoint.z + endPoint.z) * 0.5;
    vec3 translation = startPoint.xyz;
    vec2 diff = endPoint.xy - startPoint.xy;
    float angle = atan(diff.y, diff.x);
    mat2 rot = mat2(
        cos(angle), sin(angle),
        -sin(angle), cos(angle)
    );
    vec2 scaledPosition = position * vec2(0.007,0.007);
    vec2 rotatedPosition = rot * scaledPosition;
    vec3 pos = vec3(rotatedPosition, 0.)  + translation;
    gl_Position = vec4(pos, 1.0);
}`,mw=`in float depth;
in vec2 v_uv;
in float actualDepth;
void main() {
    vec4 depthCol = mix(vec4(1.,.8,.8,1.), vec4(0.1,0.1,0.2,1.), depth);
    float gradVal = smoothstep(0.1, 0.5, v_uv.y) * smoothstep(.9, 0.5, v_uv.y);
    float alpha = smoothstep(0.1,0.2, v_uv.y) * smoothstep(.9,0.8, v_uv.y);
    depthCol = mix(depthCol, vec4(0.2,0.2,0.2,1.), 1.-gradVal);
    outColor = vec4(depthCol.rgb * alpha, alpha);
}`;const Yl=1e4;function pw({props:i,quad:a,lissajousUniforms:o,displayUniforms:l}){const c=$g({maxInstanceCount:Yl,attributes:{instanceId:"int"}},{count:Yl,instances:()=>{const h=[];for(let p=0;p<Yl;p++)h.push({instanceId:p});return h}},[]),f=lf({numLineSegments:"int"},()=>({numLineSegments:Yl}),[i.time]),d=cr(a,()=>hw,()=>mw,{uniforms:{curveUniforms:f,lissajousUniforms:o,displayUniforms:l},instances:c},{depthTest:!0,blendMode:"alpha"});return{lineSegmentInstances:c,curveUniforms:f,data:{draw:d}}}var gw=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

vec4 fetch(int index) {
  return texelFetch(colors, ivec2(index, 0),0);
}

out vec2 v_uv;
out vec4 col;
out float depth;
void main() {
    v_uv = position * 0.5 + 0.5; 
    int selfInstanceId = gl_InstanceID;
    float pos = (float(selfInstanceId) + 0.5) / float(numParticles);
    vec4 color = fetch(int(selfInstanceId));
    col = color;
    pos += time;
    pos = fract(pos);
    
    vec3 point = lissajous(
        pos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    float aspect = resolution.x / resolution.y;
    vec3 finalPoint = vec3(position* vec2(0.02) * vec2(1.,aspect), 0.)  + point;
        depth = smoothstep(-0.4,0.4,finalPoint.z);
    finalPoint.z -= 0.15;

    
    gl_Position = vec4(finalPoint, 1.0);
}`,vw=`in vec4 col;
in vec2 v_uv;
in float depth;
void main() {
    float alpha = smoothstep(0.5, 0.49, length(v_uv - vec2(0.5)));
    vec4 depthCol = mix(vec4(1.,.8,.8,1.), vec4(0.1,0.1,0.2,1.), depth);
    vec4 fringeColor = depthCol;
    vec4 midColor = col;
    vec4 colVal = mix(midColor, fringeColor, smoothstep(0.3, 0.4, length(v_uv - vec2(0.5))));
    outColor = vec4(colVal.rgb * alpha, alpha);
}`;const yw=500;function xw({props:i,quad:a,numberOfColors:o,colorsTexture:l,lissajousUniforms:c,displayUniforms:f}){const d=$g({maxInstanceCount:yw,attributes:{instanceId:"int"}},{count:o,instances:()=>{const p=[];for(let m=0;m<o;m++)p.push({instanceId:m});return p}},[]),h=cr(a,()=>gw,()=>vw,{uniforms:{lissajousUniforms:c,displayUniforms:f},instances:d,textures:{colors:{texture:l,sampler:{filter:"nearest",wrap:"edge"}}}},{depthTest:!0,blendMode:"alpha"});return{pointInstances:d,data:{draw:h}}}function bw(i,a=[]){const o=Object.keys(i[0]).filter(l=>l!=="x"&&l!=="y");return lw({attributes:{position:"vec2",...Object.fromEntries(o.map(l=>[l,"float"]))}},{triangleCount:2,vertices:()=>[{position:[i[0].x,i[0].y],...Object.fromEntries(o.map(l=>[l,i[0][l]]))},{position:[i[1].x,i[1].y],...Object.fromEntries(o.map(l=>[l,i[1][l]]))},{position:[i[2].x,i[2].y],...Object.fromEntries(o.map(l=>[l,i[2][l]]))},{position:[i[3].x,i[3].y],...Object.fromEntries(o.map(l=>[l,i[3][l]]))}],indices:()=>[0,1,2,0,2,3]},a)}const Iu=100;function ww(i){const a=lf({resolution:"vec2"},()=>({resolution:[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]}),[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),o=lf({lissajous_a:"vec2",lissajous_b:"vec2",lissajous_c:"vec2",xyRotation:"vec2",numParticles:"int",numMaxParticles:"int",time:"float",mixingIntensity:"float",noiseIntensity:"float"},()=>({numParticles:i.colors.length,numMaxParticles:Iu,time:[i.time],lissajous_a:i.lissajousParams.a,lissajous_b:i.lissajousParams.b,lissajous_c:i.lissajousParams.c,mixingIntensity:i.mixingIntensity,xyRotation:i.xyRotation,noiseIntensity:i.noiseIntensity}),[i.colors.length,i.time,i.lissajousParams.a,i.lissajousParams.b,i.lissajousParams.c]),l=fo({width:Iu,height:1},()=>{const f=[];for(let d=0;d<Iu;d++){const h=i.colors[d]||{r:0,g:0,b:0};f.push(h.r*255,h.g*255,h.b*255,255)}return f},[JSON.stringify(i.colors)]),c=bw([{x:-1,y:-1,u:0,v:0},{x:1,y:-1,u:1,v:0},{x:1,y:1,u:1,v:1},{x:-1,y:1,u:0,v:1}],[]);return{display_uniforms:a,lissajous_uniforms:o,colors_texture:l,quad:c}}var Sw=`out vec2 v_uv;
flat out int v_numParticles;
void main() {
    gl_Position = vec4(position, 0.0, 1.0);
    v_uv = position;
    v_numParticles = numParticles;
}`,Ew=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

in vec2 v_uv;
flat in int v_numParticles;

void main() {
    vec2 uv = v_uv;
    int PCOUNT = v_numParticles; 
    float sum = 0.0;
    float weightSum = 0.0;
    float sigma2 = 0.1;
    float heightPower = 1. + 10.0;

    for (int i = 0; i < PCOUNT; ++i) {
        vec3 point = lissajous(
            fract(((float(i) + 0.5) / float(PCOUNT)) + time) * 6.2831,
            0.,
            lissajous_a.x,lissajous_b.x,lissajous_c.x,
            lissajous_a.y, lissajous_b.y, lissajous_c.y,
            resolution
        );
        vec2 delta = uv - point.xy;
        float r2 = dot(delta, delta);
        float w = exp(-r2 / sigma2);
        float z = (point.z  + 1.) / 2.;
        float h = pow(z, heightPower); 
        sum += w * h;
        weightSum += w;
    }
    float result = pow(sum / weightSum, 1.0 / heightPower);
    outColor = vec4(vec3(result),1.0);
}`;function _w({props:i,vertices:a,lissajousUniforms:o,displayUniforms:l}){const c=cr(a,()=>Sw,()=>Ew,{uniforms:{lissajousUniforms:o,displayUniforms:l},textures:{}},{blendMode:"alpha"});return{texture:fo({width:Math.floor(i.general.canvasDimensions[0]/4),height:Math.floor(i.general.canvasDimensions[1]/4),format:"rgba32f"},[c],[i.general.canvasDimensions[0]]),data:{draw:c}}}function zp(i,a){return cr(i,()=>`
          out vec2 v_uv;
          void main() {
            gl_Position = vec4(position, 0.0, 1.0);
            v_uv = vec2(u,v);
          }`,()=>`
          in vec2 v_uv;
          void main() {
            vec4 color = texture(src, v_uv);
            outColor = color;
          }`,{uniforms:{},textures:{src:{sampler:{edge:"clamp",filter:"linear"},texture:a}}})}var Tw=`out vec2 v_uv;

void main() {
    gl_Position = vec4(position, 0.0, 1.0);
    v_uv = vec2(u,v);
}`,Cw=`#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_PNOISE
#define FNC_PNOISE

float pnoise(in vec2 P, in vec2 rep) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod(Pi, rep.xyxy); 
    Pi = mod289(Pi);        
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float pnoise(in vec3 P, in vec3 rep) {
    vec3 Pi0 = mod(floor(P), rep); 
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float pnoise(in vec4 P, in vec4 rep) {
    vec4 Pi0 = mod(floor(P), rep); 
    vec4 Pi1 = mod(Pi0 + 1.0, rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef FNC_RGB2LUMA
#define FNC_RGB2LUMA
float rgb2luma(const in vec3 rgb) { return dot(rgb, vec3(0.2126, 0.7152, 0.0722)); }
float rgb2luma(const in vec4 rgb) { return rgb2luma(rgb.rgb); }
#endif

#ifndef FNC_LUMA
#define FNC_LUMA
float luma(float v) { return v; }
float luma(in vec3 v) { return rgb2luma(v); }
float luma(in vec4 v) { return rgb2luma(v.rgb); }
#endif
#ifndef FNC_BLENDSOFTLIGHT
#define FNC_BLENDSOFTLIGHT
float blendSoftLight(in float base, in float blend) {
    return (blend < .5)? (2. * base * blend + base * base * (1. - 2.*blend)): (sqrt(base) * (2. * blend - 1.) + 2. * base * (1. - blend));
}

vec3 blendSoftLight(in vec3 base, in vec3 blend) {
    return vec3(blendSoftLight(base.r, blend.r),
                blendSoftLight(base.g, blend.g),
                blendSoftLight(base.b, blend.b));
}

vec4 blendSoftLight(in vec4 base, in vec4 blend) {
    return vec4(blendSoftLight( base.r, blend.r ),
                blendSoftLight( base.g, blend.g ),
                blendSoftLight( base.b, blend.b ),
                blendSoftLight( base.a, blend.a )
    );
}

vec3 blendSoftLight(in vec3 base, in vec3 blend, in float opacity) {
    return (blendSoftLight(base, blend) * opacity + base * (1. - opacity));
}
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef GRAIN_TYPE
#define GRAIN_TYPE vec3
#endif

#ifndef GRAIN_SAMPLER_FNC
#define GRAIN_SAMPLER_FNC(TEX, UV) SAMPLER_FNC(TEX, UV).rgb
#endif

#ifndef FNC_GRAIN
#define FNC_GRAIN
float grain(vec2 texCoord, vec2 resolution, float t, float multiplier) {
    vec2 mult = texCoord * resolution;
    float offset = snoise(vec3(mult / multiplier, t));
    float n1 = pnoise(vec3(mult, offset), vec3(1. / texCoord * resolution, 1.));
    return n1 / 2. + .5;
}

float grain(vec2 texCoord, vec2 resolution, float t) {
    return grain(texCoord, resolution, t, 2.5);
}

float grain(vec2 texCoord, vec2 resolution) {
    return grain(texCoord, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t, float multiplier ) {
    GRAIN_TYPE org = GRAIN_SAMPLER_FNC(tex, st);

    float g = grain(st, resolution, t, multiplier);

    
    float luminance = luma(org);
    
    
    
    float response = smoothstep(0.05, 0.5, luminance);
    return mix( blendSoftLight(org, GRAIN_TYPE(g)), 
                org, 
                response * response);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution) {
    return grain(tex, st, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t, float multiplier  ) {
    return grain(tex, st, vec2(resolution), t, multiplier );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution) {
    return grain(tex, st, resolution, 0.);
}

#endif

in vec2 v_uv;
void main() {
    vec2 uv = v_uv;
    vec4 col = texture(src, uv);
    outColor = col;
    float grainValue = grain(uv, resolution * 2., time * 50. * 1.);
    outColor.rgb += (grainValue - 0.5) * noiseIntensity * 0.8;
}`;function zw({quad:i,texture:a,lissajousUniforms:o,displayUniforms:l}){return{data:{draw:cr(i,()=>Tw,()=>Cw,{uniforms:{lissajousUniforms:o,displayUniforms:l},textures:{src:{sampler:{edge:"clamp",filter:"linear"},texture:a}}})}}}function Aw(i){const a=ww(i),o=_w({props:i,vertices:a.quad,displayUniforms:a.display_uniforms,lissajousUniforms:a.lissajous_uniforms}),l=dw({vertices:a.quad,colorsTexture:a.colors_texture,displayUniforms:a.display_uniforms,lissajousUniforms:a.lissajous_uniforms,depthSampleTex:o.texture}),c=pw({props:i,quad:a.quad,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),f=xw({props:i,quad:a.quad,numberOfColors:i.colors.length,colorsTexture:a.colors_texture,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),d=fo({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},[l.data.draw],[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),h=zw({quad:a.quad,texture:d,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),p=fo({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},[h.data.draw],[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),m=fo({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},i.general.showLissajousFigure?[zp(a.quad,p),c.data.draw,f.data.draw]:[zp(a.quad,p)],[i.general.canvasDimensions[0],i.general.canvasDimensions[1],i.general.showLissajousFigure]);return{shared_inputs:a,drawGradient:l,drawLissajousCurve:c,drawPoints:f,sampleDepthTex:o,outputTexture:m,renderTexture:p,gradientTexture:d}}const Rw="_boxRendering_1611c_1",Mw={boxRendering:Rw},Ja=30,Ow=60;function Zl(i){const o=qb/(Ow*Ja)*i.animationSpeed;return Math.floor(i.lissajousIntegral/o)}const Ap=new sw;function Bw({scaledWidth:i,scaledHeight:a,width:o,height:l,renderObject:c,screenshotRef:f}){const d=Ti(T=>T),{renderingInProgress:h,targetRenderFrame:p,setTargetRenderFrame:m,videoExporter:v}=c,y=C.useRef(null),b=C.useRef(new C2);C.useImperativeHandle(f,()=>({takeScreenshot:()=>{if(!E.current){console.error("Drawing not initialized yet");return}const A=E.current.capture("renderTexture"),O=d.width,U=d.height,H=document.createElement("canvas");H.width=O,H.height=U;const X=H.getContext("2d");if(!X)throw new Error("Unable to create 2D context for image saving");const k=X.createImageData(O,U);k.data.set(A),X.putImageData(k,0,0);const K=document.createElement("a");K.download="frame.png",K.href=H.toDataURL(),K.click()}}));function w(T){const A={time:T,lissajousParams:{a:[d.lissajousParams.a,d.lissajousParams.a_delta],b:[d.lissajousParams.b,d.lissajousParams.b_delta],c:[d.lissajousParams.c,d.lissajousParams.c_delta]},colors:d.particleColors.map(k=>({r:k[0],g:k[1],b:k[2]})),general:{canvasDimensions:[o,l],showLissajousFigure:d.showLissajousFigure},mixingIntensity:1-d.mixingIntensity,xyRotation:[d.rotateHorizontal/360,d.rotateVertical/360],enableNoise:d.noiseEnabled,noiseIntensity:d.noiseIntensity},O=b.current,{addedAssets:U,deletedAssetIds:H,graphId:X}=O.update(Aw(A));Ap.transaction(U,H,X)}const E=C.useRef(null);C.useEffect(()=>{const T=y.current;if(!T)return;const A=T.getContext("webgl2",{antialias:!1});if(!A){console.error("WebGL2 is not supported in this browser.");return}const O=new $2(A);E.current=new W2(O),Ap.subscribe((U,H)=>{const X=Object.fromEntries(U);E.current.submit(H,X),E.current.draw("outputTexture")})},[]);const _=C.useRef(Date.now());function S(){if(h)return p;{const A=(Date.now()-_.current)/1e3;return Math.floor(A*Ja)%Zl(d)}}return cw(()=>{const T=S()/Zl(d);if(w(T),h&&v){const A=Zl(d),O=d.exportPerfectLoop?1:d.exportDuration*Ja/A;T>=O?v.finishExport():v.addFrame(E.current,S()/Ja,1/Ja,()=>m(p+1))}},!0),B.jsx("canvas",{ref:y,width:o,height:l,className:h?Mw.boxRendering:"",style:{width:`${Math.floor(i)}px`,height:`${Math.floor(a)}px`,borderRadius:"var(--borderRadiusSmall)"}})}function te(i){if(!i)throw new Error("Assertion failed.")}const yn=i=>i&&i[i.length-1],lr=i=>i>=0&&i<2**32;class vo{constructor(a){this.bytes=a,this.pos=0}seekToByte(a){this.pos=8*a}readBit(){const a=Math.floor(this.pos/8),o=this.bytes[a]??0,l=7-(this.pos&7),c=(o&1<<l)>>l;return this.pos++,c}readBits(a){if(a===1)return this.readBit();let o=0;for(let l=0;l<a;l++)o<<=1,o|=this.readBit();return o}writeBits(a,o){const l=this.pos+a;for(let c=this.pos;c<l;c++){const f=Math.floor(c/8);let d=this.bytes[f];const h=7-(c&7);d&=~(1<<h),d|=(o&1<<l-c-1)>>l-c-1<<h,this.bytes[f]=d}this.pos=l}readAlignedByte(){if(this.pos%8!==0)throw new Error("Bitstream is not byte-aligned.");const a=this.pos/8,o=this.bytes[a]??0;return this.pos+=8,o}skipBits(a){this.pos+=a}getBitsLeft(){return this.bytes.length*8-this.pos}clone(){const a=new vo(this.bytes);return a.pos=this.pos,a}}const ne=i=>{let a=0;for(;i.readBits(1)===0&&a<32;)a++;if(a>=32)throw new Error("Invalid exponential-Golomb code.");return(1<<a)-1+i.readBits(a)},Gn=i=>{const a=ne(i);return(a&1)===0?-(a>>1):a+1>>1},Mi=i=>i.constructor===Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength),Nw=i=>i.constructor===DataView?i:i instanceof ArrayBuffer?new DataView(i):new DataView(i.buffer,i.byteOffset,i.byteLength),bn=new TextEncoder,Tf={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},Cf={bt709:1,smpte170m:6,linear:8,"iec61966-2-1":13,pq:16,hlg:18},zf={rgb:0,bt709:1,bt470bg:5,smpte170m:6,"bt2020-ncl":9},Uw=i=>!!i&&!!i.primaries&&!!i.transfer&&!!i.matrix&&i.fullRange!==void 0,Af=i=>i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer||ArrayBuffer.isView(i);class Jg{constructor(){this.currentPromise=Promise.resolve()}async acquire(){let a;const o=new Promise(c=>{a=c}),l=this.currentPromise;return this.currentPromise=o,await l,a}}const Dw=()=>{let i,a;return{promise:new Promise((l,c)=>{i=l,a=c}),resolve:i,reject:a}},ev=i=>{throw new Error(`Unexpected value: ${i}`)},Lw="und",jw=/^[a-z]{3}$/,Pw=i=>jw.test(i),er=1e6*(1+Number.EPSILON),Fw=(i,a)=>{const o=i<0?-1:1;i=Math.abs(i);let l=0,c=1,f=1,d=0,h=i;for(;;){const p=Math.floor(h),m=p*f+l,v=p*d+c;if(v>a)return{numerator:o*f,denominator:d};if(l=f,c=d,f=m,d=v,h=1/(h-p),!isFinite(h))break}return{numerator:o*f,denominator:d}};class kw{constructor(){this.currentPromise=Promise.resolve()}call(a){return this.currentPromise=this.currentPromise.then(a)}}let Vu=null;const sf=()=>Vu!==null?Vu:Vu=typeof navigator<"u"&&navigator.userAgent?.includes("Firefox"),tv=function*(i){for(const a in i){const o=i[a];o!==void 0&&(yield{key:a,value:o})}},Hw=()=>{Symbol.dispose??=Symbol("Symbol.dispose")};class nv{constructor(a,o){if(this.data=a,this.mimeType=o,!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(typeof o!="string")throw new TypeError("mimeType must be a string.")}}class Iw{constructor(a,o,l,c){if(this.data=a,this.mimeType=o,this.name=l,this.description=c,!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(o!==void 0&&typeof o!="string")throw new TypeError("mimeType, when provided, must be a string.");if(l!==void 0&&typeof l!="string")throw new TypeError("name, when provided, must be a string.");if(c!==void 0&&typeof c!="string")throw new TypeError("description, when provided, must be a string.")}}const Vw=i=>{if(!i||typeof i!="object")throw new TypeError("tags must be an object.");if(i.title!==void 0&&typeof i.title!="string")throw new TypeError("tags.title, when provided, must be a string.");if(i.description!==void 0&&typeof i.description!="string")throw new TypeError("tags.description, when provided, must be a string.");if(i.artist!==void 0&&typeof i.artist!="string")throw new TypeError("tags.artist, when provided, must be a string.");if(i.album!==void 0&&typeof i.album!="string")throw new TypeError("tags.album, when provided, must be a string.");if(i.albumArtist!==void 0&&typeof i.albumArtist!="string")throw new TypeError("tags.albumArtist, when provided, must be a string.");if(i.trackNumber!==void 0&&(!Number.isInteger(i.trackNumber)||i.trackNumber<=0))throw new TypeError("tags.trackNumber, when provided, must be a positive integer.");if(i.tracksTotal!==void 0&&(!Number.isInteger(i.tracksTotal)||i.tracksTotal<=0))throw new TypeError("tags.tracksTotal, when provided, must be a positive integer.");if(i.discNumber!==void 0&&(!Number.isInteger(i.discNumber)||i.discNumber<=0))throw new TypeError("tags.discNumber, when provided, must be a positive integer.");if(i.discsTotal!==void 0&&(!Number.isInteger(i.discsTotal)||i.discsTotal<=0))throw new TypeError("tags.discsTotal, when provided, must be a positive integer.");if(i.genre!==void 0&&typeof i.genre!="string")throw new TypeError("tags.genre, when provided, must be a string.");if(i.date!==void 0&&(!(i.date instanceof Date)||Number.isNaN(i.date.getTime())))throw new TypeError("tags.date, when provided, must be a valid Date.");if(i.lyrics!==void 0&&typeof i.lyrics!="string")throw new TypeError("tags.lyrics, when provided, must be a string.");if(i.images!==void 0){if(!Array.isArray(i.images))throw new TypeError("tags.images, when provided, must be an array.");for(const a of i.images){if(!a||typeof a!="object")throw new TypeError("Each image in tags.images must be an object.");if(!(a.data instanceof Uint8Array))throw new TypeError("Each image.data must be a Uint8Array.");if(typeof a.mimeType!="string")throw new TypeError("Each image.mimeType must be a string.");if(!["coverFront","coverBack","unknown"].includes(a.kind))throw new TypeError("Each image.kind must be 'coverFront', 'coverBack', or 'unknown'.")}}if(i.comment!==void 0&&typeof i.comment!="string")throw new TypeError("tags.comment, when provided, must be a string.");if(i.raw!==void 0){if(!i.raw||typeof i.raw!="object")throw new TypeError("tags.raw, when provided, must be an object.");for(const a of Object.values(i.raw))if(a!==null&&typeof a!="string"&&!(a instanceof Uint8Array)&&!(a instanceof nv)&&!(a instanceof Iw))throw new TypeError("Each value in tags.raw must be a string, Uint8Array, RichImageData, AttachedFile, or null.")}},Yw=i=>{if(!i||typeof i!="object")throw new TypeError("disposition must be an object.");if(i.default!==void 0&&typeof i.default!="boolean")throw new TypeError("disposition.default must be a boolean.");if(i.forced!==void 0&&typeof i.forced!="boolean")throw new TypeError("disposition.forced must be a boolean.");if(i.original!==void 0&&typeof i.original!="boolean")throw new TypeError("disposition.original must be a boolean.");if(i.commentary!==void 0&&typeof i.commentary!="boolean")throw new TypeError("disposition.commentary must be a boolean.");if(i.hearingImpaired!==void 0&&typeof i.hearingImpaired!="boolean")throw new TypeError("disposition.hearingImpaired must be a boolean.");if(i.visuallyImpaired!==void 0&&typeof i.visuallyImpaired!="boolean")throw new TypeError("disposition.visuallyImpaired must be a boolean.")};const ia=["avc","hevc","vp9","av1","vp8"],aa=["pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be","pcm-u8","pcm-s8","ulaw","alaw"],iv=["aac","opus","mp3","vorbis","flac"],as=[...iv,...aa],rs=["webvtt"],Rp=[{maxMacroblocks:99,maxBitrate:64e3,level:10},{maxMacroblocks:396,maxBitrate:192e3,level:11},{maxMacroblocks:396,maxBitrate:384e3,level:12},{maxMacroblocks:396,maxBitrate:768e3,level:13},{maxMacroblocks:396,maxBitrate:2e6,level:20},{maxMacroblocks:792,maxBitrate:4e6,level:21},{maxMacroblocks:1620,maxBitrate:4e6,level:22},{maxMacroblocks:1620,maxBitrate:1e7,level:30},{maxMacroblocks:3600,maxBitrate:14e6,level:31},{maxMacroblocks:5120,maxBitrate:2e7,level:32},{maxMacroblocks:8192,maxBitrate:2e7,level:40},{maxMacroblocks:8192,maxBitrate:5e7,level:41},{maxMacroblocks:8704,maxBitrate:5e7,level:42},{maxMacroblocks:22080,maxBitrate:135e6,level:50},{maxMacroblocks:36864,maxBitrate:24e7,level:51},{maxMacroblocks:36864,maxBitrate:24e7,level:52},{maxMacroblocks:139264,maxBitrate:24e7,level:60},{maxMacroblocks:139264,maxBitrate:48e7,level:61},{maxMacroblocks:139264,maxBitrate:8e8,level:62}],Mp=[{maxPictureSize:36864,maxBitrate:128e3,tier:"L",level:30},{maxPictureSize:122880,maxBitrate:15e5,tier:"L",level:60},{maxPictureSize:245760,maxBitrate:3e6,tier:"L",level:63},{maxPictureSize:552960,maxBitrate:6e6,tier:"L",level:90},{maxPictureSize:983040,maxBitrate:1e7,tier:"L",level:93},{maxPictureSize:2228224,maxBitrate:12e6,tier:"L",level:120},{maxPictureSize:2228224,maxBitrate:3e7,tier:"H",level:120},{maxPictureSize:2228224,maxBitrate:2e7,tier:"L",level:123},{maxPictureSize:2228224,maxBitrate:5e7,tier:"H",level:123},{maxPictureSize:8912896,maxBitrate:25e6,tier:"L",level:150},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:150},{maxPictureSize:8912896,maxBitrate:4e7,tier:"L",level:153},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:153},{maxPictureSize:8912896,maxBitrate:6e7,tier:"L",level:156},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:156},{maxPictureSize:35651584,maxBitrate:6e7,tier:"L",level:180},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:180},{maxPictureSize:35651584,maxBitrate:12e7,tier:"L",level:183},{maxPictureSize:35651584,maxBitrate:48e7,tier:"H",level:183},{maxPictureSize:35651584,maxBitrate:24e7,tier:"L",level:186},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:186}],Op=[{maxPictureSize:36864,maxBitrate:2e5,level:10},{maxPictureSize:73728,maxBitrate:8e5,level:11},{maxPictureSize:122880,maxBitrate:18e5,level:20},{maxPictureSize:245760,maxBitrate:36e5,level:21},{maxPictureSize:552960,maxBitrate:72e5,level:30},{maxPictureSize:983040,maxBitrate:12e6,level:31},{maxPictureSize:2228224,maxBitrate:18e6,level:40},{maxPictureSize:2228224,maxBitrate:3e7,level:41},{maxPictureSize:8912896,maxBitrate:6e7,level:50},{maxPictureSize:8912896,maxBitrate:12e7,level:51},{maxPictureSize:8912896,maxBitrate:18e7,level:52},{maxPictureSize:35651584,maxBitrate:18e7,level:60},{maxPictureSize:35651584,maxBitrate:24e7,level:61},{maxPictureSize:35651584,maxBitrate:48e7,level:62}],Bp=[{maxPictureSize:147456,maxBitrate:15e5,tier:"M",level:0},{maxPictureSize:278784,maxBitrate:3e6,tier:"M",level:1},{maxPictureSize:665856,maxBitrate:6e6,tier:"M",level:4},{maxPictureSize:1065024,maxBitrate:1e7,tier:"M",level:5},{maxPictureSize:2359296,maxBitrate:12e6,tier:"M",level:8},{maxPictureSize:2359296,maxBitrate:3e7,tier:"H",level:8},{maxPictureSize:2359296,maxBitrate:2e7,tier:"M",level:9},{maxPictureSize:2359296,maxBitrate:5e7,tier:"H",level:9},{maxPictureSize:8912896,maxBitrate:3e7,tier:"M",level:12},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:12},{maxPictureSize:8912896,maxBitrate:4e7,tier:"M",level:13},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:13},{maxPictureSize:8912896,maxBitrate:6e7,tier:"M",level:14},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:14},{maxPictureSize:35651584,maxBitrate:6e7,tier:"M",level:15},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:15},{maxPictureSize:35651584,maxBitrate:6e7,tier:"M",level:16},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:16},{maxPictureSize:35651584,maxBitrate:1e8,tier:"M",level:17},{maxPictureSize:35651584,maxBitrate:48e7,tier:"H",level:17},{maxPictureSize:35651584,maxBitrate:16e7,tier:"M",level:18},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:18},{maxPictureSize:35651584,maxBitrate:16e7,tier:"M",level:19},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:19}],qw=(i,a,o,l)=>{if(i==="avc"){const f=Math.ceil(a/16)*Math.ceil(o/16),d=Rp.find(y=>f<=y.maxMacroblocks&&l<=y.maxBitrate)??yn(Rp),h=d?d.level:0,p="64".padStart(2,"0"),m="00",v=h.toString(16).padStart(2,"0");return`avc1.${p}${m}${v}`}else if(i==="hevc"){const h=a*o,p=Mp.find(v=>h<=v.maxPictureSize&&l<=v.maxBitrate)??yn(Mp);return`hev1.1.6.${p.tier}${p.level}.B0`}else{if(i==="vp8")return"vp8";if(i==="vp9"){const f=a*o;return`vp09.00.${(Op.find(p=>f<=p.maxPictureSize&&l<=p.maxBitrate)??yn(Op)).level.toString().padStart(2,"0")}.08`}else if(i==="av1"){const f=a*o,d=Bp.find(m=>f<=m.maxPictureSize&&l<=m.maxBitrate)??yn(Bp);return`av01.0.${d.level.toString().padStart(2,"0")}${d.tier}.08`}}throw new TypeError(`Unhandled codec '${i}'.`)},Gw=i=>{const a=i.split("."),c=(1<<7)+1,f=Number(a[1]),d=a[2],h=Number(d.slice(0,-1)),p=(f<<5)+h,m=d.slice(-1)==="H"?1:0,y=Number(a[3])===8?0:1,b=0,w=a[4]?Number(a[4]):0,E=a[5]?Number(a[5][0]):1,_=a[5]?Number(a[5][1]):1,S=a[5]?Number(a[5][2]):0,T=(m<<7)+(y<<6)+(b<<5)+(w<<4)+(E<<3)+(_<<2)+S;return[c,p,T,0]},av=/^pcm-([usf])(\d+)+(be)?$/,bo=i=>{if(te(aa.includes(i)),i==="ulaw")return{dataType:"ulaw",sampleSize:1,littleEndian:!0,silentValue:255};if(i==="alaw")return{dataType:"alaw",sampleSize:1,littleEndian:!0,silentValue:213};const a=av.exec(i);te(a);let o;a[1]==="u"?o="unsigned":a[1]==="s"?o="signed":o="float";const l=Number(a[2])/8,c=a[3]!=="be",f=i==="pcm-u8"?2**7:0;return{dataType:o,sampleSize:l,littleEndian:c,silentValue:f}},Xw=i=>i.startsWith("avc1")||i.startsWith("avc3")?"avc":i.startsWith("hev1")||i.startsWith("hvc1")?"hevc":i==="vp8"?"vp8":i.startsWith("vp09")?"vp9":i.startsWith("av01")?"av1":i.startsWith("mp4a.40")||i==="mp4a.67"?"aac":i==="mp3"||i==="mp4a.69"||i==="mp4a.6B"||i==="mp4a.6b"?"mp3":i==="opus"?"opus":i==="vorbis"?"vorbis":i==="flac"?"flac":i==="ulaw"?"ulaw":i==="alaw"?"alaw":av.test(i)?i:i==="webvtt"?"webvtt":null,Qw=i=>i==="avc"?{avc:{format:"avc"}}:i==="hevc"?{hevc:{format:"hevc"}}:{},Zw=["avc1","avc3","hev1","hvc1","vp8","vp09","av01"],Kw=/^(avc1|avc3)\.[0-9a-fA-F]{6}$/,Ww=/^(hev1|hvc1)\.(?:[ABC]?\d+)\.[0-9a-fA-F]{1,8}\.[LH]\d+(?:\.[0-9a-fA-F]{1,2}){0,6}$/,$w=/^vp09(?:\.\d{2}){3}(?:(?:\.\d{2}){5})?$/,Jw=/^av01\.\d\.\d{2}[MH]\.\d{2}(?:\.\d\.\d{3}\.\d{2}\.\d{2}\.\d{2}\.\d)?$/,eS=i=>{if(!i)throw new TypeError("Video chunk metadata must be provided.");if(typeof i!="object")throw new TypeError("Video chunk metadata must be an object.");if(!i.decoderConfig)throw new TypeError("Video chunk metadata must include a decoder configuration.");if(typeof i.decoderConfig!="object")throw new TypeError("Video chunk metadata decoder configuration must be an object.");if(typeof i.decoderConfig.codec!="string")throw new TypeError("Video chunk metadata decoder configuration must specify a codec string.");if(!Zw.some(a=>i.decoderConfig.codec.startsWith(a)))throw new TypeError("Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(i.decoderConfig.codedWidth)||i.decoderConfig.codedWidth<=0)throw new TypeError("Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).");if(!Number.isInteger(i.decoderConfig.codedHeight)||i.decoderConfig.codedHeight<=0)throw new TypeError("Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).");if(i.decoderConfig.description!==void 0&&!Af(i.decoderConfig.description))throw new TypeError("Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(i.decoderConfig.colorSpace!==void 0){const{colorSpace:a}=i.decoderConfig;if(typeof a!="object")throw new TypeError("Video chunk metadata decoder configuration colorSpace, when provided, must be an object.");const o=Object.keys(Tf);if(a.primaries!=null&&!o.includes(a.primaries))throw new TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of ${o.join(", ")}.`);const l=Object.keys(Cf);if(a.transfer!=null&&!l.includes(a.transfer))throw new TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of ${l.join(", ")}.`);const c=Object.keys(zf);if(a.matrix!=null&&!c.includes(a.matrix))throw new TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of ${c.join(", ")}.`);if(a.fullRange!=null&&typeof a.fullRange!="boolean")throw new TypeError("Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.")}if(i.decoderConfig.codec.startsWith("avc1")||i.decoderConfig.codec.startsWith("avc3")){if(!Kw.test(i.decoderConfig.codec))throw new TypeError("Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as specified in Section 3.4 of RFC 6381.")}else if(i.decoderConfig.codec.startsWith("hev1")||i.decoderConfig.codec.startsWith("hvc1")){if(!Ww.test(i.decoderConfig.codec))throw new TypeError("Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as specified in Section E.3 of ISO 14496-15.")}else if(i.decoderConfig.codec.startsWith("vp8")){if(i.decoderConfig.codec!=="vp8")throw new TypeError('Video chunk metadata decoder configuration codec string for VP8 must be "vp8".')}else if(i.decoderConfig.codec.startsWith("vp09")){if(!$w.test(i.decoderConfig.codec))throw new TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as specified in Section "Codecs Parameter String" of https://www.webmproject.org/vp9/mp4/.')}else if(i.decoderConfig.codec.startsWith("av01")&&!Jw.test(i.decoderConfig.codec))throw new TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as specified in Section "Codecs Parameter String" of https://aomediacodec.github.io/av1-isobmff/.')},tS=["mp4a","mp3","opus","vorbis","flac","ulaw","alaw","pcm"],nS=i=>{if(!i)throw new TypeError("Audio chunk metadata must be provided.");if(typeof i!="object")throw new TypeError("Audio chunk metadata must be an object.");if(!i.decoderConfig)throw new TypeError("Audio chunk metadata must include a decoder configuration.");if(typeof i.decoderConfig!="object")throw new TypeError("Audio chunk metadata decoder configuration must be an object.");if(typeof i.decoderConfig.codec!="string")throw new TypeError("Audio chunk metadata decoder configuration must specify a codec string.");if(!tS.some(a=>i.decoderConfig.codec.startsWith(a)))throw new TypeError("Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(i.decoderConfig.sampleRate)||i.decoderConfig.sampleRate<=0)throw new TypeError("Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).");if(!Number.isInteger(i.decoderConfig.numberOfChannels)||i.decoderConfig.numberOfChannels<=0)throw new TypeError("Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).");if(i.decoderConfig.description!==void 0&&!Af(i.decoderConfig.description))throw new TypeError("Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(i.decoderConfig.codec.startsWith("mp4a")&&i.decoderConfig.codec!=="mp4a.69"&&i.decoderConfig.codec!=="mp4a.6B"&&i.decoderConfig.codec!=="mp4a.6b"){if(!["mp4a.40.2","mp4a.40.02","mp4a.40.5","mp4a.40.05","mp4a.40.29","mp4a.67"].includes(i.decoderConfig.codec))throw new TypeError("Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.");if(!i.decoderConfig.description)throw new TypeError("Audio chunk metadata decoder configuration for AAC must include a description, which is expected to be an AudioSpecificConfig as specified in ISO 14496-3.")}else if(i.decoderConfig.codec.startsWith("mp3")||i.decoderConfig.codec.startsWith("mp4a")){if(i.decoderConfig.codec!=="mp3"&&i.decoderConfig.codec!=="mp4a.69"&&i.decoderConfig.codec!=="mp4a.6B"&&i.decoderConfig.codec!=="mp4a.6b")throw new TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be "mp3", "mp4a.69" or "mp4a.6B".')}else if(i.decoderConfig.codec.startsWith("opus")){if(i.decoderConfig.codec!=="opus")throw new TypeError('Audio chunk metadata decoder configuration codec string for Opus must be "opus".');if(i.decoderConfig.description&&i.decoderConfig.description.byteLength<18)throw new TypeError("Audio chunk metadata decoder configuration description, when specified, is expected to be an Identification Header as specified in Section 5.1 of RFC 7845.")}else if(i.decoderConfig.codec.startsWith("vorbis")){if(i.decoderConfig.codec!=="vorbis")throw new TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be "vorbis".');if(!i.decoderConfig.description)throw new TypeError("Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.")}else if(i.decoderConfig.codec.startsWith("flac")){if(i.decoderConfig.codec!=="flac")throw new TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be "flac".');if(!i.decoderConfig.description||i.decoderConfig.description.byteLength<42)throw new TypeError("Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.")}else if((i.decoderConfig.codec.startsWith("pcm")||i.decoderConfig.codec.startsWith("ulaw")||i.decoderConfig.codec.startsWith("alaw"))&&!aa.includes(i.decoderConfig.codec))throw new TypeError(`Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM codecs (${aa.join(", ")}).`)},iS=i=>{if(!i)throw new TypeError("Subtitle metadata must be provided.");if(typeof i!="object")throw new TypeError("Subtitle metadata must be an object.");if(!i.config)throw new TypeError("Subtitle metadata must include a config object.");if(typeof i.config!="object")throw new TypeError("Subtitle metadata config must be an object.");if(typeof i.config.description!="string")throw new TypeError("Subtitle metadata config description must be a string.")};class aS{constructor(a){this.mutex=new Jg,this.firstMediaStreamTimestamp=null,this.trackTimestampInfo=new WeakMap,this.output=a}onTrackClose(a){}validateAndNormalizeTimestamp(a,o,l){o+=a.source._timestampOffset;let c=this.trackTimestampInfo.get(a);if(!c){if(!l)throw new Error("First packet must be a key packet.");c={maxTimestamp:o,maxTimestampBeforeLastKeyPacket:o},this.trackTimestampInfo.set(a,c)}if(o<0)throw new Error(`Timestamps must be non-negative (got ${o}s).`);if(l&&(c.maxTimestampBeforeLastKeyPacket=c.maxTimestamp),o<c.maxTimestampBeforeLastKeyPacket)throw new Error(`Timestamps cannot be smaller than the largest timestamp of the previous GOP (a GOP begins with a key packet and ends right before the next key packet). Got ${o}s, but largest timestamp is ${c.maxTimestampBeforeLastKeyPacket}s.`);return c.maxTimestamp=Math.max(c.maxTimestamp,o),o}}var ho;(function(i){i[i.IDR=5]="IDR",i[i.SPS=7]="SPS",i[i.PPS=8]="PPS",i[i.SPS_EXT=13]="SPS_EXT"})(ho||(ho={}));var gn;(function(i){i[i.RASL_N=8]="RASL_N",i[i.RASL_R=9]="RASL_R",i[i.BLA_W_LP=16]="BLA_W_LP",i[i.RSV_IRAP_VCL23=23]="RSV_IRAP_VCL23",i[i.VPS_NUT=32]="VPS_NUT",i[i.SPS_NUT=33]="SPS_NUT",i[i.PPS_NUT=34]="PPS_NUT",i[i.PREFIX_SEI_NUT=39]="PREFIX_SEI_NUT",i[i.SUFFIX_SEI_NUT=40]="SUFFIX_SEI_NUT"})(gn||(gn={}));const Rf=i=>{const a=[];let o=0;for(;o<i.length;){let l=-1,c=0;for(let f=o;f<i.length-3;f++){if(i[f]===0&&i[f+1]===0&&i[f+2]===1){l=f,c=3;break}if(f<i.length-4&&i[f]===0&&i[f+1]===0&&i[f+2]===0&&i[f+3]===1){l=f,c=4;break}}if(l===-1)break;if(o>0&&l>o){const f=i.subarray(o,l);f.length>0&&a.push(f)}o=l+c}if(o<i.length){const l=i.subarray(o);l.length>0&&a.push(l)}return a},cf=i=>{const a=[],o=i.length;for(let l=0;l<o;l++)l+2<o&&i[l]===0&&i[l+1]===0&&i[l+2]===3?(a.push(0,0),l+=2):a.push(i[l]);return new Uint8Array(a)},rS=i=>{const o=Rf(i);if(o.length===0)return null;let l=0;for(const h of o)l+=4+h.byteLength;const c=new Uint8Array(l),f=new DataView(c.buffer);let d=0;for(const h of o){const p=h.byteLength;f.setUint32(d,p,!1),d+=4,c.set(h,d),d+=h.byteLength}return c},Yu=i=>i[0]&31,oS=i=>{try{const a=Rf(i),o=a.filter(p=>Yu(p)===ho.SPS),l=a.filter(p=>Yu(p)===ho.PPS),c=a.filter(p=>Yu(p)===ho.SPS_EXT);if(o.length===0||l.length===0)return null;const f=o[0],d=sS(f);te(d!==null);const h=d.profileIdc===100||d.profileIdc===110||d.profileIdc===122||d.profileIdc===144;return{configurationVersion:1,avcProfileIndication:d.profileIdc,profileCompatibility:d.constraintFlags,avcLevelIndication:d.levelIdc,lengthSizeMinusOne:3,sequenceParameterSets:o,pictureParameterSets:l,chromaFormat:h?d.chromaFormatIdc:null,bitDepthLumaMinus8:h?d.bitDepthLumaMinus8:null,bitDepthChromaMinus8:h?d.bitDepthChromaMinus8:null,sequenceParameterSetExt:h?c:null}}catch(a){return console.error("Error building AVC Decoder Configuration Record:",a),null}},lS=i=>{const a=[];a.push(i.configurationVersion),a.push(i.avcProfileIndication),a.push(i.profileCompatibility),a.push(i.avcLevelIndication),a.push(252|i.lengthSizeMinusOne&3),a.push(224|i.sequenceParameterSets.length&31);for(const o of i.sequenceParameterSets){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let c=0;c<l;c++)a.push(o[c])}a.push(i.pictureParameterSets.length);for(const o of i.pictureParameterSets){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let c=0;c<l;c++)a.push(o[c])}if(i.avcProfileIndication===100||i.avcProfileIndication===110||i.avcProfileIndication===122||i.avcProfileIndication===144){te(i.chromaFormat!==null),te(i.bitDepthLumaMinus8!==null),te(i.bitDepthChromaMinus8!==null),te(i.sequenceParameterSetExt!==null),a.push(252|i.chromaFormat&3),a.push(248|i.bitDepthLumaMinus8&7),a.push(248|i.bitDepthChromaMinus8&7),a.push(i.sequenceParameterSetExt.length);for(const o of i.sequenceParameterSetExt){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let c=0;c<l;c++)a.push(o[c])}}return new Uint8Array(a)},sS=i=>{try{const a=new vo(cf(i));if(a.skipBits(1),a.skipBits(2),a.readBits(5)!==7)return null;const l=a.readAlignedByte(),c=a.readAlignedByte(),f=a.readAlignedByte();ne(a);let d=null,h=null,p=null;if((l===100||l===110||l===122||l===244||l===44||l===83||l===86||l===118||l===128)&&(d=ne(a),d===3&&a.skipBits(1),h=ne(a),p=ne(a),a.skipBits(1),a.readBits(1))){for(let b=0;b<(d!==3?8:12);b++)if(a.readBits(1)){const E=b<6?16:64;let _=8,S=8;for(let T=0;T<E;T++){if(S!==0){const A=Gn(a);S=(_+A+256)%256}_=S===0?_:S}}}ne(a);const m=ne(a);if(m===0)ne(a);else if(m===1){a.skipBits(1),Gn(a),Gn(a);const y=ne(a);for(let b=0;b<y;b++)Gn(a)}ne(a),a.skipBits(1),ne(a),ne(a);const v=a.readBits(1);return{profileIdc:l,constraintFlags:c,levelIdc:f,frameMbsOnlyFlag:v,chromaFormatIdc:d,bitDepthLumaMinus8:h,bitDepthChromaMinus8:p}}catch(a){return console.error("Error parsing AVC SPS:",a),null}},Wa=i=>i[0]>>1&63,cS=i=>{try{const a=Rf(i),o=a.filter(ae=>Wa(ae)===gn.VPS_NUT),l=a.filter(ae=>Wa(ae)===gn.SPS_NUT),c=a.filter(ae=>Wa(ae)===gn.PPS_NUT),f=a.filter(ae=>Wa(ae)===gn.PREFIX_SEI_NUT||Wa(ae)===gn.SUFFIX_SEI_NUT);if(l.length===0||c.length===0)return null;const d=l[0],h=new vo(cf(d));h.skipBits(16),h.readBits(4);const p=h.readBits(3),m=h.readBits(1),{general_profile_space:v,general_tier_flag:y,general_profile_idc:b,general_profile_compatibility_flags:w,general_constraint_indicator_flags:E,general_level_idc:_}=uS(h,p);ne(h);const S=ne(h);S===3&&h.skipBits(1),ne(h),ne(h),h.readBits(1)&&(ne(h),ne(h),ne(h),ne(h));const T=ne(h),A=ne(h);ne(h);const U=h.readBits(1)?0:p;for(let ae=U;ae<=p;ae++)ne(h),ne(h),ne(h);ne(h),ne(h),ne(h),ne(h),ne(h),ne(h),h.readBits(1)&&h.readBits(1)&&fS(h),h.skipBits(1),h.skipBits(1),h.readBits(1)&&(h.skipBits(4),h.skipBits(4),ne(h),ne(h),h.skipBits(1));const H=ne(h);if(dS(h,H),h.readBits(1)){const ae=ne(h);for(let Q=0;Q<ae;Q++)ne(h),h.skipBits(1)}h.skipBits(1),h.skipBits(1);let X=0;h.readBits(1)&&(X=mS(h,p));let k=0;if(c.length>0){const ae=c[0],Q=new vo(cf(ae));Q.skipBits(16),ne(Q),ne(Q),Q.skipBits(1),Q.skipBits(1),Q.skipBits(3),Q.skipBits(1),Q.skipBits(1),ne(Q),ne(Q),Gn(Q),Q.skipBits(1),Q.skipBits(1),Q.readBits(1)&&ne(Q),Gn(Q),Gn(Q),Q.skipBits(1),Q.skipBits(1),Q.skipBits(1),Q.skipBits(1);const se=Q.readBits(1),xe=Q.readBits(1);!se&&!xe?k=0:se&&!xe?k=2:!se&&xe?k=3:k=0}const K=[...o.length?[{arrayCompleteness:1,nalUnitType:gn.VPS_NUT,nalUnits:o}]:[],...l.length?[{arrayCompleteness:1,nalUnitType:gn.SPS_NUT,nalUnits:l}]:[],...c.length?[{arrayCompleteness:1,nalUnitType:gn.PPS_NUT,nalUnits:c}]:[],...f.length?[{arrayCompleteness:1,nalUnitType:Wa(f[0]),nalUnits:f}]:[]];return{configurationVersion:1,generalProfileSpace:v,generalTierFlag:y,generalProfileIdc:b,generalProfileCompatibilityFlags:w,generalConstraintIndicatorFlags:E,generalLevelIdc:_,minSpatialSegmentationIdc:X,parallelismType:k,chromaFormatIdc:S,bitDepthLumaMinus8:T,bitDepthChromaMinus8:A,avgFrameRate:0,constantFrameRate:0,numTemporalLayers:p+1,temporalIdNested:m,lengthSizeMinusOne:3,arrays:K}}catch(a){return console.error("Error building HEVC Decoder Configuration Record:",a),null}},uS=(i,a)=>{const o=i.readBits(2),l=i.readBits(1),c=i.readBits(5);let f=0;for(let v=0;v<32;v++)f=f<<1|i.readBits(1);const d=new Uint8Array(6);for(let v=0;v<6;v++)d[v]=i.readBits(8);const h=i.readBits(8),p=[],m=[];for(let v=0;v<a;v++)p.push(i.readBits(1)),m.push(i.readBits(1));if(a>0)for(let v=a;v<8;v++)i.skipBits(2);for(let v=0;v<a;v++)p[v]&&i.skipBits(88),m[v]&&i.skipBits(8);return{general_profile_space:o,general_tier_flag:l,general_profile_idc:c,general_profile_compatibility_flags:f,general_constraint_indicator_flags:d,general_level_idc:h}},fS=i=>{for(let a=0;a<4;a++)for(let o=0;o<(a===3?2:6);o++)if(!i.readBits(1))ne(i);else{const c=Math.min(64,1<<4+(a<<1));a>1&&Gn(i);for(let f=0;f<c;f++)Gn(i)}},dS=(i,a)=>{const o=[];for(let l=0;l<a;l++)o[l]=hS(i,l,a,o)},hS=(i,a,o,l)=>{let c=0,f=0,d=0;if(a!==0&&(f=i.readBits(1)),f){if(a===o){const p=ne(i);d=a-(p+1)}else d=a-1;i.readBits(1),ne(i);const h=l[d]??0;for(let p=0;p<=h;p++)i.readBits(1)||i.readBits(1);c=l[d]}else{const h=ne(i),p=ne(i);for(let m=0;m<h;m++)ne(i),i.readBits(1);for(let m=0;m<p;m++)ne(i),i.readBits(1);c=h+p}return c},mS=(i,a)=>{if(i.readBits(1)&&i.readBits(8)===255&&(i.readBits(16),i.readBits(16)),i.readBits(1)&&i.readBits(1),i.readBits(1)&&(i.readBits(3),i.readBits(1),i.readBits(1)&&(i.readBits(8),i.readBits(8),i.readBits(8))),i.readBits(1)&&(ne(i),ne(i)),i.readBits(1),i.readBits(1),i.readBits(1),i.readBits(1)&&(ne(i),ne(i),ne(i),ne(i)),i.readBits(1)&&(i.readBits(32),i.readBits(32),i.readBits(1)&&ne(i),i.readBits(1)&&pS(i,!0,a)),i.readBits(1)){i.readBits(1),i.readBits(1),i.readBits(1);const o=ne(i);return ne(i),ne(i),ne(i),ne(i),o}return 0},pS=(i,a,o)=>{let l=!1,c=!1,f=!1;l=i.readBits(1)===1,c=i.readBits(1)===1,(l||c)&&(f=i.readBits(1)===1,f&&(i.readBits(8),i.readBits(5),i.readBits(1),i.readBits(5)),i.readBits(4),i.readBits(4),f&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5));for(let d=0;d<=o;d++){const h=i.readBits(1)===1;let p=!0;h||(p=i.readBits(1)===1);let m=!1;p?ne(i):m=i.readBits(1)===1;let v=1;m||(v=ne(i)+1),l&&Np(i,v,f),c&&Np(i,v,f)}},Np=(i,a,o)=>{for(let l=0;l<a;l++)ne(i),ne(i),o&&(ne(i),ne(i)),i.readBits(1)},gS=i=>{const a=[];a.push(i.configurationVersion),a.push((i.generalProfileSpace&3)<<6|(i.generalTierFlag&1)<<5|i.generalProfileIdc&31),a.push(i.generalProfileCompatibilityFlags>>>24&255),a.push(i.generalProfileCompatibilityFlags>>>16&255),a.push(i.generalProfileCompatibilityFlags>>>8&255),a.push(i.generalProfileCompatibilityFlags&255),a.push(...i.generalConstraintIndicatorFlags),a.push(i.generalLevelIdc&255),a.push(240|i.minSpatialSegmentationIdc>>8&15),a.push(i.minSpatialSegmentationIdc&255),a.push(252|i.parallelismType&3),a.push(252|i.chromaFormatIdc&3),a.push(248|i.bitDepthLumaMinus8&7),a.push(248|i.bitDepthChromaMinus8&7),a.push(i.avgFrameRate>>8&255),a.push(i.avgFrameRate&255),a.push((i.constantFrameRate&3)<<6|(i.numTemporalLayers&7)<<3|(i.temporalIdNested&1)<<2|i.lengthSizeMinusOne&3),a.push(i.arrays.length&255);for(const o of i.arrays){a.push((o.arrayCompleteness&1)<<7|0|o.nalUnitType&63),a.push(o.nalUnits.length>>8&255),a.push(o.nalUnits.length&255);for(const l of o.nalUnits){a.push(l.length>>8&255),a.push(l.length&255);for(let c=0;c<l.length;c++)a.push(l[c])}}return new Uint8Array(a)},vS=i=>{const a=Nw(i),o=a.getUint8(9),l=a.getUint16(10,!0),c=a.getUint32(12,!0),f=a.getInt16(16,!0),d=a.getUint8(18);let h=null;return d&&(h=i.subarray(19,21+o)),{outputChannelCount:o,preSkip:l,inputSampleRate:c,outputGain:f,channelMappingFamily:d,channelMappingTable:h}};var Up;(function(i){i[i.STREAMINFO=0]="STREAMINFO",i[i.VORBIS_COMMENT=4]="VORBIS_COMMENT",i[i.PICTURE=6]="PICTURE"})(Up||(Up={}));const yS=[];const Dp=new Uint8Array(0);class yo{constructor(a,o,l,c,f=-1,d,h){if(this.data=a,this.type=o,this.timestamp=l,this.duration=c,this.sequenceNumber=f,a===Dp&&d===void 0)throw new Error("Internal error: byteLength must be explicitly provided when constructing metadata-only packets.");if(d===void 0&&(d=a.byteLength),!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(o!=="key"&&o!=="delta")throw new TypeError('type must be either "key" or "delta".');if(!Number.isFinite(l))throw new TypeError("timestamp must be a number.");if(!Number.isFinite(c)||c<0)throw new TypeError("duration must be a non-negative number.");if(!Number.isFinite(f))throw new TypeError("sequenceNumber must be a number.");if(!Number.isInteger(d)||d<0)throw new TypeError("byteLength must be a non-negative integer.");if(h!==void 0&&(typeof h!="object"||!h))throw new TypeError("sideData, when provided, must be an object.");if(h?.alpha!==void 0&&!(h.alpha instanceof Uint8Array))throw new TypeError("sideData.alpha, when provided, must be a Uint8Array.");if(h?.alphaByteLength!==void 0&&(!Number.isInteger(h.alphaByteLength)||h.alphaByteLength<0))throw new TypeError("sideData.alphaByteLength, when provided, must be a non-negative integer.");this.byteLength=d,this.sideData=h??{},this.sideData.alpha&&this.sideData.alphaByteLength===void 0&&(this.sideData.alphaByteLength=this.sideData.alpha.byteLength)}get isMetadataOnly(){return this.data===Dp}get microsecondTimestamp(){return Math.trunc(er*this.timestamp)}get microsecondDuration(){return Math.trunc(er*this.duration)}toEncodedVideoChunk(){if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to a video chunk.");if(typeof EncodedVideoChunk>"u")throw new Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}alphaToEncodedVideoChunk(a=this.type){if(!this.sideData.alpha)throw new TypeError("This packet does not contain alpha side data.");if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to a video chunk.");if(typeof EncodedVideoChunk>"u")throw new Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.sideData.alpha,type:a,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}toEncodedAudioChunk(){if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to an audio chunk.");if(typeof EncodedAudioChunk>"u")throw new Error("Your browser does not support EncodedAudioChunk.");return new EncodedAudioChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}static fromEncodedChunk(a,o){if(!(a instanceof EncodedVideoChunk||a instanceof EncodedAudioChunk))throw new TypeError("chunk must be an EncodedVideoChunk or EncodedAudioChunk.");const l=new Uint8Array(a.byteLength);return a.copyTo(l),new yo(l,a.type,a.timestamp/1e6,(a.duration??0)/1e6,void 0,void 0,o)}clone(a){if(a!==void 0&&(typeof a!="object"||a===null))throw new TypeError("options, when provided, must be an object.");if(a?.timestamp!==void 0&&!Number.isFinite(a.timestamp))throw new TypeError("options.timestamp, when provided, must be a number.");if(a?.duration!==void 0&&!Number.isFinite(a.duration))throw new TypeError("options.duration, when provided, must be a number.");return new yo(this.data,this.type,a?.timestamp??this.timestamp,a?.duration??this.duration,this.sequenceNumber,this.byteLength)}}Hw();class ta{get displayWidth(){return this.rotation%180===0?this.codedWidth:this.codedHeight}get displayHeight(){return this.rotation%180===0?this.codedHeight:this.codedWidth}get microsecondTimestamp(){return Math.trunc(er*this.timestamp)}get microsecondDuration(){return Math.trunc(er*this.duration)}get hasAlpha(){return this.format&&this.format.includes("A")}constructor(a,o){if(this._closed=!1,a instanceof ArrayBuffer||ArrayBuffer.isView(a)){if(!o||typeof o!="object")throw new TypeError("init must be an object.");if(!("format"in o)||typeof o.format!="string")throw new TypeError("init.format must be a string.");if(!Number.isInteger(o.codedWidth)||o.codedWidth<=0)throw new TypeError("init.codedWidth must be a positive integer.");if(!Number.isInteger(o.codedHeight)||o.codedHeight<=0)throw new TypeError("init.codedHeight must be a positive integer.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(o.timestamp))throw new TypeError("init.timestamp must be a number.");if(o.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");this._data=Mi(a).slice(),this.format=o.format,this.codedWidth=o.codedWidth,this.codedHeight=o.codedHeight,this.rotation=o.rotation??0,this.timestamp=o.timestamp,this.duration=o.duration??0,this.colorSpace=new VideoColorSpace(o.colorSpace)}else if(typeof VideoFrame<"u"&&a instanceof VideoFrame){if(o?.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(o?.timestamp!==void 0&&!Number.isFinite(o?.timestamp))throw new TypeError("init.timestamp, when provided, must be a number.");if(o?.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");this._data=a,this.format=a.format,this.codedWidth=a.displayWidth,this.codedHeight=a.displayHeight,this.rotation=o?.rotation??0,this.timestamp=o?.timestamp??a.timestamp/1e6,this.duration=o?.duration??(a.duration??0)/1e6,this.colorSpace=a.colorSpace}else if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof SVGImageElement<"u"&&a instanceof SVGImageElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap||typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){if(!o||typeof o!="object")throw new TypeError("init must be an object.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(o.timestamp))throw new TypeError("init.timestamp must be a number.");if(o.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");if(typeof VideoFrame<"u")return new ta(new VideoFrame(a,{timestamp:Math.trunc(o.timestamp*er),duration:Math.trunc((o.duration??0)*er)||void 0}),o);let l=0,c=0;if("naturalWidth"in a?(l=a.naturalWidth,c=a.naturalHeight):"videoWidth"in a?(l=a.videoWidth,c=a.videoHeight):"width"in a&&(l=Number(a.width),c=Number(a.height)),!l||!c)throw new TypeError("Could not determine dimensions.");const f=new OffscreenCanvas(l,c),d=f.getContext("2d",{alpha:sf(),willReadFrequently:!0});te(d),d.drawImage(a,0,0),this._data=f,this.format="RGBX",this.codedWidth=l,this.codedHeight=c,this.rotation=o.rotation??0,this.timestamp=o.timestamp,this.duration=o.duration??0,this.colorSpace=new VideoColorSpace({matrix:"rgb",primaries:"bt709",transfer:"iec61966-2-1",fullRange:!0})}else throw new TypeError("Invalid data type: Must be a BufferSource or CanvasImageSource.")}clone(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),so(this._data)?new ta(this._data.clone(),{timestamp:this.timestamp,duration:this.duration,rotation:this.rotation}):this._data instanceof Uint8Array?new ta(this._data.slice(),{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation}):new ta(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})}close(){this._closed||(so(this._data)?this._data.close():this._data=null,this._closed=!0)}allocationSize(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),so(this._data)?this._data.allocationSize():this._data instanceof Uint8Array?this._data.byteLength:this.codedWidth*this.codedHeight*4}async copyTo(a){if(!Af(a))throw new TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(this._closed)throw new Error("VideoSample is closed.");if(te(this._data!==null),so(this._data))await this._data.copyTo(a);else if(this._data instanceof Uint8Array)Mi(a).set(this._data);else{const l=this._data.getContext("2d");te(l);const c=l.getImageData(0,0,this.codedWidth,this.codedHeight);Mi(a).set(c.data)}}toVideoFrame(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),so(this._data)?new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0}):this._data instanceof Uint8Array?new VideoFrame(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0,colorSpace:this.colorSpace}):new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0})}draw(a,o,l,c,f,d,h,p,m){let v=0,y=0,b=this.displayWidth,w=this.displayHeight,E=0,_=0,S=this.displayWidth,T=this.displayHeight;if(d!==void 0?(v=o,y=l,b=c,w=f,E=d,_=h,p!==void 0?(S=p,T=m):(S=b,T=w)):(E=o,_=l,c!==void 0&&(S=c,T=f)),!(typeof CanvasRenderingContext2D<"u"&&a instanceof CanvasRenderingContext2D||typeof OffscreenCanvasRenderingContext2D<"u"&&a instanceof OffscreenCanvasRenderingContext2D))throw new TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!Number.isFinite(v))throw new TypeError("sx must be a number.");if(!Number.isFinite(y))throw new TypeError("sy must be a number.");if(!Number.isFinite(b)||b<0)throw new TypeError("sWidth must be a non-negative number.");if(!Number.isFinite(w)||w<0)throw new TypeError("sHeight must be a non-negative number.");if(!Number.isFinite(E))throw new TypeError("dx must be a number.");if(!Number.isFinite(_))throw new TypeError("dy must be a number.");if(!Number.isFinite(S)||S<0)throw new TypeError("dWidth must be a non-negative number.");if(!Number.isFinite(T)||T<0)throw new TypeError("dHeight must be a non-negative number.");if(this._closed)throw new Error("VideoSample is closed.");({sx:v,sy:y,sWidth:b,sHeight:w}=this._rotateSourceRegion(v,y,b,w,this.rotation));const A=this.toCanvasImageSource();a.save();const O=E+S/2,U=_+T/2;a.translate(O,U),a.rotate(this.rotation*Math.PI/180);const H=this.rotation%180===0?1:S/T;a.scale(1/H,H),a.drawImage(A,v,y,b,w,-S/2,-T/2,S,T),a.restore()}drawWithFit(a,o){if(!(typeof CanvasRenderingContext2D<"u"&&a instanceof CanvasRenderingContext2D||typeof OffscreenCanvasRenderingContext2D<"u"&&a instanceof OffscreenCanvasRenderingContext2D))throw new TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!o||typeof o!="object")throw new TypeError("options must be an object.");if(!["fill","contain","cover"].includes(o.fit))throw new TypeError("options.fit must be 'fill', 'contain', or 'cover'.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("options.rotation, when provided, must be 0, 90, 180, or 270.");o.crop!==void 0&&bS(o.crop,"options.");const l=a.canvas.width,c=a.canvas.height,f=o.rotation??this.rotation,[d,h]=f%180===0?[this.codedWidth,this.codedHeight]:[this.codedHeight,this.codedWidth];o.crop&&xS(o.crop,d,h);let p,m,v,y;const{sx:b,sy:w,sWidth:E,sHeight:_}=this._rotateSourceRegion(o.crop?.left??0,o.crop?.top??0,o.crop?.width??d,o.crop?.height??h,f);if(o.fit==="fill")p=0,m=0,v=l,y=c;else{const[T,A]=o.crop?[o.crop.width,o.crop.height]:[d,h],O=o.fit==="contain"?Math.min(l/T,c/A):Math.max(l/T,c/A);v=T*O,y=A*O,p=(l-v)/2,m=(c-y)/2}a.save();const S=f%180===0?1:v/y;a.translate(l/2,c/2),a.rotate(f*Math.PI/180),a.scale(1/S,S),a.translate(-l/2,-c/2),a.drawImage(this.toCanvasImageSource(),b,w,E,_,p,m,v,y),a.restore()}_rotateSourceRegion(a,o,l,c,f){return f===90?[a,o,l,c]=[o,this.codedHeight-a-l,c,l]:f===180?[a,o]=[this.codedWidth-a-l,this.codedHeight-o-c]:f===270&&([a,o,l,c]=[this.codedWidth-o-c,a,c,l]),{sx:a,sy:o,sWidth:l,sHeight:c}}toCanvasImageSource(){if(this._closed)throw new Error("VideoSample is closed.");if(te(this._data!==null),this._data instanceof Uint8Array){const a=this.toVideoFrame();return queueMicrotask(()=>a.close()),a}else return this._data}setRotation(a){if(![0,90,180,270].includes(a))throw new TypeError("newRotation must be 0, 90, 180, or 270.");this.rotation=a}setTimestamp(a){if(!Number.isFinite(a))throw new TypeError("newTimestamp must be a number.");this.timestamp=a}setDuration(a){if(!Number.isFinite(a)||a<0)throw new TypeError("newDuration must be a non-negative number.");this.duration=a}[Symbol.dispose](){this.close()}}const so=i=>typeof VideoFrame<"u"&&i instanceof VideoFrame,xS=(i,a,o)=>{i.left=Math.min(i.left,a),i.top=Math.min(i.top,o),i.width=Math.min(i.width,a-i.left),i.height=Math.min(i.height,o-i.top),te(i.width>=0),te(i.height>=0)},bS=(i,a)=>{if(!i||typeof i!="object")throw new TypeError(a+"crop, when provided, must be an object.");if(!Number.isInteger(i.left)||i.left<0)throw new TypeError(a+"crop.left must be a non-negative integer.");if(!Number.isInteger(i.top)||i.top<0)throw new TypeError(a+"crop.top must be a non-negative integer.");if(!Number.isInteger(i.width)||i.width<0)throw new TypeError(a+"crop.width must be a non-negative integer.");if(!Number.isInteger(i.height)||i.height<0)throw new TypeError(a+"crop.height must be a non-negative integer.")};const wS=i=>{let o=(i.hasVideo?"video/":i.hasAudio?"audio/":"application/")+(i.isQuickTime?"quicktime":"mp4");if(i.codecStrings.length>0){const l=[...new Set(i.codecStrings)];o+=`; codecs="${l.join(", ")}"`}return o};const qu=8,Lp=16;const jp=/<(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})>/g,SS=i=>{const a=Math.floor(i/36e5),o=Math.floor(i%(3600*1e3)/(60*1e3)),l=Math.floor(i%(60*1e3)/1e3),c=i%1e3;return a.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+"."+c.toString().padStart(3,"0")};class Pp{constructor(a){this.writer=a,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap}writeU32(a){this.helperView.setUint32(0,a,!1),this.writer.write(this.helper.subarray(0,4))}writeU64(a){this.helperView.setUint32(0,Math.floor(a/2**32),!1),this.helperView.setUint32(4,a,!1),this.writer.write(this.helper.subarray(0,8))}writeAscii(a){for(let o=0;o<a.length;o++)this.helperView.setUint8(o%8,a.charCodeAt(o)),o%8===7&&this.writer.write(this.helper);a.length%8!==0&&this.writer.write(this.helper.subarray(0,a.length%8))}writeBox(a){if(this.offsets.set(a,this.writer.getPos()),a.contents&&!a.children)this.writeBoxHeader(a,a.size??a.contents.byteLength+8),this.writer.write(a.contents);else{const o=this.writer.getPos();if(this.writeBoxHeader(a,0),a.contents&&this.writer.write(a.contents),a.children)for(const f of a.children)f&&this.writeBox(f);const l=this.writer.getPos(),c=a.size??l-o;this.writer.seek(o),this.writeBoxHeader(a,c),this.writer.seek(l)}}writeBoxHeader(a,o){this.writeU32(a.largeSize?1:o),this.writeAscii(a.type),a.largeSize&&this.writeU64(o)}measureBoxHeader(a){return 8+(a.largeSize?8:0)}patchBox(a){const o=this.offsets.get(a);te(o!==void 0);const l=this.writer.getPos();this.writer.seek(o),this.writeBox(a),this.writer.seek(l)}measureBox(a){if(a.contents&&!a.children)return this.measureBoxHeader(a)+a.contents.byteLength;{let o=this.measureBoxHeader(a);if(a.contents&&(o+=a.contents.byteLength),a.children)for(const l of a.children)l&&(o+=this.measureBox(l));return o}}}const ze=new Uint8Array(8),_n=new DataView(ze.buffer),Xe=i=>[(i%256+256)%256],ce=i=>(_n.setUint16(0,i,!1),[ze[0],ze[1]]),rv=i=>(_n.setInt16(0,i,!1),[ze[0],ze[1]]),ov=i=>(_n.setUint32(0,i,!1),[ze[1],ze[2],ze[3]]),Z=i=>(_n.setUint32(0,i,!1),[ze[0],ze[1],ze[2],ze[3]]),Ci=i=>(_n.setInt32(0,i,!1),[ze[0],ze[1],ze[2],ze[3]]),ra=i=>(_n.setUint32(0,Math.floor(i/2**32),!1),_n.setUint32(4,i,!1),[ze[0],ze[1],ze[2],ze[3],ze[4],ze[5],ze[6],ze[7]]),lv=i=>(_n.setInt16(0,2**8*i,!1),[ze[0],ze[1]]),qn=i=>(_n.setInt32(0,2**16*i,!1),[ze[0],ze[1],ze[2],ze[3]]),Gu=i=>(_n.setInt32(0,2**30*i,!1),[ze[0],ze[1],ze[2],ze[3]]),Xu=(i,a)=>{const o=[];let l=i;do{let c=l&127;l>>=7,o.length>0&&(c|=128),o.push(c)}while(l>0||a);return o.reverse()},pt=(i,a=!1)=>{const o=Array(i.length).fill(null).map((l,c)=>i.charCodeAt(c));return a&&o.push(0),o},Mf=i=>{let a=null;for(const o of i)(!a||o.timestamp>a.timestamp)&&(a=o);return a},sv=i=>{const a=i*(Math.PI/180),o=Math.round(Math.cos(a)),l=Math.round(Math.sin(a));return[o,l,0,-l,o,0,0,0,1]},cv=sv(0),uv=i=>[qn(i[0]),qn(i[1]),Gu(i[2]),qn(i[3]),qn(i[4]),Gu(i[5]),qn(i[6]),qn(i[7]),Gu(i[8])],ue=(i,a,o)=>({type:i,contents:a&&new Uint8Array(a.flat(10)),children:o}),Oe=(i,a,o,l,c)=>ue(i,[Xe(a),ov(o),l??[]],c),ES=i=>i.isQuickTime?ue("ftyp",[pt("qt  "),Z(512),pt("qt  ")]):i.fragmented?ue("ftyp",[pt("iso5"),Z(512),pt("iso5"),pt("iso6"),pt("mp41")]):ue("ftyp",[pt("isom"),Z(512),pt("isom"),i.holdsAvc?pt("avc1"):[],pt("mp41")]),ql=i=>({type:"mdat",largeSize:i}),_S=i=>({type:"free",size:i}),co=i=>ue("moov",void 0,[TS(i.creationTime,i.trackDatas),...i.trackDatas.map(a=>CS(a,i.creationTime)),i.isFragmented?lE(i.trackDatas):null,bE(i)]),TS=(i,a)=>{const o=ot(Math.max(0,...a.filter(d=>d.samples.length>0).map(d=>{const h=Mf(d.samples);return h.timestamp+h.duration})),uf),l=Math.max(0,...a.map(d=>d.track.id))+1,c=!lr(i)||!lr(o),f=c?ra:Z;return Oe("mvhd",+c,0,[f(i),f(i),Z(uf),f(o),qn(1),lv(1),Array(10).fill(0),uv(cv),Array(24).fill(0),Z(l)])},CS=(i,a)=>{const o=OE(i);return ue("trak",void 0,[zS(i,a),AS(i,a),o.name!==void 0?ue("udta",void 0,[ue("name",[...bn.encode(o.name)])]):null])},zS=(i,a)=>{const o=Mf(i.samples),l=ot(o?o.timestamp+o.duration:0,uf),c=!lr(a)||!lr(l),f=c?ra:Z;let d;if(i.type==="video"){const p=i.track.metadata.rotation;d=sv(p??0)}else d=cv;let h=2;return i.track.metadata.disposition?.default!==!1&&(h|=1),Oe("tkhd",+c,h,[f(a),f(a),Z(i.track.id),Z(0),f(l),Array(8).fill(0),ce(0),ce(i.track.id),lv(i.type==="audio"?1:0),ce(0),uv(d),qn(i.type==="video"?i.info.width:0),qn(i.type==="video"?i.info.height:0)])},AS=(i,a)=>ue("mdia",void 0,[RS(i,a),Of(!0,MS[i.type],OS[i.type]),BS(i)]),RS=(i,a)=>{const o=Mf(i.samples),l=ot(o?o.timestamp+o.duration:0,i.timescale),c=!lr(a)||!lr(l),f=c?ra:Z;return Oe("mdhd",+c,0,[f(a),f(a),Z(i.timescale),f(l),ce(mv(i.track.metadata.languageCode??Lw)),ce(0)])},MS={video:"vide",audio:"soun",subtitle:"text"},OS={video:"MediabunnyVideoHandler",audio:"MediabunnySoundHandler",subtitle:"MediabunnyTextHandler"},Of=(i,a,o,l="\0\0\0\0")=>Oe("hdlr",0,0,[i?pt("mhlr"):Z(0),pt(a),pt(l),Z(0),Z(0),pt(o,!0)]),BS=i=>ue("minf",void 0,[LS[i.type](),jS(),kS(i)]),NS=()=>Oe("vmhd",0,1,[ce(0),ce(0),ce(0),ce(0)]),US=()=>Oe("smhd",0,0,[ce(0),ce(0)]),DS=()=>Oe("nmhd",0,0),LS={video:NS,audio:US,subtitle:DS},jS=()=>ue("dinf",void 0,[PS()]),PS=()=>Oe("dref",0,0,[Z(1)],[FS()]),FS=()=>Oe("url ",0,1),kS=i=>{const a=i.compositionTimeOffsetTable.length>1||i.compositionTimeOffsetTable.some(o=>o.sampleCompositionTimeOffset!==0);return ue("stbl",void 0,[HS(i),eE(i),a?rE(i):null,a?oE(i):null,nE(i),iE(i),aE(i),tE(i)])},HS=i=>{let a;if(i.type==="video")a=IS(_E(i.track.source._codec,i.info.decoderConfig.codec),i);else if(i.type==="audio"){const o=hv(i.track.source._codec,i.muxer.isQuickTime);te(o),a=XS(o,i)}else i.type==="subtitle"&&(a=$S(zE[i.track.source._codec],i));return te(a),Oe("stsd",0,0,[Z(1)],[a])},IS=(i,a)=>ue(i,[Array(6).fill(0),ce(1),ce(0),ce(0),Array(12).fill(0),ce(a.info.width),ce(a.info.height),Z(4718592),Z(4718592),Z(0),ce(1),Array(32).fill(0),ce(24),rv(65535)],[TE[a.track.source._codec](a),Uw(a.info.decoderConfig.colorSpace)?VS(a):null]),VS=i=>ue("colr",[pt("nclx"),ce(Tf[i.info.decoderConfig.colorSpace.primaries]),ce(Cf[i.info.decoderConfig.colorSpace.transfer]),ce(zf[i.info.decoderConfig.colorSpace.matrix]),Xe((i.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),YS=i=>i.info.decoderConfig&&ue("avcC",[...Mi(i.info.decoderConfig.description)]),qS=i=>i.info.decoderConfig&&ue("hvcC",[...Mi(i.info.decoderConfig.description)]),Fp=i=>{if(!i.info.decoderConfig)return null;const a=i.info.decoderConfig,o=a.codec.split("."),l=Number(o[1]),c=Number(o[2]),f=Number(o[3]),d=o[4]?Number(o[4]):1,h=o[8]?Number(o[8]):Number(a.colorSpace?.fullRange??0),p=(f<<4)+(d<<1)+h,m=o[5]?Number(o[5]):a.colorSpace?.primaries?Tf[a.colorSpace.primaries]:2,v=o[6]?Number(o[6]):a.colorSpace?.transfer?Cf[a.colorSpace.transfer]:2,y=o[7]?Number(o[7]):a.colorSpace?.matrix?zf[a.colorSpace.matrix]:2;return Oe("vpcC",1,0,[Xe(l),Xe(c),Xe(p),Xe(m),Xe(v),Xe(y),ce(0)])},GS=i=>ue("av1C",Gw(i.info.decoderConfig.codec)),XS=(i,a)=>{let o=0,l,c=16;if(aa.includes(a.track.source._codec)){const f=a.track.source._codec,{sampleSize:d}=bo(f);c=8*d,c>16&&(o=1)}return o===0?l=[Array(6).fill(0),ce(1),ce(o),ce(0),Z(0),ce(a.info.numberOfChannels),ce(c),ce(0),ce(0),ce(a.info.sampleRate<2**16?a.info.sampleRate:0),ce(0)]:l=[Array(6).fill(0),ce(1),ce(o),ce(0),Z(0),ce(a.info.numberOfChannels),ce(Math.min(c,16)),ce(0),ce(0),ce(a.info.sampleRate<2**16?a.info.sampleRate:0),ce(0),Z(1),Z(c/8),Z(a.info.numberOfChannels*c/8),Z(2)],ue(i,l,[CE(a.track.source._codec,a.muxer.isQuickTime)?.(a)??null])},Qu=i=>{let a;switch(i.track.source._codec){case"aac":a=64;break;case"mp3":a=107;break;case"vorbis":a=221;break;default:throw new Error(`Unhandled audio codec: ${i.track.source._codec}`)}let o=[...Xe(a),...Xe(21),...ov(0),...Z(0),...Z(0)];if(i.info.decoderConfig.description){const l=Mi(i.info.decoderConfig.description);o=[...o,...Xe(5),...Xu(l.byteLength),...l]}return o=[...ce(1),...Xe(0),...Xe(4),...Xu(o.length),...o,...Xe(6),...Xe(1),...Xe(2)],o=[...Xe(3),...Xu(o.length),...o],Oe("esds",0,0,o)},_i=i=>ue("wave",void 0,[QS(i),ZS(i),ue("\0\0\0\0")]),QS=i=>ue("frma",[pt(hv(i.track.source._codec,i.muxer.isQuickTime))]),ZS=i=>{const{littleEndian:a}=bo(i.track.source._codec);return ue("enda",[ce(+a)])},KS=i=>{let a=i.info.numberOfChannels,o=3840,l=i.info.sampleRate,c=0,f=0,d=new Uint8Array(0);const h=i.info.decoderConfig?.description;if(h){te(h.byteLength>=18);const p=Mi(h),m=vS(p);a=m.outputChannelCount,o=m.preSkip,l=m.inputSampleRate,c=m.outputGain,f=m.channelMappingFamily,m.channelMappingTable&&(d=m.channelMappingTable)}return ue("dOps",[Xe(0),Xe(a),ce(o),Z(l),rv(c),Xe(f),...d])},WS=i=>{const a=i.info.decoderConfig?.description;te(a);const o=Mi(a);return Oe("dfLa",0,0,[...o.subarray(4)])},mn=i=>{const{littleEndian:a,sampleSize:o}=bo(i.track.source._codec),l=+a;return Oe("pcmC",0,0,[Xe(l),Xe(8*o)])},$S=(i,a)=>ue(i,[Array(6).fill(0),ce(1)],[AE[a.track.source._codec](a)]),JS=i=>ue("vttC",[...bn.encode(i.info.config.description)]),eE=i=>Oe("stts",0,0,[Z(i.timeToSampleTable.length),i.timeToSampleTable.map(a=>[Z(a.sampleCount),Z(a.sampleDelta)])]),tE=i=>{if(i.samples.every(o=>o.type==="key"))return null;const a=[...i.samples.entries()].filter(([,o])=>o.type==="key");return Oe("stss",0,0,[Z(a.length),a.map(([o])=>Z(o+1))])},nE=i=>Oe("stsc",0,0,[Z(i.compactlyCodedChunkTable.length),i.compactlyCodedChunkTable.map(a=>[Z(a.firstChunk),Z(a.samplesPerChunk),Z(1)])]),iE=i=>{if(i.type==="audio"&&i.info.requiresPcmTransformation){const{sampleSize:a}=bo(i.track.source._codec);return Oe("stsz",0,0,[Z(a*i.info.numberOfChannels),Z(i.samples.reduce((o,l)=>o+ot(l.duration,i.timescale),0))])}return Oe("stsz",0,0,[Z(0),Z(i.samples.length),i.samples.map(a=>Z(a.size))])},aE=i=>i.finalizedChunks.length>0&&yn(i.finalizedChunks).offset>=2**32?Oe("co64",0,0,[Z(i.finalizedChunks.length),i.finalizedChunks.map(a=>ra(a.offset))]):Oe("stco",0,0,[Z(i.finalizedChunks.length),i.finalizedChunks.map(a=>Z(a.offset))]),rE=i=>Oe("ctts",1,0,[Z(i.compositionTimeOffsetTable.length),i.compositionTimeOffsetTable.map(a=>[Z(a.sampleCount),Ci(a.sampleCompositionTimeOffset)])]),oE=i=>{let a=1/0,o=-1/0,l=1/0,c=-1/0;te(i.compositionTimeOffsetTable.length>0),te(i.samples.length>0);for(let d=0;d<i.compositionTimeOffsetTable.length;d++){const h=i.compositionTimeOffsetTable[d];a=Math.min(a,h.sampleCompositionTimeOffset),o=Math.max(o,h.sampleCompositionTimeOffset)}for(let d=0;d<i.samples.length;d++){const h=i.samples[d];l=Math.min(l,ot(h.timestamp,i.timescale)),c=Math.max(c,ot(h.timestamp+h.duration,i.timescale))}const f=Math.max(-a,0);return c>=2**31?null:Oe("cslg",0,0,[Ci(f),Ci(a),Ci(o),Ci(l),Ci(c)])},lE=i=>ue("mvex",void 0,i.map(sE)),sE=i=>Oe("trex",0,0,[Z(i.track.id),Z(1),Z(0),Z(0),Z(0)]),kp=(i,a)=>ue("moof",void 0,[cE(i),...a.map(uE)]),cE=i=>Oe("mfhd",0,0,[Z(i)]),fv=i=>{let a=0,o=0;const l=0,c=0,f=i.type==="delta";return o|=+f,f?a|=1:a|=2,a<<24|o<<16|l<<8|c},uE=i=>ue("traf",void 0,[fE(i),dE(i),hE(i)]),fE=i=>{te(i.currentChunk);let a=0;a|=8,a|=16,a|=32,a|=131072;const o=i.currentChunk.samples[1]??i.currentChunk.samples[0],l={duration:o.timescaleUnitsToNextSample,size:o.size,flags:fv(o)};return Oe("tfhd",0,a,[Z(i.track.id),Z(l.duration),Z(l.size),Z(l.flags)])},dE=i=>(te(i.currentChunk),Oe("tfdt",1,0,[ra(ot(i.currentChunk.startTimestamp,i.timescale))])),hE=i=>{te(i.currentChunk);const a=i.currentChunk.samples.map(_=>_.timescaleUnitsToNextSample),o=i.currentChunk.samples.map(_=>_.size),l=i.currentChunk.samples.map(fv),c=i.currentChunk.samples.map(_=>ot(_.timestamp-_.decodeTimestamp,i.timescale)),f=new Set(a),d=new Set(o),h=new Set(l),p=new Set(c),m=h.size===2&&l[0]!==l[1],v=f.size>1,y=d.size>1,b=!m&&h.size>1,w=p.size>1||[...p].some(_=>_!==0);let E=0;return E|=1,E|=4*+m,E|=256*+v,E|=512*+y,E|=1024*+b,E|=2048*+w,Oe("trun",1,E,[Z(i.currentChunk.samples.length),Z(i.currentChunk.offset-i.currentChunk.moofOffset||0),m?Z(l[0]):[],i.currentChunk.samples.map((_,S)=>[v?Z(a[S]):[],y?Z(o[S]):[],b?Z(l[S]):[],w?Ci(c[S]):[]])])},mE=i=>ue("mfra",void 0,[...i.map(pE),gE()]),pE=(i,a)=>Oe("tfra",1,0,[Z(i.track.id),Z(63),Z(i.finalizedChunks.length),i.finalizedChunks.map(l=>[ra(ot(l.samples[0].timestamp,i.timescale)),ra(l.moofOffset),Z(a+1),Z(1),Z(1)])]),gE=()=>Oe("mfro",0,0,[Z(0)]),vE=()=>ue("vtte"),yE=(i,a,o,l,c)=>ue("vttc",void 0,[c!==null?ue("vsid",[Ci(c)]):null,o!==null?ue("iden",[...bn.encode(o)]):null,a!==null?ue("ctim",[...bn.encode(SS(a))]):null,l!==null?ue("sttg",[...bn.encode(l)]):null,ue("payl",[...bn.encode(i)])]),xE=i=>ue("vtta",[...bn.encode(i)]),bE=i=>{const a=[],o=i.format._options.metadataFormat??"auto",l=i.output._metadataTags;if(o==="mdir"||o==="auto"&&!i.isQuickTime){const c=SE(l);c&&a.push(c)}else if(o==="mdta"){const c=EE(l);c&&a.push(c)}else(o==="udta"||o==="auto"&&i.isQuickTime)&&wE(a,i.output._metadataTags);return a.length===0?null:ue("udta",void 0,a)},wE=(i,a)=>{for(const{key:o,value:l}of tv(a))switch(o){case"title":i.push(pn("nam",l));break;case"description":i.push(pn("des",l));break;case"artist":i.push(pn("ART",l));break;case"album":i.push(pn("alb",l));break;case"albumArtist":i.push(pn("albr",l));break;case"genre":i.push(pn("gen",l));break;case"date":i.push(pn("day",l.toISOString().slice(0,10)));break;case"comment":i.push(pn("cmt",l));break;case"lyrics":i.push(pn("lyr",l));break;case"raw":break;case"discNumber":case"discsTotal":case"trackNumber":case"tracksTotal":case"images":break;default:ev(o)}if(a.raw)for(const o in a.raw){const l=a.raw[o];l==null||o.length!==4||i.some(c=>c.type===o)||(typeof l=="string"?i.push(pn(o,l)):l instanceof Uint8Array&&i.push(ue(o,Array.from(l))))}},pn=(i,a)=>{const o=bn.encode(a);return ue(i,[ce(o.length),ce(mv("und")),Array.from(o)])},Hp={"image/jpeg":13,"image/png":14,"image/bmp":27},dv=(i,a)=>{const o=[];for(const{key:l,value:c}of tv(i))switch(l){case"title":o.push({key:a?"title":"nam",value:an(c)});break;case"description":o.push({key:a?"description":"des",value:an(c)});break;case"artist":o.push({key:a?"artist":"ART",value:an(c)});break;case"album":o.push({key:a?"album":"alb",value:an(c)});break;case"albumArtist":o.push({key:a?"album_artist":"aART",value:an(c)});break;case"comment":o.push({key:a?"comment":"cmt",value:an(c)});break;case"genre":o.push({key:a?"genre":"gen",value:an(c)});break;case"lyrics":o.push({key:a?"lyrics":"lyr",value:an(c)});break;case"date":o.push({key:a?"date":"day",value:an(c.toISOString().slice(0,10))});break;case"images":for(const f of c)f.kind==="coverFront"&&o.push({key:"covr",value:ue("data",[Z(Hp[f.mimeType]??0),Z(0),Array.from(f.data)])});break;case"trackNumber":if(a){const f=i.tracksTotal!==void 0?`${c}/${i.tracksTotal}`:c.toString();o.push({key:"track",value:an(f)})}else o.push({key:"trkn",value:ue("data",[Z(0),Z(0),ce(0),ce(c),ce(i.tracksTotal??0),ce(0)])});break;case"discNumber":a||o.push({key:"disc",value:ue("data",[Z(0),Z(0),ce(0),ce(c),ce(i.discsTotal??0),ce(0)])});break;case"tracksTotal":case"discsTotal":break;case"raw":break;default:ev(l)}if(i.raw)for(const l in i.raw){const c=i.raw[l];c==null||!a&&l.length!==4||o.some(f=>f.key===l)||(typeof c=="string"?o.push({key:l,value:an(c)}):c instanceof Uint8Array?o.push({key:l,value:ue("data",[Z(0),Z(0),Array.from(c)])}):c instanceof nv&&o.push({key:l,value:ue("data",[Z(Hp[c.mimeType]??0),Z(0),Array.from(c.data)])}))}return o},SE=i=>{const a=dv(i,!1);return a.length===0?null:Oe("meta",0,0,void 0,[Of(!1,"mdir","","appl"),ue("ilst",void 0,a.map(o=>ue(o.key,void 0,[o.value])))])},EE=i=>{const a=dv(i,!0);return a.length===0?null:ue("meta",void 0,[Of(!1,"mdta",""),Oe("keys",0,0,[Z(a.length)],a.map(o=>ue("mdta",[...bn.encode(o.key)]))),ue("ilst",void 0,a.map((o,l)=>{const c=String.fromCharCode(...Z(l+1));return ue(c,void 0,[o.value])}))])},an=i=>ue("data",[Z(1),Z(0),...bn.encode(i)]),_E=(i,a)=>{switch(i){case"avc":return a.startsWith("avc3")?"avc3":"avc1";case"hevc":return"hvc1";case"vp8":return"vp08";case"vp9":return"vp09";case"av1":return"av01"}},TE={avc:YS,hevc:qS,vp8:Fp,vp9:Fp,av1:GS},hv=(i,a)=>{switch(i){case"aac":return"mp4a";case"mp3":return"mp4a";case"opus":return"Opus";case"vorbis":return"mp4a";case"flac":return"fLaC";case"ulaw":return"ulaw";case"alaw":return"alaw";case"pcm-u8":return"raw ";case"pcm-s8":return"sowt"}if(a)switch(i){case"pcm-s16":return"sowt";case"pcm-s16be":return"twos";case"pcm-s24":return"in24";case"pcm-s24be":return"in24";case"pcm-s32":return"in32";case"pcm-s32be":return"in32";case"pcm-f32":return"fl32";case"pcm-f32be":return"fl32";case"pcm-f64":return"fl64";case"pcm-f64be":return"fl64"}else switch(i){case"pcm-s16":return"ipcm";case"pcm-s16be":return"ipcm";case"pcm-s24":return"ipcm";case"pcm-s24be":return"ipcm";case"pcm-s32":return"ipcm";case"pcm-s32be":return"ipcm";case"pcm-f32":return"fpcm";case"pcm-f32be":return"fpcm";case"pcm-f64":return"fpcm";case"pcm-f64be":return"fpcm"}},CE=(i,a)=>{switch(i){case"aac":return Qu;case"mp3":return Qu;case"opus":return KS;case"vorbis":return Qu;case"flac":return WS}if(a)switch(i){case"pcm-s24":return _i;case"pcm-s24be":return _i;case"pcm-s32":return _i;case"pcm-s32be":return _i;case"pcm-f32":return _i;case"pcm-f32be":return _i;case"pcm-f64":return _i;case"pcm-f64be":return _i}else switch(i){case"pcm-s16":return mn;case"pcm-s16be":return mn;case"pcm-s24":return mn;case"pcm-s24be":return mn;case"pcm-s32":return mn;case"pcm-s32be":return mn;case"pcm-f32":return mn;case"pcm-f32be":return mn;case"pcm-f64":return mn;case"pcm-f64be":return mn}return null},zE={webvtt:"wvtt"},AE={webvtt:JS},mv=i=>{te(i.length===3);let a=0;for(let o=0;o<3;o++)a<<=5,a+=i.charCodeAt(o)-96;return a};class RE{constructor(){this.ensureMonotonicity=!1,this.trackedWrites=null,this.trackedStart=-1,this.trackedEnd=-1}start(){}maybeTrackWrites(a){if(!this.trackedWrites)return;let o=this.getPos();if(o<this.trackedStart){if(o+a.byteLength<=this.trackedStart)return;a=a.subarray(this.trackedStart-o),o=0}const l=o+a.byteLength-this.trackedStart;let c=this.trackedWrites.byteLength;for(;c<l;)c*=2;if(c!==this.trackedWrites.byteLength){const f=new Uint8Array(c);f.set(this.trackedWrites,0),this.trackedWrites=f}this.trackedWrites.set(a,o-this.trackedStart),this.trackedEnd=Math.max(this.trackedEnd,o+a.byteLength)}startTrackingWrites(){this.trackedWrites=new Uint8Array(2**10),this.trackedStart=this.getPos(),this.trackedEnd=this.trackedStart}stopTrackingWrites(){if(!this.trackedWrites)throw new Error("Internal error: Can't get tracked writes since nothing was tracked.");const o={data:this.trackedWrites.subarray(0,this.trackedEnd-this.trackedStart),start:this.trackedStart,end:this.trackedEnd};return this.trackedWrites=null,o}}const Zu=2**16,Ku=2**32;class pv extends RE{constructor(a){if(super(),this.pos=0,this.maxPos=0,this.target=a,this.supportsResize="resize"in new ArrayBuffer(0),this.supportsResize)try{this.buffer=new ArrayBuffer(Zu,{maxByteLength:Ku})}catch{this.buffer=new ArrayBuffer(Zu),this.supportsResize=!1}else this.buffer=new ArrayBuffer(Zu);this.bytes=new Uint8Array(this.buffer)}ensureSize(a){let o=this.buffer.byteLength;for(;o<a;)o*=2;if(o!==this.buffer.byteLength){if(o>Ku)throw new Error(`ArrayBuffer exceeded maximum size of ${Ku} bytes. Please consider using another target.`);if(this.supportsResize)this.buffer.resize(o);else{const l=new ArrayBuffer(o),c=new Uint8Array(l);c.set(this.bytes,0),this.buffer=l,this.bytes=c}}}write(a){this.maybeTrackWrites(a),this.ensureSize(this.pos+a.byteLength),this.bytes.set(a,this.pos),this.target.onwrite?.(this.pos,this.pos+a.byteLength),this.pos+=a.byteLength,this.maxPos=Math.max(this.maxPos,this.pos)}seek(a){this.pos=a}getPos(){return this.pos}async flush(){}async finalize(){this.ensureSize(this.pos),this.target.buffer=this.buffer.slice(0,Math.max(this.maxPos,this.pos))}async close(){}getSlice(a,o){return this.bytes.slice(a,o)}}class gv{constructor(){this._output=null,this.onwrite=null}}class vv extends gv{constructor(){super(...arguments),this.buffer=null}_createWriter(){return new pv(this)}}const uf=1e3,ME=2082844800,OE=i=>{const a={},o=i.track;return o.metadata.name!==void 0&&(a.name=o.metadata.name),a},ot=(i,a,o=!0)=>{const l=i*a;return o?Math.round(l):l};class BE extends aS{constructor(a,o){super(a),this.auxTarget=new vv,this.auxWriter=this.auxTarget._createWriter(),this.auxBoxWriter=new Pp(this.auxWriter),this.mdat=null,this.ftypSize=null,this.trackDatas=[],this.allTracksKnown=Dw(),this.creationTime=Math.floor(Date.now()/1e3)+ME,this.finalizedChunks=[],this.nextFragmentNumber=1,this.maxWrittenTimestamp=-1/0,this.format=o,this.writer=a._writer,this.boxWriter=new Pp(this.writer),this.isQuickTime=o instanceof wv;const l=this.writer instanceof pv?"in-memory":!1;this.fastStart=o._options.fastStart??l,this.isFragmented=this.fastStart==="fragmented",(this.fastStart==="in-memory"||this.isFragmented)&&(this.writer.ensureMonotonicity=!0),this.minimumFragmentDuration=o._options.minimumFragmentDuration??1}async start(){const a=await this.mutex.acquire(),o=this.output._tracks.some(l=>l.type==="video"&&l.source._codec==="avc");if(this.format._options.onFtyp&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(ES({isQuickTime:this.isQuickTime,holdsAvc:o,fragmented:this.isFragmented})),this.format._options.onFtyp){const{data:l,start:c}=this.writer.stopTrackingWrites();this.format._options.onFtyp(l,c)}if(this.ftypSize=this.writer.getPos(),this.fastStart!=="in-memory")if(this.fastStart==="reserve"){for(const l of this.output._tracks)if(l.metadata.maximumPacketCount===void 0)throw new Error("All tracks must specify maximumPacketCount in their metadata when using fastStart: 'reserve'.")}else this.isFragmented||(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=ql(!0),this.boxWriter.writeBox(this.mdat));await this.writer.flush(),a()}allTracksAreKnown(){for(const a of this.output._tracks)if(!a.source._closed&&!this.trackDatas.some(o=>o.track===a))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;const a=this.trackDatas.map(o=>o.type==="video"||o.type==="audio"?o.info.decoderConfig.codec:{webvtt:"wvtt"}[o.track.source._codec]);return wS({isQuickTime:this.isQuickTime,hasVideo:this.trackDatas.some(o=>o.type==="video"),hasAudio:this.trackDatas.some(o=>o.type==="audio"),codecStrings:a})}getVideoTrackData(a,o,l){const c=this.trackDatas.find(m=>m.track===a);if(c)return c;eS(l),te(l),te(l.decoderConfig);const f={...l.decoderConfig};te(f.codedWidth!==void 0),te(f.codedHeight!==void 0);let d=!1;if(a.source._codec==="avc"&&!f.description){const m=oS(o.data);if(!m)throw new Error("Couldn't extract an AVCDecoderConfigurationRecord from the AVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.264) when not providing a description, or provide a description (must be an AVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in AVCC format.");f.description=lS(m),d=!0}else if(a.source._codec==="hevc"&&!f.description){const m=cS(o.data);if(!m)throw new Error("Couldn't extract an HEVCDecoderConfigurationRecord from the HEVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.265) when not providing a description, or provide a description (must be an HEVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in HEVC format.");f.description=gS(m),d=!0}const h=Fw(1/(a.metadata.frameRate??57600),1e6).denominator,p={muxer:this,track:a,type:"video",info:{width:f.codedWidth,height:f.codedHeight,decoderConfig:f,requiresAnnexBTransformation:d},timescale:h,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(p),this.trackDatas.sort((m,v)=>m.track.id-v.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),p}getAudioTrackData(a,o){const l=this.trackDatas.find(f=>f.track===a);if(l)return l;nS(o),te(o),te(o.decoderConfig);const c={muxer:this,track:a,type:"audio",info:{numberOfChannels:o.decoderConfig.numberOfChannels,sampleRate:o.decoderConfig.sampleRate,decoderConfig:o.decoderConfig,requiresPcmTransformation:!this.isFragmented&&aa.includes(a.source._codec)},timescale:o.decoderConfig.sampleRate,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(c),this.trackDatas.sort((f,d)=>f.track.id-d.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),c}getSubtitleTrackData(a,o){const l=this.trackDatas.find(f=>f.track===a);if(l)return l;iS(o),te(o),te(o.config);const c={muxer:this,track:a,type:"subtitle",info:{config:o.config},timescale:1e3,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[],lastCueEndTimestamp:0,cueQueue:[],nextSourceId:0,cueToSourceId:new WeakMap};return this.trackDatas.push(c),this.trackDatas.sort((f,d)=>f.track.id-d.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),c}async addEncodedVideoPacket(a,o,l){const c=await this.mutex.acquire();try{const f=this.getVideoTrackData(a,o,l);let d=o.data;if(f.info.requiresAnnexBTransformation){const m=rS(d);if(!m)throw new Error("Failed to transform packet data. Make sure all packets are provided in Annex B format, as specified in ITU-T-REC-H.264 and ITU-T-REC-H.265.");d=m}const h=this.validateAndNormalizeTimestamp(f.track,o.timestamp,o.type==="key"),p=this.createSampleForTrack(f,d,h,o.duration,o.type);await this.registerSample(f,p)}finally{c()}}async addEncodedAudioPacket(a,o,l){const c=await this.mutex.acquire();try{const f=this.getAudioTrackData(a,l),d=this.validateAndNormalizeTimestamp(f.track,o.timestamp,o.type==="key"),h=this.createSampleForTrack(f,o.data,d,o.duration,o.type);f.info.requiresPcmTransformation&&await this.maybePadWithSilence(f,d),await this.registerSample(f,h)}finally{c()}}async maybePadWithSilence(a,o){const l=yn(a.samples),c=l?l.timestamp+l.duration:0,f=o-c,d=ot(f,a.timescale);if(d>0){const{sampleSize:h,silentValue:p}=bo(a.info.decoderConfig.codec),m=d*a.info.numberOfChannels,v=new Uint8Array(h*m).fill(p),y=this.createSampleForTrack(a,new Uint8Array(v.buffer),c,f,"key");await this.registerSample(a,y)}}async addSubtitleCue(a,o,l){const c=await this.mutex.acquire();try{const f=this.getSubtitleTrackData(a,l);this.validateAndNormalizeTimestamp(f.track,o.timestamp,!0),a.source._codec==="webvtt"&&(f.cueQueue.push(o),await this.processWebVTTCues(f,o.timestamp))}finally{c()}}async processWebVTTCues(a,o){for(;a.cueQueue.length>0;){const l=new Set([]);for(const m of a.cueQueue)te(m.timestamp<=o),te(a.lastCueEndTimestamp<=m.timestamp+m.duration),l.add(Math.max(m.timestamp,a.lastCueEndTimestamp)),l.add(m.timestamp+m.duration);const c=[...l].sort((m,v)=>m-v),f=c[0],d=c[1]??f;if(o<d)break;if(a.lastCueEndTimestamp<f){this.auxWriter.seek(0);const m=vE();this.auxBoxWriter.writeBox(m);const v=this.auxWriter.getSlice(0,this.auxWriter.getPos()),y=this.createSampleForTrack(a,v,a.lastCueEndTimestamp,f-a.lastCueEndTimestamp,"key");await this.registerSample(a,y),a.lastCueEndTimestamp=f}this.auxWriter.seek(0);for(let m=0;m<a.cueQueue.length;m++){const v=a.cueQueue[m];if(v.timestamp>=d)break;jp.lastIndex=0;const y=jp.test(v.text),b=v.timestamp+v.duration;let w=a.cueToSourceId.get(v);if(w===void 0&&d<b&&(w=a.nextSourceId++,a.cueToSourceId.set(v,w)),v.notes){const _=xE(v.notes);this.auxBoxWriter.writeBox(_)}const E=yE(v.text,y?f:null,v.identifier??null,v.settings??null,w??null);this.auxBoxWriter.writeBox(E),b===d&&a.cueQueue.splice(m--,1)}const h=this.auxWriter.getSlice(0,this.auxWriter.getPos()),p=this.createSampleForTrack(a,h,f,d-f,"key");await this.registerSample(a,p),a.lastCueEndTimestamp=d}}createSampleForTrack(a,o,l,c,f){return{timestamp:l,decodeTimestamp:l,duration:c,data:o,size:o.byteLength,type:f,timescaleUnitsToNextSample:ot(c,a.timescale)}}processTimestamps(a,o){if(a.timestampProcessingQueue.length===0)return;if(a.type==="audio"&&a.info.requiresPcmTransformation){let c=0;for(let f=0;f<a.timestampProcessingQueue.length;f++){const d=a.timestampProcessingQueue[f],h=ot(d.duration,a.timescale);c+=h}if(a.timeToSampleTable.length===0)a.timeToSampleTable.push({sampleCount:c,sampleDelta:1});else{const f=yn(a.timeToSampleTable);f.sampleCount+=c}a.timestampProcessingQueue.length=0;return}const l=a.timestampProcessingQueue.map(c=>c.timestamp).sort((c,f)=>c-f);for(let c=0;c<a.timestampProcessingQueue.length;c++){const f=a.timestampProcessingQueue[c];f.decodeTimestamp=l[c],!this.isFragmented&&a.lastTimescaleUnits===null&&(f.decodeTimestamp=0);const d=ot(f.timestamp-f.decodeTimestamp,a.timescale),h=ot(f.duration,a.timescale);if(a.lastTimescaleUnits!==null){te(a.lastSample);const p=ot(f.decodeTimestamp,a.timescale,!1),m=Math.round(p-a.lastTimescaleUnits);if(te(m>=0),a.lastTimescaleUnits+=m,a.lastSample.timescaleUnitsToNextSample=m,!this.isFragmented){let v=yn(a.timeToSampleTable);if(te(v),v.sampleCount===1){v.sampleDelta=m;const b=a.timeToSampleTable[a.timeToSampleTable.length-2];b&&b.sampleDelta===m&&(b.sampleCount++,a.timeToSampleTable.pop(),v=b)}else v.sampleDelta!==m&&(v.sampleCount--,a.timeToSampleTable.push(v={sampleCount:1,sampleDelta:m}));v.sampleDelta===h?v.sampleCount++:a.timeToSampleTable.push({sampleCount:1,sampleDelta:h});const y=yn(a.compositionTimeOffsetTable);te(y),y.sampleCompositionTimeOffset===d?y.sampleCount++:a.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:d})}}else a.lastTimescaleUnits=ot(f.decodeTimestamp,a.timescale,!1),this.isFragmented||(a.timeToSampleTable.push({sampleCount:1,sampleDelta:h}),a.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:d}));a.lastSample=f}if(a.timestampProcessingQueue.length=0,te(a.lastSample),te(a.lastTimescaleUnits!==null),o!==void 0&&a.lastSample.timescaleUnitsToNextSample===0){te(o.type==="key");const c=ot(o.timestamp,a.timescale,!1),f=Math.round(c-a.lastTimescaleUnits);a.lastSample.timescaleUnitsToNextSample=f}}async registerSample(a,o){o.type==="key"&&this.processTimestamps(a,o),a.timestampProcessingQueue.push(o),this.isFragmented?(a.sampleQueue.push(o),await this.interleaveSamples()):this.fastStart==="reserve"?await this.registerSampleFastStartReserve(a,o):await this.addSampleToTrack(a,o)}async addSampleToTrack(a,o){if(!this.isFragmented&&(a.samples.push(o),this.fastStart==="reserve")){const c=a.track.metadata.maximumPacketCount;if(te(c!==void 0),a.samples.length>c)throw new Error(`Track #${a.track.id} has already reached the maximum packet count (${c}). Either add less packets or increase the maximum packet count.`)}let l=!1;if(!a.currentChunk)l=!0;else{a.currentChunk.startTimestamp=Math.min(a.currentChunk.startTimestamp,o.timestamp);const c=o.timestamp-a.currentChunk.startTimestamp;if(this.isFragmented){const f=this.trackDatas.every(d=>{if(a===d)return o.type==="key";const h=d.sampleQueue[0];return h?h.type==="key":d.track.source._closed});c>=this.minimumFragmentDuration&&f&&o.timestamp>this.maxWrittenTimestamp&&(l=!0,await this.finalizeFragment())}else l=c>=.5}l&&(a.currentChunk&&await this.finalizeCurrentChunk(a),a.currentChunk={startTimestamp:o.timestamp,samples:[],offset:null,moofOffset:null}),te(a.currentChunk),a.currentChunk.samples.push(o),this.isFragmented&&(this.maxWrittenTimestamp=Math.max(this.maxWrittenTimestamp,o.timestamp))}async finalizeCurrentChunk(a){if(te(!this.isFragmented),!a.currentChunk)return;a.finalizedChunks.push(a.currentChunk),this.finalizedChunks.push(a.currentChunk);let o=a.currentChunk.samples.length;if(a.type==="audio"&&a.info.requiresPcmTransformation&&(o=a.currentChunk.samples.reduce((l,c)=>l+ot(c.duration,a.timescale),0)),(a.compactlyCodedChunkTable.length===0||yn(a.compactlyCodedChunkTable).samplesPerChunk!==o)&&a.compactlyCodedChunkTable.push({firstChunk:a.finalizedChunks.length,samplesPerChunk:o}),this.fastStart==="in-memory"){a.currentChunk.offset=0;return}a.currentChunk.offset=this.writer.getPos();for(const l of a.currentChunk.samples)te(l.data),this.writer.write(l.data),l.data=null;await this.writer.flush()}async interleaveSamples(a=!1){if(te(this.isFragmented),!(!a&&!this.allTracksAreKnown()))e:for(;;){let o=null,l=1/0;for(const f of this.trackDatas){if(!a&&f.sampleQueue.length===0&&!f.track.source._closed)break e;f.sampleQueue.length>0&&f.sampleQueue[0].timestamp<l&&(o=f,l=f.sampleQueue[0].timestamp)}if(!o)break;const c=o.sampleQueue.shift();await this.addSampleToTrack(o,c)}}async finalizeFragment(a=!0){te(this.isFragmented);const o=this.nextFragmentNumber++;if(o===1){this.format._options.onMoov&&this.writer.startTrackingWrites();const w=co(this);if(this.boxWriter.writeBox(w),this.format._options.onMoov){const{data:E,start:_}=this.writer.stopTrackingWrites();this.format._options.onMoov(E,_)}}const l=this.trackDatas.filter(w=>w.currentChunk),c=kp(o,l),f=this.writer.getPos(),d=f+this.boxWriter.measureBox(c);let h=d+qu,p=1/0;for(const w of l){w.currentChunk.offset=h,w.currentChunk.moofOffset=f;for(const E of w.currentChunk.samples)h+=E.size;p=Math.min(p,w.currentChunk.startTimestamp)}const m=h-d,v=m>=2**32;if(v)for(const w of l)w.currentChunk.offset+=Lp-qu;this.format._options.onMoof&&this.writer.startTrackingWrites();const y=kp(o,l);if(this.boxWriter.writeBox(y),this.format._options.onMoof){const{data:w,start:E}=this.writer.stopTrackingWrites();this.format._options.onMoof(w,E,p)}te(this.writer.getPos()===d),this.format._options.onMdat&&this.writer.startTrackingWrites();const b=ql(v);b.size=m,this.boxWriter.writeBox(b),this.writer.seek(d+(v?Lp:qu));for(const w of l)for(const E of w.currentChunk.samples)this.writer.write(E.data),E.data=null;if(this.format._options.onMdat){const{data:w,start:E}=this.writer.stopTrackingWrites();this.format._options.onMdat(w,E)}for(const w of l)w.finalizedChunks.push(w.currentChunk),this.finalizedChunks.push(w.currentChunk),w.currentChunk=null;a&&await this.writer.flush()}async registerSampleFastStartReserve(a,o){if(this.allTracksAreKnown()){if(!this.mdat){const l=co(this),f=this.boxWriter.measureBox(l)+this.computeSampleTableSizeUpperBound()+4096;te(this.ftypSize!==null),this.writer.seek(this.ftypSize+f),this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=ql(!0),this.boxWriter.writeBox(this.mdat);for(const d of this.trackDatas){for(const h of d.sampleQueue)await this.addSampleToTrack(d,h);d.sampleQueue.length=0}}await this.addSampleToTrack(a,o)}else a.sampleQueue.push(o)}computeSampleTableSizeUpperBound(){te(this.fastStart==="reserve");let a=0;for(const o of this.trackDatas){const l=o.track.metadata.maximumPacketCount;te(l!==void 0),a+=8*Math.ceil(2/3*l),a+=4*l,a+=8*Math.ceil(2/3*l),a+=12*Math.ceil(2/3*l),a+=4*l,a+=8*l}return a}async onTrackClose(a){const o=await this.mutex.acquire();if(a.type==="subtitle"&&a.source._codec==="webvtt"){const l=this.trackDatas.find(c=>c.track===a);l&&await this.processWebVTTCues(l,1/0)}this.allTracksAreKnown()&&this.allTracksKnown.resolve(),this.isFragmented&&await this.interleaveSamples(),o()}async finalize(){const a=await this.mutex.acquire();this.allTracksKnown.resolve();for(const o of this.trackDatas)o.type==="subtitle"&&o.track.source._codec==="webvtt"&&await this.processWebVTTCues(o,1/0);if(this.isFragmented){await this.interleaveSamples(!0);for(const o of this.trackDatas)this.processTimestamps(o);await this.finalizeFragment(!1)}else for(const o of this.trackDatas)this.processTimestamps(o),await this.finalizeCurrentChunk(o);if(this.fastStart==="in-memory"){this.mdat=ql(!1);let o;for(let c=0;c<2;c++){const f=co(this),d=this.boxWriter.measureBox(f);o=this.boxWriter.measureBox(this.mdat);let h=this.writer.getPos()+d+o;for(const p of this.finalizedChunks){p.offset=h;for(const{data:m}of p.samples)te(m),h+=m.byteLength,o+=m.byteLength}if(h<2**32)break;o>=2**32&&(this.mdat.largeSize=!0)}this.format._options.onMoov&&this.writer.startTrackingWrites();const l=co(this);if(this.boxWriter.writeBox(l),this.format._options.onMoov){const{data:c,start:f}=this.writer.stopTrackingWrites();this.format._options.onMoov(c,f)}this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat.size=o,this.boxWriter.writeBox(this.mdat);for(const c of this.finalizedChunks)for(const f of c.samples)te(f.data),this.writer.write(f.data),f.data=null;if(this.format._options.onMdat){const{data:c,start:f}=this.writer.stopTrackingWrites();this.format._options.onMdat(c,f)}}else if(this.isFragmented){const o=this.writer.getPos(),l=mE(this.trackDatas);this.boxWriter.writeBox(l);const c=this.writer.getPos()-o;this.writer.seek(this.writer.getPos()-4),this.boxWriter.writeU32(c)}else{te(this.mdat);const o=this.boxWriter.offsets.get(this.mdat);te(o!==void 0);const l=this.writer.getPos()-o;if(this.mdat.size=l,this.mdat.largeSize=l>=2**32,this.boxWriter.patchBox(this.mdat),this.format._options.onMdat){const{data:f,start:d}=this.writer.stopTrackingWrites();this.format._options.onMdat(f,d)}const c=co(this);if(this.fastStart==="reserve"){te(this.ftypSize!==null),this.writer.seek(this.ftypSize),this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(c);const f=this.boxWriter.offsets.get(this.mdat)-this.writer.getPos();this.boxWriter.writeBox(_S(f))}else this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(c);if(this.format._options.onMoov){const{data:f,start:d}=this.writer.stopTrackingWrites();this.format._options.onMoov(f,d)}}a()}}class yv{getSupportedVideoCodecs(){return this.getSupportedCodecs().filter(a=>ia.includes(a))}getSupportedAudioCodecs(){return this.getSupportedCodecs().filter(a=>as.includes(a))}getSupportedSubtitleCodecs(){return this.getSupportedCodecs().filter(a=>rs.includes(a))}_codecUnsupportedHint(a){return""}}class xv extends yv{constructor(a={}){if(!a||typeof a!="object")throw new TypeError("options must be an object.");if(a.fastStart!==void 0&&![!1,"in-memory","reserve","fragmented"].includes(a.fastStart))throw new TypeError("options.fastStart, when provided, must be false, 'in-memory', 'reserve', or 'fragmented'.");if(a.minimumFragmentDuration!==void 0&&(!Number.isFinite(a.minimumFragmentDuration)||a.minimumFragmentDuration<0))throw new TypeError("options.minimumFragmentDuration, when provided, must be a non-negative number.");if(a.onFtyp!==void 0&&typeof a.onFtyp!="function")throw new TypeError("options.onFtyp, when provided, must be a function.");if(a.onMoov!==void 0&&typeof a.onMoov!="function")throw new TypeError("options.onMoov, when provided, must be a function.");if(a.onMdat!==void 0&&typeof a.onMdat!="function")throw new TypeError("options.onMdat, when provided, must be a function.");if(a.onMoof!==void 0&&typeof a.onMoof!="function")throw new TypeError("options.onMoof, when provided, must be a function.");if(a.metadataFormat!==void 0&&!["mdir","mdta","udta","auto"].includes(a.metadataFormat))throw new TypeError("options.metadataFormat, when provided, must be either 'auto', 'mdir', 'mdta', or 'udta'.");super(),this._options=a}getSupportedTrackCounts(){return{video:{min:0,max:1/0},audio:{min:0,max:1/0},subtitle:{min:0,max:1/0},total:{min:1,max:2**32-1}}}get supportsVideoRotationMetadata(){return!0}_createMuxer(a){return new BE(a,this)}}class bv extends xv{constructor(a){super(a)}get _name(){return"MP4"}get fileExtension(){return".mp4"}get mimeType(){return"video/mp4"}getSupportedCodecs(){return[...ia,...iv,"pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be",...rs]}_codecUnsupportedHint(a){return new wv().getSupportedCodecs().includes(a)?" Switching to MOV will grant support for this codec.":""}}class wv extends xv{constructor(a){super(a)}get _name(){return"MOV"}get fileExtension(){return".mov"}get mimeType(){return"video/quicktime"}getSupportedCodecs(){return[...ia,...as]}_codecUnsupportedHint(a){return new bv().getSupportedCodecs().includes(a)?" Switching to MP4 will grant support for this codec.":""}}const NE=i=>{if(!i||typeof i!="object")throw new TypeError("Encoding config must be an object.");if(!ia.includes(i.codec))throw new TypeError(`Invalid video codec '${i.codec}'. Must be one of: ${ia.join(", ")}.`);if(!(i.bitrate instanceof Bf)&&(!Number.isInteger(i.bitrate)||i.bitrate<=0))throw new TypeError("config.bitrate must be a positive integer or a quality.");if(i.keyFrameInterval!==void 0&&(!Number.isFinite(i.keyFrameInterval)||i.keyFrameInterval<0))throw new TypeError("config.keyFrameInterval, when provided, must be a non-negative number.");if(i.sizeChangeBehavior!==void 0&&!["deny","passThrough","fill","contain","cover"].includes(i.sizeChangeBehavior))throw new TypeError("config.sizeChangeBehavior, when provided, must be 'deny', 'passThrough', 'fill', 'contain' or 'cover'.");if(i.onEncodedPacket!==void 0&&typeof i.onEncodedPacket!="function")throw new TypeError("config.onEncodedChunk, when provided, must be a function.");if(i.onEncoderConfig!==void 0&&typeof i.onEncoderConfig!="function")throw new TypeError("config.onEncoderConfig, when provided, must be a function.");UE(i.codec,i)},UE=(i,a)=>{if(!a||typeof a!="object")throw new TypeError("Encoding options must be an object.");if(a.alpha!==void 0&&!["discard","keep"].includes(a.alpha))throw new TypeError("options.alpha, when provided, must be 'discard' or 'keep'.");if(a.bitrateMode!==void 0&&!["constant","variable"].includes(a.bitrateMode))throw new TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(a.latencyMode!==void 0&&!["quality","realtime"].includes(a.latencyMode))throw new TypeError("latencyMode, when provided, must be 'quality' or 'realtime'.");if(a.fullCodecString!==void 0&&typeof a.fullCodecString!="string")throw new TypeError("fullCodecString, when provided, must be a string.");if(a.fullCodecString!==void 0&&Xw(a.fullCodecString)!==i)throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${i}).`);if(a.hardwareAcceleration!==void 0&&!["no-preference","prefer-hardware","prefer-software"].includes(a.hardwareAcceleration))throw new TypeError("hardwareAcceleration, when provided, must be 'no-preference', 'prefer-hardware' or 'prefer-software'.");if(a.scalabilityMode!==void 0&&typeof a.scalabilityMode!="string")throw new TypeError("scalabilityMode, when provided, must be a string.");if(a.contentHint!==void 0&&typeof a.contentHint!="string")throw new TypeError("contentHint, when provided, must be a string.")},DE=i=>{const a=i.bitrate instanceof Bf?i.bitrate._toVideoBitrate(i.codec,i.width,i.height):i.bitrate;return{codec:i.fullCodecString??qw(i.codec,i.width,i.height,a),width:i.width,height:i.height,bitrate:a,bitrateMode:i.bitrateMode,alpha:i.alpha??"discard",framerate:i.framerate,latencyMode:i.latencyMode,hardwareAcceleration:i.hardwareAcceleration,scalabilityMode:i.scalabilityMode,contentHint:i.contentHint,...Qw(i.codec)}};class Bf{constructor(a){this._factor=a}_toVideoBitrate(a,o,l){const c=o*l,f={avc:1,hevc:.6,vp9:.6,av1:.4,vp8:1.2},d=1920*1080,h=3e6,p=Math.pow(c/d,.95),y=h*p*f[a]*this._factor;return Math.ceil(y/1e3)*1e3}_toAudioBitrate(a){if(aa.includes(a)||a==="flac")return;const l={aac:128e3,opus:64e3,mp3:16e4,vorbis:64e3}[a];if(!l)throw new Error(`Unhandled codec: ${a}`);let c=l*this._factor;return a==="aac"?c=[96e3,128e3,16e4,192e3].reduce((d,h)=>Math.abs(h-c)<Math.abs(d-c)?h:d):a==="opus"||a==="vorbis"?c=Math.max(6e3,c):a==="mp3"&&(c=[8e3,16e3,24e3,32e3,4e4,48e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4].reduce((d,h)=>Math.abs(h-c)<Math.abs(d-c)?h:d)),Math.round(c/1e3)*1e3}}const LE=new Bf(2);class Nf{constructor(){this._connectedTrack=null,this._closingPromise=null,this._closed=!1,this._timestampOffset=0}_ensureValidAdd(){if(!this._connectedTrack)throw new Error("Source is not connected to an output track.");if(this._connectedTrack.output.state==="canceled")throw new Error("Output has been canceled.");if(this._connectedTrack.output.state==="finalizing"||this._connectedTrack.output.state==="finalized")throw new Error("Output has been finalized.");if(this._connectedTrack.output.state==="pending")throw new Error("Output has not started.");if(this._closed)throw new Error("Source is closed.")}async _start(){}async _flushAndClose(a){}close(){if(this._closingPromise)return;const a=this._connectedTrack;if(!a)throw new Error("Cannot call close without connecting the source to an output track.");if(a.output.state==="pending")throw new Error("Cannot call close before output has been started.");this._closingPromise=(async()=>{await this._flushAndClose(!1),this._closed=!0,!(a.output.state==="finalizing"||a.output.state==="finalized")&&a.output._muxer.onTrackClose(a)})()}async _flushOrWaitForOngoingClose(a){return this._closingPromise?this._closingPromise:this._flushAndClose(a)}}class Sv extends Nf{constructor(a){if(super(),this._connectedTrack=null,!ia.includes(a))throw new TypeError(`Invalid video codec '${a}'. Must be one of: ${ia.join(", ")}.`);this._codec=a}}class jE{constructor(a,o){this.source=a,this.encodingConfig=o,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastMultipleOfKeyFrameInterval=-1,this.codedWidth=null,this.codedHeight=null,this.resizeCanvas=null,this.customEncoder=null,this.customEncoderCallSerializer=new kw,this.customEncoderQueueSize=0,this.alphaEncoder=null,this.splitter=null,this.splitterCreationFailed=!1,this.alphaFrameQueue=[],this.error=null,this.errorNeedsNewStack=!0}async add(a,o,l){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),this.codedWidth!==null&&this.codedHeight!==null){if(a.codedWidth!==this.codedWidth||a.codedHeight!==this.codedHeight){const h=this.encodingConfig.sizeChangeBehavior??"deny";if(h!=="passThrough"){if(h==="deny")throw new Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight}, got ${a.codedWidth}x${a.codedHeight}. To allow the sample size to change over time, set \`sizeChangeBehavior\` to a value other than 'strict' in the encoding options.`);{let p=!1;this.resizeCanvas||(typeof document<"u"?(this.resizeCanvas=document.createElement("canvas"),this.resizeCanvas.width=this.codedWidth,this.resizeCanvas.height=this.codedHeight):this.resizeCanvas=new OffscreenCanvas(this.codedWidth,this.codedHeight),p=!0);const m=this.resizeCanvas.getContext("2d",{alpha:sf()});te(m),p||(sf()?(m.fillStyle="black",m.fillRect(0,0,this.codedWidth,this.codedHeight)):m.clearRect(0,0,this.codedWidth,this.codedHeight)),a.drawWithFit(m,{fit:h}),o&&a.close(),a=new ta(this.resizeCanvas,{timestamp:a.timestamp,duration:a.duration,rotation:a.rotation}),o=!0}}}}else this.codedWidth=a.codedWidth,this.codedHeight=a.codedHeight;this.encoderInitialized||(this.ensureEncoderPromise||this.ensureEncoder(a),this.encoderInitialized||await this.ensureEncoderPromise),te(this.encoderInitialized);const c=this.encodingConfig.keyFrameInterval??5,f=Math.floor(a.timestamp/c),d={...l,keyFrame:l?.keyFrame||c===0||f!==this.lastMultipleOfKeyFrameInterval};if(this.lastMultipleOfKeyFrameInterval=f,this.customEncoder){this.customEncoderQueueSize++;const h=a.clone(),p=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(h,d)).then(()=>this.customEncoderQueueSize--).catch(m=>this.error??=m).finally(()=>{h.close()});this.customEncoderQueueSize>=4&&await p}else{te(this.encoder);const h=a.toVideoFrame();if(!this.alphaEncoder)this.encoder.encode(h,d),h.close();else if(!!h.format&&!h.format.includes("A")||this.splitterCreationFailed)this.alphaFrameQueue.push(null),this.encoder.encode(h,d),h.close();else{const m=h.displayWidth,v=h.displayHeight;if(!this.splitter)try{this.splitter=new PE(m,v)}catch(y){console.error("Due to an error, only color data will be encoded.",y),this.splitterCreationFailed=!0,this.alphaFrameQueue.push(null),this.encoder.encode(h,d),h.close()}if(this.splitter){const y=this.splitter.extractColor(h),b=this.splitter.extractAlpha(h);this.alphaFrameQueue.push(b),this.encoder.encode(y,d),y.close(),h.close()}}o&&a.close(),this.encoder.encodeQueueSize>=4&&await new Promise(p=>this.encoder.addEventListener("dequeue",p,{once:!0}))}await this.muxer.mutex.currentPromise}finally{o&&a.close()}}ensureEncoder(a){const o=new Error;this.ensureEncoderPromise=(async()=>{const l=DE({width:a.codedWidth,height:a.codedHeight,...this.encodingConfig,framerate:this.source._connectedTrack?.metadata.frameRate});this.encodingConfig.onEncoderConfig?.(l);const c=yS.find(f=>f.supports(this.encodingConfig.codec,l));if(c)this.customEncoder=new c,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=l,this.customEncoder.onPacket=(f,d)=>{if(!(f instanceof yo))throw new TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(d!==void 0&&(!d||typeof d!="object"))throw new TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(f,d),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,f,d).catch(h=>{this.error??=h,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else{if(typeof VideoEncoder>"u")throw new Error("VideoEncoder is not supported by this browser.");if(l.alpha="discard",this.encodingConfig.alpha==="keep"&&(l.latencyMode="quality"),(l.width%2===1||l.height%2===1)&&(this.encodingConfig.codec==="avc"||this.encodingConfig.codec==="hevc"))throw new Error(`The dimensions ${l.width}x${l.height} are not supported for codec '${this.encodingConfig.codec}'; both width and height must be even numbers. Make sure to round your dimensions to the nearest even number.`);if(!(await VideoEncoder.isConfigSupported(l)).supported)throw new Error(`This specific encoder configuration (${l.codec}, ${l.bitrate} bps, ${l.width}x${l.height}, hardware acceleration: ${l.hardwareAcceleration??"no-preference"}) is not supported by this browser. Consider using another codec or changing your video parameters.`);const h=[],p=[];let m=0,v=0;const y=(b,w,E)=>{const _={};if(w){const T=new Uint8Array(w.byteLength);w.copyTo(T),_.alpha=T}const S=yo.fromEncodedChunk(b,_);this.encodingConfig.onEncodedPacket?.(S,E),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,S,E).catch(T=>{this.error??=T,this.errorNeedsNewStack=!1})};this.encoder=new VideoEncoder({output:(b,w)=>{if(!this.alphaEncoder){y(b,null,w);return}const E=this.alphaFrameQueue.shift();te(E!==void 0),E?(this.alphaEncoder.encode(E,{keyFrame:b.type==="key"}),v++,E.close(),h.push({chunk:b,meta:w})):v===0?y(b,null,w):(p.push(m+v),h.push({chunk:b,meta:w}))},error:b=>{b.stack=o.stack,this.error??=b}}),this.encoder.configure(l),this.encodingConfig.alpha==="keep"&&(this.alphaEncoder=new VideoEncoder({output:(b,w)=>{v--;const E=h.shift();for(te(E!==void 0),y(E.chunk,b,E.meta),m++;p.length>0&&p[0]===m;){p.shift();const _=h.shift();te(_!==void 0),y(_.chunk,null,_.meta)}},error:b=>{b.stack=o.stack,this.error??=b}}),this.alphaEncoder.configure(l))}te(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}async flushAndClose(a){a||this.checkForEncoderError(),this.customEncoder?(a||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(a||(await this.encoder.flush(),await this.alphaEncoder?.flush()),this.encoder.state!=="closed"&&this.encoder.close(),this.alphaEncoder&&this.alphaEncoder.state!=="closed"&&this.alphaEncoder.close(),this.alphaFrameQueue.forEach(o=>o?.close()),this.splitter?.close()),a||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=new Error().stack),this.error}}class PE{constructor(a,o){this.lastFrame=null,typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(a,o):(this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=o);const l=this.canvas.getContext("webgl2",{alpha:!0});if(!l)throw new Error("Couldn't acquire WebGL 2 context.");this.gl=l,this.colorProgram=this.createColorProgram(),this.alphaProgram=this.createAlphaProgram(),this.vao=this.createVAO(),this.sourceTexture=this.createTexture(),this.alphaResolutionLocation=this.gl.getUniformLocation(this.alphaProgram,"u_resolution"),this.gl.useProgram(this.colorProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.colorProgram,"u_sourceTexture"),0),this.gl.useProgram(this.alphaProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.alphaProgram,"u_sourceTexture"),0)}createVertexShader(){return this.createShader(this.gl.VERTEX_SHADER,`#version 300 es
			in vec2 a_position;
			in vec2 a_texCoord;
			out vec2 v_texCoord;
			
			void main() {
				gl_Position = vec4(a_position, 0.0, 1.0);
				v_texCoord = a_texCoord;
			}
		`)}createColorProgram(){const a=this.createVertexShader(),o=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			in vec2 v_texCoord;
			out vec4 fragColor;
			
			void main() {
				vec4 source = texture(u_sourceTexture, v_texCoord);
				fragColor = vec4(source.rgb, 1.0);
			}
		`),l=this.gl.createProgram();return this.gl.attachShader(l,a),this.gl.attachShader(l,o),this.gl.linkProgram(l),l}createAlphaProgram(){const a=this.createVertexShader(),o=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			uniform vec2 u_resolution; // The width and height of the canvas
			in vec2 v_texCoord;
			out vec4 fragColor;

			// This function determines the value for a single byte in the YUV stream
			float getByteValue(float byteOffset) {
				float width = u_resolution.x;
				float height = u_resolution.y;

				float yPlaneSize = width * height;

				if (byteOffset < yPlaneSize) {
					// This byte is in the luma plane. Find the corresponding pixel coordinates to sample from
					float y = floor(byteOffset / width);
					float x = mod(byteOffset, width);
					
					// Add 0.5 to sample the center of the texel
					vec2 sampleCoord = (vec2(x, y) + 0.5) / u_resolution;
					
					// The luma value is the alpha from the source texture
					return texture(u_sourceTexture, sampleCoord).a;
				} else {
					// Write a fixed value for chroma and beyond
					return 128.0 / 255.0;
				}
			}
			
			void main() {
				// Each fragment writes 4 bytes (R, G, B, A)
				float pixelIndex = floor(gl_FragCoord.y) * u_resolution.x + floor(gl_FragCoord.x);
				float baseByteOffset = pixelIndex * 4.0;

				vec4 result;
				for (int i = 0; i < 4; i++) {
					float currentByteOffset = baseByteOffset + float(i);
					result[i] = getByteValue(currentByteOffset);
				}
				
				fragColor = result;
			}
		`),l=this.gl.createProgram();return this.gl.attachShader(l,a),this.gl.attachShader(l,o),this.gl.linkProgram(l),l}createShader(a,o){const l=this.gl.createShader(a);return this.gl.shaderSource(l,o),this.gl.compileShader(l),this.gl.getShaderParameter(l,this.gl.COMPILE_STATUS)||console.error("Shader compile error:",this.gl.getShaderInfoLog(l)),l}createVAO(){const a=this.gl.createVertexArray();this.gl.bindVertexArray(a);const o=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),l=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW);const c=this.gl.getAttribLocation(this.colorProgram,"a_position"),f=this.gl.getAttribLocation(this.colorProgram,"a_texCoord");return this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(c,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(f,2,this.gl.FLOAT,!1,16,8),a}createTexture(){const a=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a}updateTexture(a){this.lastFrame!==a&&((a.displayWidth!==this.canvas.width||a.displayHeight!==this.canvas.height)&&(this.canvas.width=a.displayWidth,this.canvas.height=a.displayHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,a),this.lastFrame=a)}extractColor(a){return this.updateTexture(a),this.gl.useProgram(this.colorProgram),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),new VideoFrame(this.canvas,{timestamp:a.timestamp,duration:a.duration??void 0,alpha:"discard"})}extractAlpha(a){this.updateTexture(a),this.gl.useProgram(this.alphaProgram),this.gl.uniform2f(this.alphaResolutionLocation,this.canvas.width,this.canvas.height),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const{width:o,height:l}=this.canvas,c=Math.ceil(o/2)*Math.ceil(l/2),f=o*l+c*2,d=Math.ceil(f/(o*4));let h=new Uint8Array(4*o*d);this.gl.readPixels(0,0,o,d,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),h=h.subarray(0,f),te(h[o*l]===128),te(h[h.length-1]===128);const p={format:"I420",codedWidth:o,codedHeight:l,timestamp:a.timestamp,duration:a.duration??void 0,transfer:[h.buffer]};return new VideoFrame(h,p)}close(){this.gl.getExtension("WEBGL_lose_context")?.loseContext(),this.gl=null}}class FE extends Sv{constructor(a,o){if(!(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)&&!(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas))throw new TypeError("canvas must be an HTMLCanvasElement or OffscreenCanvas.");NE(o),super(o.codec),this._encoder=new jE(this,o),this._canvas=a}add(a,o=0,l){if(!Number.isFinite(a)||a<0)throw new TypeError("timestamp must be a non-negative number.");if(!Number.isFinite(o)||o<0)throw new TypeError("duration must be a non-negative number.");const c=new ta(this._canvas,{timestamp:a,duration:o});return this._encoder.add(c,!0,l)}_flushAndClose(a){return this._encoder.flushAndClose(a)}}class kE extends Nf{constructor(a){if(super(),this._connectedTrack=null,!as.includes(a))throw new TypeError(`Invalid audio codec '${a}'. Must be one of: ${as.join(", ")}.`);this._codec=a}}class HE extends Nf{constructor(a){if(super(),this._connectedTrack=null,!rs.includes(a))throw new TypeError(`Invalid subtitle codec '${a}'. Must be one of: ${rs.join(", ")}.`);this._codec=a}}const IE=["video","audio","subtitle"],Wu=i=>{if(!i||typeof i!="object")throw new TypeError("metadata must be an object.");if(i.languageCode!==void 0&&!Pw(i.languageCode))throw new TypeError("metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.");if(i.name!==void 0&&typeof i.name!="string")throw new TypeError("metadata.name, when provided, must be a string.");if(i.disposition!==void 0&&Yw(i.disposition),i.maximumPacketCount!==void 0&&(!Number.isInteger(i.maximumPacketCount)||i.maximumPacketCount<0))throw new TypeError("metadata.maximumPacketCount, when provided, must be a non-negative integer.")};class VE{constructor(a){if(this.state="pending",this._tracks=[],this._startPromise=null,this._cancelPromise=null,this._finalizePromise=null,this._mutex=new Jg,this._metadataTags={},!a||typeof a!="object")throw new TypeError("options must be an object.");if(!(a.format instanceof yv))throw new TypeError("options.format must be an OutputFormat.");if(!(a.target instanceof gv))throw new TypeError("options.target must be a Target.");if(a.target._output)throw new Error("Target is already used for another output.");a.target._output=this,this.format=a.format,this.target=a.target,this._writer=a.target._createWriter(),this._muxer=a.format._createMuxer(this)}addVideoTrack(a,o={}){if(!(a instanceof Sv))throw new TypeError("source must be a VideoSource.");if(Wu(o),o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError(`Invalid video rotation: ${o.rotation}. Has to be 0, 90, 180 or 270.`);if(!this.format.supportsVideoRotationMetadata&&o.rotation)throw new Error(`${this.format._name} does not support video rotation metadata.`);if(o.frameRate!==void 0&&(!Number.isFinite(o.frameRate)||o.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${o.frameRate}. Must be a positive number.`);this._addTrack("video",a,o)}addAudioTrack(a,o={}){if(!(a instanceof kE))throw new TypeError("source must be an AudioSource.");Wu(o),this._addTrack("audio",a,o)}addSubtitleTrack(a,o={}){if(!(a instanceof HE))throw new TypeError("source must be a SubtitleSource.");Wu(o),this._addTrack("subtitle",a,o)}setMetadataTags(a){if(Vw(a),this.state!=="pending")throw new Error("Cannot set metadata tags after output has been started or canceled.");this._metadataTags=a}_addTrack(a,o,l){if(this.state!=="pending")throw new Error("Cannot add track after output has been started or canceled.");if(o._connectedTrack)throw new Error("Source is already used for a track.");const c=this.format.getSupportedTrackCounts(),f=this._tracks.reduce((m,v)=>m+(v.type===a?1:0),0),d=c[a].max;if(f===d)throw new Error(d===0?`${this.format._name} does not support ${a} tracks.`:`${this.format._name} does not support more than ${d} ${a} track${d===1?"":"s"}.`);const h=c.total.max;if(this._tracks.length===h)throw new Error(`${this.format._name} does not support more than ${h} tracks${h===1?"":"s"} in total.`);const p={id:this._tracks.length+1,output:this,type:a,source:o,metadata:l};if(p.type==="video"){const m=this.format.getSupportedVideoCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support video tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported video codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}else if(p.type==="audio"){const m=this.format.getSupportedAudioCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support audio tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported audio codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}else if(p.type==="subtitle"){const m=this.format.getSupportedSubtitleCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support subtitle tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported subtitle codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}this._tracks.push(p),o._connectedTrack=p}async start(){const a=this.format.getSupportedTrackCounts();for(const l of IE){const c=this._tracks.reduce((d,h)=>d+(h.type===l?1:0),0),f=a[l].min;if(c<f)throw new Error(f===a[l].max?`${this.format._name} requires exactly ${f} ${l} track${f===1?"":"s"}.`:`${this.format._name} requires at least ${f} ${l} track${f===1?"":"s"}.`)}const o=a.total.min;if(this._tracks.length<o)throw new Error(o===a.total.max?`${this.format._name} requires exactly ${o} track${o===1?"":"s"}.`:`${this.format._name} requires at least ${o} track${o===1?"":"s"}.`);if(this.state==="canceled")throw new Error("Output has been canceled.");return this._startPromise?(console.warn("Output has already been started."),this._startPromise):this._startPromise=(async()=>{this.state="started",this._writer.start();const l=await this._mutex.acquire();await this._muxer.start();const c=this._tracks.map(f=>f.source._start());await Promise.all(c),l()})()}getMimeType(){return this._muxer.getMimeType()}async cancel(){if(this._cancelPromise)return console.warn("Output has already been canceled."),this._cancelPromise;if(this.state==="finalizing"||this.state==="finalized"){console.warn("Output has already been finalized.");return}return this._cancelPromise=(async()=>{this.state="canceled";const a=await this._mutex.acquire(),o=this._tracks.map(l=>l.source._flushOrWaitForOngoingClose(!0));await Promise.all(o),await this._writer.close(),a()})()}async finalize(){if(this.state==="pending")throw new Error("Cannot finalize before starting.");if(this.state==="canceled")throw new Error("Cannot finalize after canceling.");return this._finalizePromise?(console.warn("Output has already been finalized."),this._finalizePromise):this._finalizePromise=(async()=>{this.state="finalizing";const a=await this._mutex.acquire(),o=this._tracks.map(l=>l.source._flushOrWaitForOngoingClose(!1));await Promise.all(o),await this._muxer.finalize(),await this._writer.flush(),await this._writer.finalize(),this.state="finalized",a()})()}}class YE{constructor(a){this.onFinishCallback=a}output=null;canvas=null;canvasSource=null;async startExport(a){this.output=new VE({format:new bv,target:new vv}),this.canvas=document.createElement("canvas"),this.canvas.width=a.width,this.canvas.height=a.height,this.canvasSource=new FE(this.canvas,{codec:"avc",bitrate:LE}),this.output.addVideoTrack(this.canvasSource),await this.output.start()}working=!1;async addFrame(a,o,l,c){if(this.working)return;if(this.working=!0,!this.canvas||!this.output||!this.canvasSource){console.error("VideoExporter: output or canvas not initialized");return}const f=a.capture("renderTexture"),d=this.canvas.width,h=this.canvas.height,p=this.canvas.getContext("2d");if(!p)throw new Error("Unable to create 2D context for rendering");const m=p.createImageData(d,h);m.data.set(f),p.putImageData(m,0,0),await this.canvasSource.add(o,l),c(),this.working=!1}done=!1;async finishExport(){if(!this.output||this.done||this.working)return;this.working=!0,await this.output?.finalize(),this.onFinishCallback(),this.done=!0,this.working=!1;const a=this.output.target.buffer;if(a){const o=new Blob([a],{type:"video/mp4"}),l=URL.createObjectURL(o),c=document.createElement("a");c.style.display="none",c.href=l,c.download="liquidlissajous.mp4",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(l)}}}function qE(){const i=Ti(A=>A.renderingInProgress),[a,o]=C.useState(0),[l,c]=C.useState(null),f=Ti(A=>A.updateStore),d=Ti(A=>A),h=Zl(d),p=d.exportPerfectLoop?1:d.exportDuration*Ja/h,m=i?a/h/p:0,v=C.useRef(null),y=Ti(A=>A.width),b=Ti(A=>A.height),w=C.useRef(null),[E,_]=C.useState({width:0,height:0});C.useEffect(()=>{function A(){if(w.current){const O=w.current.getBoundingClientRect();_({width:O.width,height:O.height})}}return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const[S,T]=(()=>{const A=Math.min(E.width/y,E.height/b);return[y*A,b*A]})();return B.jsxs("div",{style:{backgroundColor:"#101214",width:"100%",height:"100%",padding:"2rem",overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr"},children:[B.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[B.jsx($u,{onClick:async()=>{v.current.takeScreenshot()},text:"export frame",iconName:"camera"}),B.jsx($u,{onClick:async()=>{f({renderingInProgress:!0});const A=new YE(()=>{f({renderingInProgress:!1}),c(null),o(0)});c(A),A.startExport({width:y,height:b})},text:"export as .mp4",iconName:"movie"})]}),B.jsxs("div",{ref:w,style:{width:"calc(100vw - 700px - 4rem)",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[B.jsx(Bw,{scaledWidth:S,scaledHeight:T,width:y,height:b,renderObject:{renderingInProgress:i,targetRenderFrame:a,setTargetRenderFrame:o,videoExporter:l},screenshotRef:v}),i&&B.jsxs("div",{style:{color:"var(--danger)",marginTop:"1rem",fontSize:"1.25rem",fontWeight:500},children:["Rendering...",Math.floor(m*100),"%"]})]})]})}function GE(){return B.jsx(B.Fragment,{children:B.jsxs("div",{style:{width:"100vw",height:"100vh",display:"grid",gridTemplateColumns:"700px 1fr",gridTemplateRows:"1fr",backgroundColor:"var(--gray1)",overflow:"hidden"},children:[B.jsx("div",{children:B.jsx(w2,{})}),B.jsx("div",{children:B.jsx(qE,{})})]})})}qy.createRoot(document.getElementById("root")).render(B.jsx(C.StrictMode,{children:B.jsx(GE,{})}));
