function $y(i,a){for(var o=0;o<a.length;o++){const l=a[o];if(typeof l!="string"&&!Array.isArray(l)){for(const s in l)if(s!=="default"&&!(s in i)){const f=Object.getOwnPropertyDescriptor(l,s);f&&Object.defineProperty(i,s,f.get?f:{enumerable:!0,get:()=>l[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(s){if(s.ep)return;s.ep=!0;const f=o(s);fetch(s.href,f)}})();function bf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ru={exports:{}},ro={};var Ym;function Jy(){if(Ym)return ro;Ym=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function o(l,s,f){var d=null;if(f!==void 0&&(d=""+f),s.key!==void 0&&(d=""+s.key),"key"in s){f={};for(var h in s)h!=="key"&&(f[h]=s[h])}else f=s;return s=f.ref,{$$typeof:i,type:l,key:d,ref:s!==void 0?s:null,props:f}}return ro.Fragment=a,ro.jsx=o,ro.jsxs=o,ro}var qm;function ex(){return qm||(qm=1,Ru.exports=Jy()),Ru.exports}var M=ex(),Ou={exports:{}},me={};var Gm;function tx(){if(Gm)return me;Gm=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function T(R,V,$){this.props=R,this.context=V,this.refs=S,this.updater=$||E}T.prototype.isReactComponent={},T.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},T.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=T.prototype;function B(R,V,$){this.props=R,this.context=V,this.refs=S,this.updater=$||E}var U=B.prototype=new A;U.constructor=B,_(U,T.prototype),U.isPureReactComponent=!0;var H=Array.isArray;function X(){}var k={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function J(R,V,$){var ee=$.ref;return{$$typeof:i,type:R,key:V,ref:ee!==void 0?ee:null,props:$}}function ae(R,V){return J(R.type,V,R.props)}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function se(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function($){return V[$]})}var xe=/\/+/g;function be(R,V){return typeof R=="object"&&R!==null&&R.key!=null?se(""+R.key):V.toString(36)}function ye(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(X,X):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function P(R,V,$,ee,de){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var ve=!1;if(R===null)ve=!0;else switch(he){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(R.$$typeof){case i:case a:ve=!0;break;case v:return ve=R._init,P(ve(R._payload),V,$,ee,de)}}if(ve)return de=de(R),ve=ee===""?"."+be(R,0):ee,H(de)?($="",ve!=null&&($=ve.replace(xe,"$&/")+"/"),P(de,V,$,"",function(it){return it})):de!=null&&(Q(de)&&(de=ae(de,$+(de.key==null||R&&R.key===de.key?"":(""+de.key).replace(xe,"$&/")+"/")+ve)),V.push(de)),1;ve=0;var Re=ee===""?".":ee+":";if(H(R))for(var Ue=0;Ue<R.length;Ue++)ee=R[Ue],he=Re+be(ee,Ue),ve+=P(ee,V,$,he,de);else if(Ue=w(R),typeof Ue=="function")for(R=Ue.call(R),Ue=0;!(ee=R.next()).done;)ee=ee.value,he=Re+be(ee,Ue++),ve+=P(ee,V,$,he,de);else if(he==="object"){if(typeof R.then=="function")return P(ye(R),V,$,ee,de);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ve}function G(R,V,$){if(R==null)return R;var ee=[],de=0;return P(R,ee,"","",function(he){return V.call($,he,de++)}),ee}function K(R){if(R._status===-1){var V=R._result;V=V(),V.then(function($){(R._status===0||R._status===-1)&&(R._status=1,R._result=$)},function($){(R._status===0||R._status===-1)&&(R._status=2,R._result=$)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var re=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},we={map:G,forEach:function(R,V,$){G(R,function(){V.apply(this,arguments)},$)},count:function(R){var V=0;return G(R,function(){V++}),V},toArray:function(R){return G(R,function(V){return V})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return me.Activity=y,me.Children=we,me.Component=T,me.Fragment=o,me.Profiler=s,me.PureComponent=B,me.StrictMode=l,me.Suspense=p,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,me.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},me.cache=function(R){return function(){return R.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(R,V,$){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ee=_({},R.props),de=R.key;if(V!=null)for(he in V.key!==void 0&&(de=""+V.key),V)!W.call(V,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&V.ref===void 0||(ee[he]=V[he]);var he=arguments.length-2;if(he===1)ee.children=$;else if(1<he){for(var ve=Array(he),Re=0;Re<he;Re++)ve[Re]=arguments[Re+2];ee.children=ve}return J(R.type,de,ee)},me.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:f,_context:R},R},me.createElement=function(R,V,$){var ee,de={},he=null;if(V!=null)for(ee in V.key!==void 0&&(he=""+V.key),V)W.call(V,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=V[ee]);var ve=arguments.length-2;if(ve===1)de.children=$;else if(1<ve){for(var Re=Array(ve),Ue=0;Ue<ve;Ue++)Re[Ue]=arguments[Ue+2];de.children=Re}if(R&&R.defaultProps)for(ee in ve=R.defaultProps,ve)de[ee]===void 0&&(de[ee]=ve[ee]);return J(R,he,de)},me.createRef=function(){return{current:null}},me.forwardRef=function(R){return{$$typeof:h,render:R}},me.isValidElement=Q,me.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:K}},me.memo=function(R,V){return{$$typeof:m,type:R,compare:V===void 0?null:V}},me.startTransition=function(R){var V=k.T,$={};k.T=$;try{var ee=R(),de=k.S;de!==null&&de($,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(X,re)}catch(he){re(he)}finally{V!==null&&$.types!==null&&(V.types=$.types),k.T=V}},me.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},me.use=function(R){return k.H.use(R)},me.useActionState=function(R,V,$){return k.H.useActionState(R,V,$)},me.useCallback=function(R,V){return k.H.useCallback(R,V)},me.useContext=function(R){return k.H.useContext(R)},me.useDebugValue=function(){},me.useDeferredValue=function(R,V){return k.H.useDeferredValue(R,V)},me.useEffect=function(R,V){return k.H.useEffect(R,V)},me.useEffectEvent=function(R){return k.H.useEffectEvent(R)},me.useId=function(){return k.H.useId()},me.useImperativeHandle=function(R,V,$){return k.H.useImperativeHandle(R,V,$)},me.useInsertionEffect=function(R,V){return k.H.useInsertionEffect(R,V)},me.useLayoutEffect=function(R,V){return k.H.useLayoutEffect(R,V)},me.useMemo=function(R,V){return k.H.useMemo(R,V)},me.useOptimistic=function(R,V){return k.H.useOptimistic(R,V)},me.useReducer=function(R,V,$){return k.H.useReducer(R,V,$)},me.useRef=function(R){return k.H.useRef(R)},me.useState=function(R){return k.H.useState(R)},me.useSyncExternalStore=function(R,V,$){return k.H.useSyncExternalStore(R,V,$)},me.useTransition=function(){return k.H.useTransition()},me.version="19.2.0",me}var Xm;function wf(){return Xm||(Xm=1,Ou.exports=tx()),Ou.exports}var C=wf();const Ce=bf(C),Sf=$y({__proto__:null,default:Ce},[C]);var Mu={exports:{}},oo={},Bu={exports:{}},Nu={};var Qm;function nx(){return Qm||(Qm=1,(function(i){function a(P,G){var K=P.length;P.push(G);e:for(;0<K;){var re=K-1>>>1,we=P[re];if(0<s(we,G))P[re]=G,P[K]=we,K=re;else break e}}function o(P){return P.length===0?null:P[0]}function l(P){if(P.length===0)return null;var G=P[0],K=P.pop();if(K!==G){P[0]=K;e:for(var re=0,we=P.length,R=we>>>1;re<R;){var V=2*(re+1)-1,$=P[V],ee=V+1,de=P[ee];if(0>s($,K))ee<we&&0>s(de,$)?(P[re]=de,P[ee]=K,re=ee):(P[re]=$,P[V]=K,re=V);else if(ee<we&&0>s(de,K))P[re]=de,P[ee]=K,re=ee;else break e}}return G}function s(P,G){var K=P.sortIndex-G.sortIndex;return K!==0?K:P.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var p=[],m=[],v=1,y=null,b=3,w=!1,E=!1,_=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function U(P){for(var G=o(m);G!==null;){if(G.callback===null)l(m);else if(G.startTime<=P)l(m),G.sortIndex=G.expirationTime,a(p,G);else break;G=o(m)}}function H(P){if(_=!1,U(P),!E)if(o(p)!==null)E=!0,X||(X=!0,se());else{var G=o(m);G!==null&&ye(H,G.startTime-P)}}var X=!1,k=-1,W=5,J=-1;function ae(){return S?!0:!(i.unstable_now()-J<W)}function Q(){if(S=!1,X){var P=i.unstable_now();J=P;var G=!0;try{e:{E=!1,_&&(_=!1,A(k),k=-1),w=!0;var K=b;try{t:{for(U(P),y=o(p);y!==null&&!(y.expirationTime>P&&ae());){var re=y.callback;if(typeof re=="function"){y.callback=null,b=y.priorityLevel;var we=re(y.expirationTime<=P);if(P=i.unstable_now(),typeof we=="function"){y.callback=we,U(P),G=!0;break t}y===o(p)&&l(p),U(P)}else l(p);y=o(p)}if(y!==null)G=!0;else{var R=o(m);R!==null&&ye(H,R.startTime-P),G=!1}}break e}finally{y=null,b=K,w=!1}G=void 0}}finally{G?se():X=!1}}}var se;if(typeof B=="function")se=function(){B(Q)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,be=xe.port2;xe.port1.onmessage=Q,se=function(){be.postMessage(null)}}else se=function(){T(Q,0)};function ye(P,G){k=T(function(){P(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(P){P.callback=null},i.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<P?Math.floor(1e3/P):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(P){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var K=b;b=G;try{return P()}finally{b=K}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=b;b=P;try{return G()}finally{b=K}},i.unstable_scheduleCallback=function(P,G,K){var re=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,P){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=K+we,P={id:v++,callback:G,priorityLevel:P,startTime:K,expirationTime:we,sortIndex:-1},K>re?(P.sortIndex=K,a(m,P),o(p)===null&&P===o(m)&&(_?(A(k),k=-1):_=!0,ye(H,K-re))):(P.sortIndex=we,a(p,P),E||w||(E=!0,X||(X=!0,se()))),P},i.unstable_shouldYield=ae,i.unstable_wrapCallback=function(P){var G=b;return function(){var K=b;b=G;try{return P.apply(this,arguments)}finally{b=K}}}})(Nu)),Nu}var Zm;function ix(){return Zm||(Zm=1,Bu.exports=nx()),Bu.exports}var Uu={exports:{}},pt={};var Wm;function ax(){if(Wm)return pt;Wm=1;var i=wf();function a(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var l={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");function f(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,pt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return f(p,m,null,v)},pt.flushSync=function(p){var m=d.T,v=l.p;try{if(d.T=null,l.p=2,p)return p()}finally{d.T=m,l.p=v,l.d.f()}},pt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(p,m))},pt.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},pt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?l.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):v==="script"&&l.d.X(p,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},pt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);l.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(p)},pt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin);l.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},pt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);l.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(p)},pt.requestFormReset=function(p){l.d.r(p)},pt.unstable_batchedUpdates=function(p,m){return p(m)},pt.useFormState=function(p,m,v){return d.H.useFormState(p,m,v)},pt.useFormStatus=function(){return d.H.useHostTransitionStatus()},pt.version="19.2.0",pt}var Km;function rg(){if(Km)return Uu.exports;Km=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Uu.exports=ax(),Uu.exports}var $m;function rx(){if($m)return oo;$m=1;var i=ix(),a=wf(),o=rg();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(l(188))}function m(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var c=n.return;if(c===null)break;var u=c.alternate;if(u===null){if(r=c.return,r!==null){n=r;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===n)return p(c),e;if(u===r)return p(c),t;u=u.sibling}throw Error(l(188))}if(n.return!==r.return)n=c,r=u;else{for(var g=!1,x=c.child;x;){if(x===n){g=!0,n=c,r=u;break}if(x===r){g=!0,r=c,n=u;break}x=x.sibling}if(!g){for(x=u.child;x;){if(x===n){g=!0,n=u,r=c;break}if(x===r){g=!0,r=u,n=c;break}x=x.sibling}if(!g)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case H:return"Suspense";case X:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case B:return e.displayName||"Context";case A:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var ye=Array.isArray,P=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},re=[],we=-1;function R(e){return{current:e}}function V(e){0>we||(e.current=re[we],re[we]=null,we--)}function $(e,t){we++,re[we]=e.current,e.current=t}var ee=R(null),de=R(null),he=R(null),ve=R(null);function Re(e,t){switch($(he,t),$(de,e),$(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hm(t),e=mm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ee),$(ee,e)}function Ue(){V(ee),V(de),V(he)}function it(e){e.memoizedState!==null&&$(ve,e);var t=ee.current,n=mm(t,e.type);t!==n&&($(de,e),$(ee,n))}function zt(e){de.current===e&&(V(ee),V(de)),ve.current===e&&(V(ve),to._currentValue=K)}var Jt,Pt;function At(e){if(Jt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jt=t&&t[1]||"",Pt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+e+Pt}var sn=!1;function cn(e,t){if(!e||sn)return"";sn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(F){var L=F}Reflect.construct(e,[],q)}else{try{q.call()}catch(F){L=F}e.call(q.prototype)}}else{try{throw Error()}catch(F){L=F}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(F){if(F&&L&&typeof F.stack=="string")return[F.stack,L.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),g=u[0],x=u[1];if(g&&x){var z=g.split(`
`),j=x.split(`
`);for(c=r=0;r<z.length&&!z[r].includes("DetermineComponentFrameRoot");)r++;for(;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;if(r===z.length||c===j.length)for(r=z.length-1,c=j.length-1;1<=r&&0<=c&&z[r]!==j[c];)c--;for(;1<=r&&0<=c;r--,c--)if(z[r]!==j[c]){if(r!==1||c!==1)do if(r--,c--,0>c||z[r]!==j[c]){var I=`
`+z[r].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=r&&0<=c);break}}}finally{sn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?At(n):""}function Kn(e,t){switch(e.tag){case 26:case 27:case 5:return At(e.type);case 16:return At("Lazy");case 13:return e.child!==t&&t!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return cn(e.type,!1);case 11:return cn(e.type.render,!1);case 1:return cn(e.type,!0);case 31:return At("Activity");default:return""}}function un(e){try{var t="",n=null;do t+=Kn(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var ca=Object.prototype.hasOwnProperty,Di=i.unstable_scheduleCallback,ur=i.unstable_cancelCallback,ms=i.unstable_shouldYield,ps=i.unstable_requestPaint,yt=i.unstable_now,gs=i.unstable_getCurrentPriorityLevel,fr=i.unstable_ImmediatePriority,dr=i.unstable_UserBlockingPriority,Ft=i.unstable_NormalPriority,Cn=i.unstable_LowPriority,zn=i.unstable_IdlePriority,$n=i.log,ua=i.unstable_setDisableYieldValue,ji=null,lt=null;function kt(e){if(typeof $n=="function"&&ua(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(ji,e)}catch{}}var mt=Math.clz32?Math.clz32:So,Li=Math.log,hr=Math.LN2;function So(e){return e>>>=0,e===0?32:31-(Li(e)/hr|0)|0}var Ht=256,Pi=262144,We=4194304;function It(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function en(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var x=r&134217727;return x!==0?(r=x&~u,r!==0?c=It(r):(g&=x,g!==0?c=It(g):n||(n=x&~e,n!==0&&(c=It(n))))):(x=r&~u,x!==0?c=It(x):g!==0?c=It(g):n||(n=r&~e,n!==0&&(c=It(n)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:c}function mr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fv(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qf(){var e=We;return We<<=1,(We&62914560)===0&&(We=4194304),e}function vs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kv(e,t,n,r,c,u){var g=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var x=e.entanglements,z=e.expirationTimes,j=e.hiddenUpdates;for(n=g&~n;0<n;){var I=31-mt(n),q=1<<I;x[I]=0,z[I]=-1;var L=j[I];if(L!==null)for(j[I]=null,I=0;I<L.length;I++){var F=L[I];F!==null&&(F.lane&=-536870913)}n&=~q}r!==0&&Zf(e,r,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Zf(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-mt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function Wf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mt(n),c=1<<r;c&t|e[r]&t&&(e[r]|=t),n&=~c}}function Kf(e,t){var n=t&-t;return n=(n&42)!==0?1:ys(n),(n&(e.suspendedLanes|t))!==0?0:n}function ys(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $f(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Lm(e.type))}function Jf(e,t){var n=G.p;try{return G.p=e,t()}finally{G.p=n}}var Jn=Math.random().toString(36).slice(2),st="__reactFiber$"+Jn,bt="__reactProps$"+Jn,fa="__reactContainer$"+Jn,bs="__reactEvents$"+Jn,Hv="__reactListeners$"+Jn,Iv="__reactHandles$"+Jn,ed="__reactResources$"+Jn,gr="__reactMarker$"+Jn;function ws(e){delete e[st],delete e[bt],delete e[bs],delete e[Hv],delete e[Iv]}function da(e){var t=e[st];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[st]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wm(e);e!==null;){if(n=e[st])return n;e=wm(e)}return t}e=n,n=e.parentNode}return null}function ha(e){if(e=e[st]||e[fa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function ma(e){var t=e[ed];return t||(t=e[ed]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[gr]=!0}var td=new Set,nd={};function Fi(e,t){pa(e,t),pa(e+"Capture",t)}function pa(e,t){for(nd[e]=t,e=0;e<t.length;e++)td.add(t[e])}var Vv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),id={},ad={};function Yv(e){return ca.call(ad,e)?!0:ca.call(id,e)?!1:Vv.test(e)?ad[e]=!0:(id[e]=!0,!1)}function Eo(e,t,n){if(Yv(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function _o(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qv(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){n=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(g){n=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ss(e){if(!e._valueTracker){var t=rd(e)?"checked":"value";e._valueTracker=qv(e,t,""+e[t])}}function od(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function To(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gv=/[\n"\\]/g;function Yt(e){return e.replace(Gv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Es(e,t,n,r,c,u,g,x){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?_s(e,g,Vt(t)):n!=null?_s(e,g,Vt(n)):r!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Vt(x):e.removeAttribute("name")}function ld(e,t,n,r,c,u,g,x){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Ss(e);return}n=n!=null?""+Vt(n):"",t=t!=null?""+Vt(t):n,x||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=x?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Ss(e)}function _s(e,t,n){t==="number"&&To(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ga(e,t,n,r){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vt(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function sd(e,t,n){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Vt(n):""}function cd(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(l(92));if(ye(r)){if(1<r.length)throw Error(l(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Vt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),Ss(e)}function va(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||Xv.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function fd(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&n[c]!==r&&ud(e,c,r)}else for(var u in t)t.hasOwnProperty(u)&&ud(e,u,t[u])}function Ts(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Co(e){return Zv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rn(){}var Cs=null;function zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ya=null,xa=null;function dd(e){var t=ha(e);if(t&&(e=t.stateNode)){var n=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Es(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var c=r[bt]||null;if(!c)throw Error(l(90));Es(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&od(r)}break e;case"textarea":sd(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ga(e,!!n.multiple,t,!1)}}}var As=!1;function hd(e,t,n){if(As)return e(t,n);As=!0;try{var r=e(t);return r}finally{if(As=!1,(ya!==null||xa!==null)&&(hl(),ya&&(t=ya,e=xa,xa=ya=null,dd(t),e)))for(t=0;t<e.length;t++)dd(e[t])}}function yr(e,t){var n=e.stateNode;if(n===null)return null;var r=n[bt]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rs=!1;if(On)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{Rs=!1}var ei=null,Os=null,zo=null;function md(){if(zo)return zo;var e,t=Os,n=t.length,r,c="value"in ei?ei.value:ei.textContent,u=c.length;for(e=0;e<n&&t[e]===c[e];e++);var g=n-e;for(r=1;r<=g&&t[n-r]===c[u-r];r++);return zo=c.slice(e,1<r?1-r:void 0)}function Ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ro(){return!0}function pd(){return!1}function wt(e){function t(n,r,c,u,g){this._reactName=n,this._targetInst=c,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(u):u[x]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ro:pd,this.isPropagationStopped=pd,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),t}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oo=wt(ki),br=y({},ki,{view:0,detail:0}),Wv=wt(br),Ms,Bs,wr,Mo=y({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(Ms=e.screenX-wr.screenX,Bs=e.screenY-wr.screenY):Bs=Ms=0,wr=e),Ms)},movementY:function(e){return"movementY"in e?e.movementY:Bs}}),gd=wt(Mo),Kv=y({},Mo,{dataTransfer:0}),$v=wt(Kv),Jv=y({},br,{relatedTarget:0}),Ns=wt(Jv),e1=y({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),t1=wt(e1),n1=y({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),i1=wt(n1),a1=y({},ki,{data:0}),vd=wt(a1),r1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l1[e])?!!t[e]:!1}function Us(){return s1}var c1=y({},br,{key:function(e){if(e.key){var t=r1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(e){return e.type==="keypress"?Ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u1=wt(c1),f1=y({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=wt(f1),d1=y({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),h1=wt(d1),m1=y({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),p1=wt(m1),g1=y({},Mo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=wt(g1),y1=y({},ki,{newState:0,oldState:0}),x1=wt(y1),b1=[9,13,27,32],Ds=On&&"CompositionEvent"in window,Sr=null;On&&"documentMode"in document&&(Sr=document.documentMode);var w1=On&&"TextEvent"in window&&!Sr,xd=On&&(!Ds||Sr&&8<Sr&&11>=Sr),bd=" ",wd=!1;function Sd(e,t){switch(e){case"keyup":return b1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ba=!1;function S1(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(wd=!0,bd);case"textInput":return e=t.data,e===bd&&wd?null:e;default:return null}}function E1(e,t){if(ba)return e==="compositionend"||!Ds&&Sd(e,t)?(e=md(),zo=Os=ei=null,ba=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xd&&t.locale!=="ko"?null:t.data;default:return null}}var _1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_1[e.type]:t==="textarea"}function Td(e,t,n,r){ya?xa?xa.push(r):xa=[r]:ya=r,t=bl(t,"onChange"),0<t.length&&(n=new Oo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Er=null,_r=null;function T1(e){lm(e,0)}function Bo(e){var t=vr(e);if(od(t))return e}function Cd(e,t){if(e==="change")return t}var zd=!1;if(On){var js;if(On){var Ls="oninput"in document;if(!Ls){var Ad=document.createElement("div");Ad.setAttribute("oninput","return;"),Ls=typeof Ad.oninput=="function"}js=Ls}else js=!1;zd=js&&(!document.documentMode||9<document.documentMode)}function Rd(){Er&&(Er.detachEvent("onpropertychange",Od),_r=Er=null)}function Od(e){if(e.propertyName==="value"&&Bo(_r)){var t=[];Td(t,_r,e,zs(e)),hd(T1,t)}}function C1(e,t,n){e==="focusin"?(Rd(),Er=t,_r=n,Er.attachEvent("onpropertychange",Od)):e==="focusout"&&Rd()}function z1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bo(_r)}function A1(e,t){if(e==="click")return Bo(t)}function R1(e,t){if(e==="input"||e==="change")return Bo(t)}function O1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:O1;function Tr(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var c=n[r];if(!ca.call(t,c)||!Rt(e[c],t[c]))return!1}return!0}function Md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bd(e,t){var n=Md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Md(n)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ud(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=To(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=To(e.document)}return t}function Ps(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M1=On&&"documentMode"in document&&11>=document.documentMode,wa=null,Fs=null,Cr=null,ks=!1;function Dd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ks||wa==null||wa!==To(r)||(r=wa,"selectionStart"in r&&Ps(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cr&&Tr(Cr,r)||(Cr=r,r=bl(Fs,"onSelect"),0<r.length&&(t=new Oo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wa)))}function Hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sa={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Hs={},jd={};On&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Ii(e){if(Hs[e])return Hs[e];if(!Sa[e])return e;var t=Sa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jd)return Hs[e]=t[n];return e}var Ld=Ii("animationend"),Pd=Ii("animationiteration"),Fd=Ii("animationstart"),B1=Ii("transitionrun"),N1=Ii("transitionstart"),U1=Ii("transitioncancel"),kd=Ii("transitionend"),Hd=new Map,Is="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Is.push("scrollEnd");function tn(e,t){Hd.set(e,t),Fi(t,[e])}var No=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qt=[],Ea=0,Vs=0;function Uo(){for(var e=Ea,t=Vs=Ea=0;t<e;){var n=qt[t];qt[t++]=null;var r=qt[t];qt[t++]=null;var c=qt[t];qt[t++]=null;var u=qt[t];if(qt[t++]=null,r!==null&&c!==null){var g=r.pending;g===null?c.next=c:(c.next=g.next,g.next=c),r.pending=c}u!==0&&Id(n,c,u)}}function Do(e,t,n,r){qt[Ea++]=e,qt[Ea++]=t,qt[Ea++]=n,qt[Ea++]=r,Vs|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Ys(e,t,n,r){return Do(e,t,n,r),jo(e)}function Vi(e,t){return Do(e,null,null,t),jo(e)}function Id(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var c=!1,u=e.return;u!==null;)u.childLanes|=n,r=u.alternate,r!==null&&(r.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-mt(n),e=u.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=n|536870912),u):null}function jo(e){if(50<Qr)throw Qr=0,Jc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _a={};function D1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,n,r){return new D1(e,t,n,r)}function qs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,t){var n=e.alternate;return n===null?(n=Ot(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Lo(e,t,n,r,c,u){var g=0;if(r=e,typeof e=="function")qs(e)&&(g=1);else if(typeof e=="string")g=ky(e,n,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=Ot(31,n,t,c),e.elementType=J,e.lanes=u,e;case _:return Yi(n.children,c,u,t);case S:g=8,c|=24;break;case T:return e=Ot(12,n,t,c|2),e.elementType=T,e.lanes=u,e;case H:return e=Ot(13,n,t,c),e.elementType=H,e.lanes=u,e;case X:return e=Ot(19,n,t,c),e.elementType=X,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:g=10;break e;case A:g=9;break e;case U:g=11;break e;case k:g=14;break e;case W:g=16,r=null;break e}g=29,n=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=Ot(g,n,t,c),t.elementType=e,t.type=r,t.lanes=u,t}function Yi(e,t,n,r){return e=Ot(7,e,r,t),e.lanes=n,e}function Gs(e,t,n){return e=Ot(6,e,null,t),e.lanes=n,e}function Yd(e){var t=Ot(18,null,null,0);return t.stateNode=e,t}function Xs(e,t,n){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qd=new WeakMap;function Gt(e,t){if(typeof e=="object"&&e!==null){var n=qd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:un(t)},qd.set(e,t),t)}return{value:e,source:t,stack:un(t)}}var Ta=[],Ca=0,Po=null,zr=0,Xt=[],Qt=0,ti=null,fn=1,dn="";function Bn(e,t){Ta[Ca++]=zr,Ta[Ca++]=Po,Po=e,zr=t}function Gd(e,t,n){Xt[Qt++]=fn,Xt[Qt++]=dn,Xt[Qt++]=ti,ti=e;var r=fn;e=dn;var c=32-mt(r)-1;r&=~(1<<c),n+=1;var u=32-mt(t)+c;if(30<u){var g=c-c%5;u=(r&(1<<g)-1).toString(32),r>>=g,c-=g,fn=1<<32-mt(t)+c|n<<c|r,dn=u+e}else fn=1<<u|n<<c|r,dn=e}function Qs(e){e.return!==null&&(Bn(e,1),Gd(e,1,0))}function Zs(e){for(;e===Po;)Po=Ta[--Ca],Ta[Ca]=null,zr=Ta[--Ca],Ta[Ca]=null;for(;e===ti;)ti=Xt[--Qt],Xt[Qt]=null,dn=Xt[--Qt],Xt[Qt]=null,fn=Xt[--Qt],Xt[Qt]=null}function Xd(e,t){Xt[Qt++]=fn,Xt[Qt++]=dn,Xt[Qt++]=ti,fn=t.id,dn=t.overflow,ti=e}var ct=null,He=null,ze=!1,ni=null,Zt=!1,Ws=Error(l(519));function ii(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ar(Gt(t,e)),Ws}function Qd(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[st]=e,t[bt]=r,n){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(n=0;n<Wr.length;n++)Ee(Wr[n],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),ld(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),cd(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||fm(t.textContent,n)?(r.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),r.onScroll!=null&&Ee("scroll",t),r.onScrollEnd!=null&&Ee("scrollend",t),r.onClick!=null&&(t.onclick=Rn),t=!0):t=!1,t||ii(e,!0)}function Zd(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:ct=ct.return}}function za(e){if(e!==ct)return!1;if(!ze)return Zd(e),ze=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||mu(e.type,e.memoizedProps)),n=!n),n&&He&&ii(e),Zd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));He=bm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));He=bm(e)}else t===27?(t=He,vi(e.type)?(e=xu,xu=null,He=e):He=t):He=ct?Kt(e.stateNode.nextSibling):null;return!0}function qi(){He=ct=null,ze=!1}function Ks(){var e=ni;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),ni=null),e}function Ar(e){ni===null?ni=[e]:ni.push(e)}var $s=R(null),Gi=null,Nn=null;function ai(e,t,n){$($s,t._currentValue),t._currentValue=n}function Un(e){e._currentValue=$s.current,V($s)}function Js(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ec(e,t,n,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var x=u;u=c;for(var z=0;z<t.length;z++)if(x.context===t[z]){u.lanes|=n,x=u.alternate,x!==null&&(x.lanes|=n),Js(u.return,n,e),r||(g=null);break e}u=x.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(l(341));g.lanes|=n,u=g.alternate,u!==null&&(u.lanes|=n),Js(g,n,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Aa(e,t,n,r){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var x=c.type;Rt(c.pendingProps.value,g.value)||(e!==null?e.push(x):e=[x])}}else if(c===ve.current){if(g=c.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(to):e=[to])}c=c.return}e!==null&&ec(t,e,n,r),t.flags|=262144}function Fo(e){for(e=e.firstContext;e!==null;){if(!Rt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xi(e){Gi=e,Nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ut(e){return Wd(Gi,e)}function ko(e,t){return Gi===null&&Xi(e),Wd(e,t)}function Wd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Nn===null){if(e===null)throw Error(l(308));Nn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Nn=Nn.next=t;return n}var j1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},L1=i.unstable_scheduleCallback,P1=i.unstable_NormalPriority,Ke={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tc(){return{controller:new j1,data:new Map,refCount:0}}function Rr(e){e.refCount--,e.refCount===0&&L1(P1,function(){e.controller.abort()})}var Or=null,nc=0,Ra=0,Oa=null;function F1(e,t){if(Or===null){var n=Or=[];nc=0,Ra=ru(),Oa={status:"pending",value:void 0,then:function(r){n.push(r)}}}return nc++,t.then(Kd,Kd),t}function Kd(){if(--nc===0&&Or!==null){Oa!==null&&(Oa.status="fulfilled");var e=Or;Or=null,Ra=0,Oa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function k1(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),r}var $d=P.S;P.S=function(e,t){Dh=yt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&F1(e,t),$d!==null&&$d(e,t)};var Qi=R(null);function ic(){var e=Qi.current;return e!==null?e:ke.pooledCache}function Ho(e,t){t===null?$(Qi,Qi.current):$(Qi,t.pool)}function Jd(){var e=ic();return e===null?null:{parent:Ke._currentValue,pool:e}}var Ma=Error(l(460)),ac=Error(l(474)),Io=Error(l(542)),Vo={then:function(){}};function e0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function t0(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Rn,Rn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,i0(e),e;default:if(typeof t.status=="string")t.then(Rn,Rn);else{if(e=ke,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,i0(e),e}throw Wi=t,Ma}}function Zi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Wi=n,Ma):n}}var Wi=null;function n0(){if(Wi===null)throw Error(l(459));var e=Wi;return Wi=null,e}function i0(e){if(e===Ma||e===Io)throw Error(l(483))}var Ba=null,Mr=0;function Yo(e){var t=Mr;return Mr+=1,Ba===null&&(Ba=[]),t0(Ba,e,t)}function Br(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qo(e,t){throw t.$$typeof===b?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function a0(e){function t(N,O){if(e){var D=N.deletions;D===null?(N.deletions=[O],N.flags|=16):D.push(O)}}function n(N,O){if(!e)return null;for(;O!==null;)t(N,O),O=O.sibling;return null}function r(N){for(var O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function c(N,O){return N=Mn(N,O),N.index=0,N.sibling=null,N}function u(N,O,D){return N.index=D,e?(D=N.alternate,D!==null?(D=D.index,D<O?(N.flags|=67108866,O):D):(N.flags|=67108866,O)):(N.flags|=1048576,O)}function g(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function x(N,O,D,Y){return O===null||O.tag!==6?(O=Gs(D,N.mode,Y),O.return=N,O):(O=c(O,D),O.return=N,O)}function z(N,O,D,Y){var le=D.type;return le===_?I(N,O,D.props.children,Y,D.key):O!==null&&(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===W&&Zi(le)===O.type)?(O=c(O,D.props),Br(O,D),O.return=N,O):(O=Lo(D.type,D.key,D.props,null,N.mode,Y),Br(O,D),O.return=N,O)}function j(N,O,D,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==D.containerInfo||O.stateNode.implementation!==D.implementation?(O=Xs(D,N.mode,Y),O.return=N,O):(O=c(O,D.children||[]),O.return=N,O)}function I(N,O,D,Y,le){return O===null||O.tag!==7?(O=Yi(D,N.mode,Y,le),O.return=N,O):(O=c(O,D),O.return=N,O)}function q(N,O,D){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Gs(""+O,N.mode,D),O.return=N,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return D=Lo(O.type,O.key,O.props,null,N.mode,D),Br(D,O),D.return=N,D;case E:return O=Xs(O,N.mode,D),O.return=N,O;case W:return O=Zi(O),q(N,O,D)}if(ye(O)||se(O))return O=Yi(O,N.mode,D,null),O.return=N,O;if(typeof O.then=="function")return q(N,Yo(O),D);if(O.$$typeof===B)return q(N,ko(N,O),D);qo(N,O)}return null}function L(N,O,D,Y){var le=O!==null?O.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return le!==null?null:x(N,O,""+D,Y);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case w:return D.key===le?z(N,O,D,Y):null;case E:return D.key===le?j(N,O,D,Y):null;case W:return D=Zi(D),L(N,O,D,Y)}if(ye(D)||se(D))return le!==null?null:I(N,O,D,Y,null);if(typeof D.then=="function")return L(N,O,Yo(D),Y);if(D.$$typeof===B)return L(N,O,ko(N,D),Y);qo(N,D)}return null}function F(N,O,D,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return N=N.get(D)||null,x(O,N,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return N=N.get(Y.key===null?D:Y.key)||null,z(O,N,Y,le);case E:return N=N.get(Y.key===null?D:Y.key)||null,j(O,N,Y,le);case W:return Y=Zi(Y),F(N,O,D,Y,le)}if(ye(Y)||se(Y))return N=N.get(D)||null,I(O,N,Y,le,null);if(typeof Y.then=="function")return F(N,O,D,Yo(Y),le);if(Y.$$typeof===B)return F(N,O,D,ko(O,Y),le);qo(O,Y)}return null}function ie(N,O,D,Y){for(var le=null,Oe=null,oe=O,ge=O=0,Te=null;oe!==null&&ge<D.length;ge++){oe.index>ge?(Te=oe,oe=null):Te=oe.sibling;var Me=L(N,oe,D[ge],Y);if(Me===null){oe===null&&(oe=Te);break}e&&oe&&Me.alternate===null&&t(N,oe),O=u(Me,O,ge),Oe===null?le=Me:Oe.sibling=Me,Oe=Me,oe=Te}if(ge===D.length)return n(N,oe),ze&&Bn(N,ge),le;if(oe===null){for(;ge<D.length;ge++)oe=q(N,D[ge],Y),oe!==null&&(O=u(oe,O,ge),Oe===null?le=oe:Oe.sibling=oe,Oe=oe);return ze&&Bn(N,ge),le}for(oe=r(oe);ge<D.length;ge++)Te=F(oe,N,ge,D[ge],Y),Te!==null&&(e&&Te.alternate!==null&&oe.delete(Te.key===null?ge:Te.key),O=u(Te,O,ge),Oe===null?le=Te:Oe.sibling=Te,Oe=Te);return e&&oe.forEach(function(Si){return t(N,Si)}),ze&&Bn(N,ge),le}function fe(N,O,D,Y){if(D==null)throw Error(l(151));for(var le=null,Oe=null,oe=O,ge=O=0,Te=null,Me=D.next();oe!==null&&!Me.done;ge++,Me=D.next()){oe.index>ge?(Te=oe,oe=null):Te=oe.sibling;var Si=L(N,oe,Me.value,Y);if(Si===null){oe===null&&(oe=Te);break}e&&oe&&Si.alternate===null&&t(N,oe),O=u(Si,O,ge),Oe===null?le=Si:Oe.sibling=Si,Oe=Si,oe=Te}if(Me.done)return n(N,oe),ze&&Bn(N,ge),le;if(oe===null){for(;!Me.done;ge++,Me=D.next())Me=q(N,Me.value,Y),Me!==null&&(O=u(Me,O,ge),Oe===null?le=Me:Oe.sibling=Me,Oe=Me);return ze&&Bn(N,ge),le}for(oe=r(oe);!Me.done;ge++,Me=D.next())Me=F(oe,N,ge,Me.value,Y),Me!==null&&(e&&Me.alternate!==null&&oe.delete(Me.key===null?ge:Me.key),O=u(Me,O,ge),Oe===null?le=Me:Oe.sibling=Me,Oe=Me);return e&&oe.forEach(function(Ky){return t(N,Ky)}),ze&&Bn(N,ge),le}function Fe(N,O,D,Y){if(typeof D=="object"&&D!==null&&D.type===_&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case w:e:{for(var le=D.key;O!==null;){if(O.key===le){if(le=D.type,le===_){if(O.tag===7){n(N,O.sibling),Y=c(O,D.props.children),Y.return=N,N=Y;break e}}else if(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===W&&Zi(le)===O.type){n(N,O.sibling),Y=c(O,D.props),Br(Y,D),Y.return=N,N=Y;break e}n(N,O);break}else t(N,O);O=O.sibling}D.type===_?(Y=Yi(D.props.children,N.mode,Y,D.key),Y.return=N,N=Y):(Y=Lo(D.type,D.key,D.props,null,N.mode,Y),Br(Y,D),Y.return=N,N=Y)}return g(N);case E:e:{for(le=D.key;O!==null;){if(O.key===le)if(O.tag===4&&O.stateNode.containerInfo===D.containerInfo&&O.stateNode.implementation===D.implementation){n(N,O.sibling),Y=c(O,D.children||[]),Y.return=N,N=Y;break e}else{n(N,O);break}else t(N,O);O=O.sibling}Y=Xs(D,N.mode,Y),Y.return=N,N=Y}return g(N);case W:return D=Zi(D),Fe(N,O,D,Y)}if(ye(D))return ie(N,O,D,Y);if(se(D)){if(le=se(D),typeof le!="function")throw Error(l(150));return D=le.call(D),fe(N,O,D,Y)}if(typeof D.then=="function")return Fe(N,O,Yo(D),Y);if(D.$$typeof===B)return Fe(N,O,ko(N,D),Y);qo(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,O!==null&&O.tag===6?(n(N,O.sibling),Y=c(O,D),Y.return=N,N=Y):(n(N,O),Y=Gs(D,N.mode,Y),Y.return=N,N=Y),g(N)):n(N,O)}return function(N,O,D,Y){try{Mr=0;var le=Fe(N,O,D,Y);return Ba=null,le}catch(oe){if(oe===Ma||oe===Io)throw oe;var Oe=Ot(29,oe,null,N.mode);return Oe.lanes=Y,Oe.return=N,Oe}finally{}}}var Ki=a0(!0),r0=a0(!1),ri=!1;function rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function li(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ne&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=jo(e),Id(e,null,n),t}return Do(e,r,t,n),jo(e)}function Nr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wf(e,n)}}function lc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var c=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var g={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,n=n.next}while(n!==null);u===null?c=u=t:u=u.next=t}else c=u=t;n={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sc=!1;function Ur(){if(sc){var e=Oa;if(e!==null)throw e}}function Dr(e,t,n,r){sc=!1;var c=e.updateQueue;ri=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var z=x,j=z.next;z.next=null,g===null?u=j:g.next=j,g=z;var I=e.alternate;I!==null&&(I=I.updateQueue,x=I.lastBaseUpdate,x!==g&&(x===null?I.firstBaseUpdate=j:x.next=j,I.lastBaseUpdate=z))}if(u!==null){var q=c.baseState;g=0,I=j=z=null,x=u;do{var L=x.lane&-536870913,F=L!==x.lane;if(F?(_e&L)===L:(r&L)===L){L!==0&&L===Ra&&(sc=!0),I!==null&&(I=I.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ie=e,fe=x;L=t;var Fe=n;switch(fe.tag){case 1:if(ie=fe.payload,typeof ie=="function"){q=ie.call(Fe,q,L);break e}q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=fe.payload,L=typeof ie=="function"?ie.call(Fe,q,L):ie,L==null)break e;q=y({},q,L);break e;case 2:ri=!0}}L=x.callback,L!==null&&(e.flags|=64,F&&(e.flags|=8192),F=c.callbacks,F===null?c.callbacks=[L]:F.push(L))}else F={lane:L,tag:x.tag,payload:x.payload,callback:x.callback,next:null},I===null?(j=I=F,z=q):I=I.next=F,g|=L;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;F=x,x=F.next,F.next=null,c.lastBaseUpdate=F,c.shared.pending=null}}while(!0);I===null&&(z=q),c.baseState=z,c.firstBaseUpdate=j,c.lastBaseUpdate=I,u===null&&(c.shared.lanes=0),di|=g,e.lanes=g,e.memoizedState=q}}function o0(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function l0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)o0(n[e],t)}var Na=R(null),Go=R(0);function s0(e,t){e=Vn,$(Go,e),$(Na,t),Vn=e|t.baseLanes}function cc(){$(Go,Vn),$(Na,Na.current)}function uc(){Vn=Go.current,V(Na),V(Go)}var Mt=R(null),Wt=null;function si(e){var t=e.alternate;$(Qe,Qe.current&1),$(Mt,e),Wt===null&&(t===null||Na.current!==null||t.memoizedState!==null)&&(Wt=e)}function fc(e){$(Qe,Qe.current),$(Mt,e),Wt===null&&(Wt=e)}function c0(e){e.tag===22?($(Qe,Qe.current),$(Mt,e),Wt===null&&(Wt=e)):ci()}function ci(){$(Qe,Qe.current),$(Mt,Mt.current)}function Bt(e){V(Mt),Wt===e&&(Wt=null),V(Qe)}var Qe=R(0);function Xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||vu(n)||yu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dn=0,pe=null,Le=null,$e=null,Qo=!1,Ua=!1,$i=!1,Zo=0,jr=0,Da=null,H1=0;function qe(){throw Error(l(321))}function dc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rt(e[n],t[n]))return!1;return!0}function hc(e,t,n,r,c,u){return Dn=u,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=e===null||e.memoizedState===null?G0:Ac,$i=!1,u=n(r,c),$i=!1,Ua&&(u=f0(t,n,r,c)),u0(e),u}function u0(e){P.H=Fr;var t=Le!==null&&Le.next!==null;if(Dn=0,$e=Le=pe=null,Qo=!1,jr=0,Da=null,t)throw Error(l(300));e===null||Je||(e=e.dependencies,e!==null&&Fo(e)&&(Je=!0))}function f0(e,t,n,r){pe=e;var c=0;do{if(Ua&&(Da=null),jr=0,Ua=!1,25<=c)throw Error(l(301));if(c+=1,$e=Le=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}P.H=X0,u=t(n,r)}while(Ua);return u}function I1(){var e=P.H,t=e.useState()[0];return t=typeof t.then=="function"?Lr(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(pe.flags|=1024),t}function mc(){var e=Zo!==0;return Zo=0,e}function pc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function gc(e){if(Qo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Qo=!1}Dn=0,$e=Le=pe=null,Ua=!1,jr=Zo=0,Da=null}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?pe.memoizedState=$e=e:$e=$e.next=e,$e}function Ze(){if(Le===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?pe.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw pe.alternate===null?Error(l(467)):Error(l(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?pe.memoizedState=$e=e:$e=$e.next=e}return $e}function Wo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lr(e){var t=jr;return jr+=1,Da===null&&(Da=[]),e=t0(Da,e,t),t=pe,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,P.H=t===null||t.memoizedState===null?G0:Ac),e}function Ko(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Lr(e);if(e.$$typeof===B)return ut(e)}throw Error(l(438,String(e)))}function vc(e){var t=null,n=pe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=pe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Wo(),pe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ae;return t.index++,n}function jn(e,t){return typeof t=="function"?t(e):t}function $o(e){var t=Ze();return yc(t,Le,e)}function yc(e,t,n){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=n;var c=e.baseQueue,u=r.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,r.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var x=g=null,z=null,j=t,I=!1;do{var q=j.lane&-536870913;if(q!==j.lane?(_e&q)===q:(Dn&q)===q){var L=j.revertLane;if(L===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),q===Ra&&(I=!0);else if((Dn&L)===L){j=j.next,L===Ra&&(I=!0);continue}else q={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},z===null?(x=z=q,g=u):z=z.next=q,pe.lanes|=L,di|=L;q=j.action,$i&&n(u,q),u=j.hasEagerState?j.eagerState:n(u,q)}else L={lane:q,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},z===null?(x=z=L,g=u):z=z.next=L,pe.lanes|=q,di|=q;j=j.next}while(j!==null&&j!==t);if(z===null?g=u:z.next=x,!Rt(u,e.memoizedState)&&(Je=!0,I&&(n=Oa,n!==null)))throw n;e.memoizedState=u,e.baseState=g,e.baseQueue=z,r.lastRenderedState=u}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function xc(e){var t=Ze(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,c=n.pending,u=t.memoizedState;if(c!==null){n.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);Rt(u,t.memoizedState)||(Je=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function d0(e,t,n){var r=pe,c=Ze(),u=ze;if(u){if(n===void 0)throw Error(l(407));n=n()}else n=t();var g=!Rt((Le||c).memoizedState,n);if(g&&(c.memoizedState=n,Je=!0),c=c.queue,Sc(p0.bind(null,r,c,e),[e]),c.getSnapshot!==t||g||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,ja(9,{destroy:void 0},m0.bind(null,r,c,n,t),null),ke===null)throw Error(l(349));u||(Dn&127)!==0||h0(r,t,n)}return n}function h0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pe.updateQueue,t===null?(t=Wo(),pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function m0(e,t,n,r){t.value=n,t.getSnapshot=r,g0(t)&&v0(e)}function p0(e,t,n){return n(function(){g0(t)&&v0(e)})}function g0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rt(e,n)}catch{return!0}}function v0(e){var t=Vi(e,2);t!==null&&Ct(t,e,2)}function bc(e){var t=xt();if(typeof e=="function"){var n=e;if(e=n(),$i){kt(!0);try{n()}finally{kt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:e},t}function y0(e,t,n,r){return e.baseState=n,yc(e,Le,typeof r=="function"?r:jn)}function V1(e,t,n,r,c){if(tl(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};P.T!==null?n(!0):u.isTransition=!1,r(u),n=t.pending,n===null?(u.next=t.pending=u,x0(t,u)):(u.next=n.next,t.pending=n.next=u)}}function x0(e,t){var n=t.action,r=t.payload,c=e.state;if(t.isTransition){var u=P.T,g={};P.T=g;try{var x=n(c,r),z=P.S;z!==null&&z(g,x),b0(e,t,x)}catch(j){wc(e,t,j)}finally{u!==null&&g.types!==null&&(u.types=g.types),P.T=u}}else try{u=n(c,r),b0(e,t,u)}catch(j){wc(e,t,j)}}function b0(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){w0(e,t,r)},function(r){return wc(e,t,r)}):w0(e,t,n)}function w0(e,t,n){t.status="fulfilled",t.value=n,S0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,x0(e,n)))}function wc(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,S0(t),t=t.next;while(t!==r)}e.action=null}function S0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function E0(e,t){return t}function _0(e,t){if(ze){var n=ke.formState;if(n!==null){e:{var r=pe;if(ze){if(He){t:{for(var c=He,u=Zt;c.nodeType!==8;){if(!u){c=null;break t}if(c=Kt(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){He=Kt(c.nextSibling),r=c.data==="F!";break e}}ii(r)}r=!1}r&&(t=n[0])}}return n=xt(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E0,lastRenderedState:t},n.queue=r,n=V0.bind(null,pe,r),r.dispatch=n,r=bc(!1),u=zc.bind(null,pe,!1,r.queue),r=xt(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,n=V1.bind(null,pe,c,u,n),c.dispatch=n,r.memoizedState=e,[t,n,!1]}function T0(e){var t=Ze();return C0(t,Le,e)}function C0(e,t,n){if(t=yc(e,t,E0)[0],e=$o(jn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Lr(t)}catch(g){throw g===Ma?Io:g}else r=t;t=Ze();var c=t.queue,u=c.dispatch;return n!==t.memoizedState&&(pe.flags|=2048,ja(9,{destroy:void 0},Y1.bind(null,c,n),null)),[r,u,e]}function Y1(e,t){e.action=t}function z0(e){var t=Ze(),n=Le;if(n!==null)return C0(t,n,e);Ze(),t=t.memoizedState,n=Ze();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ja(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Wo(),pe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function A0(){return Ze().memoizedState}function Jo(e,t,n,r){var c=xt();pe.flags|=e,c.memoizedState=ja(1|t,{destroy:void 0},n,r===void 0?null:r)}function el(e,t,n,r){var c=Ze();r=r===void 0?null:r;var u=c.memoizedState.inst;Le!==null&&r!==null&&dc(r,Le.memoizedState.deps)?c.memoizedState=ja(t,u,n,r):(pe.flags|=e,c.memoizedState=ja(1|t,u,n,r))}function R0(e,t){Jo(8390656,8,e,t)}function Sc(e,t){el(2048,8,e,t)}function q1(e){pe.flags|=4;var t=pe.updateQueue;if(t===null)t=Wo(),pe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function O0(e){var t=Ze().memoizedState;return q1({ref:t,nextImpl:e}),function(){if((Ne&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function M0(e,t){return el(4,2,e,t)}function B0(e,t){return el(4,4,e,t)}function N0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function U0(e,t,n){n=n!=null?n.concat([e]):null,el(4,4,N0.bind(null,t,e),n)}function Ec(){}function D0(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&dc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function j0(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&dc(t,r[1]))return r[0];if(r=e(),$i){kt(!0);try{e()}finally{kt(!1)}}return n.memoizedState=[r,t],r}function _c(e,t,n){return n===void 0||(Dn&1073741824)!==0&&(_e&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Lh(),pe.lanes|=e,di|=e,n)}function L0(e,t,n,r){return Rt(n,t)?n:Na.current!==null?(e=_c(e,n,r),Rt(e,t)||(Je=!0),e):(Dn&42)===0||(Dn&1073741824)!==0&&(_e&261930)===0?(Je=!0,e.memoizedState=n):(e=Lh(),pe.lanes|=e,di|=e,t)}function P0(e,t,n,r,c){var u=G.p;G.p=u!==0&&8>u?u:8;var g=P.T,x={};P.T=x,zc(e,!1,t,n);try{var z=c(),j=P.S;if(j!==null&&j(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var I=k1(z,r);Pr(e,t,I,Dt(e))}else Pr(e,t,r,Dt(e))}catch(q){Pr(e,t,{then:function(){},status:"rejected",reason:q},Dt())}finally{G.p=u,g!==null&&x.types!==null&&(g.types=x.types),P.T=g}}function G1(){}function Tc(e,t,n,r){if(e.tag!==5)throw Error(l(476));var c=F0(e).queue;P0(e,c,t,K,n===null?G1:function(){return k0(e),n(r)})}function F0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:K},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function k0(e){var t=F0(e);t.next===null&&(t=e.alternate.memoizedState),Pr(e,t.next.queue,{},Dt())}function Cc(){return ut(to)}function H0(){return Ze().memoizedState}function I0(){return Ze().memoizedState}function X1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Dt();e=oi(n);var r=li(t,e,n);r!==null&&(Ct(r,t,n),Nr(r,t,n)),t={cache:tc()},e.payload=t;return}t=t.return}}function Q1(e,t,n){var r=Dt();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},tl(e)?Y0(t,n):(n=Ys(e,t,n,r),n!==null&&(Ct(n,e,r),q0(n,t,r)))}function V0(e,t,n){var r=Dt();Pr(e,t,n,r)}function Pr(e,t,n,r){var c={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(tl(e))Y0(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,x=u(g,n);if(c.hasEagerState=!0,c.eagerState=x,Rt(x,g))return Do(e,t,c,0),ke===null&&Uo(),!1}catch{}finally{}if(n=Ys(e,t,c,r),n!==null)return Ct(n,e,r),q0(n,t,r),!0}return!1}function zc(e,t,n,r){if(r={lane:2,revertLane:ru(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},tl(e)){if(t)throw Error(l(479))}else t=Ys(e,n,r,2),t!==null&&Ct(t,e,2)}function tl(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Y0(e,t){Ua=Qo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function q0(e,t,n){if((n&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wf(e,n)}}var Fr={readContext:ut,use:Ko,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe};Fr.useEffectEvent=qe;var G0={readContext:ut,use:Ko,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:R0,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Jo(4194308,4,N0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jo(4194308,4,e,t)},useInsertionEffect:function(e,t){Jo(4,2,e,t)},useMemo:function(e,t){var n=xt();t=t===void 0?null:t;var r=e();if($i){kt(!0);try{e()}finally{kt(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=xt();if(n!==void 0){var c=n(t);if($i){kt(!0);try{n(t)}finally{kt(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=Q1.bind(null,pe,e),[r.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:function(e){e=bc(e);var t=e.queue,n=V0.bind(null,pe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ec,useDeferredValue:function(e,t){var n=xt();return _c(n,e,t)},useTransition:function(){var e=bc(!1);return e=P0.bind(null,pe,e.queue,!0,!1),xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=pe,c=xt();if(ze){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),ke===null)throw Error(l(349));(_e&127)!==0||h0(r,t,n)}c.memoizedState=n;var u={value:n,getSnapshot:t};return c.queue=u,R0(p0.bind(null,r,u,e),[e]),r.flags|=2048,ja(9,{destroy:void 0},m0.bind(null,r,u,n,t),null),n},useId:function(){var e=xt(),t=ke.identifierPrefix;if(ze){var n=dn,r=fn;n=(r&~(1<<32-mt(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Zo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=H1++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Cc,useFormState:_0,useActionState:_0,useOptimistic:function(e){var t=xt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zc.bind(null,pe,!0,n),n.dispatch=t,[e,t]},useMemoCache:vc,useCacheRefresh:function(){return xt().memoizedState=X1.bind(null,pe)},useEffectEvent:function(e){var t=xt(),n={impl:e};return t.memoizedState=n,function(){if((Ne&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},Ac={readContext:ut,use:Ko,useCallback:D0,useContext:ut,useEffect:Sc,useImperativeHandle:U0,useInsertionEffect:M0,useLayoutEffect:B0,useMemo:j0,useReducer:$o,useRef:A0,useState:function(){return $o(jn)},useDebugValue:Ec,useDeferredValue:function(e,t){var n=Ze();return L0(n,Le.memoizedState,e,t)},useTransition:function(){var e=$o(jn)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:Lr(e),t]},useSyncExternalStore:d0,useId:H0,useHostTransitionStatus:Cc,useFormState:T0,useActionState:T0,useOptimistic:function(e,t){var n=Ze();return y0(n,Le,e,t)},useMemoCache:vc,useCacheRefresh:I0};Ac.useEffectEvent=O0;var X0={readContext:ut,use:Ko,useCallback:D0,useContext:ut,useEffect:Sc,useImperativeHandle:U0,useInsertionEffect:M0,useLayoutEffect:B0,useMemo:j0,useReducer:xc,useRef:A0,useState:function(){return xc(jn)},useDebugValue:Ec,useDeferredValue:function(e,t){var n=Ze();return Le===null?_c(n,e,t):L0(n,Le.memoizedState,e,t)},useTransition:function(){var e=xc(jn)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:Lr(e),t]},useSyncExternalStore:d0,useId:H0,useHostTransitionStatus:Cc,useFormState:z0,useActionState:z0,useOptimistic:function(e,t){var n=Ze();return Le!==null?y0(n,Le,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:vc,useCacheRefresh:I0};X0.useEffectEvent=O0;function Rc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:y({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Oc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dt(),c=oi(r);c.payload=t,n!=null&&(c.callback=n),t=li(e,c,r),t!==null&&(Ct(t,e,r),Nr(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dt(),c=oi(r);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=li(e,c,r),t!==null&&(Ct(t,e,r),Nr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),r=oi(n);r.tag=2,t!=null&&(r.callback=t),t=li(e,r,n),t!==null&&(Ct(t,e,n),Nr(t,e,n))}};function Q0(e,t,n,r,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,g):t.prototype&&t.prototype.isPureReactComponent?!Tr(n,r)||!Tr(c,u):!0}function Z0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Oc.enqueueReplaceState(t,t.state,null)}function Ji(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=y({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function W0(e){No(e)}function K0(e){console.error(e)}function $0(e){No(e)}function nl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function J0(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Mc(e,t,n){return n=oi(n),n.tag=3,n.payload={element:null},n.callback=function(){nl(e,t)},n}function eh(e){return e=oi(e),e.tag=3,e}function th(e,t,n,r){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var u=r.value;e.payload=function(){return c(u)},e.callback=function(){J0(t,n,r)}}var g=n.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){J0(t,n,r),typeof c!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})})}function Z1(e,t,n,r,c){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Aa(t,n,c,!0),n=Mt.current,n!==null){switch(n.tag){case 31:case 13:return Wt===null?ml():n.alternate===null&&Ge===0&&(Ge=3),n.flags&=-257,n.flags|=65536,n.lanes=c,r===Vo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),nu(e,r,c)),!1;case 22:return n.flags|=65536,r===Vo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),nu(e,r,c)),!1}throw Error(l(435,n.tag))}return nu(e,r,c),ml(),!1}if(ze)return t=Mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==Ws&&(e=Error(l(422),{cause:r}),Ar(Gt(e,n)))):(r!==Ws&&(t=Error(l(423),{cause:r}),Ar(Gt(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=Gt(r,n),c=Mc(e.stateNode,r,c),lc(e,c),Ge!==4&&(Ge=2)),!1;var u=Error(l(520),{cause:r});if(u=Gt(u,n),Xr===null?Xr=[u]:Xr.push(u),Ge!==4&&(Ge=2),t===null)return!0;r=Gt(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Mc(n.stateNode,r,e),lc(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(hi===null||!hi.has(u))))return n.flags|=65536,c&=-c,n.lanes|=c,c=eh(c),th(c,e,n,r),lc(n,c),!1}n=n.return}while(n!==null);return!1}var Bc=Error(l(461)),Je=!1;function ft(e,t,n,r){t.child=e===null?r0(t,null,n,r):Ki(t,e.child,n,r)}function nh(e,t,n,r,c){n=n.render;var u=t.ref;if("ref"in r){var g={};for(var x in r)x!=="ref"&&(g[x]=r[x])}else g=r;return Xi(t),r=hc(e,t,n,g,u,c),x=mc(),e!==null&&!Je?(pc(e,t,c),Ln(e,t,c)):(ze&&x&&Qs(t),t.flags|=1,ft(e,t,r,c),t.child)}function ih(e,t,n,r,c){if(e===null){var u=n.type;return typeof u=="function"&&!qs(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,ah(e,t,u,r,c)):(e=Lo(n.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!kc(e,c)){var g=u.memoizedProps;if(n=n.compare,n=n!==null?n:Tr,n(g,r)&&e.ref===t.ref)return Ln(e,t,c)}return t.flags|=1,e=Mn(u,r),e.ref=t.ref,e.return=t,t.child=e}function ah(e,t,n,r,c){if(e!==null){var u=e.memoizedProps;if(Tr(u,r)&&e.ref===t.ref)if(Je=!1,t.pendingProps=r=u,kc(e,c))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,Ln(e,t,c)}return Nc(e,t,n,r,c)}function rh(e,t,n,r){var c=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~u}else r=0,t.child=null;return oh(e,t,u,n,r)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ho(t,u!==null?u.cachePool:null),u!==null?s0(t,u):cc(),c0(t);else return r=t.lanes=536870912,oh(e,t,u!==null?u.baseLanes|n:n,n,r)}else u!==null?(Ho(t,u.cachePool),s0(t,u),ci(),t.memoizedState=null):(e!==null&&Ho(t,null),cc(),ci());return ft(e,t,c,n),t.child}function kr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function oh(e,t,n,r,c){var u=ic();return u=u===null?null:{parent:Ke._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&Ho(t,null),cc(),c0(t),e!==null&&Aa(e,t,r,!0),t.childLanes=c,null}function il(e,t){return t=rl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function lh(e,t,n){return Ki(t,e.child,null,n),e=il(t,t.pendingProps),e.flags|=2,Bt(t),t.memoizedState=null,e}function W1(e,t,n){var r=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ze){if(r.mode==="hidden")return e=il(t,r),t.lanes=536870912,kr(null,e);if(fc(t),(e=He)?(e=xm(e,Zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ti!==null?{id:fn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},n=Yd(e),n.return=t,t.child=n,ct=t,He=null)):e=null,e===null)throw ii(t);return t.lanes=536870912,null}return il(t,r)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if(fc(t),c)if(t.flags&256)t.flags&=-257,t=lh(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Je||Aa(e,t,n,!1),c=(n&e.childLanes)!==0,Je||c){if(r=ke,r!==null&&(g=Kf(r,n),g!==0&&g!==u.retryLane))throw u.retryLane=g,Vi(e,g),Ct(r,e,g),Bc;ml(),t=lh(e,t,n)}else e=u.treeContext,He=Kt(g.nextSibling),ct=t,ze=!0,ni=null,Zt=!1,e!==null&&Xd(t,e),t=il(t,r),t.flags|=4096;return t}return e=Mn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function al(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Nc(e,t,n,r,c){return Xi(t),n=hc(e,t,n,r,void 0,c),r=mc(),e!==null&&!Je?(pc(e,t,c),Ln(e,t,c)):(ze&&r&&Qs(t),t.flags|=1,ft(e,t,n,c),t.child)}function sh(e,t,n,r,c,u){return Xi(t),t.updateQueue=null,n=f0(t,r,n,c),u0(e),r=mc(),e!==null&&!Je?(pc(e,t,u),Ln(e,t,u)):(ze&&r&&Qs(t),t.flags|=1,ft(e,t,n,u),t.child)}function ch(e,t,n,r,c){if(Xi(t),t.stateNode===null){var u=_a,g=n.contextType;typeof g=="object"&&g!==null&&(u=ut(g)),u=new n(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Oc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},rc(t),g=n.contextType,u.context=typeof g=="object"&&g!==null?ut(g):_a,u.state=t.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(Rc(t,n,g,r),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Oc.enqueueReplaceState(u,u.state,null),Dr(t,r,u,c),Ur(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var x=t.memoizedProps,z=Ji(n,x);u.props=z;var j=u.context,I=n.contextType;g=_a,typeof I=="object"&&I!==null&&(g=ut(I));var q=n.getDerivedStateFromProps;I=typeof q=="function"||typeof u.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,I||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(x||j!==g)&&Z0(t,u,r,g),ri=!1;var L=t.memoizedState;u.state=L,Dr(t,r,u,c),Ur(),j=t.memoizedState,x||L!==j||ri?(typeof q=="function"&&(Rc(t,n,q,r),j=t.memoizedState),(z=ri||Q0(t,n,z,r,L,j,g))?(I||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=j),u.props=r,u.state=j,u.context=g,r=z):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,oc(e,t),g=t.memoizedProps,I=Ji(n,g),u.props=I,q=t.pendingProps,L=u.context,j=n.contextType,z=_a,typeof j=="object"&&j!==null&&(z=ut(j)),x=n.getDerivedStateFromProps,(j=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==q||L!==z)&&Z0(t,u,r,z),ri=!1,L=t.memoizedState,u.state=L,Dr(t,r,u,c),Ur();var F=t.memoizedState;g!==q||L!==F||ri||e!==null&&e.dependencies!==null&&Fo(e.dependencies)?(typeof x=="function"&&(Rc(t,n,x,r),F=t.memoizedState),(I=ri||Q0(t,n,I,r,L,F,z)||e!==null&&e.dependencies!==null&&Fo(e.dependencies))?(j||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,F,z),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,F,z)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),u.props=r,u.state=F,u.context=z,r=I):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,al(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=Ki(t,e.child,null,c),t.child=Ki(t,null,n,c)):ft(e,t,n,c),t.memoizedState=u.state,e=t.child):e=Ln(e,t,c),e}function uh(e,t,n,r){return qi(),t.flags|=256,ft(e,t,n,r),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dc(e){return{baseLanes:e,cachePool:Jd()}}function jc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ut),e}function fh(e,t,n){var r=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(c?si(t):ci(),(e=He)?(e=xm(e,Zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ti!==null?{id:fn,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},n=Yd(e),n.return=t,t.child=n,ct=t,He=null)):e=null,e===null)throw ii(t);return yu(e)?t.lanes=32:t.lanes=536870912,null}var x=r.children;return r=r.fallback,c?(ci(),c=t.mode,x=rl({mode:"hidden",children:x},c),r=Yi(r,c,n,null),x.return=t,r.return=t,x.sibling=r,t.child=x,r=t.child,r.memoizedState=Dc(n),r.childLanes=jc(e,g,n),t.memoizedState=Uc,kr(null,r)):(si(t),Lc(t,x))}var z=e.memoizedState;if(z!==null&&(x=z.dehydrated,x!==null)){if(u)t.flags&256?(si(t),t.flags&=-257,t=Pc(e,t,n)):t.memoizedState!==null?(ci(),t.child=e.child,t.flags|=128,t=null):(ci(),x=r.fallback,c=t.mode,r=rl({mode:"visible",children:r.children},c),x=Yi(x,c,n,null),x.flags|=2,r.return=t,x.return=t,r.sibling=x,t.child=r,Ki(t,e.child,null,n),r=t.child,r.memoizedState=Dc(n),r.childLanes=jc(e,g,n),t.memoizedState=Uc,t=kr(null,r));else if(si(t),yu(x)){if(g=x.nextSibling&&x.nextSibling.dataset,g)var j=g.dgst;g=j,r=Error(l(419)),r.stack="",r.digest=g,Ar({value:r,source:null,stack:null}),t=Pc(e,t,n)}else if(Je||Aa(e,t,n,!1),g=(n&e.childLanes)!==0,Je||g){if(g=ke,g!==null&&(r=Kf(g,n),r!==0&&r!==z.retryLane))throw z.retryLane=r,Vi(e,r),Ct(g,e,r),Bc;vu(x)||ml(),t=Pc(e,t,n)}else vu(x)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,He=Kt(x.nextSibling),ct=t,ze=!0,ni=null,Zt=!1,e!==null&&Xd(t,e),t=Lc(t,r.children),t.flags|=4096);return t}return c?(ci(),x=r.fallback,c=t.mode,z=e.child,j=z.sibling,r=Mn(z,{mode:"hidden",children:r.children}),r.subtreeFlags=z.subtreeFlags&65011712,j!==null?x=Mn(j,x):(x=Yi(x,c,n,null),x.flags|=2),x.return=t,r.return=t,r.sibling=x,t.child=r,kr(null,r),r=t.child,x=e.child.memoizedState,x===null?x=Dc(n):(c=x.cachePool,c!==null?(z=Ke._currentValue,c=c.parent!==z?{parent:z,pool:z}:c):c=Jd(),x={baseLanes:x.baseLanes|n,cachePool:c}),r.memoizedState=x,r.childLanes=jc(e,g,n),t.memoizedState=Uc,kr(e.child,r)):(si(t),n=e.child,e=n.sibling,n=Mn(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=n,t.memoizedState=null,n)}function Lc(e,t){return t=rl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function rl(e,t){return e=Ot(22,e,null,t),e.lanes=0,e}function Pc(e,t,n){return Ki(t,e.child,null,n),e=Lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Js(e.return,t,n)}function Fc(e,t,n,r,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=n,g.tailMode=c,g.treeForkCount=u)}function hh(e,t,n){var r=t.pendingProps,c=r.revealOrder,u=r.tail;r=r.children;var g=Qe.current,x=(g&2)!==0;if(x?(g=g&1|2,t.flags|=128):g&=1,$(Qe,g),ft(e,t,r,n),r=ze?zr:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dh(e,n,t);else if(e.tag===19)dh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Xo(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Fc(t,!1,c,n,u,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Xo(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Fc(t,!0,n,null,u,r);break;case"together":Fc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),di|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Aa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Fo(e)))}function K1(e,t,n){switch(t.tag){case 3:Re(t,t.stateNode.containerInfo),ai(t,Ke,e.memoizedState.cache),qi();break;case 27:case 5:it(t);break;case 4:Re(t,t.stateNode.containerInfo);break;case 10:ai(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fc(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(si(t),t.flags|=128,null):(n&t.child.childLanes)!==0?fh(e,t,n):(si(t),e=Ln(e,t,n),e!==null?e.sibling:null);si(t);break;case 19:var c=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Aa(e,t,n,!1),r=(n&t.childLanes)!==0),c){if(r)return hh(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),$(Qe,Qe.current),r)break;return null;case 22:return t.lanes=0,rh(e,t,n,t.pendingProps);case 24:ai(t,Ke,e.memoizedState.cache)}return Ln(e,t,n)}function mh(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!kc(e,n)&&(t.flags&128)===0)return Je=!1,K1(e,t,n);Je=(e.flags&131072)!==0}else Je=!1,ze&&(t.flags&1048576)!==0&&Gd(t,zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Zi(t.elementType),t.type=e,typeof e=="function")qs(e)?(r=Ji(e,r),t.tag=1,t=ch(null,t,e,r,n)):(t.tag=0,t=Nc(null,t,e,r,n));else{if(e!=null){var c=e.$$typeof;if(c===U){t.tag=11,t=nh(null,t,e,r,n);break e}else if(c===k){t.tag=14,t=ih(null,t,e,r,n);break e}}throw t=be(e)||e,Error(l(306,t,""))}}return t;case 0:return Nc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,c=Ji(r,t.pendingProps),ch(e,t,r,c,n);case 3:e:{if(Re(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var u=t.memoizedState;c=u.element,oc(e,t),Dr(t,r,null,n);var g=t.memoizedState;if(r=g.cache,ai(t,Ke,r),r!==u.cache&&ec(t,[Ke],n,!0),Ur(),r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=uh(e,t,r,n);break e}else if(r!==c){c=Gt(Error(l(424)),t),Ar(c),t=uh(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(He=Kt(e.firstChild),ct=t,ze=!0,ni=null,Zt=!0,n=r0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qi(),r===c){t=Ln(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 26:return al(e,t),e===null?(n=Tm(t.type,null,t.pendingProps,null))?t.memoizedState=n:ze||(n=t.type,e=t.pendingProps,r=wl(he.current).createElement(n),r[st]=t,r[bt]=e,dt(r,n,e),at(r),t.stateNode=r):t.memoizedState=Tm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return it(t),e===null&&ze&&(r=t.stateNode=Sm(t.type,t.pendingProps,he.current),ct=t,Zt=!0,c=He,vi(t.type)?(xu=c,He=Kt(r.firstChild)):He=c),ft(e,t,t.pendingProps.children,n),al(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((c=r=He)&&(r=zy(r,t.type,t.pendingProps,Zt),r!==null?(t.stateNode=r,ct=t,He=Kt(r.firstChild),Zt=!1,c=!0):c=!1),c||ii(t)),it(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,r=u.children,mu(c,u)?r=null:g!==null&&mu(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=hc(e,t,I1,null,null,n),to._currentValue=c),al(e,t),ft(e,t,r,n),t.child;case 6:return e===null&&ze&&((e=n=He)&&(n=Ay(n,t.pendingProps,Zt),n!==null?(t.stateNode=n,ct=t,He=null,e=!0):e=!1),e||ii(t)),null;case 13:return fh(e,t,n);case 4:return Re(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ki(t,null,r,n):ft(e,t,r,n),t.child;case 11:return nh(e,t,t.type,t.pendingProps,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ai(t,t.type,r.value),ft(e,t,r.children,n),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,Xi(t),c=ut(c),r=r(c),t.flags|=1,ft(e,t,r,n),t.child;case 14:return ih(e,t,t.type,t.pendingProps,n);case 15:return ah(e,t,t.type,t.pendingProps,n);case 19:return hh(e,t,n);case 31:return W1(e,t,n);case 22:return rh(e,t,n,t.pendingProps);case 24:return Xi(t),r=ut(Ke),e===null?(c=ic(),c===null&&(c=ke,u=tc(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=n),c=u),t.memoizedState={parent:r,cache:c},rc(t),ai(t,Ke,c)):((e.lanes&n)!==0&&(oc(e,t),Dr(t,null,null,n),Ur()),c=e.memoizedState,u=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ai(t,Ke,r)):(r=u.cache,ai(t,Ke,r),r!==c.cache&&ec(t,[Ke],n,!0))),ft(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Pn(e){e.flags|=4}function Hc(e,t,n,r,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Hh())e.flags|=8192;else throw Wi=Vo,ac}else e.flags&=-16777217}function ph(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Om(t))if(Hh())e.flags|=8192;else throw Wi=Vo,ac}function ol(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Qf():536870912,e.lanes|=t,ka|=t)}function Hr(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $1(e,t,n){var r=t.pendingProps;switch(Zs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Ie(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Un(Ke),Ue(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(za(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ks())),Ie(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Pn(t),u!==null?(Ie(t),ph(t,u)):(Ie(t),Hc(t,c,null,r,n))):u?u!==e.memoizedState?(Pn(t),Ie(t),ph(t,u)):(Ie(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&Pn(t),Ie(t),Hc(t,c,e,r,n)),null;case 27:if(zt(t),n=he.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ie(t),null}e=ee.current,za(t)?Qd(t):(e=Sm(c,r,n),t.stateNode=e,Pn(t))}return Ie(t),null;case 5:if(zt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Pn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ie(t),null}if(u=ee.current,za(t))Qd(t);else{var g=wl(he.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?g.createElement(c,{is:r.is}):g.createElement(c)}}u[st]=t,u[bt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(dt(u,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Pn(t)}}return Ie(t),Hc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Pn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=he.current,za(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,c=ct,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[st]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||fm(e.nodeValue,n)),e||ii(t,!0)}else e=wl(e).createTextNode(r),e[st]=t,t.stateNode=e}return Ie(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=za(t),n!==null){if(e===null){if(!r)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[st]=t}else qi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ie(t),e=!1}else n=Ks(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Bt(t),t):(Bt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Ie(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=za(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[st]=t}else qi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ie(t),c=!1}else c=Ks(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Bt(t),t):(Bt(t),null)}return Bt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==c&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ol(t,t.updateQueue),Ie(t),null);case 4:return Ue(),e===null&&cu(t.stateNode.containerInfo),Ie(t),null;case 10:return Un(t.type),Ie(t),null;case 19:if(V(Qe),r=t.memoizedState,r===null)return Ie(t),null;if(c=(t.flags&128)!==0,u=r.rendering,u===null)if(c)Hr(r,!1);else{if(Ge!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Xo(e),u!==null){for(t.flags|=128,Hr(r,!1),e=u.updateQueue,t.updateQueue=e,ol(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Vd(n,e),n=n.sibling;return $(Qe,Qe.current&1|2),ze&&Bn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&yt()>fl&&(t.flags|=128,c=!0,Hr(r,!1),t.lanes=4194304)}else{if(!c)if(e=Xo(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,ol(t,e),Hr(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!ze)return Ie(t),null}else 2*yt()-r.renderingStartTime>fl&&n!==536870912&&(t.flags|=128,c=!0,Hr(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=yt(),e.sibling=null,n=Qe.current,$(Qe,c?n&1|2:n&1),ze&&Bn(t,r.treeForkCount),e):(Ie(t),null);case 22:case 23:return Bt(t),uc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(n&536870912)!==0&&(t.flags&128)===0&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),n=t.updateQueue,n!==null&&ol(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&V(Qi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Un(Ke),Ie(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function J1(e,t){switch(Zs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Un(Ke),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return zt(t),null;case 31:if(t.memoizedState!==null){if(Bt(t),t.alternate===null)throw Error(l(340));qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(Qe),null;case 4:return Ue(),null;case 10:return Un(t.type),null;case 22:case 23:return Bt(t),uc(),e!==null&&V(Qi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Un(Ke),null;case 25:return null;default:return null}}function gh(e,t){switch(Zs(t),t.tag){case 3:Un(Ke),Ue();break;case 26:case 27:case 5:zt(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&Bt(t);break;case 13:Bt(t);break;case 19:V(Qe);break;case 10:Un(t.type);break;case 22:case 23:Bt(t),uc(),e!==null&&V(Qi);break;case 24:Un(Ke)}}function Ir(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var c=r.next;n=c;do{if((n.tag&e)===e){r=void 0;var u=n.create,g=n.inst;r=u(),g.destroy=r}n=n.next}while(n!==c)}}catch(x){je(t,t.return,x)}}function ui(e,t,n){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var u=c.next;r=u;do{if((r.tag&e)===e){var g=r.inst,x=g.destroy;if(x!==void 0){g.destroy=void 0,c=t;var z=n,j=x;try{j()}catch(I){je(c,z,I)}}}r=r.next}while(r!==u)}}catch(I){je(t,t.return,I)}}function vh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{l0(t,n)}catch(r){je(e,e.return,r)}}}function yh(e,t,n){n.props=Ji(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){je(e,t,r)}}function Vr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(c){je(e,t,c)}}function hn(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(c){je(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){je(e,t,c)}else n.current=null}function xh(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(c){je(e,e.return,c)}}function Ic(e,t,n){try{var r=e.stateNode;wy(r,e.type,n,t),r[bt]=t}catch(c){je(e,e.return,c)}}function bh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vi(e.type)||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rn));else if(r!==4&&(r===27&&vi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&vi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ll(e,t,n),e=e.sibling;e!==null;)ll(e,t,n),e=e.sibling}function wh(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);dt(t,r,n),t[st]=e,t[bt]=n}catch(u){je(e,e.return,u)}}var Fn=!1,et=!1,qc=!1,Sh=typeof WeakSet=="function"?WeakSet:Set,rt=null;function ey(e,t){if(e=e.containerInfo,du=Al,e=Ud(e),Ps(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var c=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var g=0,x=-1,z=-1,j=0,I=0,q=e,L=null;t:for(;;){for(var F;q!==n||c!==0&&q.nodeType!==3||(x=g+c),q!==u||r!==0&&q.nodeType!==3||(z=g+r),q.nodeType===3&&(g+=q.nodeValue.length),(F=q.firstChild)!==null;)L=q,q=F;for(;;){if(q===e)break t;if(L===n&&++j===c&&(x=g),L===u&&++I===r&&(z=g),(F=q.nextSibling)!==null)break;q=L,L=q.parentNode}q=F}n=x===-1||z===-1?null:{start:x,end:z}}else n=null}n=n||{start:0,end:0}}else n=null;for(hu={focusedElem:e,selectionRange:n},Al=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){switch(t=rt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,c=u.memoizedProps,u=u.memoizedState,r=n.stateNode;try{var ie=Ji(n.type,c);e=r.getSnapshotBeforeUpdate(ie,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(fe){je(n,n.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)gu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}}function Eh(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Hn(e,n),r&4&&Ir(5,n);break;case 1:if(Hn(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(g){je(n,n.return,g)}else{var c=Ji(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){je(n,n.return,g)}}r&64&&vh(n),r&512&&Vr(n,n.return);break;case 3:if(Hn(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{l0(e,t)}catch(g){je(n,n.return,g)}}break;case 27:t===null&&r&4&&wh(n);case 26:case 5:Hn(e,n),t===null&&r&4&&xh(n),r&512&&Vr(n,n.return);break;case 12:Hn(e,n);break;case 31:Hn(e,n),r&4&&Ch(e,n);break;case 13:Hn(e,n),r&4&&zh(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=cy.bind(null,n),Ry(e,n))));break;case 22:if(r=n.memoizedState!==null||Fn,!r){t=t!==null&&t.memoizedState!==null||et,c=Fn;var u=et;Fn=r,(et=t)&&!u?In(e,n,(n.subtreeFlags&8772)!==0):Hn(e,n),Fn=c,et=u}break;case 30:break;default:Hn(e,n)}}function _h(e){var t=e.alternate;t!==null&&(e.alternate=null,_h(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ws(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,St=!1;function kn(e,t,n){for(n=n.child;n!==null;)Th(e,t,n),n=n.sibling}function Th(e,t,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(ji,n)}catch{}switch(n.tag){case 26:et||hn(n,t),kn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:et||hn(n,t);var r=Ve,c=St;vi(n.type)&&(Ve=n.stateNode,St=!1),kn(e,t,n),$r(n.stateNode),Ve=r,St=c;break;case 5:et||hn(n,t);case 6:if(r=Ve,c=St,Ve=null,kn(e,t,n),Ve=r,St=c,Ve!==null)if(St)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(u){je(n,t,u)}else try{Ve.removeChild(n.stateNode)}catch(u){je(n,t,u)}break;case 18:Ve!==null&&(St?(e=Ve,vm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Qa(e)):vm(Ve,n.stateNode));break;case 4:r=Ve,c=St,Ve=n.stateNode.containerInfo,St=!0,kn(e,t,n),Ve=r,St=c;break;case 0:case 11:case 14:case 15:ui(2,n,t),et||ui(4,n,t),kn(e,t,n);break;case 1:et||(hn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&yh(n,t,r)),kn(e,t,n);break;case 21:kn(e,t,n);break;case 22:et=(r=et)||n.memoizedState!==null,kn(e,t,n),et=r;break;default:kn(e,t,n)}}function Ch(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qa(e)}catch(n){je(t,t.return,n)}}}function zh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qa(e)}catch(n){je(t,t.return,n)}}function ty(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Sh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Sh),t;default:throw Error(l(435,e.tag))}}function sl(e,t){var n=ty(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var c=uy.bind(null,e,r);r.then(c,c)}})}function Et(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var c=n[r],u=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 27:if(vi(x.type)){Ve=x.stateNode,St=!1;break e}break;case 5:Ve=x.stateNode,St=!1;break e;case 3:case 4:Ve=x.stateNode.containerInfo,St=!0;break e}x=x.return}if(Ve===null)throw Error(l(160));Th(u,g,c),Ve=null,St=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ah(t,e),t=t.sibling}var nn=null;function Ah(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Et(t,e),_t(e),r&4&&(ui(3,e,e.return),Ir(3,e),ui(5,e,e.return));break;case 1:Et(t,e),_t(e),r&512&&(et||n===null||hn(n,n.return)),r&64&&Fn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var c=nn;if(Et(t,e),_t(e),r&512&&(et||n===null||hn(n,n.return)),r&4){var u=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":u=c.getElementsByTagName("title")[0],(!u||u[gr]||u[st]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(r),c.head.insertBefore(u,c.querySelector("head > title"))),dt(u,r,n),u[st]=e,at(u),r=u;break e;case"link":var g=Am("link","href",c).get(r+(n.href||""));if(g){for(var x=0;x<g.length;x++)if(u=g[x],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){g.splice(x,1);break t}}u=c.createElement(r),dt(u,r,n),c.head.appendChild(u);break;case"meta":if(g=Am("meta","content",c).get(r+(n.content||""))){for(x=0;x<g.length;x++)if(u=g[x],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){g.splice(x,1);break t}}u=c.createElement(r),dt(u,r,n),c.head.appendChild(u);break;default:throw Error(l(468,r))}u[st]=e,at(u),r=u}e.stateNode=r}else Rm(c,e.type,e.stateNode);else e.stateNode=zm(c,r,e.memoizedProps);else u!==r?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,r===null?Rm(c,e.type,e.stateNode):zm(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Ic(e,e.memoizedProps,n.memoizedProps)}break;case 27:Et(t,e),_t(e),r&512&&(et||n===null||hn(n,n.return)),n!==null&&r&4&&Ic(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Et(t,e),_t(e),r&512&&(et||n===null||hn(n,n.return)),e.flags&32){c=e.stateNode;try{va(c,"")}catch(ie){je(e,e.return,ie)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Ic(e,c,n!==null?n.memoizedProps:c)),r&1024&&(qc=!0);break;case 6:if(Et(t,e),_t(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(ie){je(e,e.return,ie)}}break;case 3:if(_l=null,c=nn,nn=Sl(t.containerInfo),Et(t,e),nn=c,_t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(ie){je(e,e.return,ie)}qc&&(qc=!1,Rh(e));break;case 4:r=nn,nn=Sl(e.stateNode.containerInfo),Et(t,e),_t(e),nn=r;break;case 12:Et(t,e),_t(e);break;case 31:Et(t,e),_t(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,sl(e,r)));break;case 13:Et(t,e),_t(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ul=yt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,sl(e,r)));break;case 22:c=e.memoizedState!==null;var z=n!==null&&n.memoizedState!==null,j=Fn,I=et;if(Fn=j||c,et=I||z,Et(t,e),et=I,Fn=j,_t(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||z||Fn||et||ea(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){z=n=t;try{if(u=z.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{x=z.stateNode;var q=z.memoizedProps.style,L=q!=null&&q.hasOwnProperty("display")?q.display:null;x.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ie){je(z,z.return,ie)}}}else if(t.tag===6){if(n===null){z=t;try{z.stateNode.nodeValue=c?"":z.memoizedProps}catch(ie){je(z,z.return,ie)}}}else if(t.tag===18){if(n===null){z=t;try{var F=z.stateNode;c?ym(F,!0):ym(z.stateNode,!1)}catch(ie){je(z,z.return,ie)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,sl(e,n))));break;case 19:Et(t,e),_t(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,sl(e,r)));break;case 30:break;case 21:break;default:Et(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(bh(r)){n=r;break}r=r.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var c=n.stateNode,u=Vc(e);ll(e,u,c);break;case 5:var g=n.stateNode;n.flags&32&&(va(g,""),n.flags&=-33);var x=Vc(e);ll(e,x,g);break;case 3:case 4:var z=n.stateNode.containerInfo,j=Vc(e);Yc(e,j,z);break;default:throw Error(l(161))}}catch(I){je(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Rh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Eh(e,t.alternate,t),t=t.sibling}function ea(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ui(4,t,t.return),ea(t);break;case 1:hn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&yh(t,t.return,n),ea(t);break;case 27:$r(t.stateNode);case 26:case 5:hn(t,t.return),ea(t);break;case 22:t.memoizedState===null&&ea(t);break;case 30:ea(t);break;default:ea(t)}e=e.sibling}}function In(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:In(c,u,n),Ir(4,u);break;case 1:if(In(c,u,n),r=u,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(j){je(r,r.return,j)}if(r=u,c=r.updateQueue,c!==null){var x=r.stateNode;try{var z=c.shared.hiddenCallbacks;if(z!==null)for(c.shared.hiddenCallbacks=null,c=0;c<z.length;c++)o0(z[c],x)}catch(j){je(r,r.return,j)}}n&&g&64&&vh(u),Vr(u,u.return);break;case 27:wh(u);case 26:case 5:In(c,u,n),n&&r===null&&g&4&&xh(u),Vr(u,u.return);break;case 12:In(c,u,n);break;case 31:In(c,u,n),n&&g&4&&Ch(c,u);break;case 13:In(c,u,n),n&&g&4&&zh(c,u);break;case 22:u.memoizedState===null&&In(c,u,n),Vr(u,u.return);break;case 30:break;default:In(c,u,n)}t=t.sibling}}function Gc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Rr(n))}function Xc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rr(e))}function an(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oh(e,t,n,r),t=t.sibling}function Oh(e,t,n,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:an(e,t,n,r),c&2048&&Ir(9,t);break;case 1:an(e,t,n,r);break;case 3:an(e,t,n,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rr(e)));break;case 12:if(c&2048){an(e,t,n,r),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,x=u.onPostCommit;typeof x=="function"&&x(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){je(t,t.return,z)}}else an(e,t,n,r);break;case 31:an(e,t,n,r);break;case 13:an(e,t,n,r);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?an(e,t,n,r):Yr(e,t):u._visibility&2?an(e,t,n,r):(u._visibility|=2,La(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Gc(g,t);break;case 24:an(e,t,n,r),c&2048&&Xc(t.alternate,t);break;default:an(e,t,n,r)}}function La(e,t,n,r,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,x=n,z=r,j=g.flags;switch(g.tag){case 0:case 11:case 15:La(u,g,x,z,c),Ir(8,g);break;case 23:break;case 22:var I=g.stateNode;g.memoizedState!==null?I._visibility&2?La(u,g,x,z,c):Yr(u,g):(I._visibility|=2,La(u,g,x,z,c)),c&&j&2048&&Gc(g.alternate,g);break;case 24:La(u,g,x,z,c),c&&j&2048&&Xc(g.alternate,g);break;default:La(u,g,x,z,c)}t=t.sibling}}function Yr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,c=r.flags;switch(r.tag){case 22:Yr(n,r),c&2048&&Gc(r.alternate,r);break;case 24:Yr(n,r),c&2048&&Xc(r.alternate,r);break;default:Yr(n,r)}t=t.sibling}}var qr=8192;function Pa(e,t,n){if(e.subtreeFlags&qr)for(e=e.child;e!==null;)Mh(e,t,n),e=e.sibling}function Mh(e,t,n){switch(e.tag){case 26:Pa(e,t,n),e.flags&qr&&e.memoizedState!==null&&Hy(n,nn,e.memoizedState,e.memoizedProps);break;case 5:Pa(e,t,n);break;case 3:case 4:var r=nn;nn=Sl(e.stateNode.containerInfo),Pa(e,t,n),nn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=qr,qr=16777216,Pa(e,t,n),qr=r):Pa(e,t,n));break;default:Pa(e,t,n)}}function Bh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rt=r,Uh(r,e)}Bh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nh(e),e=e.sibling}function Nh(e){switch(e.tag){case 0:case 11:case 15:Gr(e),e.flags&2048&&ui(9,e,e.return);break;case 3:Gr(e);break;case 12:Gr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,cl(e)):Gr(e);break;default:Gr(e)}}function cl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rt=r,Uh(r,e)}Bh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ui(8,t,t.return),cl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,cl(t));break;default:cl(t)}e=e.sibling}}function Uh(e,t){for(;rt!==null;){var n=rt;switch(n.tag){case 0:case 11:case 15:ui(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,rt=r;else e:for(n=e;rt!==null;){r=rt;var c=r.sibling,u=r.return;if(_h(r),r===n){rt=null;break e}if(c!==null){c.return=u,rt=c;break e}rt=u}}}var ny={getCacheForType:function(e){var t=ut(Ke),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ut(Ke).controller.signal}},iy=typeof WeakMap=="function"?WeakMap:Map,Ne=0,ke=null,Se=null,_e=0,De=0,Nt=null,fi=!1,Fa=!1,Qc=!1,Vn=0,Ge=0,di=0,ta=0,Zc=0,Ut=0,ka=0,Xr=null,Tt=null,Wc=!1,ul=0,Dh=0,fl=1/0,dl=null,hi=null,tt=0,mi=null,Ha=null,Yn=0,Kc=0,$c=null,jh=null,Qr=0,Jc=null;function Dt(){return(Ne&2)!==0&&_e!==0?_e&-_e:P.T!==null?ru():$f()}function Lh(){if(Ut===0)if((_e&536870912)===0||ze){var e=Pi;Pi<<=1,(Pi&3932160)===0&&(Pi=262144),Ut=e}else Ut=536870912;return e=Mt.current,e!==null&&(e.flags|=32),Ut}function Ct(e,t,n){(e===ke&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(Ia(e,0),pi(e,_e,Ut,!1)),pr(e,n),((Ne&2)===0||e!==ke)&&(e===ke&&((Ne&2)===0&&(ta|=n),Ge===4&&pi(e,_e,Ut,!1)),mn(e))}function Ph(e,t,n){if((Ne&6)!==0)throw Error(l(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||mr(e,t),c=r?oy(e,t):tu(e,t,!0),u=r;do{if(c===0){Fa&&!r&&pi(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!ay(n)){c=tu(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var x=e;c=Xr;var z=x.current.memoizedState.isDehydrated;if(z&&(Ia(x,g).flags|=256),g=tu(x,g,!1),g!==2){if(Qc&&!z){x.errorRecoveryDisabledLanes|=u,ta|=u,c=4;break e}u=Tt,Tt=c,u!==null&&(Tt===null?Tt=u:Tt.push.apply(Tt,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){Ia(e,0),pi(e,t,0,!0);break}e:{switch(r=e,u=c,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:pi(r,t,Ut,!fi);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=ul+300-yt(),10<c)){if(pi(r,t,Ut,!fi),en(r,0,!0)!==0)break e;Yn=t,r.timeoutHandle=pm(Fh.bind(null,r,n,Tt,dl,Wc,t,Ut,ta,ka,fi,u,"Throttled",-0,0),c);break e}Fh(r,n,Tt,dl,Wc,t,Ut,ta,ka,fi,u,null,-0,0)}}break}while(!0);mn(e)}function Fh(e,t,n,r,c,u,g,x,z,j,I,q,L,F){if(e.timeoutHandle=-1,q=t.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rn},Mh(t,u,q);var ie=(u&62914560)===u?ul-yt():(u&4194048)===u?Dh-yt():0;if(ie=Iy(q,ie),ie!==null){Yn=u,e.cancelPendingCommit=ie(Xh.bind(null,e,t,u,n,r,c,g,x,z,I,q,null,L,F)),pi(e,u,g,!j);return}}Xh(e,t,u,n,r,c,g,x,z)}function ay(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var c=n[r],u=c.getSnapshot;c=c.value;try{if(!Rt(u(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pi(e,t,n,r){t&=~Zc,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var u=31-mt(c),g=1<<u;r[u]=-1,c&=~g}n!==0&&Zf(e,n,t)}function hl(){return(Ne&6)===0?(Zr(0),!1):!0}function eu(){if(Se!==null){if(De===0)var e=Se.return;else e=Se,Nn=Gi=null,gc(e),Ba=null,Mr=0,e=Se;for(;e!==null;)gh(e.alternate,e),e=e.return;Se=null}}function Ia(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,_y(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Yn=0,eu(),ke=e,Se=n=Mn(e.current,null),_e=t,De=0,Nt=null,fi=!1,Fa=mr(e,t),Qc=!1,ka=Ut=Zc=ta=di=Ge=0,Tt=Xr=null,Wc=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-mt(r),u=1<<c;t|=e[c],r&=~u}return Vn=t,Uo(),n}function kh(e,t){pe=null,P.H=Fr,t===Ma||t===Io?(t=n0(),De=3):t===ac?(t=n0(),De=4):De=t===Bc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Nt=t,Se===null&&(Ge=1,nl(e,Gt(t,e.current)))}function Hh(){var e=Mt.current;return e===null?!0:(_e&4194048)===_e?Wt===null:(_e&62914560)===_e||(_e&536870912)!==0?e===Wt:!1}function Ih(){var e=P.H;return P.H=Fr,e===null?Fr:e}function Vh(){var e=P.A;return P.A=ny,e}function ml(){Ge=4,fi||(_e&4194048)!==_e&&Mt.current!==null||(Fa=!0),(di&134217727)===0&&(ta&134217727)===0||ke===null||pi(ke,_e,Ut,!1)}function tu(e,t,n){var r=Ne;Ne|=2;var c=Ih(),u=Vh();(ke!==e||_e!==t)&&(dl=null,Ia(e,t)),t=!1;var g=Ge;e:do try{if(De!==0&&Se!==null){var x=Se,z=Nt;switch(De){case 8:eu(),g=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(t=!0);var j=De;if(De=0,Nt=null,Va(e,x,z,j),n&&Fa){g=0;break e}break;default:j=De,De=0,Nt=null,Va(e,x,z,j)}}ry(),g=Ge;break}catch(I){kh(e,I)}while(!0);return t&&e.shellSuspendCounter++,Nn=Gi=null,Ne=r,P.H=c,P.A=u,Se===null&&(ke=null,_e=0,Uo()),g}function ry(){for(;Se!==null;)Yh(Se)}function oy(e,t){var n=Ne;Ne|=2;var r=Ih(),c=Vh();ke!==e||_e!==t?(dl=null,fl=yt()+500,Ia(e,t)):Fa=mr(e,t);e:do try{if(De!==0&&Se!==null){t=Se;var u=Nt;t:switch(De){case 1:De=0,Nt=null,Va(e,t,u,1);break;case 2:case 9:if(e0(u)){De=0,Nt=null,qh(t);break}t=function(){De!==2&&De!==9||ke!==e||(De=7),mn(e)},u.then(t,t);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:e0(u)?(De=0,Nt=null,qh(t)):(De=0,Nt=null,Va(e,t,u,7));break;case 5:var g=null;switch(Se.tag){case 26:g=Se.memoizedState;case 5:case 27:var x=Se;if(g?Om(g):x.stateNode.complete){De=0,Nt=null;var z=x.sibling;if(z!==null)Se=z;else{var j=x.return;j!==null?(Se=j,pl(j)):Se=null}break t}}De=0,Nt=null,Va(e,t,u,5);break;case 6:De=0,Nt=null,Va(e,t,u,6);break;case 8:eu(),Ge=6;break e;default:throw Error(l(462))}}ly();break}catch(I){kh(e,I)}while(!0);return Nn=Gi=null,P.H=r,P.A=c,Ne=n,Se!==null?0:(ke=null,_e=0,Uo(),Ge)}function ly(){for(;Se!==null&&!ms();)Yh(Se)}function Yh(e){var t=mh(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,t===null?pl(e):Se=t}function qh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=sh(n,t,t.pendingProps,t.type,void 0,_e);break;case 11:t=sh(n,t,t.pendingProps,t.type.render,t.ref,_e);break;case 5:gc(t);default:gh(n,t),t=Se=Vd(t,Vn),t=mh(n,t,Vn)}e.memoizedProps=e.pendingProps,t===null?pl(e):Se=t}function Va(e,t,n,r){Nn=Gi=null,gc(t),Ba=null,Mr=0;var c=t.return;try{if(Z1(e,c,t,n,_e)){Ge=1,nl(e,Gt(n,e.current)),Se=null;return}}catch(u){if(c!==null)throw Se=c,u;Ge=1,nl(e,Gt(n,e.current)),Se=null;return}t.flags&32768?(ze||r===1?e=!0:Fa||(_e&536870912)!==0?e=!1:(fi=e=!0,(r===2||r===9||r===3||r===6)&&(r=Mt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Gh(t,e)):pl(t)}function pl(e){var t=e;do{if((t.flags&32768)!==0){Gh(t,fi);return}e=t.return;var n=$1(t.alternate,t,Vn);if(n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ge===0&&(Ge=5)}function Gh(e,t){do{var n=J1(e.alternate,e);if(n!==null){n.flags&=32767,Se=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=n}while(e!==null);Ge=6,Se=null}function Xh(e,t,n,r,c,u,g,x,z){e.cancelPendingCommit=null;do gl();while(tt!==0);if((Ne&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=Vs,kv(e,n,u,g,x,z),e===ke&&(Se=ke=null,_e=0),Ha=t,mi=e,Yn=n,Kc=u,$c=c,jh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fy(Ft,function(){return $h(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=P.T,P.T=null,c=G.p,G.p=2,g=Ne,Ne|=4;try{ey(e,t,n)}finally{Ne=g,G.p=c,P.T=r}}tt=1,Qh(),Zh(),Wh()}}function Qh(){if(tt===1){tt=0;var e=mi,t=Ha,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=P.T,P.T=null;var r=G.p;G.p=2;var c=Ne;Ne|=4;try{Ah(t,e);var u=hu,g=Ud(e.containerInfo),x=u.focusedElem,z=u.selectionRange;if(g!==x&&x&&x.ownerDocument&&Nd(x.ownerDocument.documentElement,x)){if(z!==null&&Ps(x)){var j=z.start,I=z.end;if(I===void 0&&(I=j),"selectionStart"in x)x.selectionStart=j,x.selectionEnd=Math.min(I,x.value.length);else{var q=x.ownerDocument||document,L=q&&q.defaultView||window;if(L.getSelection){var F=L.getSelection(),ie=x.textContent.length,fe=Math.min(z.start,ie),Fe=z.end===void 0?fe:Math.min(z.end,ie);!F.extend&&fe>Fe&&(g=Fe,Fe=fe,fe=g);var N=Bd(x,fe),O=Bd(x,Fe);if(N&&O&&(F.rangeCount!==1||F.anchorNode!==N.node||F.anchorOffset!==N.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var D=q.createRange();D.setStart(N.node,N.offset),F.removeAllRanges(),fe>Fe?(F.addRange(D),F.extend(O.node,O.offset)):(D.setEnd(O.node,O.offset),F.addRange(D))}}}}for(q=[],F=x;F=F.parentNode;)F.nodeType===1&&q.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<q.length;x++){var Y=q[x];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Al=!!du,hu=du=null}finally{Ne=c,G.p=r,P.T=n}}e.current=t,tt=2}}function Zh(){if(tt===2){tt=0;var e=mi,t=Ha,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=P.T,P.T=null;var r=G.p;G.p=2;var c=Ne;Ne|=4;try{Eh(e,t.alternate,t)}finally{Ne=c,G.p=r,P.T=n}}tt=3}}function Wh(){if(tt===4||tt===3){tt=0,ps();var e=mi,t=Ha,n=Yn,r=jh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?tt=5:(tt=0,Ha=mi=null,Kh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(hi=null),xs(n),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(ji,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=P.T,c=G.p,G.p=2,P.T=null;try{for(var u=e.onRecoverableError,g=0;g<r.length;g++){var x=r[g];u(x.value,{componentStack:x.stack})}}finally{P.T=t,G.p=c}}(Yn&3)!==0&&gl(),mn(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Jc?Qr++:(Qr=0,Jc=e):Qr=0,Zr(0)}}function Kh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Rr(t)))}function gl(){return Qh(),Zh(),Wh(),$h()}function $h(){if(tt!==5)return!1;var e=mi,t=Kc;Kc=0;var n=xs(Yn),r=P.T,c=G.p;try{G.p=32>n?32:n,P.T=null,n=$c,$c=null;var u=mi,g=Yn;if(tt=0,Ha=mi=null,Yn=0,(Ne&6)!==0)throw Error(l(331));var x=Ne;if(Ne|=4,Nh(u.current),Oh(u,u.current,g,n),Ne=x,Zr(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(ji,u)}catch{}return!0}finally{G.p=c,P.T=r,Kh(e,t)}}function Jh(e,t,n){t=Gt(n,t),t=Mc(e.stateNode,t,2),e=li(e,t,2),e!==null&&(pr(e,2),mn(e))}function je(e,t,n){if(e.tag===3)Jh(e,e,n);else for(;t!==null;){if(t.tag===3){Jh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r))){e=Gt(n,e),n=eh(2),r=li(t,n,2),r!==null&&(th(n,r,t,e),pr(r,2),mn(r));break}}t=t.return}}function nu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iy;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(n)||(Qc=!0,c.add(n),e=sy.bind(null,e,t,n),t.then(e,e))}function sy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ke===e&&(_e&n)===n&&(Ge===4||Ge===3&&(_e&62914560)===_e&&300>yt()-ul?(Ne&2)===0&&Ia(e,0):Zc|=n,ka===_e&&(ka=0)),mn(e)}function em(e,t){t===0&&(t=Qf()),e=Vi(e,t),e!==null&&(pr(e,t),mn(e))}function cy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),em(e,n)}function uy(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),em(e,n)}function fy(e,t){return Di(e,t)}var vl=null,Ya=null,iu=!1,yl=!1,au=!1,gi=0;function mn(e){e!==Ya&&e.next===null&&(Ya===null?vl=Ya=e:Ya=Ya.next=e),yl=!0,iu||(iu=!0,hy())}function Zr(e,t){if(!au&&yl){au=!0;do for(var n=!1,r=vl;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var u=0;else{var g=r.suspendedLanes,x=r.pingedLanes;u=(1<<31-mt(42|e)+1)-1,u&=c&~(g&~x),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,am(r,u))}else u=_e,u=en(r,r===ke?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||mr(r,u)||(n=!0,am(r,u));r=r.next}while(n);au=!1}}function dy(){tm()}function tm(){yl=iu=!1;var e=0;gi!==0&&Ey()&&(e=gi);for(var t=yt(),n=null,r=vl;r!==null;){var c=r.next,u=nm(r,t);u===0?(r.next=null,n===null?vl=c:n.next=c,c===null&&(Ya=n)):(n=r,(e!==0||(u&3)!==0)&&(yl=!0)),r=c}tt!==0&&tt!==5||Zr(e),gi!==0&&(gi=0)}function nm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-mt(u),x=1<<g,z=c[g];z===-1?((x&n)===0||(x&r)!==0)&&(c[g]=Fv(x,t)):z<=t&&(e.expiredLanes|=x),u&=~x}if(t=ke,n=_e,n=en(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(De===2||De===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ur(r),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||mr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ur(r),xs(n)){case 2:case 8:n=dr;break;case 32:n=Ft;break;case 268435456:n=zn;break;default:n=Ft}return r=im.bind(null,e),n=Di(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ur(r),e.callbackPriority=2,e.callbackNode=null,2}function im(e,t){if(tt!==0&&tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(gl()&&e.callbackNode!==n)return null;var r=_e;return r=en(e,e===ke?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Ph(e,r,t),nm(e,yt()),e.callbackNode!=null&&e.callbackNode===n?im.bind(null,e):null)}function am(e,t){if(gl())return null;Ph(e,t,!0)}function hy(){Ty(function(){(Ne&6)!==0?Di(fr,dy):tm()})}function ru(){if(gi===0){var e=Ra;e===0&&(e=Ht,Ht<<=1,(Ht&261888)===0&&(Ht=256)),gi=e}return gi}function rm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Co(""+e)}function om(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function my(e,t,n,r,c){if(t==="submit"&&n&&n.stateNode===c){var u=rm((c[bt]||null).action),g=r.submitter;g&&(t=(t=g[bt]||null)?rm(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var x=new Oo("action","action",null,r,c);e.push({event:x,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(gi!==0){var z=g?om(c,g):new FormData(c);Tc(n,{pending:!0,data:z,method:c.method,action:u},null,z)}}else typeof u=="function"&&(x.preventDefault(),z=g?om(c,g):new FormData(c),Tc(n,{pending:!0,data:z,method:c.method,action:u},u,z))},currentTarget:c}]})}}for(var ou=0;ou<Is.length;ou++){var lu=Is[ou],py=lu.toLowerCase(),gy=lu[0].toUpperCase()+lu.slice(1);tn(py,"on"+gy)}tn(Ld,"onAnimationEnd"),tn(Pd,"onAnimationIteration"),tn(Fd,"onAnimationStart"),tn("dblclick","onDoubleClick"),tn("focusin","onFocus"),tn("focusout","onBlur"),tn(B1,"onTransitionRun"),tn(N1,"onTransitionStart"),tn(U1,"onTransitionCancel"),tn(kd,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wr));function lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],c=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var g=r.length-1;0<=g;g--){var x=r[g],z=x.instance,j=x.currentTarget;if(x=x.listener,z!==u&&c.isPropagationStopped())break e;u=x,c.currentTarget=j;try{u(c)}catch(I){No(I)}c.currentTarget=null,u=z}else for(g=0;g<r.length;g++){if(x=r[g],z=x.instance,j=x.currentTarget,x=x.listener,z!==u&&c.isPropagationStopped())break e;u=x,c.currentTarget=j;try{u(c)}catch(I){No(I)}c.currentTarget=null,u=z}}}}function Ee(e,t){var n=t[bs];n===void 0&&(n=t[bs]=new Set);var r=e+"__bubble";n.has(r)||(sm(t,e,2,!1),n.add(r))}function su(e,t,n){var r=0;t&&(r|=4),sm(n,e,r,t)}var xl="_reactListening"+Math.random().toString(36).slice(2);function cu(e){if(!e[xl]){e[xl]=!0,td.forEach(function(n){n!=="selectionchange"&&(vy.has(n)||su(n,!1,e),su(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xl]||(t[xl]=!0,su("selectionchange",!1,t))}}function sm(e,t,n,r){switch(Lm(t)){case 2:var c=qy;break;case 8:c=Gy;break;default:c=_u}n=c.bind(null,t,n,e),c=void 0,!Rs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function uu(e,t,n,r,c){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var x=r.stateNode.containerInfo;if(x===c)break;if(g===4)for(g=r.return;g!==null;){var z=g.tag;if((z===3||z===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;x!==null;){if(g=da(x),g===null)return;if(z=g.tag,z===5||z===6||z===26||z===27){r=u=g;continue e}x=x.parentNode}}r=r.return}hd(function(){var j=u,I=zs(n),q=[];e:{var L=Hd.get(e);if(L!==void 0){var F=Oo,ie=e;switch(e){case"keypress":if(Ao(n)===0)break e;case"keydown":case"keyup":F=u1;break;case"focusin":ie="focus",F=Ns;break;case"focusout":ie="blur",F=Ns;break;case"beforeblur":case"afterblur":F=Ns;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=h1;break;case Ld:case Pd:case Fd:F=t1;break;case kd:F=p1;break;case"scroll":case"scrollend":F=Wv;break;case"wheel":F=v1;break;case"copy":case"cut":case"paste":F=i1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=yd;break;case"toggle":case"beforetoggle":F=x1}var fe=(t&4)!==0,Fe=!fe&&(e==="scroll"||e==="scrollend"),N=fe?L!==null?L+"Capture":null:L;fe=[];for(var O=j,D;O!==null;){var Y=O;if(D=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||D===null||N===null||(Y=yr(O,N),Y!=null&&fe.push(Kr(O,Y,D))),Fe)break;O=O.return}0<fe.length&&(L=new F(L,ie,null,n,I),q.push({event:L,listeners:fe}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",L&&n!==Cs&&(ie=n.relatedTarget||n.fromElement)&&(da(ie)||ie[fa]))break e;if((F||L)&&(L=I.window===I?I:(L=I.ownerDocument)?L.defaultView||L.parentWindow:window,F?(ie=n.relatedTarget||n.toElement,F=j,ie=ie?da(ie):null,ie!==null&&(Fe=f(ie),fe=ie.tag,ie!==Fe||fe!==5&&fe!==27&&fe!==6)&&(ie=null)):(F=null,ie=j),F!==ie)){if(fe=gd,Y="onMouseLeave",N="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(fe=yd,Y="onPointerLeave",N="onPointerEnter",O="pointer"),Fe=F==null?L:vr(F),D=ie==null?L:vr(ie),L=new fe(Y,O+"leave",F,n,I),L.target=Fe,L.relatedTarget=D,Y=null,da(I)===j&&(fe=new fe(N,O+"enter",ie,n,I),fe.target=D,fe.relatedTarget=Fe,Y=fe),Fe=Y,F&&ie)t:{for(fe=yy,N=F,O=ie,D=0,Y=N;Y;Y=fe(Y))D++;Y=0;for(var le=O;le;le=fe(le))Y++;for(;0<D-Y;)N=fe(N),D--;for(;0<Y-D;)O=fe(O),Y--;for(;D--;){if(N===O||O!==null&&N===O.alternate){fe=N;break t}N=fe(N),O=fe(O)}fe=null}else fe=null;F!==null&&cm(q,L,F,fe,!1),ie!==null&&Fe!==null&&cm(q,Fe,ie,fe,!0)}}e:{if(L=j?vr(j):window,F=L.nodeName&&L.nodeName.toLowerCase(),F==="select"||F==="input"&&L.type==="file")var Oe=Cd;else if(_d(L))if(zd)Oe=R1;else{Oe=z1;var oe=C1}else F=L.nodeName,!F||F.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?j&&Ts(j.elementType)&&(Oe=Cd):Oe=A1;if(Oe&&(Oe=Oe(e,j))){Td(q,Oe,n,I);break e}oe&&oe(e,L,j),e==="focusout"&&j&&L.type==="number"&&j.memoizedProps.value!=null&&_s(L,"number",L.value)}switch(oe=j?vr(j):window,e){case"focusin":(_d(oe)||oe.contentEditable==="true")&&(wa=oe,Fs=j,Cr=null);break;case"focusout":Cr=Fs=wa=null;break;case"mousedown":ks=!0;break;case"contextmenu":case"mouseup":case"dragend":ks=!1,Dd(q,n,I);break;case"selectionchange":if(M1)break;case"keydown":case"keyup":Dd(q,n,I)}var ge;if(Ds)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ba?Sd(e,n)&&(Te="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Te="onCompositionStart");Te&&(xd&&n.locale!=="ko"&&(ba||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ba&&(ge=md()):(ei=I,Os="value"in ei?ei.value:ei.textContent,ba=!0)),oe=bl(j,Te),0<oe.length&&(Te=new vd(Te,e,null,n,I),q.push({event:Te,listeners:oe}),ge?Te.data=ge:(ge=Ed(n),ge!==null&&(Te.data=ge)))),(ge=w1?S1(e,n):E1(e,n))&&(Te=bl(j,"onBeforeInput"),0<Te.length&&(oe=new vd("onBeforeInput","beforeinput",null,n,I),q.push({event:oe,listeners:Te}),oe.data=ge)),my(q,e,j,n,I)}lm(q,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bl(e,t){for(var n=t+"Capture",r=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=yr(e,n),c!=null&&r.unshift(Kr(e,c,u)),c=yr(e,t),c!=null&&r.push(Kr(e,c,u))),e.tag===3)return r;e=e.return}return[]}function yy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cm(e,t,n,r,c){for(var u=t._reactName,g=[];n!==null&&n!==r;){var x=n,z=x.alternate,j=x.stateNode;if(x=x.tag,z!==null&&z===r)break;x!==5&&x!==26&&x!==27||j===null||(z=j,c?(j=yr(n,u),j!=null&&g.unshift(Kr(n,j,z))):c||(j=yr(n,u),j!=null&&g.push(Kr(n,j,z)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var xy=/\r\n?/g,by=/\u0000|\uFFFD/g;function um(e){return(typeof e=="string"?e:""+e).replace(xy,`
`).replace(by,"")}function fm(e,t){return t=um(t),um(e)===t}function Pe(e,t,n,r,c,u){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||va(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&va(e,""+r);break;case"className":_o(e,"class",r);break;case"tabIndex":_o(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":_o(e,n,r);break;case"style":fd(e,r,u);break;case"data":if(t!=="object"){_o(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Co(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&Pe(e,t,"name",c.name,c,null),Pe(e,t,"formEncType",c.formEncType,c,null),Pe(e,t,"formMethod",c.formMethod,c,null),Pe(e,t,"formTarget",c.formTarget,c,null)):(Pe(e,t,"encType",c.encType,c,null),Pe(e,t,"method",c.method,c,null),Pe(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Co(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Rn);break;case"onScroll":r!=null&&Ee("scroll",e);break;case"onScrollEnd":r!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=Co(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),Eo(e,"popover",r);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Eo(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Qv.get(n)||n,Eo(e,n,r))}}function fu(e,t,n,r,c,u){switch(n){case"style":fd(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof r=="string"?va(e,r):(typeof r=="number"||typeof r=="bigint")&&va(e,""+r);break;case"onScroll":r!=null&&Ee("scroll",e);break;case"onScrollEnd":r!=null&&Ee("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nd.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),u=e[bt]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof r=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,c);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):Eo(e,n,r)}}}function dt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var r=!1,c=!1,u;for(u in n)if(n.hasOwnProperty(u)){var g=n[u];if(g!=null)switch(u){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Pe(e,t,u,g,n,null)}}c&&Pe(e,t,"srcSet",n.srcSet,n,null),r&&Pe(e,t,"src",n.src,n,null);return;case"input":Ee("invalid",e);var x=u=g=c=null,z=null,j=null;for(r in n)if(n.hasOwnProperty(r)){var I=n[r];if(I!=null)switch(r){case"name":c=I;break;case"type":g=I;break;case"checked":z=I;break;case"defaultChecked":j=I;break;case"value":u=I;break;case"defaultValue":x=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(l(137,t));break;default:Pe(e,t,r,I,n,null)}}ld(e,u,x,z,j,g,c,!1);return;case"select":Ee("invalid",e),r=g=u=null;for(c in n)if(n.hasOwnProperty(c)&&(x=n[c],x!=null))switch(c){case"value":u=x;break;case"defaultValue":g=x;break;case"multiple":r=x;default:Pe(e,t,c,x,n,null)}t=u,n=g,e.multiple=!!r,t!=null?ga(e,!!r,t,!1):n!=null&&ga(e,!!r,n,!0);return;case"textarea":Ee("invalid",e),u=c=r=null;for(g in n)if(n.hasOwnProperty(g)&&(x=n[g],x!=null))switch(g){case"value":r=x;break;case"defaultValue":c=x;break;case"children":u=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(l(91));break;default:Pe(e,t,g,x,n,null)}cd(e,r,c,u);return;case"option":for(z in n)if(n.hasOwnProperty(z)&&(r=n[z],r!=null))switch(z){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Pe(e,t,z,r,n,null)}return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(r=0;r<Wr.length;r++)Ee(Wr[r],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in n)if(n.hasOwnProperty(j)&&(r=n[j],r!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Pe(e,t,j,r,n,null)}return;default:if(Ts(t)){for(I in n)n.hasOwnProperty(I)&&(r=n[I],r!==void 0&&fu(e,t,I,r,n,void 0));return}}for(x in n)n.hasOwnProperty(x)&&(r=n[x],r!=null&&Pe(e,t,x,r,n,null))}function wy(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,x=null,z=null,j=null,I=null;for(F in n){var q=n[F];if(n.hasOwnProperty(F)&&q!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":z=q;default:r.hasOwnProperty(F)||Pe(e,t,F,null,r,q)}}for(var L in r){var F=r[L];if(q=n[L],r.hasOwnProperty(L)&&(F!=null||q!=null))switch(L){case"type":u=F;break;case"name":c=F;break;case"checked":j=F;break;case"defaultChecked":I=F;break;case"value":g=F;break;case"defaultValue":x=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,t));break;default:F!==q&&Pe(e,t,L,F,r,q)}}Es(e,g,x,z,j,I,u,c);return;case"select":F=g=x=L=null;for(u in n)if(z=n[u],n.hasOwnProperty(u)&&z!=null)switch(u){case"value":break;case"multiple":F=z;default:r.hasOwnProperty(u)||Pe(e,t,u,null,r,z)}for(c in r)if(u=r[c],z=n[c],r.hasOwnProperty(c)&&(u!=null||z!=null))switch(c){case"value":L=u;break;case"defaultValue":x=u;break;case"multiple":g=u;default:u!==z&&Pe(e,t,c,u,r,z)}t=x,n=g,r=F,L!=null?ga(e,!!n,L,!1):!!r!=!!n&&(t!=null?ga(e,!!n,t,!0):ga(e,!!n,n?[]:"",!1));return;case"textarea":F=L=null;for(x in n)if(c=n[x],n.hasOwnProperty(x)&&c!=null&&!r.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Pe(e,t,x,null,r,c)}for(g in r)if(c=r[g],u=n[g],r.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":L=c;break;case"defaultValue":F=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==u&&Pe(e,t,g,c,r,u)}sd(e,L,F);return;case"option":for(var ie in n)if(L=n[ie],n.hasOwnProperty(ie)&&L!=null&&!r.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:Pe(e,t,ie,null,r,L)}for(z in r)if(L=r[z],F=n[z],r.hasOwnProperty(z)&&L!==F&&(L!=null||F!=null))switch(z){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Pe(e,t,z,L,r,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in n)L=n[fe],n.hasOwnProperty(fe)&&L!=null&&!r.hasOwnProperty(fe)&&Pe(e,t,fe,null,r,L);for(j in r)if(L=r[j],F=n[j],r.hasOwnProperty(j)&&L!==F&&(L!=null||F!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:Pe(e,t,j,L,r,F)}return;default:if(Ts(t)){for(var Fe in n)L=n[Fe],n.hasOwnProperty(Fe)&&L!==void 0&&!r.hasOwnProperty(Fe)&&fu(e,t,Fe,void 0,r,L);for(I in r)L=r[I],F=n[I],!r.hasOwnProperty(I)||L===F||L===void 0&&F===void 0||fu(e,t,I,L,r,F);return}}for(var N in n)L=n[N],n.hasOwnProperty(N)&&L!=null&&!r.hasOwnProperty(N)&&Pe(e,t,N,null,r,L);for(q in r)L=r[q],F=n[q],!r.hasOwnProperty(q)||L===F||L==null&&F==null||Pe(e,t,q,L,r,F)}function dm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var c=n[r],u=c.transferSize,g=c.initiatorType,x=c.duration;if(u&&x&&dm(g)){for(g=0,x=c.responseEnd,r+=1;r<n.length;r++){var z=n[r],j=z.startTime;if(j>x)break;var I=z.transferSize,q=z.initiatorType;I&&dm(q)&&(z=z.responseEnd,g+=I*(z<x?1:(x-j)/(z-j)))}if(--r,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var du=null,hu=null;function wl(e){return e.nodeType===9?e:e.ownerDocument}function hm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function mu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pu=null;function Ey(){var e=window.event;return e&&e.type==="popstate"?e===pu?!1:(pu=e,!0):(pu=null,!1)}var pm=typeof setTimeout=="function"?setTimeout:void 0,_y=typeof clearTimeout=="function"?clearTimeout:void 0,gm=typeof Promise=="function"?Promise:void 0,Ty=typeof queueMicrotask=="function"?queueMicrotask:typeof gm<"u"?function(e){return gm.resolve(null).then(e).catch(Cy)}:pm;function Cy(e){setTimeout(function(){throw e})}function vi(e){return e==="head"}function vm(e,t){var n=t,r=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(c),Qa(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")$r(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,$r(n);for(var u=n.firstChild;u;){var g=u.nextSibling,x=u.nodeName;u[gr]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=g}}else n==="body"&&$r(e.ownerDocument.body);n=c}while(n);Qa(t)}function ym(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function gu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gu(n),ws(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function zy(e,t,n,r){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[gr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function Ay(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Kt(e.nextSibling),e===null))return null;return e}function xm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Kt(e.nextSibling),e===null))return null;return e}function vu(e){return e.data==="$?"||e.data==="$~"}function yu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ry(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var xu=null;function bm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Kt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function wm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Sm(e,t,n){switch(t=wl(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function $r(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ws(e)}var $t=new Map,Em=new Set;function Sl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qn=G.d;G.d={f:Oy,r:My,D:By,C:Ny,L:Uy,m:Dy,X:Ly,S:jy,M:Py};function Oy(){var e=qn.f(),t=hl();return e||t}function My(e){var t=ha(e);t!==null&&t.tag===5&&t.type==="form"?k0(t):qn.r(e)}var qa=typeof document>"u"?null:document;function _m(e,t,n){var r=qa;if(r&&typeof t=="string"&&t){var c=Yt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Em.has(c)||(Em.add(c),e={rel:e,crossOrigin:n,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),dt(t,"link",e),at(t),r.head.appendChild(t)))}}function By(e){qn.D(e),_m("dns-prefetch",e,null)}function Ny(e,t){qn.C(e,t),_m("preconnect",e,t)}function Uy(e,t,n){qn.L(e,t,n);var r=qa;if(r&&e&&t){var c='link[rel="preload"][as="'+Yt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Yt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Yt(n.imageSizes)+'"]')):c+='[href="'+Yt(e)+'"]';var u=c;switch(t){case"style":u=Ga(e);break;case"script":u=Xa(e)}$t.has(u)||(e=y({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),$t.set(u,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(Jr(u))||t==="script"&&r.querySelector(eo(u))||(t=r.createElement("link"),dt(t,"link",e),at(t),r.head.appendChild(t)))}}function Dy(e,t){qn.m(e,t);var n=qa;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Yt(r)+'"][href="'+Yt(e)+'"]',u=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Xa(e)}if(!$t.has(u)&&(e=y({rel:"modulepreload",href:e},t),$t.set(u,e),n.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(eo(u)))return}r=n.createElement("link"),dt(r,"link",e),at(r),n.head.appendChild(r)}}}function jy(e,t,n){qn.S(e,t,n);var r=qa;if(r&&e){var c=ma(r).hoistableStyles,u=Ga(e);t=t||"default";var g=c.get(u);if(!g){var x={loading:0,preload:null};if(g=r.querySelector(Jr(u)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$t.get(u))&&bu(e,n);var z=g=r.createElement("link");at(z),dt(z,"link",e),z._p=new Promise(function(j,I){z.onload=j,z.onerror=I}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,El(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:x},c.set(u,g)}}}function Ly(e,t){qn.X(e,t);var n=qa;if(n&&e){var r=ma(n).hoistableScripts,c=Xa(e),u=r.get(c);u||(u=n.querySelector(eo(c)),u||(e=y({src:e,async:!0},t),(t=$t.get(c))&&wu(e,t),u=n.createElement("script"),at(u),dt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function Py(e,t){qn.M(e,t);var n=qa;if(n&&e){var r=ma(n).hoistableScripts,c=Xa(e),u=r.get(c);u||(u=n.querySelector(eo(c)),u||(e=y({src:e,async:!0,type:"module"},t),(t=$t.get(c))&&wu(e,t),u=n.createElement("script"),at(u),dt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function Tm(e,t,n,r){var c=(c=he.current)?Sl(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ga(n.href),n=ma(c).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ga(n.href);var u=ma(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(Jr(e)))&&!u._p&&(g.instance=u,g.state.loading=5),$t.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$t.set(e,n),u||Fy(c,e,n,g.state))),t&&r===null)throw Error(l(528,""));return g}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xa(n),n=ma(c).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Ga(e){return'href="'+Yt(e)+'"'}function Jr(e){return'link[rel="stylesheet"]['+e+"]"}function Cm(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Fy(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),dt(t,"link",n),at(t),e.head.appendChild(t))}function Xa(e){return'[src="'+Yt(e)+'"]'}function eo(e){return"script[async]"+e}function zm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Yt(n.href)+'"]');if(r)return t.instance=r,at(r),r;var c=y({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),at(r),dt(r,"style",c),El(r,n.precedence,e),t.instance=r;case"stylesheet":c=Ga(n.href);var u=e.querySelector(Jr(c));if(u)return t.state.loading|=4,t.instance=u,at(u),u;r=Cm(n),(c=$t.get(c))&&bu(r,c),u=(e.ownerDocument||e).createElement("link"),at(u);var g=u;return g._p=new Promise(function(x,z){g.onload=x,g.onerror=z}),dt(u,"link",r),t.state.loading|=4,El(u,n.precedence,e),t.instance=u;case"script":return u=Xa(n.src),(c=e.querySelector(eo(u)))?(t.instance=c,at(c),c):(r=n,(c=$t.get(u))&&(r=y({},n),wu(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),at(c),dt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,El(r,n.precedence,e));return t.instance}function El(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,u=c,g=0;g<r.length;g++){var x=r[g];if(x.dataset.precedence===t)u=x;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function bu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function wu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var _l=null;function Am(e,t,n){if(_l===null){var r=new Map,c=_l=new Map;c.set(n,r)}else c=_l,r=c.get(n),r||(r=new Map,c.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var u=n[c];if(!(u[gr]||u[st]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var x=r.get(g);x?x.push(u):r.set(g,[u])}}return r}function Rm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ky(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Om(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Hy(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ga(r.href),u=t.querySelector(Jr(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Tl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,at(u);return}u=t.ownerDocument||t,r=Cm(r),(c=$t.get(c))&&bu(r,c),u=u.createElement("link"),at(u);var g=u;g._p=new Promise(function(x,z){g.onload=x,g.onerror=z}),dt(u,"link",r),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Tl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Su=0;function Iy(e,t){return e.stylesheets&&e.count===0&&zl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Su===0&&(Su=62500*Sy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Su?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function Tl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cl=null;function zl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cl=new Map,t.forEach(Vy,e),Cl=null,Tl.call(e))}function Vy(e,t){if(!(t.state.loading&4)){var n=Cl.get(e);if(n)var r=n.get(null);else{n=new Map,Cl.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(n.set(g.dataset.precedence,g),r=g)}r&&n.set(null,r)}c=t.instance,g=c.getAttribute("data-precedence"),u=n.get(g)||r,u===r&&n.set(null,c),n.set(g,c),this.count++,r=Tl.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var to={$$typeof:B,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Yy(e,t,n,r,c,u,g,x,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.hiddenUpdates=vs(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Mm(e,t,n,r,c,u,g,x,z,j,I,q){return e=new Yy(e,t,n,g,z,j,I,q,x),t=1,u===!0&&(t|=24),u=Ot(3,null,null,t),e.current=u,u.stateNode=e,t=tc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:n,cache:t},rc(u),e}function Bm(e){return e?(e=_a,e):_a}function Nm(e,t,n,r,c,u){c=Bm(c),r.context===null?r.context=c:r.pendingContext=c,r=oi(t),r.payload={element:n},u=u===void 0?null:u,u!==null&&(r.callback=u),n=li(e,r,t),n!==null&&(Ct(n,e,t),Nr(n,e,t))}function Um(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eu(e,t){Um(e,t),(e=e.alternate)&&Um(e,t)}function Dm(e){if(e.tag===13||e.tag===31){var t=Vi(e,67108864);t!==null&&Ct(t,e,67108864),Eu(e,67108864)}}function jm(e){if(e.tag===13||e.tag===31){var t=Dt();t=ys(t);var n=Vi(e,t);n!==null&&Ct(n,e,t),Eu(e,t)}}var Al=!0;function qy(e,t,n,r){var c=P.T;P.T=null;var u=G.p;try{G.p=2,_u(e,t,n,r)}finally{G.p=u,P.T=c}}function Gy(e,t,n,r){var c=P.T;P.T=null;var u=G.p;try{G.p=8,_u(e,t,n,r)}finally{G.p=u,P.T=c}}function _u(e,t,n,r){if(Al){var c=Tu(r);if(c===null)uu(e,t,r,Rl,n),Pm(e,r);else if(Qy(c,e,t,n,r))r.stopPropagation();else if(Pm(e,r),t&4&&-1<Xy.indexOf(e)){for(;c!==null;){var u=ha(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=It(u.pendingLanes);if(g!==0){var x=u;for(x.pendingLanes|=2,x.entangledLanes|=2;g;){var z=1<<31-mt(g);x.entanglements[1]|=z,g&=~z}mn(u),(Ne&6)===0&&(fl=yt()+500,Zr(0))}}break;case 31:case 13:x=Vi(u,2),x!==null&&Ct(x,u,2),hl(),Eu(u,2)}if(u=Tu(r),u===null&&uu(e,t,r,Rl,n),u===c)break;c=u}c!==null&&r.stopPropagation()}else uu(e,t,r,null,n)}}function Tu(e){return e=zs(e),Cu(e)}var Rl=null;function Cu(e){if(Rl=null,e=da(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rl=e,null}function Lm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gs()){case fr:return 2;case dr:return 8;case Ft:case Cn:return 32;case zn:return 268435456;default:return 32}default:return 32}}var zu=!1,yi=null,xi=null,bi=null,no=new Map,io=new Map,wi=[],Xy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pm(e,t){switch(e){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":no.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(t.pointerId)}}function ao(e,t,n,r,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[c]},t!==null&&(t=ha(t),t!==null&&Dm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Qy(e,t,n,r,c){switch(t){case"focusin":return yi=ao(yi,e,t,n,r,c),!0;case"dragenter":return xi=ao(xi,e,t,n,r,c),!0;case"mouseover":return bi=ao(bi,e,t,n,r,c),!0;case"pointerover":var u=c.pointerId;return no.set(u,ao(no.get(u)||null,e,t,n,r,c)),!0;case"gotpointercapture":return u=c.pointerId,io.set(u,ao(io.get(u)||null,e,t,n,r,c)),!0}return!1}function Fm(e){var t=da(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,Jf(e.priority,function(){jm(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,Jf(e.priority,function(){jm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ol(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tu(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Cs=r,n.target.dispatchEvent(r),Cs=null}else return t=ha(n),t!==null&&Dm(t),e.blockedOn=n,!1;t.shift()}return!0}function km(e,t,n){Ol(e)&&n.delete(t)}function Zy(){zu=!1,yi!==null&&Ol(yi)&&(yi=null),xi!==null&&Ol(xi)&&(xi=null),bi!==null&&Ol(bi)&&(bi=null),no.forEach(km),io.forEach(km)}function Ml(e,t){e.blockedOn===t&&(e.blockedOn=null,zu||(zu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Zy)))}var Bl=null;function Hm(e){Bl!==e&&(Bl=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bl===e&&(Bl=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Cu(r||n)===null)continue;break}var u=ha(n);u!==null&&(e.splice(t,3),t-=3,Tc(u,{pending:!0,data:c,method:n.method,action:r},r,c))}}))}function Qa(e){function t(z){return Ml(z,e)}yi!==null&&Ml(yi,e),xi!==null&&Ml(xi,e),bi!==null&&Ml(bi,e),no.forEach(t),io.forEach(t);for(var n=0;n<wi.length;n++){var r=wi[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)Fm(n),n.blockedOn===null&&wi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var c=n[r],u=n[r+1],g=c[bt]||null;if(typeof u=="function")g||Hm(n);else if(g){var x=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[bt]||null)x=g.formAction;else if(Cu(c)!==null)continue}else x=g.action;typeof x=="function"?n[r+1]=x:(n.splice(r,3),r-=3),Hm(n)}}}function Im(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Au(e){this._internalRoot=e}Nl.prototype.render=Au.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,r=Dt();Nm(n,r,e,t,null,null)},Nl.prototype.unmount=Au.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nm(e.current,2,null,e,null,null),hl(),t[fa]=null}};function Nl(e){this._internalRoot=e}Nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=$f();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wi.length&&t!==0&&t<wi[n].priority;n++);wi.splice(n,0,e),n===0&&Fm(e)}};var Vm=a.version;if(Vm!=="19.2.0")throw Error(l(527,Vm,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{ji=Ul.inject(Wy),lt=Ul}catch{}}return oo.createRoot=function(e,t){if(!s(e))throw Error(l(299));var n=!1,r="",c=W0,u=K0,g=$0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Mm(e,1,!1,null,null,n,r,null,c,u,g,Im),e[fa]=t.current,cu(e),new Au(t)},oo.hydrateRoot=function(e,t,n){if(!s(e))throw Error(l(299));var r=!1,c="",u=W0,g=K0,x=$0,z=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.formState!==void 0&&(z=n.formState)),t=Mm(e,1,!0,t,n??null,r,c,z,u,g,x,Im),t.context=Bm(null),n=t.current,r=Dt(),r=ys(r),c=oi(r),c.callback=null,li(n,c,r),n=r,t.current.lanes=n,pr(t,n),mn(t),e[fa]=t.current,cu(e),new Nl(t)},oo.version="19.2.0",oo}var Jm;function ox(){if(Jm)return Mu.exports;Jm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Mu.exports=rx(),Mu.exports}var lx=ox(),ss=rg();const sx=bf(ss);function ep(i){var a=i.onCommit,o=a===void 0?function(re){}:a,l=i.isValid,s=l===void 0?function(re){return!0}:l,f=i.initialValue,d=f===void 0?"":f,h=i.color,p=h===void 0?"var(--gray7)":h,m=i.bgColor,v=m===void 0?"var(--gray3)":m,y=i.bgActive,b=y===void 0?"var(--gray4)":y,w=i.bgInvalidInput,E=w===void 0?"var(--danger)":w,_=i.invalidInputColor,S=_===void 0?"var(--gray2)":_,T=i.charSize,A=T===void 0?void 0:T,B=i.maxCharSize,U=B===void 0?50:B,H=Ce.useState(!1),X=H[0],k=H[1],W=Ce.useState(!0),J=W[0],ae=W[1],Q=function(){return Math.random().toString(36).substring(7)},se=Ce.useState(Q()),xe=se[0],be=se[1],ye=Ce.useState(A||(d.length<=U?d.length:U)),P=ye[0],G=ye[1],K=function(){k(!1),ae(!0),be(Q())};return M.jsx("input",{type:"text",defaultValue:d,size:P,style:{backgroundColor:X?J?b:E:v,color:J?p:S,border:"none",padding:"5px",paddingLeft:"10px",borderRadius:"var(--borderRadiusSmall)",minWidth:"100px",fontSize:"16px"},readOnly:!X,onFocus:function(){return k(!0)},onChange:function(re){ae(s(re.target.value)),A||(re.target.value.length<=U?G(re.target.value.length):G(U))},onBlur:function(re){J?(K(),o(re.target.value)):(re.target.value=d,K())},onKeyDown:function(re){re.key==="Enter"&&(J?(K(),o(re.target.value)):K())}},xe)}var nt=function(){return nt=Object.assign||function(a){for(var o,l=1,s=arguments.length;l<s;l++)for(var f in o=arguments[l])Object.prototype.hasOwnProperty.call(o,f)&&(a[f]=o[f]);return a},nt.apply(this,arguments)};function la(i,a){var o={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.indexOf(l)<0&&(o[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(l=Object.getOwnPropertySymbols(i);s<l.length;s++)a.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(i,l[s])&&(o[l[s]]=i[l[s]])}return o}function cx(i,a,o){for(var l,s=0,f=a.length;s<f;s++)!l&&s in a||(l||(l=Array.prototype.slice.call(a,0,s)),l[s]=a[s]);return i.concat(l||Array.prototype.slice.call(a))}function $l(i){var a=i.iconName,o=a===void 0?"home":a,l=i.bgColor,s=l===void 0?"transparent":l,f=i.hoverBgColor,d=f===void 0?"var(--gray3)":f,h=i.color,p=h===void 0?"var(--gray6)":h,m=i.hoverColor,v=m===void 0?"var(--gray7)":m,y=i.cursor,b=y===void 0?"pointer":y,w=i.onClick,E=w===void 0?function(){}:w,_=i.style,S=_===void 0?{}:_,T=Ce.useState(!1),A=T[0],B=T[1];return M.jsx("div",{style:nt({userSelect:"none",width:"35px",height:"35px",margin:"5px",cursor:b,borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:A?d:s,transition:"background-color 0.2s",fontSize:"20px",color:A?v:p},S),className:"materialSymbols",onMouseOver:function(){return B(!0)},onMouseOut:function(){return B(!1)},onClick:E,children:M.jsxs("div",{children:[" ",o]})})}function af(i){var a=i.text,o=a===void 0?void 0:a,l=i.iconName,s=l===void 0?void 0:l,f=i.bgColor,d=f===void 0?"var(--gray3)":f,h=i.hoverBgColor,p=h===void 0?"var(--gray4)":h,m=i.color,v=m===void 0?"var(--gray7)":m,y=i.hoverColor,b=y===void 0?"var(--gray8)":y,w=i.cursor,E=w===void 0?"pointer":w,_=i.onClick,S=_===void 0?function(){}:_,T=i.style,A=T===void 0?{}:T;la(i,["text","iconName","bgColor","hoverBgColor","color","hoverColor","cursor","onClick","style"]);var B=Ce.useState(!1),U=B[0],H=B[1];return M.jsxs("button",{onMouseOver:function(){return H(!0)},onMouseOut:function(){return H(!1)},onClick:S,style:nt({overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",padding:"0px",cursor:E,height:"35px",margin:"5px",userSelect:"none",backgroundColor:U?p:d,transition:"background-color 0.2s",fontSize:"var(--defaultFontSize)",color:U?b:v,border:"none",borderRadius:"5px"},A),children:[o?M.jsx("div",{style:{marginTop:"2px",marginRight:s?"2px":"15px",marginLeft:"15px"},children:o}):null,s?M.jsx("div",{style:{marginRight:o?"0px":"10px",marginLeft:o?"0px":"10px"},children:M.jsx($l,{iconName:s,color:U?b:v,hoverColor:U?b:v,bgColor:"transparent",hoverBgColor:"transparent"})}):null]})}function Ef(i,a){a===void 0&&(a={});var o=a.insertAt;if(i&&typeof document<"u"){var l=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",o==="top"&&l.firstChild?l.insertBefore(s,l.firstChild):l.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}Ef(`
/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Remove default margin in favour of better control in authored CSS */
body, h1, h2, h3, h4, p,
figure, blockquote, dl, dd {
  margin-block-end: 0;
}

/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set core body defaults */
body {
  min-height: 100vh;
  line-height: 1.5;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2,
h3, h4 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture {
  max-width: 100%;
  display: block;
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
  font-family: inherit;
  font-size: inherit;
}

input:focus {
    outline: none;
  }
  

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5ex;
}




@font-face {
    font-family: 'Material Symbols';
    src: url('https://storage.googleapis.com/pinsandcurvesfontservice/MaterialSymbolsSharp%5BFILL%2CGRAD%2Copsz%2Cwght%5D.woff2') format('woff');
    font-weight: normal;
    font-style: normal;
}

.PinsAndCurvesStylesheet_materialSymbols__hO5CY {
    font-family: 'Material Symbols';
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 48;
}

:root {
    --gray1: #1D2126;
    --gray2: #2C333A;
    --gray3: #3B434B;
    --gray4: #49525B;
    --gray5: #59646E;
    --gray6: #708090;
    --gray7 : #C6D6E6;
    --gray8 : white;
    --danger: pink;

    --green2: #6EBD6F;
    --green1: #84D585;
    --green3: #429A44;
    --green4: #1D471E;

    --yellow1: #FFF8D3;
    --yellow2: #FFF1A8;
    --yellow3: #E6C622;
    --yellow4: #A48E20;

    --borderRadiusSmall: 5px;

    --defaultFontSize: 16px;

    --continuousBlue1: #243157;
    --continuousBlue2: #4A5F9D;
    --continuousBlue3: #94a3d0;
    --discreteRed1: #562F2F;
    --discreteRed2: #915050;


    font-family: 'Roboto', sans-serif;
}

hr {
    border: none;
    border-top: 2px solid var(--gray3);
    margin: 1em 0;
  
}`);function ux(i){return o=(a=i).color,l=o===void 0?"var(--yellow3)":o,s=a.style,M.jsx("div",{style:nt({width:"100px",height:"100px",position:"relative"},s),children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.5",clipRule:"evenodd",viewBox:"0 0 1383 1384",style:{position:"absolute",width:"100%",height:"100%",top:0,left:0},children:M.jsx("g",{transform:"translate(-11290 -51923)",children:M.jsxs("g",{id:"Artboard10",children:[M.jsx("path",{fill:"none",d:"M11290.083 51923.766h1382.825v1382.824h-1382.825z"}),M.jsx("path",{fill:"none",stroke:l,strokeWidth:"179.17",d:"M11636.648 53004.745s-129.7-164.1-129.7-390.899 126.3-407.598 126.3-407.598"}),M.jsx("path",{fill:"none",stroke:l,strokeWidth:"187.5",d:"M11971.64 53053.006v-827.096"}),M.jsx("path",{fill:l,d:"m12205.948 52376.04 174.425-174.425 174.426 174.425-174.426 174.426z"})]})})})});var a,o,l,s}var Dl=150;function Ei(i){var a,o=(function(y){var b=C.useState(y),w=b[0],E=b[1],_=C.useState(!1),S=_[0],T=_[1];return C.useLayoutEffect((function(){S||y!==w&&E(y)}),[y,S,w]),{setValue:E,value:w,setActive:T,active:S}})((a=i.initialValue)!==null&&a!==void 0?a:0),l=o.value,s=o.setValue,f=o.setActive,d=C.useState("inactive"),h=d[0],p=d[1],m=function(){p("inactive"),f(!1)};return h==="inactive"?M.jsx(fx,nt({value:l,setValue:s,setEditing:function(){p("editing"),f(!0)},setDragging:function(){p("dragging"),f(!0)}},i)):h==="editing"?M.jsx(dx,nt({value:l,setValue:s,setInactive:m},i)):h==="dragging"?M.jsx(mx,nt({value:l,setValue:s,setInactive:m},i)):null}function fx(i){var a=i.value;i.setValue;var o=i.setEditing,l=i.setDragging,s=la(i,["value","setValue","setEditing","setDragging"]),f=C.useState(null),d=f[0],h=f[1],p=C.useState(!1),m=p[0],v=p[1];return M.jsx("div",{style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:s.bgColor||"var(--gray3)",color:s.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",userSelect:"none"},onPointerDown:function(y){y.preventDefault(),y.button===0&&h({x:y.clientX,y:y.clientY})},onPointerMove:function(y){if(d){var b=y.clientX-d.x,w=y.clientY-d.y;!m&&(Math.abs(b)>3||Math.abs(w)>3)&&(v(!0),l())}},onPointerUp:function(y){d&&(m||o(),h(null),v(!1))},children:a})}function dx(i){var a=i.value,o=i.setValue,l=i.setInactive,s=la(i,["value","setValue","setInactive"]),f=C.useState(!0),d=f[0],h=f[1],p=function(y){return!Number.isNaN(y)&&(s.min==null||y>=s.min)&&(s.max==null||y<=s.max)},m=Ce.useRef(null);C.useEffect((function(){var y,b;(y=m.current)===null||y===void 0||y.focus(),(b=m.current)===null||b===void 0||b.select()}),[]);var v=function(){var y,b,w=((y=m.current)===null||y===void 0?void 0:y.value)||"",E=parseFloat(w);p(E)&&o(E),(i.onCommit||i.onChange)&&p(E)&&(i.onCommit?i.onCommit(E):(b=i.onChange)===null||b===void 0||b.call(i,E)),l()};return M.jsx("input",{ref:m,type:"text",defaultValue:String(a),onChange:function(y){var b=y.target.value,w=parseFloat(b);h(p(w))},onBlur:v,onKeyDown:function(y){y.key==="Enter"?v():y.key==="Escape"&&l()},style:{padding:"5px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:s.bgActive||"var(--gray4)",color:d?s.color||"var(--gray7)":s.invalidInputColor||"var(--danger)",border:"1px solid",borderColor:d?s.color||"var(--gray7)":s.invalidInputColor||"var(--danger)",width:"10ch",height:"2em"}})}function hx(i){var a,o,l,s=i.value,f=i.setValue,d=i.setInactive,h=la(i,["value","setValue","setInactive"]),p=Ce.useRef(null),m=Ce.useRef(null),v=Ce.useRef(s).current,y=(a=h.min)!==null&&a!==void 0?a:0,b=(s-y)/(((o=h.max)!==null&&o!==void 0?o:100)-y),w=(l=h.step)!==null&&l!==void 0?l:.01,E=Ce.useMemo((function(){if(w==null)return 6;var S=w.toString(),T=S.indexOf(".");return T>=0?S.length-T-1:0}),[w]),_=function(S,T){var A,B,U=S.y-T.y,H=function(J,ae,Q){return Math.max(ae,Math.min(Q,J))};U=H(U,-150,Dl),U/=Dl;var X=(A=h.min)!==null&&A!==void 0?A:0,k=(B=h.max)!==null&&B!==void 0?B:100,W=H(v+(k-X)*U,X,k);return parseFloat(W.toFixed(E))};return C.useEffect((function(){console.log("DraggingNumberInput useEffect called");var S=function(B){if(p.current?p.current.releasePointerCapture(B.pointerId):console.warn("captureRef.current is null, cannot release pointer capture"),m.current!==null){var U={x:B.clientX,y:B.clientY},H=_(m.current,U);f(H),h.onCommit?h.onCommit(H):h.onChange&&h.onChange(H),m.current=null,d()}else d()},T=function(B){if(m.current!==null){var U={x:B.clientX,y:B.clientY},H=_(m.current,U);f(H),h.onChange&&h.onChange(H)}else{console.log("startPosition is null, setting it now",{x:B.clientX,y:B.clientY}),m.current={x:B.clientX,y:B.clientY};var X=B.pointerId;p.current?p.current.setPointerCapture(X):console.warn("captureRef.current is null, cannot set pointer capture")}},A=p.current;if(A)return A.addEventListener("pointerup",S),A.addEventListener("pointermove",T),function(){A.removeEventListener("pointermove",T),A.removeEventListener("pointerup",S)}}),[p.current]),ss.createPortal(M.jsxs("div",{ref:p,style:{borderRadius:"25px",backgroundColor:h.bgColor||"var(--gray3)",color:h.color||"var(--gray7)",cursor:"ns-resize",height:"".concat(Dl,"px"),position:"absolute",top:"calc(".concat(h.top,"px + calc(1em - ").concat(75,"px))"),left:h.left,width:"10ch",boxShadow:"0 0 15px rgba(0,0,0,0.3)",overflow:"hidden"},children:[M.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",boxShadow:"inset 0 0 3px ".concat(h.color||"var(--gray7)"),borderRadius:"25px",opacity:.3}}),M.jsx("div",{style:{position:"absolute",background:"linear-gradient(to top, transparent -20%, ".concat(h.color||"var(--gray7)"," 100%)"),opacity:.5,width:"100%",height:"".concat(Dl*b,"px"),bottom:0,left:0}}),M.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) scale(".concat(h.hoverScale||1.8,")"),transformOrigin:"center",color:h.hoverColor||"var(--gray7)",textShadow:"0 0px 8px rgba(0,0,0,0.35)",fontWeight:500,pointerEvents:"none",userSelect:"none"},children:s})]}),document.body)}function mx(i){var a=i.value;i.setValue,i.setInactive;var o=la(i,["value","setValue","setInactive"]),l=Ce.useRef(null),s=C.useState({top:0,left:0}),f=s[0],d=s[1];return C.useLayoutEffect((function(){if(l.current){var h=l.current.getBoundingClientRect();d({top:h.top,left:h.left})}else console.warn("captureRef.current is null, cannot get bounding rect")}),[l.current]),M.jsx("div",{ref:l,style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",color:o.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",position:"relative"},children:M.jsx(hx,nt({top:f.top,left:f.left},i,{value:a}))})}var px="CollapsibleSection-modules_collapsibleSection__rrUX-",gx="CollapsibleSection-modules_collapsibleSectionClosed__bn2x7",vx="CollapsibleSection-modules_collapsibleHeader__9m5Zn",yx="CollapsibleSection-modules_collapsibleTitle__3MbqI",xx="CollapsibleSection-modules_collapsibleArrow__kSTsT",bx="CollapsibleSection-modules_collapsibleArrowOpen__y1sRM",wx="CollapsibleSection-modules_collapsibleContent__-D89D",Sx="CollapsibleSection-modules_collapsibleContentClosed__WJoKk",Ex="CollapsibleSection-modules_collapsibleInner__9YJk2",_x="CollapsibleSection-modules_collapsibleInnerClosed__-oM2n";function jl(i){var a=i.title,o=i.children,l=i.iconName,s=i.defaultOpen,f=i.titleStyle,d=Ce.useState(s!=null&&s),h=d[0],p=d[1];return M.jsxs("div",{className:"".concat(px," ").concat(h?"":gx),children:[M.jsxs("div",{className:vx,onClick:function(){return p((function(m){return!m}))},children:[M.jsxs("span",{className:yx,style:nt({display:"flex",alignItems:"center",gap:"0.5rem"},f),children:[l?M.jsx($l,{iconName:l,hoverBgColor:"transparent",hoverColor:"var(--gray6)"}):null,a]}),M.jsx("span",{className:"materialSymbols ".concat(xx," ").concat(h?bx:""),children:"arrow_drop_down"})]}),M.jsx("div",{className:"".concat(wx," ").concat(h?"":Sx),style:{maxHeight:h?"none":0},children:M.jsx("div",{className:"".concat(Ex," ").concat(h?"":_x),children:o})})]})}function tp(i,a){if(typeof i=="function")return i(a);i!=null&&(i.current=a)}function og(...i){return a=>{let o=!1;const l=i.map((s=>{const f=tp(s,a);return o||typeof f!="function"||(o=!0),f}));if(o)return()=>{for(let s=0;s<l.length;s++){const f=l[s];typeof f=="function"?f():tp(i[s],null)}}}}function Ni(...i){return C.useCallback(og(...i),i)}function lg(i){const a=Tx(i),o=C.forwardRef(((l,s)=>{const{children:f,...d}=l,h=C.Children.toArray(f),p=h.find(zx);if(p){const m=p.props.children,v=h.map((y=>y===p?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:y));return M.jsx(a,{...d,ref:s,children:C.isValidElement(m)?C.cloneElement(m,void 0,v):null})}return M.jsx(a,{...d,ref:s,children:f})}));return o.displayName=`${i}.Slot`,o}function Tx(i){const a=C.forwardRef(((o,l)=>{const{children:s,...f}=o;if(C.isValidElement(s)){const d=(function(m){let v=Object.getOwnPropertyDescriptor(m.props,"ref")?.get,y=v&&"isReactWarning"in v&&v.isReactWarning;return y?m.ref:(v=Object.getOwnPropertyDescriptor(m,"ref")?.get,y=v&&"isReactWarning"in v&&v.isReactWarning,y?m.props.ref:m.props.ref||m.ref)})(s),h=(function(m,v){const y={...v};for(const b in v){const w=m[b],E=v[b];/^on[A-Z]/.test(b)?w&&E?y[b]=(..._)=>{const S=E(..._);return w(..._),S}:w&&(y[b]=w):b==="style"?y[b]={...w,...E}:b==="className"&&(y[b]=[w,E].filter(Boolean).join(" "))}return{...m,...y}})(f,s.props);return s.type!==C.Fragment&&(h.ref=l?og(l,d):d),C.cloneElement(s,h)}return C.Children.count(s)>1?C.Children.only(null):null}));return a.displayName=`${i}.SlotClone`,a}Ef(`.CollapsibleSection-modules_collapsibleSection__rrUX- {
  border-radius: var(--borderRadiusSmall);
  margin-bottom: 16px;
  border: 2px solid var(--gray3);
}
.CollapsibleSection-modules_collapsibleSectionClosed__bn2x7 {
  box-shadow: none;
}
.CollapsibleSection-modules_collapsibleHeader__9m5Zn {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.5rem 1rem;
  user-select: none;
}
.CollapsibleSection-modules_collapsibleTitle__3MbqI {
  color: white;
  font-size: 1.15rem;
  font-weight: 600;
  flex: 1;
}
.CollapsibleSection-modules_collapsibleArrow__kSTsT {
  font-size: 30px;
  color: var(--gray6);
  margin-left: 8px;
  transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
}
.CollapsibleSection-modules_collapsibleArrowOpen__y1sRM {
  transform: rotate(180deg);
}
.CollapsibleSection-modules_collapsibleContent__-D89D {
  padding: 0.75rem 1rem 1rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: none;
  overflow: hidden;
}
.CollapsibleSection-modules_collapsibleContentClosed__WJoKk {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
}
.CollapsibleSection-modules_collapsibleInner__9YJk2 {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.CollapsibleSection-modules_collapsibleInnerClosed__-oM2n {
  display: none;
}
`);var Cx=Symbol("radix.slottable");function zx(i){return C.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===Cx}var Wn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((i,a)=>{const o=lg(`Primitive.${a}`),l=C.forwardRef(((s,f)=>{const{asChild:d,...h}=s,p=d?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(p,{...h,ref:f})}));return l.displayName=`Primitive.${a}`,{...i,[a]:l}}),{});function sg(i,a=[]){let o=[];const l=()=>{const s=o.map((f=>C.createContext(f)));return function(d){const h=d?.[i]||s;return C.useMemo((()=>({[`__scope${i}`]:{...d,[i]:h}})),[d,h])}};return l.scopeName=i,[function(f,d){const h=C.createContext(d),p=o.length;o=[...o,d];const m=v=>{const{scope:y,children:b,...w}=v,E=y?.[i]?.[p]||h,_=C.useMemo((()=>w),Object.values(w));return M.jsx(E.Provider,{value:_,children:b})};return m.displayName=f+"Provider",[m,function(y,b){const w=b?.[i]?.[p]||h,E=C.useContext(w);if(E)return E;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${f}\``)}]},Ax(l,...a)]}function Ax(...i){const a=i[0];if(i.length===1)return a;const o=()=>{const l=i.map((s=>({useScope:s(),scopeName:s.scopeName})));return function(f){const d=l.reduce(((h,{useScope:p,scopeName:m})=>({...h,...p(f)[`__scope${m}`]})),{});return C.useMemo((()=>({[`__scope${a.scopeName}`]:d})),[d])}};return o.scopeName=a.scopeName,o}function Ri(i,a,{checkForDefaultPrevented:o=!0}={}){return function(s){if(i?.(s),o===!1||!s.defaultPrevented)return a?.(s)}}var Oi=globalThis?.document?C.useLayoutEffect:()=>{},Rx=Sf[" useInsertionEffect ".trim().toString()]||Oi;function Ox({prop:i,defaultProp:a,onChange:o=()=>{},caller:l}){const[s,f,d]=(function({defaultProp:y,onChange:b}){const[w,E]=C.useState(y),_=C.useRef(w),S=C.useRef(b);return Rx((()=>{S.current=b}),[b]),C.useEffect((()=>{_.current!==w&&(S.current?.(w),_.current=w)}),[w,_]),[w,E,S]})({defaultProp:a,onChange:o}),h=i!==void 0,p=h?i:s;{const v=C.useRef(i!==void 0);C.useEffect((()=>{const y=v.current;y!==h&&console.warn(`${l} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h}),[h,l])}const m=C.useCallback((v=>{if(h){const y=(function(w){return typeof w=="function"})(v)?v(i):v;y!==i&&d.current?.(y)}else f(v)}),[h,i,f,d]);return[p,m]}var _f=i=>{const{present:a,children:o}=i,l=(function(h){const[p,m]=C.useState(),v=C.useRef(null),y=C.useRef(h),b=C.useRef("none"),w=h?"mounted":"unmounted",[E,_]=(function(T,A){return C.useReducer(((B,U)=>A[B][U]??B),T)})(w,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect((()=>{const S=Ll(v.current);b.current=E==="mounted"?S:"none"}),[E]),Oi((()=>{const S=v.current,T=y.current;if(T!==h){const A=b.current,B=Ll(S);h?_("MOUNT"):B==="none"||S?.display==="none"?_("UNMOUNT"):_(T&&A!==B?"ANIMATION_OUT":"UNMOUNT"),y.current=h}}),[h,_]),Oi((()=>{if(p){let S;const T=p.ownerDocument.defaultView??window,A=U=>{const H=Ll(v.current).includes(U.animationName);if(U.target===p&&H&&(_("ANIMATION_END"),!y.current)){const X=p.style.animationFillMode;p.style.animationFillMode="forwards",S=T.setTimeout((()=>{p.style.animationFillMode==="forwards"&&(p.style.animationFillMode=X)}))}},B=U=>{U.target===p&&(b.current=Ll(v.current))};return p.addEventListener("animationstart",B),p.addEventListener("animationcancel",A),p.addEventListener("animationend",A),()=>{T.clearTimeout(S),p.removeEventListener("animationstart",B),p.removeEventListener("animationcancel",A),p.removeEventListener("animationend",A)}}_("ANIMATION_END")}),[p,_]),{isPresent:["mounted","unmountSuspended"].includes(E),ref:C.useCallback((S=>{v.current=S?getComputedStyle(S):null,m(S)}),[])}})(a),s=typeof o=="function"?o({present:l.isPresent}):C.Children.only(o),f=Ni(l.ref,(function(h){let p=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,m=p&&"isReactWarning"in p&&p.isReactWarning;return m?h.ref:(p=Object.getOwnPropertyDescriptor(h,"ref")?.get,m=p&&"isReactWarning"in p&&p.isReactWarning,m?h.props.ref:h.props.ref||h.ref)})(s));return typeof o=="function"||l.isPresent?C.cloneElement(s,{ref:f}):null};function Ll(i){return i?.animationName||"none"}_f.displayName="Presence";var Mx=Sf[" useId ".trim().toString()]||(()=>{}),Bx=0;function Nx(i){const[a,o]=C.useState(Mx());return Oi((()=>{o((l=>l??String(Bx++)))}),[i]),i||(a?`radix-${a}`:"")}function tr(i){const a=C.useRef(i);return C.useEffect((()=>{a.current=i})),C.useMemo((()=>(...o)=>a.current?.(...o)),[])}var np,rf="dismissableLayer.update",Ux="dismissableLayer.pointerDownOutside",Dx="dismissableLayer.focusOutside",cg=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ug=C.forwardRef(((i,a)=>{const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:f,onInteractOutside:d,onDismiss:h,...p}=i,m=C.useContext(cg),[v,y]=C.useState(null),b=v?.ownerDocument??globalThis?.document,[,w]=C.useState({}),E=Ni(a,(k=>y(k))),_=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),T=_.indexOf(S),A=v?_.indexOf(v):-1,B=m.layersWithOutsidePointerEventsDisabled.size>0,U=A>=T,H=(function(W,J=globalThis?.document){const ae=tr(W),Q=C.useRef(!1),se=C.useRef((()=>{}));return C.useEffect((()=>{const xe=ye=>{if(ye.target&&!Q.current){let P=function(){ap(Ux,ae,G,{discrete:!0})};const G={originalEvent:ye};ye.pointerType==="touch"?(J.removeEventListener("click",se.current),se.current=P,J.addEventListener("click",se.current,{once:!0})):P()}else J.removeEventListener("click",se.current);Q.current=!1},be=window.setTimeout((()=>{J.addEventListener("pointerdown",xe)}),0);return()=>{window.clearTimeout(be),J.removeEventListener("pointerdown",xe),J.removeEventListener("click",se.current)}}),[J,ae]),{onPointerDownCapture:()=>Q.current=!0}})((k=>{const W=k.target,J=[...m.branches].some((ae=>ae.contains(W)));U&&!J&&(s?.(k),d?.(k),k.defaultPrevented||h?.())}),b),X=(function(W,J=globalThis?.document){const ae=tr(W),Q=C.useRef(!1);return C.useEffect((()=>{const se=xe=>{xe.target&&!Q.current&&ap(Dx,ae,{originalEvent:xe},{discrete:!1})};return J.addEventListener("focusin",se),()=>J.removeEventListener("focusin",se)}),[J,ae]),{onFocusCapture:()=>Q.current=!0,onBlurCapture:()=>Q.current=!1}})((k=>{const W=k.target;[...m.branches].some((J=>J.contains(W)))||(f?.(k),d?.(k),k.defaultPrevented||h?.())}),b);return(function(W,J=globalThis?.document){const ae=tr(W);C.useEffect((()=>{const Q=se=>{se.key==="Escape"&&ae(se)};return J.addEventListener("keydown",Q,{capture:!0}),()=>J.removeEventListener("keydown",Q,{capture:!0})}),[ae,J])})((k=>{A===m.layers.size-1&&(l?.(k),!k.defaultPrevented&&h&&(k.preventDefault(),h()))}),b),C.useEffect((()=>{if(v)return o&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(np=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),ip(),()=>{o&&m.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=np)}}),[v,b,o,m]),C.useEffect((()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),ip())}),[v,m]),C.useEffect((()=>{const k=()=>w({});return document.addEventListener(rf,k),()=>document.removeEventListener(rf,k)}),[]),M.jsx(Wn.div,{...p,ref:E,style:{pointerEvents:B?U?"auto":"none":void 0,...i.style},onFocusCapture:Ri(i.onFocusCapture,X.onFocusCapture),onBlurCapture:Ri(i.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Ri(i.onPointerDownCapture,H.onPointerDownCapture)})}));ug.displayName="DismissableLayer";function ip(){const i=new CustomEvent(rf);document.dispatchEvent(i)}function ap(i,a,o,{discrete:l}){const s=o.originalEvent.target,f=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:o});a&&s.addEventListener(i,a,{once:!0}),l?(function(h,p){h&&ss.flushSync((()=>h.dispatchEvent(p)))})(s,f):s.dispatchEvent(f)}C.forwardRef(((i,a)=>{const o=C.useContext(cg),l=C.useRef(null),s=Ni(a,l);return C.useEffect((()=>{const f=l.current;if(f)return o.branches.add(f),()=>{o.branches.delete(f)}}),[o.branches]),M.jsx(Wn.div,{...i,ref:s})})).displayName="DismissableLayerBranch";var Du="focusScope.autoFocusOnMount",ju="focusScope.autoFocusOnUnmount",rp={bubbles:!1,cancelable:!0},fg=C.forwardRef(((i,a)=>{const{loop:o=!1,trapped:l=!1,onMountAutoFocus:s,onUnmountAutoFocus:f,...d}=i,[h,p]=C.useState(null),m=tr(s),v=tr(f),y=C.useRef(null),b=Ni(a,(_=>p(_))),w=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect((()=>{if(l){let _=function(B){if(w.paused||!h)return;const U=B.target;h.contains(U)?y.current=U:_i(y.current,{select:!0})},S=function(B){if(w.paused||!h)return;const U=B.relatedTarget;U!==null&&(h.contains(U)||_i(y.current,{select:!0}))},T=function(B){if(document.activeElement===document.body)for(const U of B)U.removedNodes.length>0&&_i(h)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const A=new MutationObserver(T);return h&&A.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),A.disconnect()}}}),[l,h,w.paused]),C.useEffect((()=>{if(h){sp.add(w);const _=document.activeElement;if(!h.contains(_)){const S=new CustomEvent(Du,rp);h.addEventListener(Du,m),h.dispatchEvent(S),S.defaultPrevented||((function(A,{select:B=!1}={}){const U=document.activeElement;for(const H of A)if(_i(H,{select:B}),document.activeElement!==U)return})((function(A){return A.filter((B=>B.tagName!=="A"))})(op(h)),{select:!0}),document.activeElement===_&&_i(h))}return()=>{h.removeEventListener(Du,m),setTimeout((()=>{const S=new CustomEvent(ju,rp);h.addEventListener(ju,v),h.dispatchEvent(S),S.defaultPrevented||_i(_??document.body,{select:!0}),h.removeEventListener(ju,v),sp.remove(w)}),0)}}}),[h,m,v,w]);const E=C.useCallback((_=>{if(!o&&!l||w.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,T=document.activeElement;if(S&&T){const A=_.currentTarget,[B,U]=(function(X){const k=op(X),W=lp(k,X),J=lp(k.reverse(),X);return[W,J]})(A);B&&U?_.shiftKey||T!==U?_.shiftKey&&T===B&&(_.preventDefault(),o&&_i(U,{select:!0})):(_.preventDefault(),o&&_i(B,{select:!0})):T===A&&_.preventDefault()}}),[o,l,w.paused]);return M.jsx(Wn.div,{tabIndex:-1,...d,ref:b,onKeyDown:E})}));function op(i){const a=[],o=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const s=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||s?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)a.push(o.currentNode);return a}function lp(i,a){for(const o of i)if(!jx(o,{upTo:a}))return o}function jx(i,{upTo:a}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(a!==void 0&&i===a)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function _i(i,{select:a=!1}={}){if(i&&i.focus){const o=document.activeElement;i.focus({preventScroll:!0}),i!==o&&(function(s){return s instanceof HTMLInputElement&&"select"in s})(i)&&a&&i.select()}}fg.displayName="FocusScope";var sp=(function(){let a=[];return{add(o){const l=a[0];o!==l&&l?.pause(),a=cp(a,o),a.unshift(o)},remove(o){a=cp(a,o),a[0]?.resume()}}})();function cp(i,a){const o=[...i],l=o.indexOf(a);return l!==-1&&o.splice(l,1),o}var dg=C.forwardRef(((i,a)=>{const{container:o,...l}=i,[s,f]=C.useState(!1);Oi((()=>f(!0)),[]);const d=o||s&&globalThis?.document?.body;return d?sx.createPortal(M.jsx(Wn.div,{...l,ref:a}),d):null}));dg.displayName="Portal";var Lu=0;function up(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Ql="right-scroll-bar-position",Zl="width-before-scroll-bar";function Pu(i,a){return typeof i=="function"?i(a):i&&(i.current=a),i}var Lx=typeof window<"u"?C.useLayoutEffect:C.useEffect,fp=new WeakMap;function Px(i,a){var o=(function(s,f){var d=C.useState((function(){return{value:s,callback:f,facade:{get current(){return d.value},set current(h){var p=d.value;p!==h&&(d.value=h,d.callback(h,p))}}}}))[0];return d.callback=f,d.facade})(null,(function(l){return i.forEach((function(s){return Pu(s,l)}))}));return Lx((function(){var l=fp.get(o);if(l){var s=new Set(l),f=new Set(i),d=o.current;s.forEach((function(h){f.has(h)||Pu(h,null)})),f.forEach((function(h){s.has(h)||Pu(h,d)}))}fp.set(o,i)}),[i]),o}function Fx(i){return i}var hg=function(i){var a=i.sideCar,o=la(i,["sideCar"]);if(!a)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=a.read();if(!l)throw new Error("Sidecar medium not found");return C.createElement(l,nt({},o))};hg.isSideCarExport=!0;var mg=(function(a){a===void 0&&(a={});var o=(function(s,f){f===void 0&&(f=Fx);var d=[],h=!1;return{read:function(){if(h)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return d.length?d[d.length-1]:s},useMedium:function(p){var m=f(p,h);return d.push(m),function(){d=d.filter((function(v){return v!==m}))}},assignSyncMedium:function(p){for(h=!0;d.length;){var m=d;d=[],m.forEach(p)}d={push:function(v){return p(v)},filter:function(){return d}}},assignMedium:function(p){h=!0;var m=[];if(d.length){var v=d;d=[],v.forEach(p),m=d}var y=function(){var w=m;m=[],w.forEach(p)},b=function(){return Promise.resolve().then(y)};b(),d={push:function(w){m.push(w),b()},filter:function(w){return m=m.filter(w),d}}}}})(null);return o.options=nt({async:!0,ssr:!1},a),o})(),Fu=function(){},Jl=C.forwardRef((function(i,a){var o=C.useRef(null),l=C.useState({onScrollCapture:Fu,onWheelCapture:Fu,onTouchMoveCapture:Fu}),s=l[0],f=l[1],d=i.forwardProps,h=i.children,p=i.className,m=i.removeScrollBar,v=i.enabled,y=i.shards,b=i.sideCar,w=i.noRelative,E=i.noIsolation,_=i.inert,S=i.allowPinchZoom,T=i.as,A=T===void 0?"div":T,B=i.gapMode,U=la(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=b,X=Px([o,a]),k=nt(nt({},U),s);return C.createElement(C.Fragment,null,v&&C.createElement(H,{sideCar:mg,removeScrollBar:m,shards:y,noRelative:w,noIsolation:E,inert:_,setCallbacks:f,allowPinchZoom:!!S,lockRef:o,gapMode:B}),d?C.cloneElement(C.Children.only(h),nt(nt({},k),{ref:X})):C.createElement(A,nt({},k,{className:p,ref:X}),h))}));Jl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Jl.classNames={fullWidth:Zl,zeroRight:Ql};function kx(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var a=(function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__})();return a&&i.setAttribute("nonce",a),i}var Hx=function(){var i=0,a=null;return{add:function(o){i==0&&(a=kx())&&((function(s,f){s.styleSheet?s.styleSheet.cssText=f:s.appendChild(document.createTextNode(f))})(a,o),(function(s){(document.head||document.getElementsByTagName("head")[0]).appendChild(s)})(a)),i++},remove:function(){!--i&&a&&(a.parentNode&&a.parentNode.removeChild(a),a=null)}}},pg=function(){var i,a=(i=Hx(),function(o,l){C.useEffect((function(){return i.add(o),function(){i.remove()}}),[o&&l])});return function(o){var l=o.styles,s=o.dynamic;return a(l,s),null}},Ix={left:0,top:0,right:0,gap:0},ku=function(i){return parseInt(i||"",10)||0},Vx=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return Ix;var a=(function(s){var f=window.getComputedStyle(document.body),d=f[s==="padding"?"paddingLeft":"marginLeft"],h=f[s==="padding"?"paddingTop":"marginTop"],p=f[s==="padding"?"paddingRight":"marginRight"];return[ku(d),ku(h),ku(p)]})(i),o=document.documentElement.clientWidth,l=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,l-o+a[2]-a[0])}},Yx=pg(),nr="data-scroll-locked",qx=function(i,a,o,l){var s=i.left,f=i.top,d=i.right,h=i.gap;return o===void 0&&(o="margin"),`
  .`.concat("with-scroll-bars-hidden",` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(h,"px ").concat(l,`;
  }
  body[`).concat(nr,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([a&&"position: relative ".concat(l,";"),o==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(l,`;
    `),o==="padding"&&"padding-right: ".concat(h,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ql,` {
    right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Zl,` {
    margin-right: `).concat(h,"px ").concat(l,`;
  }
  
  .`).concat(Ql," .").concat(Ql,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(Zl," .").concat(Zl,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(nr,`] {
    `).concat("--removed-body-scroll-bar-size",": ").concat(h,`px;
  }
`)},dp=function(){var i=parseInt(document.body.getAttribute(nr)||"0",10);return isFinite(i)?i:0},Gx=function(i){var a=i.noRelative,o=i.noImportant,l=i.gapMode,s=l===void 0?"margin":l;C.useEffect((function(){return document.body.setAttribute(nr,(dp()+1).toString()),function(){var d=dp()-1;d<=0?document.body.removeAttribute(nr):document.body.setAttribute(nr,d.toString())}}),[]);var f=C.useMemo((function(){return Vx(s)}),[s]);return C.createElement(Yx,{styles:qx(f,!a,s,o?"":"!important")})},of=!1;if(typeof window<"u")try{var Pl=Object.defineProperty({},"passive",{get:function(){return of=!0,!0}});window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{of=!1}var Za=!!of&&{passive:!1},hp=function(i,a){if(!(i instanceof Element))return!1;var o=window.getComputedStyle(i);return o[a]!=="hidden"&&!(o.overflowY===o.overflowX&&!(function(l){return l.tagName==="TEXTAREA"})(i)&&o[a]==="visible")},mp=function(i,a){var o=a.ownerDocument,l=a;do{if(typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host),gg(i,l)){var s=vg(i,l);if(s[1]>s[2])return!0}l=l.parentNode}while(l&&l!==o.body);return!1},gg=function(i,a){return i==="v"?(function(o){return hp(o,"overflowY")})(a):(function(o){return hp(o,"overflowX")})(a)},vg=function(i,a){return i==="v"?[(o=a).scrollTop,o.scrollHeight,o.clientHeight]:(function(l){return[l.scrollLeft,l.scrollWidth,l.clientWidth]})(a);var o},Fl=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},pp=function(i){return[i.deltaX,i.deltaY]},gp=function(i){return i&&"current"in i?i.current:i},Xx=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},Qx=0,Wa=[];function Zx(i){for(var a=null;i!==null;)i instanceof ShadowRoot&&(a=i.host,i=i.host),i=i.parentNode;return a}var Wx=(function(a,o){return a.useMedium(o),hg})(mg,(function(a){var o=C.useRef([]),l=C.useRef([0,0]),s=C.useRef(),f=C.useState(Qx++)[0],d=C.useState(pg)[0],h=C.useRef(a);C.useEffect((function(){h.current=a}),[a]),C.useEffect((function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(f));var S=cx([a.lockRef.current],(a.shards||[]).map(gp)).filter(Boolean);return S.forEach((function(T){return T.classList.add("allow-interactivity-".concat(f))})),function(){document.body.classList.remove("block-interactivity-".concat(f)),S.forEach((function(T){return T.classList.remove("allow-interactivity-".concat(f))}))}}}),[a.inert,a.lockRef.current,a.shards]);var p=C.useCallback((function(S,T){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!h.current.allowPinchZoom;var A,B=Fl(S),U=l.current,H="deltaX"in S?S.deltaX:U[0]-B[0],X="deltaY"in S?S.deltaY:U[1]-B[1],k=S.target,W=Math.abs(H)>Math.abs(X)?"h":"v";if("touches"in S&&W==="h"&&k.type==="range")return!1;var J=mp(W,k);if(!J)return!0;if(J?A=W:(A=W==="v"?"h":"v",J=mp(W,k)),!J)return!1;if(!s.current&&"changedTouches"in S&&(H||X)&&(s.current=A),!A)return!0;var ae=s.current||A;return(function(Q,se,xe,be){var ye=(function(ve,Re){return ve==="h"&&Re==="rtl"?-1:1})(Q,window.getComputedStyle(se).direction),P=ye*be,G=xe.target,K=se.contains(G),re=!1,we=P>0,R=0,V=0;do{if(!G)break;var $=vg(Q,G),ee=$[0],de=$[1]-$[2]-ye*ee;(ee||de)&&gg(Q,G)&&(R+=de,V+=ee);var he=G.parentNode;G=he&&he.nodeType===Node.DOCUMENT_FRAGMENT_NODE?he.host:he}while(!K&&G!==document.body||K&&(se.contains(G)||se===G));return(we&&Math.abs(R)<1||!we&&Math.abs(V)<1)&&(re=!0),re})(ae,T,S,ae==="h"?H:X)}),[]),m=C.useCallback((function(S){var T=S;if(Wa.length&&Wa[Wa.length-1]===d){var A="deltaY"in T?pp(T):Fl(T),B=o.current.filter((function(H){return H.name===T.type&&(H.target===T.target||T.target===H.shadowParent)&&(X=H.delta,k=A,X[0]===k[0]&&X[1]===k[1]);var X,k}))[0];if(B&&B.should)T.cancelable&&T.preventDefault();else if(!B){var U=(h.current.shards||[]).map(gp).filter(Boolean).filter((function(H){return H.contains(T.target)}));(U.length>0?p(T,U[0]):!h.current.noIsolation)&&T.cancelable&&T.preventDefault()}}}),[]),v=C.useCallback((function(S,T,A,B){var U={name:S,delta:T,target:A,should:B,shadowParent:Zx(A)};o.current.push(U),setTimeout((function(){o.current=o.current.filter((function(H){return H!==U}))}),1)}),[]),y=C.useCallback((function(S){l.current=Fl(S),s.current=void 0}),[]),b=C.useCallback((function(S){v(S.type,pp(S),S.target,p(S,a.lockRef.current))}),[]),w=C.useCallback((function(S){v(S.type,Fl(S),S.target,p(S,a.lockRef.current))}),[]);C.useEffect((function(){return Wa.push(d),a.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:w}),document.addEventListener("wheel",m,Za),document.addEventListener("touchmove",m,Za),document.addEventListener("touchstart",y,Za),function(){Wa=Wa.filter((function(S){return S!==d})),document.removeEventListener("wheel",m,Za),document.removeEventListener("touchmove",m,Za),document.removeEventListener("touchstart",y,Za)}}),[]);var E=a.removeScrollBar,_=a.inert;return C.createElement(C.Fragment,null,_?C.createElement(d,{styles:Xx(f)}):null,E?C.createElement(Gx,{noRelative:a.noRelative,gapMode:a.gapMode}):null)})),yg=C.forwardRef((function(i,a){return C.createElement(Jl,nt({},i,{ref:a,sideCar:Wx}))}));yg.classNames=Jl.classNames;var Ka=new WeakMap,kl=new WeakMap,Hl={},vp=0,xg=function(i){return i&&(i.host||xg(i.parentNode))},Kx=function(i,a,o,l){var s=(function(y,b){return b.map((function(w){if(y.contains(w))return w;var E=xg(w);return E&&y.contains(E)?E:(console.error("aria-hidden",w,"in not contained inside",y,". Doing nothing"),null)})).filter((function(w){return!!w}))})(a,Array.isArray(i)?i:[i]);Hl[o]||(Hl[o]=new WeakMap);var f=Hl[o],d=[],h=new Set,p=new Set(s),m=function(y){y&&!h.has(y)&&(h.add(y),m(y.parentNode))};s.forEach(m);var v=function(y){y&&!p.has(y)&&Array.prototype.forEach.call(y.children,(function(b){if(h.has(b))v(b);else try{var w=b.getAttribute(l),E=w!==null&&w!=="false",_=(Ka.get(b)||0)+1,S=(f.get(b)||0)+1;Ka.set(b,_),f.set(b,S),d.push(b),_===1&&E&&kl.set(b,!0),S===1&&b.setAttribute(o,"true"),E||b.setAttribute(l,"true")}catch(T){console.error("aria-hidden: cannot operate on ",b,T)}}))};return v(a),h.clear(),vp++,function(){d.forEach((function(y){var b=Ka.get(y)-1,w=f.get(y)-1;Ka.set(y,b),f.set(y,w),b||(kl.has(y)||y.removeAttribute(l),kl.delete(y)),w||y.removeAttribute(o)})),--vp||(Ka=new WeakMap,Ka=new WeakMap,kl=new WeakMap,Hl={})}},$x=function(i,a,o){o===void 0&&(o="data-aria-hidden");var l=Array.from(Array.isArray(i)?i:[i]),s=(function(f){return typeof document>"u"?null:(Array.isArray(f)?f[0]:f).ownerDocument.body})(i);return s?(l.push.apply(l,Array.from(s.querySelectorAll("[aria-live], script"))),Kx(l,s,o,"aria-hidden")):function(){return null}};const Jx=["top","right","bottom","left"],Bi=Math.min,jt=Math.max,es=Math.round,Il=Math.floor,Sn=i=>({x:i,y:i}),eb={left:"right",right:"left",bottom:"top",top:"bottom"},tb={start:"end",end:"start"};function lf(i,a,o){return jt(i,Bi(a,o))}function Qn(i,a){return typeof i=="function"?i(a):i}function Zn(i){return i.split("-")[0]}function sr(i){return i.split("-")[1]}function Tf(i){return i==="x"?"y":"x"}function Cf(i){return i==="y"?"height":"width"}const nb=new Set(["top","bottom"]);function bn(i){return nb.has(Zn(i))?"y":"x"}function zf(i){return Tf(bn(i))}function sf(i){return i.replace(/start|end/g,(a=>tb[a]))}const yp=["left","right"],xp=["right","left"],ib=["top","bottom"],ab=["bottom","top"];function rb(i,a,o,l){const s=sr(i);let f=(function(h,p,m){switch(h){case"top":case"bottom":return m?p?xp:yp:p?yp:xp;case"left":case"right":return p?ib:ab;default:return[]}})(Zn(i),o==="start",l);return s&&(f=f.map((d=>d+"-"+s)),a&&(f=f.concat(f.map(sf)))),f}function Vl(i){return i.replace(/left|right|bottom|top/g,(a=>eb[a]))}function bg(i){return typeof i!="number"?(function(o){return{top:0,right:0,bottom:0,left:0,...o}})(i):{top:i,right:i,bottom:i,left:i}}function ts(i){const{x:a,y:o,width:l,height:s}=i;return{width:l,height:s,top:o,left:a,right:a+l,bottom:o+s,x:a,y:o}}function bp(i,a,o){let{reference:l,floating:s}=i;const f=bn(a),d=zf(a),h=Cf(d),p=Zn(a),m=f==="y",v=l.x+l.width/2-s.width/2,y=l.y+l.height/2-s.height/2,b=l[h]/2-s[h]/2;let w;switch(p){case"top":w={x:v,y:l.y-s.height};break;case"bottom":w={x:v,y:l.y+l.height};break;case"right":w={x:l.x+l.width,y};break;case"left":w={x:l.x-s.width,y};break;default:w={x:l.x,y:l.y}}switch(sr(a)){case"start":w[d]-=b*(o&&m?-1:1);break;case"end":w[d]+=b*(o&&m?-1:1)}return w}async function po(i,a){var o;a===void 0&&(a={});const{x:l,y:s,platform:f,rects:d,elements:h,strategy:p}=i,{boundary:m="clippingAncestors",rootBoundary:v="viewport",elementContext:y="floating",altBoundary:b=!1,padding:w=0}=Qn(a,i),E=bg(w),_=h[b?y==="floating"?"reference":"floating":y],S=ts(await f.getClippingRect({element:(o=await(f.isElement==null?void 0:f.isElement(_)))==null||o?_:_.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(h.floating)),boundary:m,rootBoundary:v,strategy:p})),T=y==="floating"?{x:l,y:s,width:d.floating.width,height:d.floating.height}:d.reference,A=await(f.getOffsetParent==null?void 0:f.getOffsetParent(h.floating)),B=await(f.isElement==null?void 0:f.isElement(A))&&await(f.getScale==null?void 0:f.getScale(A))||{x:1,y:1},U=ts(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:T,offsetParent:A,strategy:p}):T);return{top:(S.top-U.top+E.top)/B.y,bottom:(U.bottom-S.bottom+E.bottom)/B.y,left:(S.left-U.left+E.left)/B.x,right:(U.right-S.right+E.right)/B.x}}function wp(i,a){return{top:i.top-a.height,right:i.right-a.width,bottom:i.bottom-a.height,left:i.left-a.width}}function Sp(i){return Jx.some((a=>i[a]>=0))}const wg=new Set(["left","top"]);function cs(){return typeof window<"u"}function rr(i){return Sg(i)?(i.nodeName||"").toLowerCase():"#document"}function Lt(i){var a;return(i==null||(a=i.ownerDocument)==null?void 0:a.defaultView)||window}function En(i){var a;return(a=(Sg(i)?i.ownerDocument:i.document)||window.document)==null?void 0:a.documentElement}function Sg(i){return!!cs()&&(i instanceof Node||i instanceof Lt(i).Node)}function on(i){return!!cs()&&(i instanceof Element||i instanceof Lt(i).Element)}function _n(i){return!!cs()&&(i instanceof HTMLElement||i instanceof Lt(i).HTMLElement)}function Ep(i){return!(!cs()||typeof ShadowRoot>"u")&&(i instanceof ShadowRoot||i instanceof Lt(i).ShadowRoot)}const ob=new Set(["inline","contents"]);function go(i){const{overflow:a,overflowX:o,overflowY:l,display:s}=ln(i);return/auto|scroll|overlay|hidden|clip/.test(a+l+o)&&!ob.has(s)}const lb=new Set(["table","td","th"]);function sb(i){return lb.has(rr(i))}const cb=[":popover-open",":modal"];function ns(i){return cb.some((a=>{try{return i.matches(a)}catch{return!1}}))}const ub=["transform","translate","scale","rotate","perspective"],fb=["transform","translate","scale","rotate","perspective","filter"],db=["paint","layout","strict","content"];function cf(i){const a=Af(),o=on(i)?ln(i):i;return ub.some((l=>!!o[l]&&o[l]!=="none"))||!!o.containerType&&o.containerType!=="normal"||!a&&!!o.backdropFilter&&o.backdropFilter!=="none"||!a&&!!o.filter&&o.filter!=="none"||fb.some((l=>(o.willChange||"").includes(l)))||db.some((l=>(o.contain||"").includes(l)))}function Af(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const hb=new Set(["html","body","#document"]);function ir(i){return hb.has(rr(i))}function ln(i){return Lt(i).getComputedStyle(i)}function us(i){return on(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Ai(i){if(rr(i)==="html")return i;const a=i.assignedSlot||i.parentNode||Ep(i)&&i.host||En(i);return Ep(a)?a.host:a}function Eg(i){const a=Ai(i);return ir(a)?i.ownerDocument?i.ownerDocument.body:i.body:_n(a)&&go(a)?a:Eg(a)}function vo(i,a,o){var l;a===void 0&&(a=[]),o===void 0&&(o=!0);const s=Eg(i),f=s===((l=i.ownerDocument)==null?void 0:l.body),d=Lt(s);if(f){const h=uf(d);return a.concat(d,d.visualViewport||[],go(s)?s:[],h&&o?vo(h):[])}return a.concat(s,vo(s,[],o))}function uf(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function _g(i){const a=ln(i);let o=parseFloat(a.width)||0,l=parseFloat(a.height)||0;const s=_n(i),f=s?i.offsetWidth:o,d=s?i.offsetHeight:l,h=es(o)!==f||es(l)!==d;return h&&(o=f,l=d),{width:o,height:l,$:h}}function Rf(i){return on(i)?i:i.contextElement}function ar(i){const a=Rf(i);if(!_n(a))return Sn(1);const o=a.getBoundingClientRect(),{width:l,height:s,$:f}=_g(a);let d=(f?es(o.width):o.width)/l,h=(f?es(o.height):o.height)/s;return d&&Number.isFinite(d)||(d=1),h&&Number.isFinite(h)||(h=1),{x:d,y:h}}const mb=Sn(0);function Tg(i){const a=Lt(i);return Af()&&a.visualViewport?{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}:mb}function ia(i,a,o,l){a===void 0&&(a=!1),o===void 0&&(o=!1);const s=i.getBoundingClientRect(),f=Rf(i);let d=Sn(1);a&&(l?on(l)&&(d=ar(l)):d=ar(i));const h=(function(w,E,_){return E===void 0&&(E=!1),!(!_||E&&_!==Lt(w))&&E})(f,o,l)?Tg(f):Sn(0);let p=(s.left+h.x)/d.x,m=(s.top+h.y)/d.y,v=s.width/d.x,y=s.height/d.y;if(f){const b=Lt(f),w=l&&on(l)?Lt(l):l;let E=b,_=uf(E);for(;_&&l&&w!==E;){const S=ar(_),T=_.getBoundingClientRect(),A=ln(_),B=T.left+(_.clientLeft+parseFloat(A.paddingLeft))*S.x,U=T.top+(_.clientTop+parseFloat(A.paddingTop))*S.y;p*=S.x,m*=S.y,v*=S.x,y*=S.y,p+=B,m+=U,E=Lt(_),_=uf(E)}}return ts({width:v,height:y,x:p,y:m})}function Of(i,a){const o=us(i).scrollLeft;return a?a.left+o:ia(En(i)).left+o}function Cg(i,a,o){o===void 0&&(o=!1);const l=i.getBoundingClientRect();return{x:l.left+a.scrollLeft-(o?0:Of(i,l)),y:l.top+a.scrollTop}}const pb=new Set(["absolute","fixed"]);function _p(i,a,o){let l;if(a==="viewport")l=(function(f,d){const h=Lt(f),p=En(f),m=h.visualViewport;let v=p.clientWidth,y=p.clientHeight,b=0,w=0;if(m){v=m.width,y=m.height;const E=Af();(!E||E&&d==="fixed")&&(b=m.offsetLeft,w=m.offsetTop)}return{width:v,height:y,x:b,y:w}})(i,o);else if(a==="document")l=(function(f){const d=En(f),h=us(f),p=f.ownerDocument.body,m=jt(d.scrollWidth,d.clientWidth,p.scrollWidth,p.clientWidth),v=jt(d.scrollHeight,d.clientHeight,p.scrollHeight,p.clientHeight);let y=-h.scrollLeft+Of(f);const b=-h.scrollTop;return ln(p).direction==="rtl"&&(y+=jt(d.clientWidth,p.clientWidth)-m),{width:m,height:v,x:y,y:b}})(En(i));else if(on(a))l=(function(f,d){const h=ia(f,!0,d==="fixed"),p=h.top+f.clientTop,m=h.left+f.clientLeft,v=_n(f)?ar(f):Sn(1);return{width:f.clientWidth*v.x,height:f.clientHeight*v.y,x:m*v.x,y:p*v.y}})(a,o);else{const s=Tg(i);l={x:a.x-s.x,y:a.y-s.y,width:a.width,height:a.height}}return ts(l)}function zg(i,a){const o=Ai(i);return!(o===a||!on(o)||ir(o))&&(ln(o).position==="fixed"||zg(o,a))}function gb(i,a,o){const l=_n(a),s=En(a),f=o==="fixed",d=ia(i,!0,f,a);let h={scrollLeft:0,scrollTop:0};const p=Sn(0);function m(){p.x=Of(s)}if(l||!l&&!f)if((rr(a)!=="body"||go(s))&&(h=us(a)),l){const y=ia(a,!0,f,a);p.x=y.x+a.clientLeft,p.y=y.y+a.clientTop}else s&&m();f&&!l&&s&&m();const v=!s||l||f?Sn(0):Cg(s,h);return{x:d.left+h.scrollLeft-p.x-v.x,y:d.top+h.scrollTop-p.y-v.y,width:d.width,height:d.height}}function Hu(i){return ln(i).position==="static"}function Tp(i,a){if(!_n(i)||ln(i).position==="fixed")return null;if(a)return a(i);let o=i.offsetParent;return En(i)===o&&(o=o.ownerDocument.body),o}function Cp(i,a){const o=Lt(i);if(ns(i))return o;if(!_n(i)){let s=Ai(i);for(;s&&!ir(s);){if(on(s)&&!Hu(s))return s;s=Ai(s)}return o}let l=Tp(i,a);for(;l&&sb(l)&&Hu(l);)l=Tp(l,a);return l&&ir(l)&&Hu(l)&&!cf(l)?o:l||(function(f){let d=Ai(f);for(;_n(d)&&!ir(d);){if(cf(d))return d;if(ns(d))return null;d=Ai(d)}return null})(i)||o}const vb={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let{elements:o,rect:l,offsetParent:s,strategy:f}=a;const d=f==="fixed",h=En(s),p=!!o&&ns(o.floating);if(s===h||p&&d)return l;let m={scrollLeft:0,scrollTop:0},v=Sn(1);const y=Sn(0),b=_n(s);if((b||!b&&!d)&&((rr(s)!=="body"||go(h))&&(m=us(s)),_n(s))){const E=ia(s);v=ar(s),y.x=E.x+s.clientLeft,y.y=E.y+s.clientTop}const w=!h||b||d?Sn(0):Cg(h,m,!0);return{width:l.width*v.x,height:l.height*v.y,x:l.x*v.x-m.scrollLeft*v.x+y.x+w.x,y:l.y*v.y-m.scrollTop*v.y+y.y+w.y}},getDocumentElement:En,getClippingRect:function(a){let{element:o,boundary:l,rootBoundary:s,strategy:f}=a;const d=[...l==="clippingAncestors"?ns(o)?[]:(function(v,y){const b=y.get(v);if(b)return b;let w=vo(v,[],!1).filter((T=>on(T)&&rr(T)!=="body")),E=null;const _=ln(v).position==="fixed";let S=_?Ai(v):v;for(;on(S)&&!ir(S);){const T=ln(S),A=cf(S);A||T.position!=="fixed"||(E=null),(_?!A&&!E:!A&&T.position==="static"&&E&&pb.has(E.position)||go(S)&&!A&&zg(v,S))?w=w.filter((B=>B!==S)):E=T,S=Ai(S)}return y.set(v,w),w})(o,this._c):[].concat(l),s],h=d[0],p=d.reduce(((m,v)=>{const y=_p(o,v,f);return m.top=jt(y.top,m.top),m.right=Bi(y.right,m.right),m.bottom=Bi(y.bottom,m.bottom),m.left=jt(y.left,m.left),m}),_p(o,h,f));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}},getOffsetParent:Cp,getElementRects:async function(i){const a=this.getOffsetParent||Cp,o=this.getDimensions,l=await o(i.floating);return{reference:gb(i.reference,await a(i.floating),i.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}},getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){const{width:o,height:l}=_g(a);return{width:o,height:l}},getScale:ar,isElement:on,isRTL:function(a){return ln(a).direction==="rtl"}};function zp(i,a){return i.x===a.x&&i.y===a.y&&i.width===a.width&&i.height===a.height}function yb(i,a,o,l){l===void 0&&(l={});const{ancestorScroll:s=!0,ancestorResize:f=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=l,m=Rf(i),v=s||f?[...m?vo(m):[],...vo(a)]:[];v.forEach((S=>{s&&S.addEventListener("scroll",o,{passive:!0}),f&&S.addEventListener("resize",o)}));const y=m&&h?(function(T,A){let B,U=null;const H=En(T);function X(){var k;clearTimeout(B),(k=U)==null||k.disconnect(),U=null}return(function k(W,J){W===void 0&&(W=!1),J===void 0&&(J=1),X();const ae=T.getBoundingClientRect(),{left:Q,top:se,width:xe,height:be}=ae;if(W||A(),!xe||!be)return;const ye={rootMargin:-Il(se)+"px "+-Il(H.clientWidth-(Q+xe))+"px "+-Il(H.clientHeight-(se+be))+"px "+-Il(Q)+"px",threshold:jt(0,Bi(1,J))||1};let P=!0;function G(K){const re=K[0].intersectionRatio;if(re!==J){if(!P)return k();re?k(!1,re):B=setTimeout((()=>{k(!1,1e-7)}),1e3)}re!==1||zp(ae,T.getBoundingClientRect())||k(),P=!1}try{U=new IntersectionObserver(G,{...ye,root:H.ownerDocument})}catch{U=new IntersectionObserver(G,ye)}U.observe(T)})(!0),X})(m,o):null;let b,w=-1,E=null;d&&(E=new ResizeObserver((S=>{let[T]=S;T&&T.target===m&&E&&(E.unobserve(a),cancelAnimationFrame(w),w=requestAnimationFrame((()=>{var A;(A=E)==null||A.observe(a)}))),o()})),m&&!p&&E.observe(m),E.observe(a));let _=p?ia(i):null;return p&&(function S(){const T=ia(i);_&&!zp(_,T)&&o(),_=T,b=requestAnimationFrame(S)})(),o(),()=>{var S;v.forEach((T=>{s&&T.removeEventListener("scroll",o),f&&T.removeEventListener("resize",o)})),y?.(),(S=E)==null||S.disconnect(),E=null,p&&cancelAnimationFrame(b)}}const xb=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(a){var o,l;const{x:s,y:f,placement:d,middlewareData:h}=a,p=await(async function(v,y){const{placement:b,platform:w,elements:E}=v,_=await(w.isRTL==null?void 0:w.isRTL(E.floating)),S=Zn(b),T=sr(b),A=bn(b)==="y",B=wg.has(S)?-1:1,U=_&&A?-1:1,H=Qn(y,v);let{mainAxis:X,crossAxis:k,alignmentAxis:W}=typeof H=="number"?{mainAxis:H,crossAxis:0,alignmentAxis:null}:{mainAxis:H.mainAxis||0,crossAxis:H.crossAxis||0,alignmentAxis:H.alignmentAxis};return T&&typeof W=="number"&&(k=T==="end"?-1*W:W),A?{x:k*U,y:X*B}:{x:X*B,y:k*U}})(a,i);return d===((o=h.offset)==null?void 0:o.placement)&&(l=h.arrow)!=null&&l.alignmentOffset?{}:{x:s+p.x,y:f+p.y,data:{...p,placement:d}}}}},bb=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(a){const{x:o,y:l,placement:s}=a,{mainAxis:f=!0,crossAxis:d=!1,limiter:h={fn:S=>{let{x:T,y:A}=S;return{x:T,y:A}}},...p}=Qn(i,a),m={x:o,y:l},v=await po(a,p),y=bn(Zn(s)),b=Tf(y);let w=m[b],E=m[y];if(f){const S=b==="y"?"bottom":"right";w=lf(w+v[b==="y"?"top":"left"],w,w-v[S])}if(d){const S=y==="y"?"bottom":"right";E=lf(E+v[y==="y"?"top":"left"],E,E-v[S])}const _=h.fn({...a,[b]:w,[y]:E});return{..._,data:{x:_.x-o,y:_.y-l,enabled:{[b]:f,[y]:d}}}}}},wb=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(a){var o,l;const{placement:s,middlewareData:f,rects:d,initialPlacement:h,platform:p,elements:m}=a,{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:_=!0,...S}=Qn(i,a);if((o=f.arrow)!=null&&o.alignmentOffset)return{};const T=Zn(s),A=bn(h),B=Zn(h)===h,U=await(p.isRTL==null?void 0:p.isRTL(m.floating)),H=b||(B||!_?[Vl(h)]:(function(ye){const P=Vl(ye);return[sf(ye),P,sf(P)]})(h)),X=E!=="none";!b&&X&&H.push(...rb(h,_,E,U));const k=[h,...H],W=await po(a,S),J=[];let ae=((l=f.flip)==null?void 0:l.overflows)||[];if(v&&J.push(W[T]),y){const be=(function(P,G,K){K===void 0&&(K=!1);const re=sr(P),we=zf(P),R=Cf(we);let V=we==="x"?re===(K?"end":"start")?"right":"left":re==="start"?"bottom":"top";return G.reference[R]>G.floating[R]&&(V=Vl(V)),[V,Vl(V)]})(s,d,U);J.push(W[be[0]],W[be[1]])}if(ae=[...ae,{placement:s,overflows:J}],!J.every((be=>be<=0))){var Q,se;const be=(((Q=f.flip)==null?void 0:Q.index)||0)+1,ye=k[be];if(ye&&(!(y==="alignment"&&A!==bn(ye))||ae.every((G=>G.overflows[0]>0&&bn(G.placement)===A))))return{data:{index:be,overflows:ae},reset:{placement:ye}};let P=(se=ae.filter((G=>G.overflows[0]<=0)).sort(((G,K)=>G.overflows[1]-K.overflows[1]))[0])==null?void 0:se.placement;if(!P)switch(w){case"bestFit":{var xe;const G=(xe=ae.filter((K=>{if(X){const re=bn(K.placement);return re===A||re==="y"}return!0})).map((K=>[K.placement,K.overflows.filter((re=>re>0)).reduce(((re,we)=>re+we),0)])).sort(((K,re)=>K[1]-re[1]))[0])==null?void 0:xe[0];G&&(P=G);break}case"initialPlacement":P=h}if(s!==P)return{reset:{placement:P}}}return{}}}},Sb=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(a){var o,l;const{placement:s,rects:f,platform:d,elements:h}=a,{apply:p=()=>{},...m}=Qn(i,a),v=await po(a,m),y=Zn(s),b=sr(s),w=bn(s)==="y",{width:E,height:_}=f.floating;let S,T;y==="top"||y==="bottom"?(S=y,T=b===(await(d.isRTL==null?void 0:d.isRTL(h.floating))?"start":"end")?"left":"right"):(T=y,S=b==="end"?"top":"bottom");const A=_-v.top-v.bottom,B=E-v.left-v.right,U=Bi(_-v[S],A),H=Bi(E-v[T],B),X=!a.middlewareData.shift;let k=U,W=H;if((o=a.middlewareData.shift)!=null&&o.enabled.x&&(W=B),(l=a.middlewareData.shift)!=null&&l.enabled.y&&(k=A),X&&!b){const ae=jt(v.left,0),Q=jt(v.right,0),se=jt(v.top,0),xe=jt(v.bottom,0);w?W=E-2*(ae!==0||Q!==0?ae+Q:jt(v.left,v.right)):k=_-2*(se!==0||xe!==0?se+xe:jt(v.top,v.bottom))}await p({...a,availableWidth:W,availableHeight:k});const J=await d.getDimensions(h.floating);return E!==J.width||_!==J.height?{reset:{rects:!0}}:{}}}},Eb=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(a){const{rects:o}=a,{strategy:l="referenceHidden",...s}=Qn(i,a);switch(l){case"referenceHidden":{const f=wp(await po(a,{...s,elementContext:"reference"}),o.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:Sp(f)}}}case"escaped":{const f=wp(await po(a,{...s,altBoundary:!0}),o.floating);return{data:{escapedOffsets:f,escaped:Sp(f)}}}default:return{}}}}},Ap=i=>({name:"arrow",options:i,async fn(a){const{x:o,y:l,placement:s,rects:f,platform:d,elements:h,middlewareData:p}=a,{element:m,padding:v=0}=Qn(i,a)||{};if(m==null)return{};const y=bg(v),b={x:o,y:l},w=zf(s),E=Cf(w),_=await d.getDimensions(m),S=w==="y",T=S?"top":"left",A=S?"bottom":"right",B=S?"clientHeight":"clientWidth",U=f.reference[E]+f.reference[w]-b[w]-f.floating[E],H=b[w]-f.reference[w],X=await(d.getOffsetParent==null?void 0:d.getOffsetParent(m));let k=X?X[B]:0;k&&await(d.isElement==null?void 0:d.isElement(X))||(k=h.floating[B]||f.floating[E]);const W=U/2-H/2,J=k/2-_[E]/2-1,ae=Bi(y[T],J),Q=Bi(y[A],J),se=ae,xe=k-_[E]-Q,be=k/2-_[E]/2+W,ye=lf(se,be,xe),P=!p.arrow&&sr(s)!=null&&be!==ye&&f.reference[E]/2-(be<se?ae:Q)-_[E]/2<0,G=P?be<se?be-se:be-xe:0;return{[w]:b[w]+G,data:{[w]:ye,centerOffset:be-ye-G,...P&&{alignmentOffset:G}},reset:P}}}),_b=function(i){return i===void 0&&(i={}),{options:i,fn(a){const{x:o,y:l,placement:s,rects:f,middlewareData:d}=a,{offset:h=0,mainAxis:p=!0,crossAxis:m=!0}=Qn(i,a),v={x:o,y:l},y=bn(s),b=Tf(y);let w=v[b],E=v[y];const _=Qn(h,a),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(p){const B=b==="y"?"height":"width",U=f.reference[b]-f.floating[B]+S.mainAxis,H=f.reference[b]+f.reference[B]-S.mainAxis;w<U?w=U:w>H&&(w=H)}if(m){var T,A;const B=b==="y"?"width":"height",U=wg.has(Zn(s)),H=f.reference[y]-f.floating[B]+(U&&((T=d.offset)==null?void 0:T[y])||0)+(U?0:S.crossAxis),X=f.reference[y]+f.reference[B]+(U?0:((A=d.offset)==null?void 0:A[y])||0)-(U?S.crossAxis:0);E<H?E=H:E>X&&(E=X)}return{[b]:w,[y]:E}}}},Tb=(i,a,o)=>{const l=new Map,s={platform:vb,...o},f={...s.platform,_c:l};return(async(d,h,p)=>{const{placement:m="bottom",strategy:v="absolute",middleware:y=[],platform:b}=p,w=y.filter(Boolean),E=await(b.isRTL==null?void 0:b.isRTL(h));let _=await b.getElementRects({reference:d,floating:h,strategy:v}),{x:S,y:T}=bp(_,m,E),A=m,B={},U=0;for(let H=0;H<w.length;H++){const{name:X,fn:k}=w[H],{x:W,y:J,data:ae,reset:Q}=await k({x:S,y:T,initialPlacement:m,placement:A,strategy:v,middlewareData:B,rects:_,platform:b,elements:{reference:d,floating:h}});S=W??S,T=J??T,B={...B,[X]:{...B[X],...ae}},Q&&U<=50&&(U++,typeof Q=="object"&&(Q.placement&&(A=Q.placement),Q.rects&&(_=Q.rects===!0?await b.getElementRects({reference:d,floating:h,strategy:v}):Q.rects),{x:S,y:T}=bp(_,A,E)),H=-1)}return{x:S,y:T,placement:A,strategy:v,middlewareData:B}})(i,a,{...s,platform:f})};var Wl=typeof document<"u"?C.useLayoutEffect:function(){};function is(i,a){if(i===a)return!0;if(typeof i!=typeof a)return!1;if(typeof i=="function"&&i.toString()===a.toString())return!0;let o,l,s;if(i&&a&&typeof i=="object"){if(Array.isArray(i)){if(o=i.length,o!==a.length)return!1;for(l=o;l--!=0;)if(!is(i[l],a[l]))return!1;return!0}if(s=Object.keys(i),o=s.length,o!==Object.keys(a).length)return!1;for(l=o;l--!=0;)if(!{}.hasOwnProperty.call(a,s[l]))return!1;for(l=o;l--!=0;){const f=s[l];if((f!=="_owner"||!i.$$typeof)&&!is(i[f],a[f]))return!1}return!0}return i!=i&&a!=a}function Ag(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function Rp(i,a){const o=Ag(i);return Math.round(a*o)/o}function Iu(i){const a=C.useRef(i);return Wl((()=>{a.current=i})),a}const Cb=i=>({name:"arrow",options:i,fn(a){const{element:o,padding:l}=typeof i=="function"?i(a):i;return o&&(function(f){return{}.hasOwnProperty.call(f,"current")})(o)?o.current!=null?Ap({element:o.current,padding:l}).fn(a):{}:o?Ap({element:o,padding:l}).fn(a):{}}}),zb=(i,a)=>({...xb(i),options:[i,a]}),Ab=(i,a)=>({...bb(i),options:[i,a]}),Rb=(i,a)=>({..._b(i),options:[i,a]}),Ob=(i,a)=>({...wb(i),options:[i,a]}),Mb=(i,a)=>({...Sb(i),options:[i,a]}),Bb=(i,a)=>({...Eb(i),options:[i,a]}),Nb=(i,a)=>({...Cb(i),options:[i,a]});var Rg=C.forwardRef(((i,a)=>{const{children:o,width:l=10,height:s=5,...f}=i;return M.jsx(Wn.svg,{...f,ref:a,width:l,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?o:M.jsx("polygon",{points:"0,0 30,0 15,10"})})}));Rg.displayName="Arrow";var Ub=Rg,Mf="Popper",[Og,Mg]=sg(Mf),[Db,Bg]=Og(Mf),Ng=i=>{const{__scopePopper:a,children:o}=i,[l,s]=C.useState(null);return M.jsx(Db,{scope:a,anchor:l,onAnchorChange:s,children:o})};Ng.displayName=Mf;var Ug="PopperAnchor",Dg=C.forwardRef(((i,a)=>{const{__scopePopper:o,virtualRef:l,...s}=i,f=Bg(Ug,o),d=C.useRef(null),h=Ni(a,d);return C.useEffect((()=>{f.onAnchorChange(l?.current||d.current)})),l?null:M.jsx(Wn.div,{...s,ref:h})}));Dg.displayName=Ug;var Bf="PopperContent",[jb,Lb]=Og(Bf),jg=C.forwardRef(((i,a)=>{const{__scopePopper:o,side:l="bottom",sideOffset:s=0,align:f="center",alignOffset:d=0,arrowPadding:h=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:E,..._}=i,S=Bg(Bf,o),[T,A]=C.useState(null),B=Ni(a,(ve=>A(ve))),[U,H]=C.useState(null),X=(function(Re){const[Ue,it]=C.useState(void 0);return Oi((()=>{if(Re){it({width:Re.offsetWidth,height:Re.offsetHeight});const zt=new ResizeObserver((Jt=>{if(!Array.isArray(Jt)||!Jt.length)return;const Pt=Jt[0];let At,sn;if("borderBoxSize"in Pt){const cn=Pt.borderBoxSize,Kn=Array.isArray(cn)?cn[0]:cn;At=Kn.inlineSize,sn=Kn.blockSize}else At=Re.offsetWidth,sn=Re.offsetHeight;it({width:At,height:sn})}));return zt.observe(Re,{box:"border-box"}),()=>zt.unobserve(Re)}it(void 0)}),[Re]),Ue})(U),k=X?.width??0,W=X?.height??0,J=l+(f!=="center"?"-"+f:""),ae=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},Q=Array.isArray(m)?m:[m],se=Q.length>0,xe={padding:ae,boundary:Q.filter(Fb),altBoundary:se},{refs:be,floatingStyles:ye,placement:P,isPositioned:G,middlewareData:K}=(function(Re){Re===void 0&&(Re={});const{placement:Ue="bottom",strategy:it="absolute",middleware:zt=[],platform:Jt,elements:{reference:Pt,floating:At}={},transform:sn=!0,whileElementsMounted:cn,open:Kn}=Re,[un,ca]=C.useState({x:0,y:0,strategy:it,placement:Ue,middlewareData:{},isPositioned:!1}),[Di,ur]=C.useState(zt);is(Di,zt)||ur(zt);const[ms,ps]=C.useState(null),[yt,gs]=C.useState(null),fr=C.useCallback((We=>{We!==zn.current&&(zn.current=We,ps(We))}),[]),dr=C.useCallback((We=>{We!==$n.current&&($n.current=We,gs(We))}),[]),Ft=Pt||ms,Cn=At||yt,zn=C.useRef(null),$n=C.useRef(null),ua=C.useRef(un),ji=cn!=null,lt=Iu(cn),kt=Iu(Jt),mt=Iu(Kn),Li=C.useCallback((()=>{if(!zn.current||!$n.current)return;const We={placement:Ue,strategy:it,middleware:Di};kt.current&&(We.platform=kt.current),Tb(zn.current,$n.current,We).then((It=>{const en={...It,isPositioned:mt.current!==!1};hr.current&&!is(ua.current,en)&&(ua.current=en,ss.flushSync((()=>{ca(en)})))}))}),[Di,Ue,it,kt,mt]);Wl((()=>{Kn===!1&&ua.current.isPositioned&&(ua.current.isPositioned=!1,ca((We=>({...We,isPositioned:!1}))))}),[Kn]);const hr=C.useRef(!1);Wl((()=>(hr.current=!0,()=>{hr.current=!1})),[]),Wl((()=>{if(Ft&&(zn.current=Ft),Cn&&($n.current=Cn),Ft&&Cn){if(lt.current)return lt.current(Ft,Cn,Li);Li()}}),[Ft,Cn,Li,lt,ji]);const So=C.useMemo((()=>({reference:zn,floating:$n,setReference:fr,setFloating:dr})),[fr,dr]),Ht=C.useMemo((()=>({reference:Ft,floating:Cn})),[Ft,Cn]),Pi=C.useMemo((()=>{const We={position:it,left:0,top:0};if(!Ht.floating)return We;const It=Rp(Ht.floating,un.x),en=Rp(Ht.floating,un.y);return sn?{...We,transform:"translate("+It+"px, "+en+"px)",...Ag(Ht.floating)>=1.5&&{willChange:"transform"}}:{position:it,left:It,top:en}}),[it,sn,Ht.floating,un.x,un.y]);return C.useMemo((()=>({...un,update:Li,refs:So,elements:Ht,floatingStyles:Pi})),[un,Li,So,Ht,Pi])})({strategy:"fixed",placement:J,whileElementsMounted:(...ve)=>yb(...ve,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[zb({mainAxis:s+W,alignmentAxis:d}),p&&Ab({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?Rb():void 0,...xe}),p&&Ob({...xe}),Mb({...xe,apply:({elements:ve,rects:Re,availableWidth:Ue,availableHeight:it})=>{const{width:zt,height:Jt}=Re.reference,Pt=ve.floating.style;Pt.setProperty("--radix-popper-available-width",`${Ue}px`),Pt.setProperty("--radix-popper-available-height",`${it}px`),Pt.setProperty("--radix-popper-anchor-width",`${zt}px`),Pt.setProperty("--radix-popper-anchor-height",`${Jt}px`)}}),U&&Nb({element:U,padding:h}),kb({arrowWidth:k,arrowHeight:W}),b&&Bb({strategy:"referenceHidden",...xe})]}),[re,we]=Fg(P),R=tr(E);Oi((()=>{G&&R?.()}),[G,R]);const V=K.arrow?.x,$=K.arrow?.y,ee=K.arrow?.centerOffset!==0,[de,he]=C.useState();return Oi((()=>{T&&he(window.getComputedStyle(T).zIndex)}),[T]),M.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:G?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[K.transformOrigin?.x,K.transformOrigin?.y].join(" "),...K.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:M.jsx(jb,{scope:o,placedSide:re,onArrowChange:H,arrowX:V,arrowY:$,shouldHideArrow:ee,children:M.jsx(Wn.div,{"data-side":re,"data-align":we,..._,ref:B,style:{..._.style,animation:G?void 0:"none"}})})})}));jg.displayName=Bf;var Lg="PopperArrow",Pb={top:"bottom",right:"left",bottom:"top",left:"right"},Pg=C.forwardRef((function(a,o){const{__scopePopper:l,...s}=a,f=Lb(Lg,l),d=Pb[f.placedSide];return M.jsx("span",{ref:f.onArrowChange,style:{position:"absolute",left:f.arrowX,top:f.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[f.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[f.placedSide],visibility:f.shouldHideArrow?"hidden":void 0},children:M.jsx(Ub,{...s,ref:o,style:{...s.style,display:"block"}})})}));function Fb(i){return i!==null}Pg.displayName=Lg;var kb=i=>({name:"transformOrigin",options:i,fn(a){const{placement:o,rects:l,middlewareData:s}=a,f=s.arrow?.centerOffset!==0,d=f?0:i.arrowWidth,h=f?0:i.arrowHeight,[p,m]=Fg(o),v={start:"0%",center:"50%",end:"100%"}[m],y=(s.arrow?.x??0)+d/2,b=(s.arrow?.y??0)+h/2;let w="",E="";return p==="bottom"?(w=f?v:`${y}px`,E=-h+"px"):p==="top"?(w=f?v:`${y}px`,E=`${l.floating.height+h}px`):p==="right"?(w=-h+"px",E=f?v:`${b}px`):p==="left"&&(w=`${l.floating.width+h}px`,E=f?v:`${b}px`),{data:{x:w,y:E}}}});function Fg(i){const[a,o="center"]=i.split("-");return[a,o]}var Hb=Ng,kg=Dg,Ib=jg,Vb=Pg,fs="Popover",[Hg]=sg(fs,[Mg]),bo=Mg(),[Yb,Ui]=Hg(fs),Ig=i=>{const{__scopePopover:a,children:o,open:l,defaultOpen:s,onOpenChange:f,modal:d=!1}=i,h=bo(a),p=C.useRef(null),[m,v]=C.useState(!1),[y,b]=Ox({prop:l,defaultProp:s??!1,onChange:f,caller:fs});return M.jsx(Hb,{...h,children:M.jsx(Yb,{scope:a,contentId:Nx(),triggerRef:p,open:y,onOpenChange:b,onOpenToggle:C.useCallback((()=>b((w=>!w))),[b]),hasCustomAnchor:m,onCustomAnchorAdd:C.useCallback((()=>v(!0)),[]),onCustomAnchorRemove:C.useCallback((()=>v(!1)),[]),modal:d,children:o})})};Ig.displayName=fs;var Op="PopoverAnchor";C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,s=Ui(Op,o),f=bo(o),{onCustomAnchorAdd:d,onCustomAnchorRemove:h}=s;return C.useEffect((()=>(d(),()=>h())),[d,h]),M.jsx(kg,{...f,...l,ref:a})})).displayName=Op;var Vg="PopoverTrigger",Yg=C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,s=Ui(Vg,o),f=bo(o),d=Ni(a,s.triggerRef),h=M.jsx(Wn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Zg(s.open),...l,ref:d,onClick:Ri(i.onClick,s.onOpenToggle)});return s.hasCustomAnchor?h:M.jsx(kg,{asChild:!0,...f,children:h})}));Yg.displayName=Vg;var Nf="PopoverPortal",[qb,Gb]=Hg(Nf,{forceMount:void 0}),qg=i=>{const{__scopePopover:a,forceMount:o,children:l,container:s}=i,f=Ui(Nf,a);return M.jsx(qb,{scope:a,forceMount:o,children:M.jsx(_f,{present:o||f.open,children:M.jsx(dg,{asChild:!0,container:s,children:l})})})};qg.displayName=Nf;var or="PopoverContent",Gg=C.forwardRef(((i,a)=>{const o=Gb(or,i.__scopePopover),{forceMount:l=o.forceMount,...s}=i,f=Ui(or,i.__scopePopover);return M.jsx(_f,{present:l||f.open,children:f.modal?M.jsx(Qb,{...s,ref:a}):M.jsx(Zb,{...s,ref:a})})}));Gg.displayName=or;var Xb=lg("PopoverContent.RemoveScroll"),Qb=C.forwardRef(((i,a)=>{const o=Ui(or,i.__scopePopover),l=C.useRef(null),s=Ni(a,l),f=C.useRef(!1);return C.useEffect((()=>{const d=l.current;if(d)return $x(d)}),[]),M.jsx(yg,{as:Xb,allowPinchZoom:!0,children:M.jsx(Xg,{...i,ref:s,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ri(i.onCloseAutoFocus,(d=>{d.preventDefault(),f.current||o.triggerRef.current?.focus()})),onPointerDownOutside:Ri(i.onPointerDownOutside,(d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,m=h.button===2||p;f.current=m}),{checkForDefaultPrevented:!1}),onFocusOutside:Ri(i.onFocusOutside,(d=>d.preventDefault()),{checkForDefaultPrevented:!1})})})})),Zb=C.forwardRef(((i,a)=>{const o=Ui(or,i.__scopePopover),l=C.useRef(!1),s=C.useRef(!1);return M.jsx(Xg,{...i,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:f=>{i.onCloseAutoFocus?.(f),f.defaultPrevented||(l.current||o.triggerRef.current?.focus(),f.preventDefault()),l.current=!1,s.current=!1},onInteractOutside:f=>{i.onInteractOutside?.(f),f.defaultPrevented||(l.current=!0,f.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const d=f.target;o.triggerRef.current?.contains(d)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&s.current&&f.preventDefault()}})})),Xg=C.forwardRef(((i,a)=>{const{__scopePopover:o,trapFocus:l,onOpenAutoFocus:s,onCloseAutoFocus:f,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:v,...y}=i,b=Ui(or,o),w=bo(o);return(function(){C.useEffect((()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??up()),document.body.insertAdjacentElement("beforeend",_[1]??up()),Lu++,()=>{Lu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach((S=>S.remove())),Lu--}}),[])})(),M.jsx(fg,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:s,onUnmountAutoFocus:f,children:M.jsx(ug,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:v,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:m,onDismiss:()=>b.onOpenChange(!1),children:M.jsx(Ib,{"data-state":Zg(b.open),role:"dialog",id:b.contentId,...w,...y,ref:a,style:{...y.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),Mp="PopoverClose";C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,s=Ui(Mp,o);return M.jsx(Wn.button,{type:"button",...l,ref:a,onClick:Ri(i.onClick,(()=>s.onOpenChange(!1)))})})).displayName=Mp;var Qg=C.forwardRef(((i,a)=>{const{__scopePopover:o,...l}=i,s=bo(o);return M.jsx(Vb,{...s,...l,ref:a})}));function Zg(i){return i?"open":"closed"}Qg.displayName="PopoverArrow";var Wb=Ig,Kb=Yg,$b=qg,Jb=Gg,e2=Qg,as=function(i){var a,o,l=i.r,s=i.g,f=i.b,d=Math.max(l,s,f),h=Math.min(l,s,f),p=d,m=d-h;if(o=d===0?0:m/d,d===h)a=void 0;else{switch(d){case l:a=(s-f)/m+(s<f?6:0);break;case s:a=(f-l)/m+2;break;case f:a=(l-s)/m+4}a!==void 0&&(a/=6)}return{h:a,s:o,v:p}},yn=function(i){var a,o,l,s=i.h,f=i.s,d=i.v,h=Math.floor(6*s),p=6*s-h,m=d*(1-f),v=d*(1-p*f),y=d*(1-(1-p)*f);switch(h%6){case 0:a=d,o=y,l=m;break;case 1:a=v,o=d,l=m;break;case 2:a=m,o=d,l=y;break;case 3:a=m,o=v,l=d;break;case 4:a=y,o=m,l=d;break;case 5:a=d,o=m,l=v;break;default:throw new Error("Invalid HSV color")}return{r:a,g:o,b:l}},fo=function(i){var a=i.r,o=i.g,l=i.b;if(a=Math.round(255*a),o=Math.round(255*o),l=Math.round(255*l),isNaN(a)||isNaN(o)||isNaN(l))throw new Error("Invalid RGB color");return"#".concat(((1<<24)+(a<<16)+(o<<8)+l).toString(16).slice(1).toUpperCase())},rs=function(i){var a=parseInt(i.slice(1),16);return{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(255&a)/255}};function Bp(i){return M.jsx("div",{style:{width:i.radius?"".concat(i.radius,"px"):"20px",height:i.radius?"".concat(i.radius,"px"):"20px",borderRadius:"50%",backgroundColor:i.color,border:"2px solid var(--gray7)",boxShadow:"0 0 2px 2px rgba(0, 0, 0, 0.2)"}})}function t2(i){var a=i.colorMode,o=i.color,l=i.onChange,s=i.onCommit,f=C.useRef({h:0,s:0,v:0}),d=(function(m,v){if(v==="hex")return as(rs(m));if(v==="rgb")return as(m);if(v==="hsv")return m;throw new Error("Unsupported color mode: ".concat(v))})(o,a);d.h===void 0&&(d.h=f.current.h),d.s===void 0&&(d.s=f.current.s),d.v===void 0&&(d.v=f.current.v);var h=C.useState(0);h[0];var p=h[1];return M.jsx(n2,{hsv:d,onHSVChange:function(m,v){f.current=m;var y=(function(b,w){if(w==="hex")return fo(yn(b));if(w==="rgb")return yn(b);if(w==="hsv")return b;throw new Error("Unsupported color mode: ".concat(w))})(m,a);v&&s?s(y):l?l(y):p((function(b){return b+1}))}})}function n2(i){var a=i.hsv,o=i.onHSVChange,l=C.useState(!1),s=l[0],f=l[1],d=C.useState(!1),h=d[0],p=d[1],m=function(S,T,A){return Math.max(T,Math.min(A,S))},v=C.useState(!1),y=v[0],b=v[1],w=Ce.useRef(null),E=Ce.useRef(null);C.useLayoutEffect((function(){var S=w.current;if(S){var T=S.getContext("2d");if(T){for(var A=S.width,B=S.height,U=T.createImageData(A,B),H=0;H<B;H++)for(var X=0;X<A;X++){var k=yn({h:a.h,s:X/A,v:1-H/B}),W=k.r,J=k.g,ae=k.b,Q=4*(H*A+X);U.data[Q]=Math.round(255*W),U.data[Q+1]=Math.round(255*J),U.data[Q+2]=Math.round(255*ae),U.data[Q+3]=255}T.putImageData(U,0,0)}}}),[a.h]),C.useLayoutEffect((function(){var S=E.current;if(S){var T=S.getContext("2d");if(T){for(var A=S.width,B=S.height,U=T.createImageData(A,B),H=0;H<A;H++)for(var X=0;X<B;X++){var k=yn({h:H/A,s:1,v:1}),W=4*(X*A+H);U.data[W]=Math.round(255*k.r),U.data[W+1]=Math.round(255*k.g),U.data[W+2]=Math.round(255*k.b),U.data[W+3]=255}T.putImageData(U,0,0)}}}),[a.s,a.v]);var _=yn(a);return M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",backgroundColor:"var(--gray2)",width:"250px"},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[M.jsxs("div",{style:{height:"250px",backgroundColor:"var(--gray3)",borderRadius:"var(--borderRadiusSmall)",position:"relative",border:"2px solid var(--gray5)",cursor:"move"},onPointerDown:function(S){p(!0),S.currentTarget.setPointerCapture(S.pointerId),document.body.style.cursor="move"},onPointerMove:function(S){if(h){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,B=S.clientY-T.top,U=m(A/T.width,.01,1),H=m(1-B/T.height,.01,1);S.currentTarget.style.cursor="none",f(!0),o({h:a.h,s:U,v:H})}},onPointerUp:function(S){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,B=S.clientY-T.top,U=m(A/T.width,.01,1),H=m(1-B/T.height,.01,1);o({h:a.h,s:U,v:H},!0),S.currentTarget.releasePointerCapture(S.pointerId),S.currentTarget.style.cursor="move",document.body.style.cursor="default",p(!1),f(!1)},children:[M.jsx("div",{style:{left:"".concat(100*a.s,"%"),top:"".concat(100*(1-a.v),"%"),position:"absolute",transform:"translate(-50%, -50%)"},children:M.jsx(Bp,{color:fo(yn(a)),radius:s?30:20})}),M.jsx("canvas",{ref:w,style:{width:"100%",height:"100%"},width:250,height:250})]}),M.jsxs("div",{style:{width:"100%",height:"15px",backgroundColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",position:"relative",cursor:"move"},onPointerDown:function(S){b(!0),S.currentTarget.setPointerCapture(S.pointerId),document.body.style.cursor="ew-resize"},onPointerMove:function(S){if(y){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,B=m(A/T.width,0,.99);o({h:B,s:a.s,v:a.v})}},onPointerUp:function(S){var T=S.currentTarget.getBoundingClientRect(),A=S.clientX-T.left,B=m(A/T.width,0,.99);o({h:B,s:a.s,v:a.v},!0),b(!1),S.currentTarget.releasePointerCapture(S.pointerId),document.body.style.cursor="default"},children:[M.jsx("canvas",{ref:E,width:250,height:15,style:{width:"100%",height:"100%",top:"0",left:"0",position:"absolute",border:"2px solid var(--gray5)",borderRadius:"var(--borderRadiusSmall)"}}),M.jsx("div",{style:{left:"".concat(100*a.h,"%"),top:"50%",position:"absolute",transform:"translate(-50%, -50%)"},children:M.jsx(Bp,{color:fo(yn({h:a.h,s:1,v:1}))})})]})]}),M.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"10px",width:"100%"},children:[M.jsx(ep,{initialValue:"".concat(Math.round(255*_.r),", ").concat(Math.round(255*_.g),", ").concat(Math.round(255*_.b)),onCommit:function(S){var T=S.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(T){var A=T.map(Number);A[0];var B=A[1],U=A[2],H=A[3];if(U/=255,H/=255,!((B/=255)<0||B>1||U<0||U>1||H<0||H>1)){var X=as({r:B,g:U,b:H}),k=X.h,W=X.s,J=X.v;k||(k=a.h),W||(W=a.s),J||(J=a.v),o({h:k,s:W,v:J},!0)}}},isValid:function(S){var T=S.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(!T)return!1;var A=T.map(Number);A[0];var B=A[1],U=A[2],H=A[3];return B>=0&&B<=255&&U>=0&&U<=255&&H>=0&&H<=255}},"".concat(Math.round(255*_.r),", ").concat(Math.round(255*_.g),", ").concat(Math.round(255*_.b))),M.jsx(ep,{initialValue:fo(yn(a)),onCommit:function(S){var T=rs(S),A=T.r,B=T.g,U=T.b,H=as({r:A,g:B,b:U}),X=H.h,k=H.s,W=H.v;X||(X=a.h),k||(k=a.s),W||(W=a.v),o({h:X,s:k,v:W},!0)},isValid:function(S){var T=rs(S),A=T.r,B=T.g,U=T.b;return A>=0&&A<=255&&B>=0&&B<=255&&U>=0&&U<=255}},fo(yn(a)))]})]})}var i2="styles-modules_Content__k1G29",a2="styles-modules_Arrow__6BQL5";function r2(i){var a=i.color,o=i.colorMode,l=o===void 0?"hex":o,s=i.onChange,f=i.onCommit,d=i.styleTrigger,h=d===void 0?null:d,p=l==="hex"?rs(a):l==="rgb"?a:yn(a.h,a.s,a.v);return M.jsxs(Wb,{open:i.open,onOpenChange:i.onOpenChange,children:[M.jsx(Kb,{asChild:!0,children:M.jsx("div",{style:nt({backgroundColor:"rgb(".concat(Math.round(255*p.r),", ").concat(Math.round(255*p.g),", ").concat(Math.round(255*p.b),")"),width:"35px",height:"35px",cursor:"pointer",border:"2px solid var(--gray6)",boxShadow:"inset 0 0 0 2px var(--gray1)",borderRadius:"var(--borderRadiusSmall)"},h)})}),M.jsx($b,{children:M.jsxs(Jb,{sideOffset:5,className:i2,children:[M.jsx("div",{style:{},children:M.jsx(t2,{colorMode:"rgb",color:p,onChange:s,onCommit:f})}),M.jsx(e2,{className:a2})]})})]})}Ef(`
.styles-modules_Content__k1G29 {
    background-color: var(--gray2);
    border: 2px solid var(--gray4);
    padding: 16px;
    border-radius: var(--borderRadiusSmall);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.styles-modules_Arrow__6BQL5 {
    fill: var(--gray4);
    width: 16px;
    height: 8px;
}`);const ht=[{params:{a:1,b:1,c:1,a_delta:0,b_delta:.8,c_delta:.6},integral:0},{params:{a:1,b:2,c:1,a_delta:.6,b_delta:.4,c_delta:1},integral:0},{params:{a:1,b:3,c:1,a_delta:.6,b_delta:1,c_delta:.2},integral:0},{params:{a:2,b:3,c:1,a_delta:.4,b_delta:1,c_delta:.4},integral:0},{params:{a:5,b:3,c:1,a_delta:.4,b_delta:.4,c_delta:.2},integral:0},{params:{a:5,b:7,c:1,a_delta:.4,b_delta:.8,c_delta:.8},integral:0}];function Wg(i,a){const o=Math.cos(a.a*i+a.a_delta),l=Math.cos(a.b*i+a.b_delta),s=Math.cos(a.c*i+a.c_delta);return[o,l,s]}function o2(i,a=1e3){const o=[];for(let s=0;s<a;s++){const f=s/(a-1)*2*Math.PI,[d,h,p]=Wg(f,i);o.push([d,h,p])}let l=0;for(let s=1;s<o.length-1;s++){const[f,d,h]=o[s-1],[p,m,v]=o[s],y=Math.sqrt((p-f)**2+(m-d)**2+(v-h)**2);l+=y}return l}for(const i of ht)i.integral=o2(i.params);const l2=Math.max(...ht.map(i=>i.integral||0));function s2({params:i,stroke:a="black"}){const f=Array.from({length:100},(d,h)=>{const p=h/99*2*Math.PI,[m,v]=Wg(p,i);return[m,v]}).map(([d,h])=>[(d+1)*50,(-h+1)*50]).map(([d,h],p)=>`${p===0?"M":"L"} ${d},${h}`).join(" ");return M.jsx("svg",{style:{width:"100px",height:"100px"},viewBox:"-20 -20 140 140",children:M.jsx("path",{d:f,fill:"none",stroke:a,strokeWidth:3})})}function c2({options:i,value:a,onChange:o,style:l={}}){return M.jsx("div",{style:{gap:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",alignItems:"center",justifyContent:"center",...l},children:i.map(s=>{const f=s.value.a===a.a&&s.value.b===a.b&&s.value.c===a.c&&s.value.a_delta===a.a_delta&&s.value.b_delta===a.b_delta&&s.value.c_delta===a.c_delta;return M.jsx("div",{onClick:()=>o(s.value,s.integral),style:{border:f?"2px solid var(--gray8)":"2px solid var(--gray4)",borderRadius:4,boxSizing:"content-box",backgroundColor:f?"var(--gray4)":"var(--gray2)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:s.label??"",children:M.jsx(s2,{params:s.value,stroke:f?"var(--gray8)":"var(--gray6)"})},JSON.stringify(s.value))})})}function lo({label:i,preset:a,onClick:o}){const l=`
        linear-gradient(45deg, ${a.particleColors.map(f=>`rgb(${f.join(",")})`).join(", ")})
    `,s=a.particleColors.length;return M.jsx("div",{style:{background:l,borderRadius:"var(--borderRadiusSmall)",boxShadow:`inset 0 0 7px 5px rgba(${a.particleColors[s-1].join(",")},0.3)`,cursor:"pointer",width:"auto",padding:"8px 16px",border:`2px solid rgb(${a.particleColors[0].join(",")})`,height:"3em",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>o(a),children:M.jsx("div",{style:{color:"white",textShadow:"0 0px 3px rgba(0,0,0,0.8)",fontWeight:600},children:i})})}const so={pastelDream:{lissajousParams:ht[0].params,lissajousIntegral:ht[0].integral},burningSunset:{particleColors:[[59,6,10],[138,0,0],[200,63,18],[255,242,135]],mixingIntensity:.6,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.65,lissajousParams:ht[1].params,lissajousIntegral:ht[1].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:138},oceanBlues:{particleColors:[[84,9,218],[78,113,255],[187,251,255]],mixingIntensity:.5,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.1,lissajousParams:ht[5].params,lissajousIntegral:ht[5].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:0},hotPink:{particleColors:[[172,23,84],[229,56,136],[243,113,153],[247,168,196]],mixingIntensity:1,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.1,lissajousParams:ht[2].params,lissajousIntegral:ht[2].integral,animationSpeed:2,rotateVertical:0,rotateHorizontal:0},forestGreens:{particleColors:[[47,82,73],[151,176,103],[227,222,97]],mixingIntensity:.45,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.3,lissajousParams:ht[0].params,lissajousIntegral:ht[0].integral,animationSpeed:1.2,rotateVertical:0,rotateHorizontal:34},tropicalDisco:{particleColors:[[24,1,97],[79,23,135],[235,54,120],[251,119,60]],mixingIntensity:.3,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.7,lissajousParams:ht[5].params,lissajousIntegral:ht[5].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:0}};function Np(i,a){if(typeof i=="function")return i(a);i!=null&&(i.current=a)}function Kg(...i){return a=>{let o=!1;const l=i.map(s=>{const f=Np(s,a);return!o&&typeof f=="function"&&(o=!0),f});if(o)return()=>{for(let s=0;s<l.length;s++){const f=l[s];typeof f=="function"?f():Np(i[s],null)}}}}function $g(...i){return C.useCallback(Kg(...i),i)}function u2(i){const a=f2(i),o=C.forwardRef((l,s)=>{const{children:f,...d}=l,h=C.Children.toArray(f),p=h.find(h2);if(p){const m=p.props.children,v=h.map(y=>y===p?C.Children.count(m)>1?C.Children.only(null):C.isValidElement(m)?m.props.children:null:y);return M.jsx(a,{...d,ref:s,children:C.isValidElement(m)?C.cloneElement(m,void 0,v):null})}return M.jsx(a,{...d,ref:s,children:f})});return o.displayName=`${i}.Slot`,o}function f2(i){const a=C.forwardRef((o,l)=>{const{children:s,...f}=o;if(C.isValidElement(s)){const d=p2(s),h=m2(f,s.props);return s.type!==C.Fragment&&(h.ref=l?Kg(l,d):d),C.cloneElement(s,h)}return C.Children.count(s)>1?C.Children.only(null):null});return a.displayName=`${i}.SlotClone`,a}var d2=Symbol("radix.slottable");function h2(i){return C.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===d2}function m2(i,a){const o={...a};for(const l in a){const s=i[l],f=a[l];/^on[A-Z]/.test(l)?s&&f?o[l]=(...h)=>{const p=f(...h);return s(...h),p}:s&&(o[l]=s):l==="style"?o[l]={...s,...f}:l==="className"&&(o[l]=[s,f].filter(Boolean).join(" "))}return{...i,...o}}function p2(i){let a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning;return o?i.ref:(a=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=a&&"isReactWarning"in a&&a.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}var g2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jg=g2.reduce((i,a)=>{const o=u2(`Primitive.${a}`),l=C.forwardRef((s,f)=>{const{asChild:d,...h}=s,p=d?o:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(p,{...h,ref:f})});return l.displayName=`Primitive.${a}`,{...i,[a]:l}},{});function v2(i,a=[]){let o=[];function l(f,d){const h=C.createContext(d),p=o.length;o=[...o,d];const m=y=>{const{scope:b,children:w,...E}=y,_=b?.[i]?.[p]||h,S=C.useMemo(()=>E,Object.values(E));return M.jsx(_.Provider,{value:S,children:w})};m.displayName=f+"Provider";function v(y,b){const w=b?.[i]?.[p]||h,E=C.useContext(w);if(E)return E;if(d!==void 0)return d;throw new Error(`\`${y}\` must be used within \`${f}\``)}return[m,v]}const s=()=>{const f=o.map(d=>C.createContext(d));return function(h){const p=h?.[i]||f;return C.useMemo(()=>({[`__scope${i}`]:{...h,[i]:p}}),[h,p])}};return s.scopeName=i,[l,y2(s,...a)]}function y2(...i){const a=i[0];if(i.length===1)return a;const o=()=>{const l=i.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(f){const d=l.reduce((h,{useScope:p,scopeName:m})=>{const y=p(f)[`__scope${m}`];return{...h,...y}},{});return C.useMemo(()=>({[`__scope${a.scopeName}`]:d}),[d])}};return o.scopeName=a.scopeName,o}function x2(i,a,{checkForDefaultPrevented:o=!0}={}){return function(s){if(i?.(s),o===!1||!s.defaultPrevented)return a?.(s)}}var ev=globalThis?.document?C.useLayoutEffect:()=>{},b2=Sf[" useInsertionEffect ".trim().toString()]||ev;function w2({prop:i,defaultProp:a,onChange:o=()=>{},caller:l}){const[s,f,d]=S2({defaultProp:a,onChange:o}),h=i!==void 0,p=h?i:s;{const v=C.useRef(i!==void 0);C.useEffect(()=>{const y=v.current;y!==h&&console.warn(`${l} is changing from ${y?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,l])}const m=C.useCallback(v=>{if(h){const y=E2(v)?v(i):v;y!==i&&d.current?.(y)}else f(v)},[h,i,f,d]);return[p,m]}function S2({defaultProp:i,onChange:a}){const[o,l]=C.useState(i),s=C.useRef(o),f=C.useRef(a);return b2(()=>{f.current=a},[a]),C.useEffect(()=>{s.current!==o&&(f.current?.(o),s.current=o)},[o,s]),[o,l,f]}function E2(i){return typeof i=="function"}function _2(i){const a=C.useRef({value:i,previous:i});return C.useMemo(()=>(a.current.value!==i&&(a.current.previous=a.current.value,a.current.value=i),a.current.previous),[i])}function T2(i){const[a,o]=C.useState(void 0);return ev(()=>{if(i){o({width:i.offsetWidth,height:i.offsetHeight});const l=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const f=s[0];let d,h;if("borderBoxSize"in f){const p=f.borderBoxSize,m=Array.isArray(p)?p[0]:p;d=m.inlineSize,h=m.blockSize}else d=i.offsetWidth,h=i.offsetHeight;o({width:d,height:h})});return l.observe(i,{box:"border-box"}),()=>l.unobserve(i)}else o(void 0)},[i]),a}var ds="Switch",[C2]=v2(ds),[z2,A2]=C2(ds),tv=C.forwardRef((i,a)=>{const{__scopeSwitch:o,name:l,checked:s,defaultChecked:f,required:d,disabled:h,value:p="on",onCheckedChange:m,form:v,...y}=i,[b,w]=C.useState(null),E=$g(a,B=>w(B)),_=C.useRef(!1),S=b?v||!!b.closest("form"):!0,[T,A]=w2({prop:s,defaultProp:f??!1,onChange:m,caller:ds});return M.jsxs(z2,{scope:o,checked:T,disabled:h,children:[M.jsx(Jg.button,{type:"button",role:"switch","aria-checked":T,"aria-required":d,"data-state":rv(T),"data-disabled":h?"":void 0,disabled:h,value:p,...y,ref:E,onClick:x2(i.onClick,B=>{A(U=>!U),S&&(_.current=B.isPropagationStopped(),_.current||B.stopPropagation())})}),S&&M.jsx(av,{control:b,bubbles:!_.current,name:l,value:p,checked:T,required:d,disabled:h,form:v,style:{transform:"translateX(-100%)"}})]})});tv.displayName=ds;var nv="SwitchThumb",iv=C.forwardRef((i,a)=>{const{__scopeSwitch:o,...l}=i,s=A2(nv,o);return M.jsx(Jg.span,{"data-state":rv(s.checked),"data-disabled":s.disabled?"":void 0,...l,ref:a})});iv.displayName=nv;var R2="SwitchBubbleInput",av=C.forwardRef(({__scopeSwitch:i,control:a,checked:o,bubbles:l=!0,...s},f)=>{const d=C.useRef(null),h=$g(d,f),p=_2(o),m=T2(a);return C.useEffect(()=>{const v=d.current;if(!v)return;const y=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(y,"checked").set;if(p!==o&&w){const E=new Event("click",{bubbles:l});w.call(v,o),v.dispatchEvent(E)}},[p,o,l]),M.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...s,tabIndex:-1,ref:h,style:{...s.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});av.displayName=R2;function rv(i){return i?"checked":"unchecked"}var O2=tv,M2=iv;const Up=({label:i="Toggle Section",children:a,activeOnToggled:o=!0,onToggle:l,checked:s})=>{const f=o?s:!s;return M.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1em"},children:[M.jsx("div",{children:i}),M.jsx(O2,{className:"SwitchRoot",onCheckedChange:d=>{l(d)},checked:s,children:M.jsx(M2,{className:"SwitchThumb"})})]}),M.jsx("div",{style:{opacity:f?1:.2,pointerEvents:f?"auto":"none",userSelect:f?"auto":"none",transition:"opacity 0.2s ease-in-out"},children:a})]})},Dp=i=>{let a;const o=new Set,l=(m,v)=>{const y=typeof m=="function"?m(a):m;if(!Object.is(y,a)){const b=a;a=v??(typeof y!="object"||y===null)?y:Object.assign({},a,y),o.forEach(w=>w(a,b))}},s=()=>a,h={setState:l,getState:s,getInitialState:()=>p,subscribe:m=>(o.add(m),()=>o.delete(m))},p=a=i(l,s,h);return h},B2=(i=>i?Dp(i):Dp),N2=i=>i;function U2(i,a=N2){const o=Ce.useSyncExternalStore(i.subscribe,Ce.useCallback(()=>a(i.getState()),[i,a]),Ce.useCallback(()=>a(i.getInitialState()),[i,a]));return Ce.useDebugValue(o),o}const jp=i=>{const a=B2(i),o=l=>U2(a,l);return Object.assign(o,a),o},D2=(i=>i?jp(i):jp),Ci=D2(i=>({particleColors:[[59,6,10],[138,0,0],[200,63,18],[255,242,135]].map(a=>a.map(o=>o/255)),mixingIntensity:.6,width:1920,height:1080,noiseEnabled:!0,noiseIntensity:.65,lissajousParams:ht[1].params,lissajousIntegral:ht[1].integral,animationSpeed:1.5,rotateVertical:0,rotateHorizontal:138,showLissajousFigure:!1,exportPerfectLoop:!1,exportDuration:3,renderingInProgress:!1,updateStore:a=>i(o=>({...o,...a}))}));var Vu={exports:{}},Yu,Lp;function j2(){if(Lp)return Yu;Lp=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yu=i,Yu}var qu,Pp;function L2(){if(Pp)return qu;Pp=1;var i=j2();function a(){}function o(){}return o.resetWarningCache=a,qu=function(){function l(d,h,p,m,v,y){if(y!==i){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}l.isRequired=l;function s(){return l}var f={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:s,element:l,elementType:l,instanceOf:s,node:l,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:o,resetWarningCache:a};return f.PropTypes=f,f},qu}var Fp;function P2(){return Fp||(Fp=1,Vu.exports=L2()()),Vu.exports}var F2=P2();const vt=bf(F2);function ff(){return ff=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i},ff.apply(this,arguments)}function k2(i,a){if(i==null)return{};var o=H2(i,a),l,s;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(o[l]=i[l])}return o}function H2(i,a){if(i==null)return{};var o={},l=Object.keys(i),s,f;for(f=0;f<l.length;f++)s=l[f],!(a.indexOf(s)>=0)&&(o[s]=i[s]);return o}var Uf=C.forwardRef(function(i,a){var o=i.color,l=o===void 0?"currentColor":o,s=i.size,f=s===void 0?24:s,d=k2(i,["color","size"]);return Ce.createElement("svg",ff({ref:a,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),Ce.createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}))});Uf.propTypes={color:vt.string,size:vt.oneOfType([vt.string,vt.number])};Uf.displayName="GitHub";function df(){return df=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i},df.apply(this,arguments)}function I2(i,a){if(i==null)return{};var o=V2(i,a),l,s;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(o[l]=i[l])}return o}function V2(i,a){if(i==null)return{};var o={},l=Object.keys(i),s,f;for(f=0;f<l.length;f++)s=l[f],!(a.indexOf(s)>=0)&&(o[s]=i[s]);return o}var Df=C.forwardRef(function(i,a){var o=i.color,l=o===void 0?"currentColor":o,s=i.size,f=s===void 0?24:s,d=I2(i,["color","size"]);return Ce.createElement("svg",df({ref:a,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),Ce.createElement("circle",{cx:"12",cy:"12",r:"10"}),Ce.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),Ce.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}))});Df.propTypes={color:vt.string,size:vt.oneOfType([vt.string,vt.number])};Df.displayName="Globe";function hf(){return hf=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i},hf.apply(this,arguments)}function Y2(i,a){if(i==null)return{};var o=q2(i,a),l,s;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(o[l]=i[l])}return o}function q2(i,a){if(i==null)return{};var o={},l=Object.keys(i),s,f;for(f=0;f<l.length;f++)s=l[f],!(a.indexOf(s)>=0)&&(o[s]=i[s]);return o}var jf=C.forwardRef(function(i,a){var o=i.color,l=o===void 0?"currentColor":o,s=i.size,f=s===void 0?24:s,d=Y2(i,["color","size"]);return Ce.createElement("svg",hf({ref:a,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),Ce.createElement("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),Ce.createElement("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),Ce.createElement("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"}))});jf.propTypes={color:vt.string,size:vt.oneOfType([vt.string,vt.number])};jf.displayName="Instagram";function mf(){return mf=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i},mf.apply(this,arguments)}function G2(i,a){if(i==null)return{};var o=X2(i,a),l,s;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(i);for(s=0;s<f.length;s++)l=f[s],!(a.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(o[l]=i[l])}return o}function X2(i,a){if(i==null)return{};var o={},l=Object.keys(i),s,f;for(f=0;f<l.length;f++)s=l[f],!(a.indexOf(s)>=0)&&(o[s]=i[s]);return o}var Lf=C.forwardRef(function(i,a){var o=i.color,l=o===void 0?"currentColor":o,s=i.size,f=s===void 0?24:s,d=G2(i,["color","size"]);return Ce.createElement("svg",mf({ref:a,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),Ce.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),Ce.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"}))});Lf.propTypes={color:vt.string,size:vt.oneOfType([vt.string,vt.number])};Lf.displayName="Youtube";const Q2="_hoverLink_g6hr3_3",Yl={hoverLink:Q2};function Z2(){const i=Ci(d=>d),a=Ci(d=>d.updateStore),o=(d,h)=>{const p=i.particleColors.slice();p[d]=h,a({particleColors:p})},l=()=>a({particleColors:[...i.particleColors,[255,255,255]]}),s=d=>{i.particleColors.length!==1&&a({particleColors:i.particleColors.filter((h,p)=>p!==d)})},f=d=>{a({...d,particleColors:d.particleColors.map(h=>[h[0]/255,h[1]/255,h[2]/255])})};return M.jsxs("div",{style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100%",height:"100vh",padding:"3rem",paddingTop:"2rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem",borderBottom:"1px solid var(--gray2)"},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:"0.3rem"},children:[M.jsx(ux,{style:{width:"2rem",height:"2rem",marginBottom:"0.2rem"},color:"var(--gray4)"}),M.jsx("span",{style:{color:"var(--gray4)",fontWeight:"bold",fontSize:"1.2rem"},children:"Pins and Curves"})]}),M.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:"0.5rem"},children:[M.jsx("a",{href:"https://www.instagram.com/pinsandcurves/",target:"_blank",children:M.jsx(jf,{size:24,className:Yl.hoverLink})}),M.jsx("a",{href:"https://www.youtube.com/@pinsandcurves",target:"_blank",children:M.jsx(Lf,{size:24,className:Yl.hoverLink})}),M.jsx("a",{href:"https://github.com/mtrifonov-design/pinsandcurves-liquidlissajous",target:"_blank",children:M.jsx(Uf,{size:24,className:Yl.hoverLink})}),M.jsx("a",{href:"https://pinsandcurves.app",target:"_blank",children:M.jsx(Df,{size:24,className:Yl.hoverLink})})]})]}),M.jsx("span",{style:{color:"var(--gray7)",fontWeight:"bold",fontSize:"2em"},children:"Liquid Lissajous"}),"Pick a preset to get started",M.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[M.jsx(lo,{label:"Burning Sunset",preset:so.burningSunset,onClick:f}),M.jsx(lo,{label:"Ocean Blues",preset:so.oceanBlues,onClick:f}),M.jsx(lo,{label:"Forest Greens",preset:so.forestGreens,onClick:f}),M.jsx(lo,{label:"Hot Pink",preset:so.hotPink,onClick:f}),M.jsx(lo,{label:"Tropical Disco",preset:so.tropicalDisco,onClick:f})]}),"Customize to your liking",M.jsxs(jl,{title:"General",iconName:"settings",children:[M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["canvas size ",M.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[M.jsx(Ei,{initialValue:i.width,min:100,max:1920*2,step:10,onCommit:d=>a({width:d})}),M.jsx("span",{children:"x"}),M.jsx(Ei,{initialValue:i.height,min:100,max:1080*2,step:10,onCommit:d=>a({height:d})})]})]}),M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["animation speed ",M.jsx(Ei,{initialValue:i.animationSpeed,min:1,max:5,step:1.5,onChange:d=>{a({animationSpeed:d})}})]}),M.jsx(Up,{label:"export perfect loop",activeOnToggled:!1,checked:i.exportPerfectLoop,onToggle:d=>a({exportPerfectLoop:d}),children:M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["export duration (seconds) ",M.jsx(Ei,{initialValue:i.exportDuration,min:1,max:30,step:1,onCommit:d=>{a({exportDuration:d})}})]})})]}),M.jsxs(jl,{title:"Colors",iconName:"palette",children:[M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["mixing softness ",M.jsx(Ei,{initialValue:i.mixingIntensity,min:0,max:1,step:.01,onChange:d=>a({mixingIntensity:d})})]}),M.jsxs("fieldset",{style:{borderColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"0.5rem",alignContent:"center"},children:[M.jsx("legend",{children:"particle colours"}),i.particleColors.map((d,h)=>M.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,justifyContent:"center",borderRadius:"var(--borderRadiusSmall)",border:"1px solid var(--gray3)",padding:"0.0rem 0.5rem"},children:[M.jsx(r2,{colorMode:"rgb",color:{r:i.particleColors[h][0],g:i.particleColors[h][1],b:i.particleColors[h][2]},onChange:p=>o(h,[p.r,p.g,p.b])}),M.jsx($l,{iconName:"delete",onClick:()=>s(h)})]},h)),M.jsx(af,{text:"+ add colour",onClick:l})]})]}),M.jsxs(jl,{title:"Lissajous Knot",iconName:"all_inclusive",children:[M.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",padding:"1.5rem",borderWidth:"2px",backgroundColor:"var(--gray2)",borderRadius:"var(--borderRadiusSmall)",marginBottom:"1rem",alignItems:"center"},children:[M.jsx("div",{children:M.jsx($l,{iconName:"info",hoverBgColor:"var(--gray2)",color:"white"})}),M.jsxs("div",{children:[M.jsx("b",{style:{color:"white"},children:"What are Lissajous knots?"}),M.jsx("br",{}),"Lissajous knots are mathematical paths that are defined by equations involving sine and cosine functions. They are used here to create complex, looping paths on which color particles can move. Feel free to experiment with different parameters to create unique patterns."]})]}),M.jsx("div",{style:{},children:M.jsx(Up,{label:"display lissajous knot",checked:i.showLissajousFigure,onToggle:d=>a({showLissajousFigure:d}),children:M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[M.jsx(c2,{value:i.lissajousParams,options:ht.map(d=>({label:`${d.params.a}:${d.params.b}`,value:d.params,integral:d.integral})),onChange:(d,h)=>{a({lissajousParams:d,lissajousIntegral:h})}}),M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["horizontal rotation ",M.jsx(Ei,{initialValue:i.rotateHorizontal,min:0,max:360,step:1,onChange:d=>{a({rotateHorizontal:d})}})]}),M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["vertical rotation ",M.jsx(Ei,{initialValue:i.rotateVertical,min:0,max:360,step:1,onChange:d=>{a({rotateVertical:d})}})]})]})})})]}),M.jsx(jl,{title:"Effects",iconName:"star",children:M.jsx(M.Fragment,{children:M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["noise intensity ",M.jsx(Ei,{initialValue:i.noiseIntensity,min:0,max:1,step:.01,onChange:d=>{a({noiseIntensity:d})}})]})})})]})}function W2(){return M.jsx(Z2,{})}class sa{value;dependencyArray=[];constructor(a,o=[]){this.value=a,this.dependencyArray=o}__id;get id(){if(!this.__id)throw new Error("PreResource id not set yet");return this.__id}setId(a){this.__id=a}}function K2(i){const a={};function o(l,s){for(const[f,d]of Object.entries(l))if(f!=="data")if(d instanceof sa){const h=[...s,f].join("/");a[h]=d}else o(d,[...s,f])}return o(i,[]),a}function $2(i){for(const[a,o]of Object.entries(i))o.setId(a);for(const a of Object.values(i)){const o=a.value.signature.type;if(o==="texture"||o==="rotating-texture"){const l=a.value.drawOps;for(const s of l){const f=s.vertices;if(f.stage!=="author"||f.resource.value.signature.type!=="vertices")throw new Error("DrawOp vertices must be a PreResource");s.vertices={stage:"render",resource:f.resource.id};const d=s.instances;if(d){if(d.stage!=="author"||d.resource.value.signature.type!=="instances")throw new Error("DrawOp instances must be a PreResource");s.instances={stage:"render",resource:d.resource.id}}for(const[h,p]of Object.entries(s.uniforms)){if(p.stage!=="author"||p.resource.value.signature.type!=="uniforms")throw new Error("DrawOp uniform bindings must be PreResources");s.uniforms[h]={stage:"render",resource:p.resource.id}}for(const[h,p]of Object.entries(s.textures)){const m=p.texture,v=["texture","rotating-texture","input-texture"];if(m.stage!=="author"||!v.includes(m.resource.value.signature.type))throw new Error("DrawOp texture bindings must be PreResources");p.texture={stage:"render",resource:m.resource.id}}}}}}function J2(i,a,o,l){const s={},f={},d={};for(const[h,p]of Object.entries(i)){let m=!1;a[h]&&a[h].signature!==p.value.signature&&(m=!0);const v=o[h];if(!v)m=!0;else{const b=p.dependencyArray;if(v.length!==b.length)console.error("Dependency array length mismatch for preResourceId:",h),m=!0;else for(let w=0;w<v.length;w++)if(v[w]!==b[w]){m=!0;break}}m?f[h]=p.dependencyArray:f[h]=v;const y=p.value.signature.type;if(y==="texture"||y==="rotating-texture"){const b=p.value.drawOps;for(let w=0;w<b.length;w++){const E=h+`/drawOp_${w}/vertices`,_=h+`/drawOp_${w}/fragments`;if(m){const S=b[w].vertexShaderData;if(S.stage!=="author")throw new Error("Expected author stage for vertex shader data");const T=S.data(),A=crypto.randomUUID();s[A]=T,d[E]=A,b[w].vertexShaderData={stage:"render",data:A};const B=b[w].fragmentShaderData;if(B.stage!=="author")throw new Error("Expected author stage for fragment shader data");const U=B.data(),H=crypto.randomUUID();s[H]=U,d[_]=H,b[w].fragmentShaderData={stage:"render",data:H}}else d[E]=l[E],d[_]=l[_],b[w].vertexShaderData={stage:"render",data:l[E]},b[w].fragmentShaderData={stage:"render",data:l[_]}}}if(y==="vertices"){const b=h+"/vertices",w=h+"/indices",E=p.value,_=p.value;if(m){const S=E.verticesData;if(S.stage!=="author")throw new Error("Expected author stage for vertices data");const T=S.data(),A=crypto.randomUUID();s[A]=T,d[b]=A,E.verticesData={stage:"render",data:A};const B=_.indicesData;if(B.stage!=="author")throw new Error("Expected author stage for indices data");const U=B.data(),H=crypto.randomUUID();s[H]=U,d[w]=H,_.indicesData={stage:"render",data:H}}else d[b]=l[b],d[w]=l[w],E.verticesData={stage:"render",data:l[b]},_.indicesData={stage:"render",data:l[w]}}if(y==="instances"){const b=h+"/instances",w=p.value;if(m){const E=w.instancesData;if(E.stage!=="author")throw new Error("Expected author stage for instances data");const _=E.data(),S=crypto.randomUUID();s[S]=_,d[b]=S,w.instancesData={stage:"render",data:S}}else d[b]=l[b],w.instancesData={stage:"render",data:l[b]}}if(y==="uniforms"){const b=h+"/uniforms",w=p.value;if(m){const E=w.uniformsData;if(E.stage!=="author")throw new Error("Expected author stage for uniforms data");const _=E.data(),S=crypto.randomUUID();s[S]=_,d[b]=S,w.uniformsData={stage:"render",data:S}}else d[b]=l[b],w.uniformsData={stage:"render",data:l[b]}}if(y==="input-texture"){const b=h+"/input-texture",w=p.value;if(m){const E=w.inputTextureData;if(E.stage!=="author")throw new Error("Expected author stage for input texture data");const _=E.data(),S=crypto.randomUUID();s[S]=_,d[b]=S,w.textureData={stage:"render",data:S}}else d[b]=l[b],w.textureData={stage:"render",data:l[b]}}}return[s,f,d]}function ew(i,a){const o=[],l=a[i];if(!l)throw new Error(`Resource with ID ${i} not found in graph`);switch(l.signature.type){case"vertices":o.push(l.verticesData.data),o.push(l.indicesData.data);break;case"instances":o.push(l.instancesData.data);break;case"uniforms":o.push(l.uniformsData.data);break;case"input-texture":o.push(l.textureData.data);break;case"rotating-texture":case"texture":break;default:throw new Error(`Unknown resource type: ${l.signature.type}`)}return o}class tw{assetRegistry={graphId:"",blobIds:[]};blobMap={};dependencyArrays={};graph={};constructor(){}update(a){const o=K2(a);$2(o);const[l,s,f]=J2(o,this.graph,this.dependencyArrays,this.blobMap);this.dependencyArrays=s,this.blobMap=f;const d=crypto.randomUUID(),h={};for(const[y,b]of Object.entries(o))h[y]=b.value;const p=Object.entries(h).map(([y,b])=>ew(y,h)).flat(1),m=[...this.assetRegistry.blobIds].filter(y=>!p.includes(y)),v=[this.assetRegistry.graphId,...m];return this.assetRegistry={graphId:d,blobIds:p},{graphId:this.assetRegistry.graphId,addedAssets:{...l,[d]:h},deletedAssetIds:v}}}function nw(i){const a=[];if(i.vertices.stage!=="render")throw new Error("Only render stage draw ops are supported");if(a.push(i.vertices.resource),i.instances&&i.instances.stage!=="render")throw new Error("Only render stage draw ops are supported");i.instances&&a.push(i.instances.resource);for(const o of Object.values(i.uniforms)){if(o.stage!=="render")throw new Error("Only render stage draw ops are supported");a.push(o.resource)}if(i.textures)for(const o of Object.values(i.textures)){if(o.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");a.push(o.texture.resource)}return a}function iw(i,a){const o=[];for(const[l,s]of Object.entries(a))switch(s.signature.type){case"vertices":case"instances":case"uniforms":case"input-texture":break;case"rotating-texture":case"texture":for(const f of s.drawOps)if(nw(f).includes(i)){o.push(l);break}break;default:throw new Error(`Unknown resource type: ${s.signature.type}`)}return o}function Ye(i,a,o){return`${i}::${JSON.stringify(a)}${o!==void 0?`::${o}`:""}`}function aw(i,a,o){function l(s){const f=iw(s,a);for(const d of f)if(!o[d]){const h=Ye(d,a[d].signature);o[h]=!0,l(d)}}l(i)}function rw(i,a,o){const l={};for(let s of Object.keys(a)){const f=Ye(s,a[s].signature);if(o[f]){l[f]=!0;continue}let d=!1;const h=i[s];h||(d=!0);const p=a[s];JSON.stringify(h)!==JSON.stringify(p)&&(d=!0),d&&(l[f]=!0),aw(s,a,l)}return l}function ow(i,a){const o=a[i];if(!o)throw new Error(`Resource ${i} not found in graph`);switch(o.signature.type){case"vertices":case"instances":case"uniforms":case"input-texture":return[];case"rotating-texture":case"texture":const l=[];for(const s of o.drawOps){if(s.vertices.stage!=="render")throw new Error("Only render stage draw ops are supported");if(l.push(s.vertices.resource),s.instances){if(s.instances.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(s.instances.resource)}for(const f of Object.values(s.uniforms)){if(f.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(f.resource)}if(s.textures)for(const f of Object.values(s.textures)){if(f.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");l.push(f.texture.resource)}}return l;default:throw new Error(`Unknown resource type: ${o.signature.type}`)}}function Pf(i,a){const o=new Set,l=new Set,s=[];function f(d){if(!o.has(d)){if(l.has(d))throw new Error("Graph has cycles, topological sort not possible");if(l.add(d),i[d]){const h=ow(d,i);for(const p of h)f(p)}else throw new Error(`Resource ${d} not found in graph`);l.delete(d),o.add(d),s.push(d)}}return f(a),s}function pf(i){return JSON.stringify(i)}function kp(i,a,o,l,s,f){if(!(a in i))i[a]={firstUseRenderPassIdx:o,lastUseRenderPassIdx:s,firstUseDrawOpIdx:l,lastUseDrawOpIdx:f};else{const d=i[a];d.firstUseDrawOpIdx=d.firstUseRenderPassIdx===o?Math.min(d.firstUseDrawOpIdx,l):l,d.lastUseDrawOpIdx=d.lastUseRenderPassIdx===s?Math.max(d.lastUseDrawOpIdx,f):f,d.firstUseRenderPassIdx=Math.min(d.firstUseRenderPassIdx,o),d.lastUseRenderPassIdx=Math.max(d.lastUseRenderPassIdx,s)}}function ov(i){const a=i.filter(([l,s])=>s.signature.type==="texture").map(([l,s])=>l),o={};for(let l=0;l<i.length;l++){const s=i[l][0];a.includes(s)&&kp(o,s,l,0,l,i[l][1].drawOps.length-1);for(let f=0;f<i[l][1].drawOps.length;f++){const d=i[l][1].drawOps[f],h=Object.values(d.textures).map(p=>{if(p.texture.stage!=="render")throw new Error("Only render stage draw ops are supported");return p.texture.resource});for(const p of h)a.includes(p)&&kp(o,s,l,f,l,f)}}return o}function hs(i,a,o){return{type:"program",fragmentShader:o[i.fragmentShaderData.data],vertexShader:o[i.vertexShaderData.data],vertexSignature:a[i.vertices.resource].signature,instanceSignature:i.instances?a[i.instances.resource].signature:void 0,uniformSignatures:Object.fromEntries(Object.entries(i.uniforms).map(([l,s])=>[l,a[s.resource].signature])),textures:Object.fromEntries(Object.entries(i.textures).map(([l,s])=>[l,{textureSignature:a[s.texture.resource].signature,sampler:s.sampler}]))}}function lw(i,a,o){const l={namedResources:{},freeResources:{}};for(const[p,m]of Object.entries(a))if(["input-texture","vertices","instances","uniforms"].includes(m.signature.type)&&(l.namedResources[Ye(p,m.signature)]=m.signature),m.signature.type==="rotating-texture")for(let v=0;v<m.signature.historyLength;v++)l.namedResources[Ye(p,m.signature,v)]=m.signature;const s=Pf(a,o).filter(p=>a[p].signature.type==="texture"||a[p].signature.type==="rotating-texture").map(p=>[p,a[p]]),f=new Set;for(const p of s)for(const m of p[1].drawOps){const v=hs(m,a,i),y=Ye("program",v);f.add(y),l.namedResources[y]=v}const d=ov(s),h=new Set;for(const p of Object.keys(d)){const m=a[p].signature,v=pf(m);h.add(v)}for(const p of h){const m=Object.entries(d).filter(([y,b])=>{const w=a[y].signature;return pf(w)===p});let v=0;for(let y=0;y<s.length;y++)for(let b=0;b<s[y][1].drawOps.length;b++){let w=0;for(const[E,_]of m)_.firstUseRenderPassIdx<=y&&_.lastUseRenderPassIdx>=y&&_.firstUseDrawOpIdx<=b&&_.lastUseDrawOpIdx>=b&&w++;w>v&&(v=w)}l.freeResources[p]=[a[m[0][0]].signature,v+1]}return l}function sw(i,a,o){const l={namedResources:{...i.namedResources},freeResources:{...i.freeResources}};for(const s in a.namedResources)if(!(s in l.namedResources)){const f=a.namedResources[s],d=o.createResource(f);l.namedResources[s]={persistent:!0,gpuResource:d,signature:f}}for(const s in l.namedResources)l.namedResources[s].persistent&&(s in a.namedResources||(o.releaseResource(l.namedResources[s].gpuResource),delete l.namedResources[s]));for(const s in a.freeResources){const f=a.freeResources[s][0],d=a.freeResources[s][1];s in l.freeResources||(l.freeResources[s]={signature:f,gpuResources:[]});let h=l.freeResources[s].gpuResources.length;const p=Object.values(l.namedResources).filter(m=>!m.persistent&&JSON.stringify(m.signature)===JSON.stringify(f)).map(m=>m.gpuResource);for(h+=p.length;h!==d;)if(h<d){const m=o.createResource(f);l.freeResources[s].gpuResources.push(m),h++}else if(l.freeResources[s].gpuResources.length>0){const m=l.freeResources[s].gpuResources.pop();o.releaseResource(m),h--}else{const m=p.pop();o.releaseResource(m),h--}for(const m in l.freeResources)if(!(m in a.freeResources)){for(const y of l.freeResources[m].gpuResources)o.releaseResource(y);const v=Object.values(l.namedResources).filter(y=>!y.persistent&&JSON.stringify(y.signature)===JSON.stringify(l.freeResources[m].signature)).map(y=>y.gpuResource);for(const y of v)o.releaseResource(y);delete l.freeResources[m]}}return l}function lv(i){return{instanceProviderName:"WebGLInstanceProvider",instanceStructure:Object.keys(i.attributes).map(a=>({name:a,type:i.attributes[a]})),maxInstanceCount:i.maxInstanceCount}}class sv{gl;instanceProviderSignature;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");const l=lv(o);this.instanceProviderSignature=l,this.setup()}instanceBuffer=null;instanceStructureObject=[];dispose(){this.instanceBuffer&&(this.gl.deleteBuffer(this.instanceBuffer),this.instanceBuffer=null)}setup(){if(this.instanceBuffer=this.gl.createBuffer(),!this.instanceBuffer)throw new Error("Failed to create instance buffer");const a=[];for(let o=0;o<this.instanceProviderSignature.instanceStructure.length;o++){const l=this.instanceProviderSignature.instanceStructure[o];a.push({...l,layoutIdx:o})}this.instanceStructureObject=a,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.instanceBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.instanceProviderSignature.maxInstanceCount*this.getBufferRowSize(this.instanceStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}getPropertyTypeSize(a){switch(a){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${a}`)}}getBufferRowSize(a){return a.reduce((o,l)=>{switch(l.type){case"float":case"int":return o+4;case"vec2":return o+8;case"vec4":return o+16;default:throw new Error(`Unknown vertex type: ${l.type}`)}},0)}setData(a,o,l,s){const f=new ArrayBuffer(this.getBufferRowSize(o)*l);for(let d=0;d<l;d++)for(const h of Object.keys(a)){const p=o.find(m=>m.name===h);if(p){const m=d*this.getBufferRowSize(o)+this.getBufferRowSize(o.slice(0,o.indexOf(p))),v=new DataView(f);let y;switch(p.type){case"float":case"vec2":case"vec4":y=(E,_)=>v.setFloat32(_,E,!0);break;case"int":y=(E,_)=>v.setInt32(_,E,!0);break;default:throw new Error(`Unknown vertex type: ${p.type}`)}const b=a[h],w=this.getPropertyTypeSize(p.type);for(let E=0;E<w;E++)E<b.length&&y(b[d*w+E],m+E*4)}}if(!s)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,f),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setInstanceData(a){if(!this.instanceBuffer)throw new Error("Instance buffer is not initialized. Call setup() first.");this.setData(a,this.instanceStructureObject,this.instanceProviderSignature.maxInstanceCount,this.instanceBuffer)}}function cv(i){return{vertexProviderName:"WebGLVertexProvider",vertexStructure:Object.keys(i.attributes).map(a=>({name:a,type:i.attributes[a]})),maxVertexCount:i.maxVertexCount,maxTriangleCount:i.maxTriangleCount}}class uv{gl;vertexProviderSignature;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.vertexProviderSignature=cv(o),this.setup()}dispose(){this.vertexBuffer&&(this.gl.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),this.indexBuffer&&(this.gl.deleteBuffer(this.indexBuffer),this.indexBuffer=null)}vertexBuffer=null;indexBuffer=null;vertexStructureObject=[];setup(){if(this.vertexBuffer=this.gl.createBuffer(),this.indexBuffer=this.gl.createBuffer(),!this.vertexBuffer||!this.indexBuffer)throw new Error("Failed to create vertex or index buffer");const a=[];for(let l=0;l<this.vertexProviderSignature.vertexStructure.length;l++){const s=this.vertexProviderSignature.vertexStructure[l];a.push({...s,layoutIdx:l})}this.vertexStructureObject=a,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexProviderSignature.maxVertexCount*this.getBufferRowSize(this.vertexStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const o=this.vertexProviderSignature.maxTriangleCount*3;this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o*Uint16Array.BYTES_PER_ELEMENT,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}getPropertyTypeSize(a){switch(a){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${a}`)}}getBufferRowSize(a){return a.reduce((o,l)=>{switch(l.type){case"float":case"int":return o+4;case"vec2":return o+8;case"vec4":return o+16;default:throw new Error(`Unknown vertex type: ${l.type}`)}},0)}setData(a,o,l,s){const f=new ArrayBuffer(this.getBufferRowSize(o)*l);for(let d=0;d<l;d++)for(const h of Object.keys(a)){const p=o.find(m=>m.name===h);if(p){const m=d*this.getBufferRowSize(o)+this.getBufferRowSize(o.slice(0,o.indexOf(p))),v=new DataView(f);let y;switch(p.type){case"float":case"vec2":case"vec4":y=(E,_)=>v.setFloat32(_,E,!0);break;case"int":y=(E,_)=>v.setInt32(_,E,!0);break;default:throw new Error(`Unknown vertex type: ${p.type}`)}const b=a[h],w=this.getPropertyTypeSize(p.type);for(let E=0;E<w;E++)E<b.length&&y(b[d*w+E],m+E*4)}}if(!s)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,f),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setVertexData(a){if(!this.vertexBuffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.setData(a,this.vertexStructureObject,this.vertexProviderSignature.maxVertexCount,this.vertexBuffer)}setIndexData(a){if(!this.indexBuffer)throw new Error("Index buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const o=new Uint16Array(a);this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,o),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}}function fv(i,a){return{uniformProviderName:a||"WebGLUniformProvider",uniformStructure:Object.keys(i.bindings).map(o=>({name:o,type:i.bindings[o]}))}}class dv{gl;uniformStructure;uniformProviderName;constructor(a,o){const{uniformProviderName:l,uniformStructure:s}=fv(o);if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.uniformProviderName=l,this.uniformStructure=s,this.setup()}dispose(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=null)}buffer=null;setup(){const a=this.gl.createBuffer();if(!a)throw new Error("Failed to create uniform buffer");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,a),this.gl.bufferData(this.gl.UNIFORM_BUFFER,this.uniformBufferSize,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null),this.buffer=a}getUniformSize(a){const o=this.uniformStructure.find(s=>s.name===a);if(!o)throw new Error(`Uniform ${a} not found in structure`);const l=o.type;switch(l){case"float":return 4;case"vec2":return 8;case"vec3":return 16;case"vec4":return 16;case"mat3":case"mat3x3":return 64;case"mat4":case"mat4x4":return 64;case"int":return 4;case"ivec2":return 8;case"ivec3":return 16;case"ivec4":return 16;default:throw new Error(`Unknown uniform type: ${l}`)}}getUniformType(a){const o=this.uniformStructure.find(s=>s.name===a);if(!o)throw new Error(`Uniform ${a} not found in structure`);const l=o.type;switch(l){case"float":case"vec2":case"vec3":case"vec4":case"mat3":case"mat3x3":case"mat4":case"mat4x4":return"float";case"int":case"ivec2":case"ivec3":case"ivec4":return"int";default:throw new Error(`Unknown uniform type: ${l}`)}}getUniformOffset(a){let o=0;for(let l=0;l<this.uniformStructure.length;l++){const s=this.uniformStructure[l];if(s.name===a)return o;o+=this.getUniformSize(s.name)}throw new Error(`Uniform ${a} not found in structure`)}get uniformBufferSize(){const a=this.uniformStructure.reduce((o,l)=>{const s=this.getUniformSize(l.name);return o+s},0);return Math.ceil(a/16)*16}setUniforms(a){if(!this.buffer)throw new Error("Uniform buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,this.buffer);for(const o of Object.keys(a)){const l=a[o],s=this.getUniformOffset(o),f=this.getUniformSize(o),d=this.getUniformType(o);if(Array.isArray(l)){if(l.length*4!==f)throw new Error(`Uniform ${o} has incorrect size. Expected ${f/4} elements, got ${l.length}`);const h=d==="int"?new Int32Array(l):new Float32Array(l);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,s,h)}else if(typeof l=="number"){if(f!==4)throw new Error(`Uniform ${o} has incorrect size. Expected ${f/4} elements, got 1`);const h=d==="int"?new Int32Array([l]):new Float32Array([l]);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,s,h)}else throw new Error(`Uniform ${o} has unsupported type. Expected number or array, got ${typeof l}`)}this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null)}}const Gu=(i,a)=>{switch(i){case"RGBA8":return{internalFormat:a.RGBA8,format:a.RGBA,type:a.UNSIGNED_BYTE};case"R8":return{internalFormat:a.R8,format:a.RED,type:a.UNSIGNED_BYTE};case"R32F":return{internalFormat:a.R32F,format:a.RED,type:a.FLOAT};case"RGBA32F":return{internalFormat:a.RGBA32F,format:a.RGBA,type:a.FLOAT};default:throw new Error("Unknown texture type")}};function cw(i){return{shape:[i.width,i.height],type:i.format.toUpperCase(),createFramebuffer:i.type==="texture"||i.type==="rotating-texture"}}class hv{description;gl;constructor(a,o){this.gl=a,this.description=cw(o),this.setup()}dispose(){this.framebuffer&&(this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteRenderbuffer(this.depthRenderbuffer),this.framebuffer=null,this.depthRenderbuffer=null),this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}framebuffer=null;texture=null;depthRenderbuffer=null;setup(){const{internalFormat:a,format:o,type:l}=Gu(this.description.type,this.gl);if(this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,this.description.shape[0],this.description.shape[1],0,o,l,null),this.description.createFramebuffer){if(this.framebuffer=this.gl.createFramebuffer(),!this.framebuffer)throw new Error("Failed to create framebuffer");this.depthRenderbuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthRenderbuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.description.shape[0],this.description.shape[1]),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthRenderbuffer);const s=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(s!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error(`Framebuffer is not complete: ${s}`);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}this.gl.bindTexture(this.gl.TEXTURE_2D,null)}setData(a){if(!this.texture)throw new Error("Texture not initialized");const{format:o,type:l}=Gu(this.description.type,this.gl),[s,f]=this.description.shape,d=this.gl;if(d.bindTexture(d.TEXTURE_2D,this.texture),d.pixelStorei(d.UNPACK_ALIGNMENT,1),a instanceof HTMLImageElement){const{internalFormat:h}=Gu(this.description.type,d);d.texImage2D(d.TEXTURE_2D,0,h,o,l,a)}else if(a instanceof Float32Array||a instanceof Uint8Array)d.texSubImage2D(d.TEXTURE_2D,0,0,0,s,f,o,l,a);else{let h=null;this.description.type==="RGBA8"||this.description.type==="R8"?h=new Uint8Array(a):(this.description.type==="R32F"||this.description.type==="RGBA32F")&&(h=new Float32Array(a)),h&&d.texSubImage2D(d.TEXTURE_2D,0,0,0,s,f,o,l,h)}d.bindTexture(d.TEXTURE_2D,null)}}function uw(i){return{vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniformProviderSignatures:Object.entries(i.uniformSignatures).map(([a,o])=>fv(o,a)),vertexProviderSignature:cv(i.vertexSignature),instanceProviderSignature:i.instanceSignature?lv(i.instanceSignature):void 0,textureNames:Object.keys(i.textures)}}function Hp(i){let a=`layout(std140) uniform ${i.uniformProviderName} {
`;for(const o of i.uniformStructure)a+=`    ${o.type} ${o.name};
`;return a+=`};
`,a}function fw(i,a){let o="";for(let l=0;l<i.vertexStructure.length;l++){const s=i.vertexStructure[l];o+=`layout(location = ${l}) in ${s.type} ${s.name};
`}if(a)for(let l=0;l<a.instanceStructure.length;l++){const s=a.instanceStructure[l];o+=`layout(location = ${l+i.vertexStructure.length}) in ${s.type} ${s.name};
`}return o}class dw{gl;programDescription;program=null;constructor(a,o){if(this.gl=a,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.programDescription=uw(o),this.setup()}dispose(){this.program&&(this.gl.deleteProgram(this.program),this.program=null)}setup(){const a=`#version 300 es
        precision highp float;
        precision highp int;
        ${this.programDescription.uniformProviderSignatures.map(f=>Hp(f)).join(`
`)}
        ${fw(this.programDescription.vertexProviderSignature,this.programDescription.instanceProviderSignature)}
        ${this.programDescription.textureNames.map(f=>`uniform sampler2D ${f};`).join(`
`)}
        ${this.programDescription.vertexShader}
        `,o=`#version 300 es
        precision highp float;
        precision highp int;
        out vec4 outColor;
        ${this.programDescription.uniformProviderSignatures.map(f=>Hp(f)).join(`
`)}
        ${this.programDescription.textureNames.map(f=>`uniform sampler2D ${f};`).join(`
`)}
        ${this.programDescription.fragmentShader}
        `,l=this.gl.createShader(this.gl.VERTEX_SHADER);if(!l)throw new Error("Failed to create vertex shader");if(this.gl.shaderSource(l,a),this.gl.compileShader(l),!this.gl.getShaderParameter(l,this.gl.COMPILE_STATUS)){const f=this.gl.getShaderInfoLog(l);throw this.gl.deleteShader(l),console.log(a),new Error(`Vertex shader compilation failed: ${f}`)}const s=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(!s)throw new Error("Failed to create fragment shader");if(this.gl.shaderSource(s,o),this.gl.compileShader(s),!this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)){const f=this.gl.getShaderInfoLog(s);throw this.gl.deleteShader(s),console.log(o),new Error(`Fragment shader compilation failed: ${f}`)}if(this.program=this.gl.createProgram(),!this.program)throw new Error("Failed to create program");if(this.gl.attachShader(this.program,l),this.gl.attachShader(this.program,s),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){const f=this.gl.getProgramInfoLog(this.program);throw this.gl.deleteProgram(this.program),new Error(`Program linking failed: ${f}`)}this.gl.deleteShader(l),this.gl.deleteShader(s)}}function hw(i,a,o,l,s,f){const d=Ye(i,a.signature),h=f.namedResources[d].gpuResource,p=s.getResource(h);switch(a.signature.type){case"vertices":if(!(p instanceof uv))throw new Error(`uploadResourceData: Expected ${i} to be VertexProvider.`);const m=l[a.verticesData.data],v=l[a.indicesData.data];p.setVertexData(m),p.setIndexData(v);break;case"instances":if(!(p instanceof sv))throw new Error(`uploadResourceData: Expected ${i} to be InstanceProvider.`);const y=l[a.instancesData.data];p.setInstanceData(y);break;case"uniforms":if(!(p instanceof dv))throw new Error(`uploadResourceData: Expected ${i} to be UniformProvider.`);const b=l[a.uniformsData.data];p.setUniforms(b);break;case"input-texture":if(!(p instanceof hv))throw new Error(`uploadResourceData: Expected ${i} to be TextureProvider.`);const w=l[a.textureData.data];p.setData(w);break;default:throw new Error(`uploadResourceData: Not an input resource. Wrong resource signature type ${a.signature.type}`)}}function mw(i,a,o,l,s,f){const d={...s},h=i[a],p=["input-texture","vertices","instances","uniforms"],m=Pf(h,o).filter(v=>p.includes(h[v].signature.type)).map(v=>{const y=h[v].signature,b=Ye(v,y);return[v,b]}).filter(([v,y])=>Object.keys(d).includes(y));for(const[v,y]of m)delete d[y];for(const[v,y]of m){const b=h[v],w=b.signature,E=Ye(v,w);l.namedResources[E],hw(v,b,i[a],i,f,l)}return d}function pw(i,a){for(const[o,l]of Object.entries(i)){const s=l.signature;if(Ye(o,s)===a)return o}throw new Error(`Could not find virtual resource for physical id ${a}`)}function gw(i,a,o,l,s,f,d){const h=pf(o),p=Ye(a,o),m=l.freeResources[h];if(l.namedResources[p]!==void 0)return l.namedResources[p].gpuResource;if(m.gpuResources.length>0){const v=m.gpuResources.pop();return l.namedResources[p]={signature:o,persistent:!1,gpuResource:v},v}else{const v=Object.entries(l.namedResources).filter(([w,E])=>JSON.stringify(E.signature)===JSON.stringify(o)).map(([w,E])=>w).filter(w=>{const E=pw(i,w),_=s[E];return _.lastUseRenderPassIdx<f||_.firstUseRenderPassIdx>f||_.lastUseRenderPassIdx===f&&_.lastUseDrawOpIdx<d});if(v.length===0)throw new Error("No available transient texture could be found for allocation. This should never happen.");const y=v[0],b=l.namedResources[y].gpuResource;return delete l.namedResources[y],l.namedResources[p]={signature:o,persistent:!1,gpuResource:b},b}}function vw(i,a,o,l,s,f,d,h){const p=hs(o,a,h),m=Ye("program",p),v=l.namedResources[m].gpuResource,y=i.getResource(v),b=o.textures;let w=0;for(const[E,_]of Object.entries(b))yw(E,_,w,i,a,o,l,s,f,d,y),w++}function yw(i,a,o,l,s,f,d,h,p,m,v){const y=l.gl,b=a.texture.resource,w=s[b].signature,E=Ye(b,w),_=d.namedResources[E].gpuResource,S=l.getResource(_);y.useProgram(v.program);const T=y.getUniformLocation(v.program,i);if(T===null)throw new Error("Something went wrong");y.activeTexture(y.TEXTURE0+o),y.bindTexture(y.TEXTURE_2D,S.texture);const A=a.sampler,B=A.filter==="linear"?y.LINEAR:y.NEAREST,U=A.wrap==="repeat"?y.REPEAT:y.CLAMP_TO_EDGE;y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,B),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,B),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,U),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,U),y.uniform1i(T,o)}function xw(i,a,o,l,s){const f=o.uniforms,d=hs(o,a,s),h=Ye("program",d),p=l.namedResources[h].gpuResource,m=i.getResource(p),v=i.gl;let y=0;for(const[b,w]of Object.entries(f)){const E=w.resource,_=a[E].signature,S=Ye(E,_),T=l.namedResources[S].gpuResource,A=i.getResource(T);v.bindBuffer(v.UNIFORM_BUFFER,A.buffer),v.bindBufferBase(v.UNIFORM_BUFFER,y,A.buffer);const B=v.getUniformBlockIndex(m.program,b);v.uniformBlockBinding(m.program,B,y),y++}}function Ip(i){switch(i){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${i}`)}}function Vp(i,a){switch(i){case"float":case"vec2":case"vec4":return a.FLOAT;case"int":return a.INT;default:throw new Error(`Unknown vertex type: ${i}`)}}function ql(i){return i.reduce((a,o)=>{switch(o.type){case"float":case"int":return a+4;case"vec2":return a+8;case"vec4":return a+16;default:throw new Error(`Unknown vertex type: ${o.type}`)}},0)}function bw(i,a,o,l,s){const f=i.gl,d=a[o].signature,h=Ye(o,d),p=s.namedResources[h].gpuResource,m=i.getResource(p),v=f.getParameter(f.MAX_VERTEX_ATTRIBS);for(let A=0;A<v;A++)f.disableVertexAttribArray(A),f.vertexAttribDivisor(A,0);f.bindBuffer(f.ARRAY_BUFFER,m.vertexBuffer),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,m.indexBuffer);const y=m.vertexStructureObject;for(let A=0;A<y.length;A++){const B=y[A],U=B.layoutIdx;f.enableVertexAttribArray(U),f.vertexAttribPointer(U,Ip(B.type),Vp(B.type,f),!1,ql(y),ql(y.slice(0,A))),f.enableVertexAttribArray(U)}if(f.bindBuffer(f.ARRAY_BUFFER,null),!l)return;const b=a[l].signature,w=Ye(l,b),E=s.namedResources[w].gpuResource,_=i.getResource(E),S=y.length;f.bindBuffer(f.ARRAY_BUFFER,_.instanceBuffer);const T=_.instanceStructureObject;for(let A=0;A<T.length;A++){const B=T[A],U=S+B.layoutIdx;f.enableVertexAttribArray(U),f.vertexAttribPointer(U,Ip(B.type),Vp(B.type,f),!1,ql(T),ql(T.slice(0,A))),f.enableVertexAttribArray(U),f.vertexAttribDivisor(U,1)}f.bindBuffer(f.ARRAY_BUFFER,null)}function ww(i,a,o,l,s,f,d,h){const p=f.gl;p.disable(p.BLEND),p.disable(p.DEPTH_TEST),i.depthTest===!0&&(p.disable(p.BLEND),p.enable(p.DEPTH_TEST)),i.blendMode!==void 0&&(i.blendMode==="additive"&&(p.enable(p.BLEND),p.blendFunc(p.SRC_ALPHA,p.ONE)),i.blendMode==="alpha"&&(p.enable(p.BLEND),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA)));const m=l[i.vertices.resource],v=i.instances!==void 0,y=v?l[i.instances.resource]:void 0;bw(f,l,i.vertices.resource,i.instances?.resource,s),xw(f,l,i,s,h),vw(f,l,i,s,d,a,o,h);const b=hs(i,l,h),w=Ye("program",b),E=s.namedResources[w].gpuResource,_=f.getResource(E);p.useProgram(_.program),v?p.drawElementsInstanced(p.TRIANGLES,m.triangleCount*3,p.UNSIGNED_SHORT,0,y.instanceCount):p.drawElements(p.TRIANGLES,m.triangleCount*3,p.UNSIGNED_SHORT,0),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null)}function Sw(i,a,o,l,s,f,d){const h=s.gl,p=a[i],m=p.signature,v=m.type==="rotating-texture",y=Ye(i,m,v?0:void 0),b=v?o.namedResources[y].gpuResource:gw(a,i,m,o,l,f,0),w=s.getResource(b);h.viewport(0,0,m.width,m.height),h.bindFramebuffer(h.FRAMEBUFFER,w.framebuffer),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),h.depthFunc(h.LEQUAL),["r32f","r16f","rgba32f","rgba16f"].includes(m.format)&&(h.disable(h.BLEND),h.disable(h.DEPTH_TEST));let E=0;for(const _ of p.drawOps)ww(_,f,E,a,o,s,l,d),E++}function Ew(i,a,o,l,s,f){const d=Ye(o,i[a][o].signature),h=l.namedResources[d]!==void 0,p=s[d]!==void 0;if(h&&!p)return console.log("Skipping render passes, target texture is resident and not dirty"),[s,l];const m={...s},v={namedResources:{...l.namedResources},freeResources:{...l.freeResources}},y=Pf(i[a],o).filter(E=>["rotating-texture","texture"].includes(i[a][E].signature.type)).filter((E=>{const _=i[a][E].signature,S=Ye(E,_),T=v.namedResources[S]!==void 0;return m[S]!==void 0||!T})).map(E=>[E,i[a][E]]),b=ov(y);let w=0;for(const[E,_]of y){Sw(E,i[a],v,b,f,w,i),w++;const S=Ye(E,_.signature);m[S]&&delete m[S]}return[m,v]}function _w(i,a,o,l){const s=o[l].signature,f=Ye(l,s),d=a.namedResources[f].gpuResource,h=i.getResource(d),p=i.gl;p.bindFramebuffer(p.READ_FRAMEBUFFER,h.framebuffer),p.bindFramebuffer(p.DRAW_FRAMEBUFFER,null);const m=p.canvas;p.blitFramebuffer(0,0,s.width,s.height,0,0,m.width,m.height,p.COLOR_BUFFER_BIT,p.LINEAR)}function Tw(i,a,o,l){const s=o[l].signature,f=Ye(l,s),d=a.namedResources[f].gpuResource,h=i.getResource(d),p=i.gl;p.bindFramebuffer(p.FRAMEBUFFER,h.framebuffer);const m=s.width,v=s.height,y=new Uint8Array(m*v*4);p.readPixels(0,0,m,v,p.RGBA,p.UNSIGNED_BYTE,y),p.bindFramebuffer(p.FRAMEBUFFER,null);const b=m*4;for(let w=0;w<Math.floor(v/2);w++){const E=w*b,_=(v-w-1)*b;for(let S=0;S<b;S++){const T=y[E+S];y[E+S]=y[_+S],y[_+S]=T}}return y}class Cw{GPUBackend;constructor(a){this.GPUBackend=a}assets;graphId;dirtyResources={};submit(a,o){const l=this.graphId,s=this.assets;this.graphId=a,this.assets=o;const f=rw(l?s[l]:{},o[a],this.dirtyResources);this.dirtyResources=f}physicalResourceMap={namedResources:{},freeResources:{}};synchronize(a){if(!this.graphId||!this.assets)throw new Error("No assets submitted to Drawing");const o=this.assets[this.graphId],l=lw(this.assets,o,a);this.physicalResourceMap=sw(this.physicalResourceMap,l,this.GPUBackend)}materialize(a){if(!this.graphId||!this.assets)throw new Error("No assets submitted to Drawing");{const o=mw(this.assets,this.graphId,a,this.physicalResourceMap,this.dirtyResources,this.GPUBackend);this.dirtyResources=o}{const[o,l]=Ew(this.assets,this.graphId,a,this.physicalResourceMap,this.dirtyResources,this.GPUBackend);this.dirtyResources=o,this.physicalResourceMap=l}}readback(a){if(!this.graphId||!this.assets)throw new Error("Error");return Tw(this.GPUBackend,this.physicalResourceMap,this.assets[this.graphId],a)}capture(a){return this.synchronize(a),this.materialize(a),this.readback(a)}blit(a){if(!this.graphId||!this.assets)throw new Error("Error");_w(this.GPUBackend,this.physicalResourceMap,this.assets[this.graphId],a)}draw(a){this.synchronize(a),this.materialize(a),this.blit(a)}}class zw{resources;gl;constructor(a){this.gl=a,this.gl.getExtension("EXT_color_buffer_float"),this.resources=new Map}getResource(a){const o=this.resources.get(a);if(!o)throw new Error(`GPUBackend: getResource - resource with id ${a} not found`);return o}createResource(a){const o=crypto.randomUUID();switch(a.type){case"vertices":this.resources.set(o,new uv(this.gl,a));break;case"instances":this.resources.set(o,new sv(this.gl,a));break;case"uniforms":this.resources.set(o,new dv(this.gl,a));break;case"program":this.resources.set(o,new dw(this.gl,a));break;case"input-texture":case"texture":case"rotating-texture":this.resources.set(o,new hv(this.gl,a));break;default:throw new Error(`GPUBackend: createResource not implemented for signature type ${a.type}`)}return o}releaseResource(a){const o=this.resources.get(a);if(!o)throw new Error(`GPUBackend: releaseResource - resource with id ${a} not found`);o.dispose(),this.resources.delete(a)}}function Aw(i,a,o){i={type:"vertices",attributes:{},maxVertexCount:1e3,maxTriangleCount:1e3,...i};const l={signature:i,triangleCount:a.triangleCount,verticesData:{stage:"author",data:()=>{const s=a.vertices(),f={};for(const d in i.attributes)f[d]=s.map(h=>typeof h[d]=="number"?[h[d]]:h[d]),f[d]=f[d].flat();return f}},indicesData:{stage:"author",data:()=>a.indices()}};return new sa(l,o)}function Rw(i,a,o){i={type:"instances",maxInstanceCount:1e3,attributes:{},...i};const l={signature:i,instanceCount:a.count,instancesData:{stage:"author",data:()=>{const s=a.instances(),f={};for(const d in i.attributes)f[d]=s.map(h=>typeof h[d]=="number"?[h[d]]:h[d]),f[d]=f[d].flat();return f}}};return new sa(l,o)}function Ow(i,a,o){const l={signature:{type:"uniforms",bindings:i||{}},uniformsData:{stage:"author",data:a}};return new sa(l,o)}function Mw(i,a,o){return"historyLength"in i&&i.historyLength>1?Nw(i,a,o):typeof a=="function"?Uw(i,a,o):Bw(i,a,o)}function Bw(i,a,o){i={type:"texture",format:"rgba8",width:256,height:256,...i};const l={signature:i,drawOps:a};return new sa(l,o)}function Nw(i,a,o){i={type:"rotating-texture",format:"rgba8",width:256,height:256,historyLength:2,...i};const l={signature:i,drawOps:a};return new sa(l,o)}function Uw(i,a,o){i={type:"input-texture",format:"rgba8",width:256,height:256,...i};const l={signature:i,inputTextureData:{stage:"author",data:a}};return new sa(l,o)}function Dw(i,a,o,l,s){const f={uniforms:{},textures:{},...l||{}},d={uniforms:Object.fromEntries(Object.entries(f.uniforms).map(([h,p])=>[h,{stage:"author",resource:p}])),textures:Object.fromEntries(Object.entries(f.textures).map(([h,p])=>[h,{texture:{stage:"author",resource:p.texture},sampler:p.sampler}])),vertices:{stage:"author",resource:i},vertexShaderData:{stage:"author",data:a},fragmentShaderData:{stage:"author",data:o}};return f.instances&&(d.instances={stage:"author",resource:f.instances}),s?.depthTest!==void 0&&(d.depthTest=s.depthTest),s?.blendMode!==void 0&&(d.blendMode=s.blendMode),d}const jw=Aw,mv=Rw,gf=Ow,ho=Mw,cr=Dw;class Lw{store;entryPointId=null;constructor(){this.store=new Map}transaction(a,o,l){for(const s of o)this.store.delete(s);for(const[s,f]of Object.entries(a))this.store.set(s,f);this.entryPointId=l,this.emitUpdate()}subscribers=new Set;subscribe(a){return this.subscribers.add(a),()=>{this.subscribers.delete(a)}}emitUpdate(){for(const a of this.subscribers)a(this.store,this.entryPointId)}}function Pw(i,a){const o=Ce.useRef();Ce.useEffect(()=>{o.current=i},[i]),Ce.useEffect(()=>{let l,s;function f(){const h=Date.now()-l;l=Date.now(),d(),o.current&&o.current(h)}function d(){s=window.requestAnimationFrame(f)}return l=Date.now(),d(),()=>{window.cancelAnimationFrame(s)}},[a])}var Fw=`flat out int v_numParticles;
out vec2 v_uv;
void main() {
    v_numParticles = numParticles;
    v_uv = position;
    gl_Position = vec4(position, 1.0, 1.0);
}`,kw=`#define FBM_OCTAVES 1
#define PI 3.14159265359
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef RANDOM_SCALE
#ifdef RANDOM_HIGHER_RANGE
#define RANDOM_SCALE vec4(.1031, .1030, .0973, .1099)
#else
#define RANDOM_SCALE vec4(443.897, 441.423, .0973, .1099)
#endif
#endif

#ifndef FNC_RANDOM
#define FNC_RANDOM
float random(in float x) {
#ifdef RANDOM_SINLESS
    x = fract(x * RANDOM_SCALE.x);
    x *= x + 33.33;
    x *= x + x;
    return fract(x);
#else
    return fract(sin(x) * 43758.5453);
#endif
}

float random(in vec2 st) {
#ifdef RANDOM_SINLESS
    vec3 p3  = fract(vec3(st.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 33.33);
    return fract((p3.x + p3.y) * p3.z);
#else
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
#endif
}

float random(in vec3 pos) {
#ifdef RANDOM_SINLESS
    pos  = fract(pos * RANDOM_SCALE.xyz);
    pos += dot(pos, pos.zyx + 31.32);
    return fract((pos.x + pos.y) * pos.z);
#else
    return fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
#endif
}

float random(in vec4 pos) {
#ifdef RANDOM_SINLESS
    pos = fract(pos * RANDOM_SCALE);
    pos += dot(pos, pos.wzxy + 33.33);
    return fract((pos.x + pos.y) * (pos.z + pos.w));
#else
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return fract(sin(dot_product) * 43758.5453);
#endif
}

vec2 random2(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec2 p) {
    vec3 p3 = fract(p.xyx * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec3 p3) {
    p3 = fract(p3 * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec3 random3(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx); 
}

vec3 random3(vec2 p) {
    vec3 p3 = fract(vec3(p.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yxz + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx);
}

vec3 random3(vec3 p) {
    p = fract(p * RANDOM_SCALE.xyz);
    p += dot(p, p.yxz + 19.19);
    return fract((p.xxy + p.yzz) * p.zyx);
}

vec4 random4(float p) {
    vec4 p4 = fract(p * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);   
}

vec4 random4(vec2 p) {
    vec4 p4 = fract(p.xyxy * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec3 p) {
    vec4 p4 = fract(p.xyzx * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec4 p4) {
    p4 = fract(p4  * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}
#endif
#ifndef FNC_SRANDOM
#define FNC_SRANDOM

float srandom(in float x) {
  return -1. + 2. * fract(sin(x) * 43758.5453);
}

float srandom(in vec2 st) {
  return -1. + 2. * fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float srandom(in vec3 pos) {
  return -1. + 2. * fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
}

float srandom(in vec4 pos) {
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return -1. + 2. * fract(sin(dot_product) * 43758.5453);
}

vec2 srandom2(in vec2 st) {
    const vec2 k = vec2(.3183099, .3678794);
    st = st * k + k.yx;
    return -1. + 2. * fract(16. * k * fract(st.x * st.y * (st.x + st.y)));
}

vec3 srandom3(in vec3 p) {
    p = vec3( dot(p, vec3(127.1, 311.7, 74.7)),
            dot(p, vec3(269.5, 183.3, 246.1)),
            dot(p, vec3(113.5, 271.9, 124.6)));
    return -1. + 2. * fract(sin(p) * 43758.5453123);
}

vec2 srandom2(in vec2 p, const in float tileLength) {
    p = mod(p, vec2(tileLength));
    return srandom2(p);
}

vec3 srandom3(in vec3 p, const in float tileLength) {
    p = mod(p, vec3(tileLength));
    return srandom3(p);
}

#endif
#ifndef FNC_CUBIC
#define FNC_CUBIC 
float cubic(const in float v) { return v*v*(3.0-2.0*v); }
vec2  cubic(const in vec2 v)  { return v*v*(3.0-2.0*v); }
vec3  cubic(const in vec3 v)  { return v*v*(3.0-2.0*v); }
vec4  cubic(const in vec4 v)  { return v*v*(3.0-2.0*v); }

float cubic(const in float v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    float v2 = v * v;
    float v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec2 cubic(const in vec2 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec2 v2 = v * v;
    vec2 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec3 cubic(const in vec3 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec3 v2 = v * v;
    vec3 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec4 cubic(const in vec4 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec4 v2 = v * v;
    vec4 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_GNOISE
#define FNC_GNOISE

float gnoise(float x) {
    float i = floor(x);  
    float f = fract(x);  
    return mix(random(i), random(i + 1.0), smoothstep(0.,1.,f)); 
}

float gnoise(vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);
    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));
    vec2 u = cubic(f);
    return mix( a, b, u.x) +
                (c - a)* u.y * (1.0 - u.x) +
                (d - b) * u.x * u.y;
}

float gnoise(vec3 p) {
    vec3 i = floor(p);
    vec3 f = fract(p);
    vec3 u = quintic(f);
    return -1.0 + 2.0 * mix( mix( mix( random(i + vec3(0.0,0.0,0.0)), 
                                        random(i + vec3(1.0,0.0,0.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,0.0)), 
                                        random(i + vec3(1.0,1.0,0.0)), u.x), u.y),
                            mix( mix( random(i + vec3(0.0,0.0,1.0)), 
                                        random(i + vec3(1.0,0.0,1.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,1.0)), 
                                        random(i + vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

float gnoise(vec3 p, float tileLength) {
    vec3 i = floor(p);
    vec3 f = fract(p);
            
    vec3 u = quintic(f);
        
    return mix( mix( mix( dot( srandom3(i + vec3(0.0,0.0,0.0), tileLength), f - vec3(0.0,0.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,0.0), tileLength), f - vec3(1.0,0.0,0.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,0.0), tileLength), f - vec3(0.0,1.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,0.0), tileLength), f - vec3(1.0,1.0,0.0)), u.x), u.y),
                mix( mix( dot( srandom3(i + vec3(0.0,0.0,1.0), tileLength), f - vec3(0.0,0.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,1.0), tileLength), f - vec3(1.0,0.0,1.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,1.0), tileLength), f - vec3(0.0,1.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,1.0), tileLength), f - vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

vec3 gnoise3(vec3 x) {
    return vec3(gnoise(x+vec3(123.456, 0.567, 0.37)),
                gnoise(x+vec3(0.11, 47.43, 19.17)),
                gnoise(x) );
}

#endif

#ifndef FBM_OCTAVES
#define FBM_OCTAVES 4
#endif

#ifndef FBM_NOISE_FNC
#define FBM_NOISE_FNC(UV) snoise(UV)
#endif

#ifndef FBM_NOISE2_FNC
#define FBM_NOISE2_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE3_FNC
#define FBM_NOISE3_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE_TILABLE_FNC
#define FBM_NOISE_TILABLE_FNC(UV, TILE) gnoise(UV, TILE)
#endif

#ifndef FBM_NOISE3_TILABLE_FNC
#define FBM_NOISE3_TILABLE_FNC(UV, TILE) FBM_NOISE_TILABLE_FNC(UV, TILE)
#endif

#ifndef FBM_NOISE_TYPE
#define FBM_NOISE_TYPE float
#endif

#ifndef FBM_VALUE_INITIAL
#define FBM_VALUE_INITIAL 0.0
#endif

#ifndef FBM_SCALE_SCALAR
#define FBM_SCALE_SCALAR 2.0
#endif

#ifndef FBM_AMPLITUDE_INITIAL
#define FBM_AMPLITUDE_INITIAL 0.5
#endif

#ifndef FBM_AMPLITUDE_SCALAR
#define FBM_AMPLITUDE_SCALAR 0.5
#endif

#ifndef FNC_FBM
#define FNC_FBM
FBM_NOISE_TYPE fbm(in vec2 st) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE2_FNC(st);
        st *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(in vec3 pos) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE3_FNC(pos);
        pos *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(vec3 p, float tileLength) {
    const float persistence = 0.5;
    const float lacunarity = 2.0;

    float amplitude = 0.5;
    FBM_NOISE_TYPE total = FBM_NOISE_TYPE(0.0);
    float normalization = 0.0;

    for (int i = 0; i < FBM_OCTAVES; ++i) {
        float noiseValue = FBM_NOISE3_TILABLE_FNC(p, tileLength * lacunarity * 0.5) * 0.5 + 0.5;
        total += noiseValue * amplitude;
        normalization += amplitude;
        amplitude *= persistence;
        p = p * lacunarity;
    }

    return total / normalization;
}
#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_CNOISE
#define FNC_CNOISE

float cnoise(in vec2 P) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod289(Pi); 
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float cnoise(in vec3 P) {
    vec3 Pi0 = floor(P); 
    vec3 Pi1 = Pi0 + vec3(1.0); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float cnoise(in vec4 P) {
    vec4 Pi0 = floor(P); 
    vec4 Pi1 = Pi0 + 1.0; 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef MAT_OKLAB2RGB
#define MAT_OKLAB2RGB
const mat3 OKLAB2RGB_A = mat3(
    1.0,           1.0,           1.0,
    0.3963377774, -0.1055613458, -0.0894841775,
    0.2158037573, -0.0638541728, -1.2914855480);

const mat3 OKLAB2RGB_B = mat3(
    4.0767416621, -1.2684380046, -0.0041960863,
    -3.3077115913, 2.6097574011, -0.7034186147,
    0.2309699292, -0.3413193965, 1.7076147010);
#endif

#ifndef FNC_OKLAB2RGB
#define FNC_OKLAB2RGB
vec3 oklab2rgb(const in vec3 oklab) {
    vec3 lms = OKLAB2RGB_A * oklab;
    return OKLAB2RGB_B * (lms * lms * lms);
}
vec4 oklab2rgb(const in vec4 oklab) { return vec4(oklab2rgb(oklab.xyz), oklab.a); }
#endif
#ifndef MAT_RGB2OKLAB
#define MAT_RGB2OKLAB
const mat3 RGB2OKLAB_A = mat3(
    0.2104542553, 1.9779984951, 0.0259040371,
    0.7936177850, -2.4285922050, 0.7827717662,
    -0.0040720468, 0.4505937099, -0.8086757660);

const mat3 RGB2OKLAB_B = mat3(
    0.4122214708, 0.2119034982, 0.0883024619,
    0.5363325363, 0.6806995451, 0.2817188376,
    0.0514459929, 0.1073969566, 0.6299787005);
#endif

#ifndef FNC_RGB2OKLAB
#define FNC_RGB2OKLAB
vec3 rgb2oklab(const in vec3 rgb) {
    vec3 lms = RGB2OKLAB_B * rgb;
    return RGB2OKLAB_A * (sign(lms)*pow(abs(lms), vec3(0.3333333333333)));

}
vec4 rgb2oklab(const in vec4 rgb) { return vec4(rgb2oklab(rgb.rgb), rgb.a); }
#endif
#ifndef FNC_GAUSSIAN
#define FNC_GAUSSIAN
float gaussian(float d, float s) { return exp(-(d*d) / (2.0 * s*s)); }
float gaussian( vec2 d, float s) { return exp(-( d.x*d.x + d.y*d.y) / (2.0 * s*s)); }
float gaussian( vec3 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z ) / (2.0 * s*s)); }
float gaussian( vec4 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z + d.w*d.w ) / (2.0 * s*s)); }
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef FNC_SAMPLECLAMP2EDGE
#define FNC_SAMPLECLAMP2EDGE
vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, vec2 texResolution) {
    vec2 pixel = 1.0/texResolution;
    return SAMPLER_FNC( tex, clamp(st, pixel, 1.0-pixel) );
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(0.01), vec2(0.99) ) ); 
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, float edge) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(edge), vec2(1.0 - edge) ) ); 
}
#endif

#ifndef GAUSSIANBLUR2D_TYPE
#ifdef GAUSSIANBLUR_TYPE
#define GAUSSIANBLUR2D_TYPE GAUSSIANBLUR_TYPE
#else
#define GAUSSIANBLUR2D_TYPE vec4
#endif
#endif

#ifndef GAUSSIANBLUR2D_SAMPLER_FNC
#ifdef GAUSSIANBLUR_SAMPLER_FNC
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) GAUSSIANBLUR_SAMPLER_FNC(TEX, UV)
#else
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) sampleClamp2edge(TEX, UV)
#endif
#endif

#ifndef FNC_GAUSSIANBLUR2D
#define FNC_GAUSSIANBLUR2D
GAUSSIANBLUR2D_TYPE gaussianBlur2D(in SAMPLER_TYPE tex, in vec2 st, in vec2 offset, const int kernelSize) {
    GAUSSIANBLUR2D_TYPE accumColor = GAUSSIANBLUR2D_TYPE(0.);
    
    #ifndef GAUSSIANBLUR2D_KERNELSIZE
    
        #if defined(PLATFORM_WEBGL)
            #define GAUSSIANBLUR2D_KERNELSIZE 20
            float kernelSizef = float(kernelSize);
        #else
            #define GAUSSIANBLUR2D_KERNELSIZE kernelSize
            float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
        #endif

    #else
        float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
    #endif

    float accumWeight = 0.;
    const float k = 0.15915494; 
    vec2 xy = vec2(0.0);
    for (int j = 0; j < GAUSSIANBLUR2D_KERNELSIZE; j++) {
        #if defined(PLATFORM_WEBGL)
        if (j >= kernelSize)
            break;
        #endif
        xy.y = -.5 * (kernelSizef - 1.) + float(j);
        for (int i = 0; i < GAUSSIANBLUR2D_KERNELSIZE; i++) {
            #if defined(PLATFORM_WEBGL)
            if (i >= kernelSize)
                break;
            #endif
            xy.x = -0.5 * (kernelSizef - 1.) + float(i);
            float weight = (k / kernelSizef) * gaussian(xy, kernelSizef);
            accumColor += weight * GAUSSIANBLUR2D_SAMPLER_FNC(tex, st + xy * offset);
            accumWeight += weight;
        }
    }
    return accumColor / accumWeight;
}
#endif
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

in vec2 v_uv;
flat in int v_numParticles;

const float THRESHOLD = 0.0001;

vec4 fetch(int index) {
  return texelFetch(colors, ivec2(index, 0),0);
}

float periodic2DNoise(vec2 p, float angle, float cylinderRadius) {
    vec3 wp = vec3(p, cylinderRadius);
    mat3 rotAroundZ = mat3(
        cos(angle), 0.,sin(angle),
        0., 1., 0.,
        -sin(angle), 0., cos(angle)
    );
    wp = rotAroundZ * wp;
    float u = cnoise(wp);
    return u;
}

vec3 parametricToSphere(vec2 uv) {
    float theta = (uv.x * 0.5 + 0.5) * 1.5* PI; 
    float phi = (uv.y * 0.5 + 0.5) * PI;         

    float x = sin(phi) * cos(theta);
    float y = sin(phi) * sin(theta);
    float z = cos(phi);

    return vec3(-x,-z,-y);
}

float weightFunction(float distance, float factor) {
    return 1. / pow((distance), 1.5 + factor * 3.);
}

vec4 getColor(vec3 p, float t) {
    int PCOUNT = v_numParticles; 
    float wTotal = 0.0;
    vec3 accumulatedColor = vec3(0.0);
    bool needsNormalization = true;
    for (int i = 0; i < PCOUNT; ++i) {
        vec3 center = lissajous(
            fract(((float(i) + 0.5) / float(PCOUNT)) + t) * 6.2831,
            0.,
            lissajous_a.x,lissajous_b.x,lissajous_c.x,
            lissajous_a.y, lissajous_b.y, lissajous_c.y,
            resolution
        );
        vec3 p_adj = p * vec3(1.,1.,2.5);
        vec3 center_adj = center * vec3(1.,1.,2.5);
        float distance = sqrt(dot(p_adj - center_adj, p_adj - center_adj));
        vec4 color = rgb2oklab(fetch(i));
        if (distance < THRESHOLD) {
            accumulatedColor = color.rgb;
            needsNormalization = false; 
            break;
        } else {
            float w = weightFunction(distance, mixingIntensity);
            wTotal += w;
            accumulatedColor += color.rgb * w;
        }
    }
    
    if (needsNormalization && wTotal > 0.0) {
        accumulatedColor /= vec3(wTotal);
    }

    return vec4(accumulatedColor, 1.0);
}

void main() {
    vec2 uv = v_uv;
    
    
    
    
    

    
    
    
    vec2 pixelDirection = vec2(0.05);
    const int kernelSize = 9;
    vec4 blurred = gaussianBlur2D(depth_src, (uv + 1.0) / 2.0, pixelDirection, kernelSize);
    float depthField = blurred.r; 
    float d = depthField * 2. - 1.;
    vec3 samplePos = vec3(v_uv, d); 

    vec4 col = getColor(samplePos, time);
    outColor = oklab2rgb(col);
    
}`;function Hw({vertices:i,colorsTexture:a,depthSampleTex:o,lissajousUniforms:l,displayUniforms:s}){return{data:{draw:cr(i,()=>Fw,()=>kw,{uniforms:{lissajousUniforms:l,displayUniforms:s},textures:{colors:{texture:a,sampler:{filter:"nearest",wrap:"clamp"}},depth_src:{texture:o,sampler:{filter:"nearest",wrap:"clamp"}}}},{})}}}var Iw=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

out vec2 v_uv;
out float depth;
out float actualDepth;
void main() {
    v_uv = position * 0.5 + 0.5; 
    int selfInstanceId = gl_InstanceID;
    float startPos = float(selfInstanceId) / float(numLineSegments);
    float endPos = float(selfInstanceId + 1) / float(numLineSegments);
    startPos = fract(startPos);
    endPos = fract(endPos);
    vec3 startPoint = lissajous(
        startPos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    vec3 endPoint = lissajous(
        endPos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    depth = smoothstep(-0.4,0.4,(startPoint.z + endPoint.z) * 0.5);
    actualDepth = (startPoint.z + endPoint.z) * 0.5;
    vec3 translation = startPoint.xyz;
    vec2 diff = endPoint.xy - startPoint.xy;
    float angle = atan(diff.y, diff.x);
    mat2 rot = mat2(
        cos(angle), sin(angle),
        -sin(angle), cos(angle)
    );
    vec2 scaledPosition = position * vec2(0.007,0.007);
    vec2 rotatedPosition = rot * scaledPosition;
    vec3 pos = vec3(rotatedPosition, 0.)  + translation;
    gl_Position = vec4(pos, 1.0);
}`,Vw=`in float depth;
in vec2 v_uv;
in float actualDepth;
void main() {
    vec4 depthCol = mix(vec4(1.,.8,.8,1.), vec4(0.1,0.1,0.2,1.), depth);
    float gradVal = smoothstep(0.1, 0.5, v_uv.y) * smoothstep(.9, 0.5, v_uv.y);
    float alpha = smoothstep(0.1,0.2, v_uv.y) * smoothstep(.9,0.8, v_uv.y);
    depthCol = mix(depthCol, vec4(0.2,0.2,0.2,1.), 1.-gradVal);
    outColor = vec4(depthCol.rgb * alpha, alpha);
}`;const Gl=1e4;function Yw({props:i,quad:a,lissajousUniforms:o,displayUniforms:l}){const s=mv({maxInstanceCount:Gl,attributes:{instanceId:"int"}},{count:Gl,instances:()=>{const h=[];for(let p=0;p<Gl;p++)h.push({instanceId:p});return h}},[]),f=gf({numLineSegments:"int"},()=>({numLineSegments:Gl}),[i.time]),d=cr(a,()=>Iw,()=>Vw,{uniforms:{curveUniforms:f,lissajousUniforms:o,displayUniforms:l},instances:s},{depthTest:!0,blendMode:"alpha"});return{lineSegmentInstances:s,curveUniforms:f,data:{draw:d}}}var qw=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

vec4 fetch(int index) {
  return texelFetch(colors, ivec2(index, 0),0);
}

out vec2 v_uv;
out vec4 col;
out float depth;
void main() {
    v_uv = position * 0.5 + 0.5; 
    int selfInstanceId = gl_InstanceID;
    float pos = (float(selfInstanceId) + 0.5) / float(numParticles);
    vec4 color = fetch(int(selfInstanceId));
    col = color;
    pos += time;
    pos = fract(pos);
    
    vec3 point = lissajous(
        pos * 2. * PI,
        0.,
        lissajous_a.x,lissajous_b.x,lissajous_c.x,
        lissajous_a.y, lissajous_b.y, lissajous_c.y,
        resolution
    );
    float aspect = resolution.x / resolution.y;
    vec3 finalPoint = vec3(position* vec2(0.02) * vec2(1.,aspect), 0.)  + point;
        depth = smoothstep(-0.4,0.4,finalPoint.z);
    finalPoint.z -= 0.15;

    
    gl_Position = vec4(finalPoint, 1.0);
}`,Gw=`in vec4 col;
in vec2 v_uv;
in float depth;
void main() {
    float alpha = smoothstep(0.5, 0.49, length(v_uv - vec2(0.5)));
    vec4 depthCol = mix(vec4(1.,.8,.8,1.), vec4(0.1,0.1,0.2,1.), depth);
    vec4 fringeColor = depthCol;
    vec4 midColor = col;
    vec4 colVal = mix(midColor, fringeColor, smoothstep(0.3, 0.4, length(v_uv - vec2(0.5))));
    outColor = vec4(colVal.rgb * alpha, alpha);
}`;const Xw=500;function Qw({props:i,quad:a,numberOfColors:o,colorsTexture:l,lissajousUniforms:s,displayUniforms:f}){const d=mv({maxInstanceCount:Xw,attributes:{instanceId:"int"}},{count:o,instances:()=>{const p=[];for(let m=0;m<o;m++)p.push({instanceId:m});return p}},[]),h=cr(a,()=>qw,()=>Gw,{uniforms:{lissajousUniforms:s,displayUniforms:f},instances:d,textures:{colors:{texture:l,sampler:{filter:"nearest",wrap:"edge"}}}},{depthTest:!0,blendMode:"alpha"});return{pointInstances:d,data:{draw:h}}}function Zw(i,a=[]){const o=Object.keys(i[0]).filter(l=>l!=="x"&&l!=="y");return jw({attributes:{position:"vec2",...Object.fromEntries(o.map(l=>[l,"float"]))}},{triangleCount:2,vertices:()=>[{position:[i[0].x,i[0].y],...Object.fromEntries(o.map(l=>[l,i[0][l]]))},{position:[i[1].x,i[1].y],...Object.fromEntries(o.map(l=>[l,i[1][l]]))},{position:[i[2].x,i[2].y],...Object.fromEntries(o.map(l=>[l,i[2][l]]))},{position:[i[3].x,i[3].y],...Object.fromEntries(o.map(l=>[l,i[3][l]]))}],indices:()=>[0,1,2,0,2,3]},a)}const Xu=100;function Ww(i){const a=gf({resolution:"vec2"},()=>({resolution:[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]}),[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),o=gf({lissajous_a:"vec2",lissajous_b:"vec2",lissajous_c:"vec2",xyRotation:"vec2",numParticles:"int",numMaxParticles:"int",time:"float",mixingIntensity:"float",noiseIntensity:"float"},()=>({numParticles:i.colors.length,numMaxParticles:Xu,time:[i.time],lissajous_a:i.lissajousParams.a,lissajous_b:i.lissajousParams.b,lissajous_c:i.lissajousParams.c,mixingIntensity:i.mixingIntensity,xyRotation:i.xyRotation,noiseIntensity:i.noiseIntensity}),[i.colors.length,i.time,i.lissajousParams.a,i.lissajousParams.b,i.lissajousParams.c]),l=ho({width:Xu,height:1},()=>{const f=[];for(let d=0;d<Xu;d++){const h=i.colors[d]||{r:0,g:0,b:0};f.push(h.r*255,h.g*255,h.b*255,255)}return f},[JSON.stringify(i.colors)]),s=Zw([{x:-1,y:-1,u:0,v:0},{x:1,y:-1,u:1,v:0},{x:1,y:1,u:1,v:1},{x:-1,y:1,u:0,v:1}],[]);return{display_uniforms:a,lissajous_uniforms:o,colors_texture:l,quad:s}}var Kw=`out vec2 v_uv;
flat out int v_numParticles;
void main() {
    gl_Position = vec4(position, 0.0, 1.0);
    v_uv = position;
    v_numParticles = numParticles;
}`,$w=`#define PI 3.14159265359
vec3 lissajous(
    float t,
    float angle,
    float a,
    float b,
    float c,
    float a_delta,
    float b_delta,
    float c_delta,
    vec2 resolution
) {
    float x = cos(a * t + a_delta + angle * 2. * PI);
    float y = cos(b * t + b_delta + angle * 2. * PI);
    float z = cos(c * t + c_delta + angle * 2. * PI);
    float angleX = xyRotation.x;
    float angleY = xyRotation.y;
    mat3 rotAroundX = mat3(
        cos(angleX * 2. * PI), 0., sin(angleX * 2. * PI),
        0., 1., 0.,
        -sin(angleX * 2. * PI), 0., cos(angleX * 2. * PI)
    );
    mat3 rotAroundY = mat3(
        1., 0., 0.,
        0., cos(angleY * 2. * PI), -sin(angleY * 2. * PI),
        0., sin(angleY * 2. * PI), cos(angleY * 2. * PI)
    );
    
    
    
    
    vec3 rotated = rotAroundX * rotAroundY * vec3(x,y,z);
    
    vec3 scale = vec3(1./sqrt(3.)) * vec3(0.75,0.75,1.);
    float aspect = resolution.y / resolution.x;
    return rotated * scale * vec3(aspect,1.,1.);
}

in vec2 v_uv;
flat in int v_numParticles;

void main() {
    vec2 uv = v_uv;
    int PCOUNT = v_numParticles; 
    float sum = 0.0;
    float weightSum = 0.0;
    float sigma2 = 0.1;
    float heightPower = 1. + 10.0;

    for (int i = 0; i < PCOUNT; ++i) {
        vec3 point = lissajous(
            fract(((float(i) + 0.5) / float(PCOUNT)) + time) * 6.2831,
            0.,
            lissajous_a.x,lissajous_b.x,lissajous_c.x,
            lissajous_a.y, lissajous_b.y, lissajous_c.y,
            resolution
        );
        vec2 delta = uv - point.xy;
        float r2 = dot(delta, delta);
        float w = exp(-r2 / sigma2);
        float z = (point.z  + 1.) / 2.;
        float h = pow(z, heightPower); 
        sum += w * h;
        weightSum += w;
    }
    float result = pow(sum / weightSum, 1.0 / heightPower);
    outColor = vec4(vec3(result),1.0);
}`;function Jw({props:i,vertices:a,lissajousUniforms:o,displayUniforms:l}){const s=cr(a,()=>Kw,()=>$w,{uniforms:{lissajousUniforms:o,displayUniforms:l},textures:{}},{blendMode:"alpha"});return{texture:ho({width:Math.floor(i.general.canvasDimensions[0]/4),height:Math.floor(i.general.canvasDimensions[1]/4),format:"rgba32f"},[s],[i.general.canvasDimensions[0]]),data:{draw:s}}}function Yp(i,a){return cr(i,()=>`
          out vec2 v_uv;
          void main() {
            gl_Position = vec4(position, 0.0, 1.0);
            v_uv = vec2(u,v);
          }`,()=>`
          in vec2 v_uv;
          void main() {
            vec4 color = texture(src, v_uv);
            outColor = color;
          }`,{uniforms:{},textures:{src:{sampler:{edge:"clamp",filter:"linear"},texture:a}}})}var eS=`out vec2 v_uv;

void main() {
    gl_Position = vec4(position, 0.0, 1.0);
    v_uv = vec2(u,v);
}`,tS=`#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_PNOISE
#define FNC_PNOISE

float pnoise(in vec2 P, in vec2 rep) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod(Pi, rep.xyxy); 
    Pi = mod289(Pi);        
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float pnoise(in vec3 P, in vec3 rep) {
    vec3 Pi0 = mod(floor(P), rep); 
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float pnoise(in vec4 P, in vec4 rep) {
    vec4 Pi0 = mod(floor(P), rep); 
    vec4 Pi1 = mod(Pi0 + 1.0, rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef FNC_RGB2LUMA
#define FNC_RGB2LUMA
float rgb2luma(const in vec3 rgb) { return dot(rgb, vec3(0.2126, 0.7152, 0.0722)); }
float rgb2luma(const in vec4 rgb) { return rgb2luma(rgb.rgb); }
#endif

#ifndef FNC_LUMA
#define FNC_LUMA
float luma(float v) { return v; }
float luma(in vec3 v) { return rgb2luma(v); }
float luma(in vec4 v) { return rgb2luma(v.rgb); }
#endif
#ifndef FNC_BLENDSOFTLIGHT
#define FNC_BLENDSOFTLIGHT
float blendSoftLight(in float base, in float blend) {
    return (blend < .5)? (2. * base * blend + base * base * (1. - 2.*blend)): (sqrt(base) * (2. * blend - 1.) + 2. * base * (1. - blend));
}

vec3 blendSoftLight(in vec3 base, in vec3 blend) {
    return vec3(blendSoftLight(base.r, blend.r),
                blendSoftLight(base.g, blend.g),
                blendSoftLight(base.b, blend.b));
}

vec4 blendSoftLight(in vec4 base, in vec4 blend) {
    return vec4(blendSoftLight( base.r, blend.r ),
                blendSoftLight( base.g, blend.g ),
                blendSoftLight( base.b, blend.b ),
                blendSoftLight( base.a, blend.a )
    );
}

vec3 blendSoftLight(in vec3 base, in vec3 blend, in float opacity) {
    return (blendSoftLight(base, blend) * opacity + base * (1. - opacity));
}
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef GRAIN_TYPE
#define GRAIN_TYPE vec3
#endif

#ifndef GRAIN_SAMPLER_FNC
#define GRAIN_SAMPLER_FNC(TEX, UV) SAMPLER_FNC(TEX, UV).rgb
#endif

#ifndef FNC_GRAIN
#define FNC_GRAIN
float grain(vec2 texCoord, vec2 resolution, float t, float multiplier) {
    vec2 mult = texCoord * resolution;
    float offset = snoise(vec3(mult / multiplier, t));
    float n1 = pnoise(vec3(mult, offset), vec3(1. / texCoord * resolution, 1.));
    return n1 / 2. + .5;
}

float grain(vec2 texCoord, vec2 resolution, float t) {
    return grain(texCoord, resolution, t, 2.5);
}

float grain(vec2 texCoord, vec2 resolution) {
    return grain(texCoord, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t, float multiplier ) {
    GRAIN_TYPE org = GRAIN_SAMPLER_FNC(tex, st);

    float g = grain(st, resolution, t, multiplier);

    
    float luminance = luma(org);
    
    
    
    float response = smoothstep(0.05, 0.5, luminance);
    return mix( blendSoftLight(org, GRAIN_TYPE(g)), 
                org, 
                response * response);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution) {
    return grain(tex, st, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t, float multiplier  ) {
    return grain(tex, st, vec2(resolution), t, multiplier );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution) {
    return grain(tex, st, resolution, 0.);
}

#endif

in vec2 v_uv;
void main() {
    vec2 uv = v_uv;
    vec4 col = texture(src, uv);
    outColor = col;
    float grainValue = grain(uv, resolution * 2., time * 50. * 1.);
    outColor.rgb += (grainValue - 0.5) * noiseIntensity * 0.8;
}`;function nS({quad:i,texture:a,lissajousUniforms:o,displayUniforms:l}){return{data:{draw:cr(i,()=>eS,()=>tS,{uniforms:{lissajousUniforms:o,displayUniforms:l},textures:{src:{sampler:{edge:"clamp",filter:"linear"},texture:a}}})}}}function iS(i){const a=Ww(i),o=Jw({props:i,vertices:a.quad,displayUniforms:a.display_uniforms,lissajousUniforms:a.lissajous_uniforms}),l=Hw({vertices:a.quad,colorsTexture:a.colors_texture,displayUniforms:a.display_uniforms,lissajousUniforms:a.lissajous_uniforms,depthSampleTex:o.texture}),s=Yw({props:i,quad:a.quad,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),f=Qw({props:i,quad:a.quad,numberOfColors:i.colors.length,colorsTexture:a.colors_texture,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),d=ho({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},[l.data.draw],[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),h=nS({quad:a.quad,texture:d,lissajousUniforms:a.lissajous_uniforms,displayUniforms:a.display_uniforms}),p=ho({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},[h.data.draw],[i.general.canvasDimensions[0],i.general.canvasDimensions[1]]),m=ho({width:i.general.canvasDimensions[0],height:i.general.canvasDimensions[1]},i.general.showLissajousFigure?[Yp(a.quad,p),s.data.draw,f.data.draw]:[Yp(a.quad,p)],[i.general.canvasDimensions[0],i.general.canvasDimensions[1],i.general.showLissajousFigure]);return{shared_inputs:a,drawGradient:l,drawLissajousCurve:s,drawPoints:f,sampleDepthTex:o,outputTexture:m,renderTexture:p,gradientTexture:d}}const aS="_boxRendering_1611c_1",rS={boxRendering:aS},Ja=30,oS=60;function Kl(i){const o=l2/(oS*Ja)*i.animationSpeed;return Math.floor(i.lissajousIntegral/o)}const qp=new Lw;function lS({scaledWidth:i,scaledHeight:a,width:o,height:l,renderObject:s,screenshotRef:f}){const d=Ci(T=>T),{renderingInProgress:h,targetRenderFrame:p,setTargetRenderFrame:m,videoExporter:v}=s,y=C.useRef(null),b=C.useRef(new tw);C.useImperativeHandle(f,()=>({takeScreenshot:()=>{if(!E.current){console.error("Drawing not initialized yet");return}const A=E.current.capture("renderTexture"),B=d.width,U=d.height,H=document.createElement("canvas");H.width=B,H.height=U;const X=H.getContext("2d");if(!X)throw new Error("Unable to create 2D context for image saving");const k=X.createImageData(B,U);k.data.set(A),X.putImageData(k,0,0);const W=document.createElement("a");W.download="frame.png",W.href=H.toDataURL(),W.click()}}));function w(T){const A={time:T,lissajousParams:{a:[d.lissajousParams.a,d.lissajousParams.a_delta],b:[d.lissajousParams.b,d.lissajousParams.b_delta],c:[d.lissajousParams.c,d.lissajousParams.c_delta]},colors:d.particleColors.map(k=>({r:k[0],g:k[1],b:k[2]})),general:{canvasDimensions:[o,l],showLissajousFigure:d.showLissajousFigure},mixingIntensity:1-d.mixingIntensity,xyRotation:[d.rotateHorizontal/360,d.rotateVertical/360],enableNoise:d.noiseEnabled,noiseIntensity:d.noiseIntensity},B=b.current,{addedAssets:U,deletedAssetIds:H,graphId:X}=B.update(iS(A));qp.transaction(U,H,X)}const E=C.useRef(null);C.useEffect(()=>{const T=y.current;if(!T)return;const A=T.getContext("webgl2",{antialias:!1});if(!A){console.error("WebGL2 is not supported in this browser.");return}const B=new zw(A);E.current=new Cw(B),qp.subscribe((U,H)=>{const X=Object.fromEntries(U);E.current.submit(H,X),E.current.draw("outputTexture")})},[]);const _=C.useRef(Date.now());function S(){if(h)return p;{const A=(Date.now()-_.current)/1e3;return Math.floor(A*Ja)%Kl(d)}}return Pw(()=>{const T=S()/Kl(d);if(w(T),h&&v){const A=Kl(d),B=d.exportPerfectLoop?1:d.exportDuration*Ja/A;T>=B?v.finishExport():v.addFrame(E.current,S()/Ja,1/Ja,()=>m(p+1))}},!0),M.jsx("canvas",{ref:y,width:o,height:l,className:h?rS.boxRendering:"",style:{width:`${Math.floor(i)}px`,height:`${Math.floor(a)}px`,borderRadius:"var(--borderRadiusSmall)"}})}function te(i){if(!i)throw new Error("Assertion failed.")}const xn=i=>i&&i[i.length-1],lr=i=>i>=0&&i<2**32;class yo{constructor(a){this.bytes=a,this.pos=0}seekToByte(a){this.pos=8*a}readBit(){const a=Math.floor(this.pos/8),o=this.bytes[a]??0,l=7-(this.pos&7),s=(o&1<<l)>>l;return this.pos++,s}readBits(a){if(a===1)return this.readBit();let o=0;for(let l=0;l<a;l++)o<<=1,o|=this.readBit();return o}writeBits(a,o){const l=this.pos+a;for(let s=this.pos;s<l;s++){const f=Math.floor(s/8);let d=this.bytes[f];const h=7-(s&7);d&=~(1<<h),d|=(o&1<<l-s-1)>>l-s-1<<h,this.bytes[f]=d}this.pos=l}readAlignedByte(){if(this.pos%8!==0)throw new Error("Bitstream is not byte-aligned.");const a=this.pos/8,o=this.bytes[a]??0;return this.pos+=8,o}skipBits(a){this.pos+=a}getBitsLeft(){return this.bytes.length*8-this.pos}clone(){const a=new yo(this.bytes);return a.pos=this.pos,a}}const ne=i=>{let a=0;for(;i.readBits(1)===0&&a<32;)a++;if(a>=32)throw new Error("Invalid exponential-Golomb code.");return(1<<a)-1+i.readBits(a)},Xn=i=>{const a=ne(i);return(a&1)===0?-(a>>1):a+1>>1},Mi=i=>i.constructor===Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength),sS=i=>i.constructor===DataView?i:i instanceof ArrayBuffer?new DataView(i):new DataView(i.buffer,i.byteOffset,i.byteLength),wn=new TextEncoder,Ff={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},kf={bt709:1,smpte170m:6,linear:8,"iec61966-2-1":13,pq:16,hlg:18},Hf={rgb:0,bt709:1,bt470bg:5,smpte170m:6,"bt2020-ncl":9},cS=i=>!!i&&!!i.primaries&&!!i.transfer&&!!i.matrix&&i.fullRange!==void 0,If=i=>i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer||ArrayBuffer.isView(i);class pv{constructor(){this.currentPromise=Promise.resolve()}async acquire(){let a;const o=new Promise(s=>{a=s}),l=this.currentPromise;return this.currentPromise=o,await l,a}}const uS=()=>{let i,a;return{promise:new Promise((l,s)=>{i=l,a=s}),resolve:i,reject:a}},gv=i=>{throw new Error(`Unexpected value: ${i}`)},fS="und",dS=/^[a-z]{3}$/,hS=i=>dS.test(i),er=1e6*(1+Number.EPSILON),mS=(i,a)=>{const o=i<0?-1:1;i=Math.abs(i);let l=0,s=1,f=1,d=0,h=i;for(;;){const p=Math.floor(h),m=p*f+l,v=p*d+s;if(v>a)return{numerator:o*f,denominator:d};if(l=f,s=d,f=m,d=v,h=1/(h-p),!isFinite(h))break}return{numerator:o*f,denominator:d}};class pS{constructor(){this.currentPromise=Promise.resolve()}call(a){return this.currentPromise=this.currentPromise.then(a)}}let Qu=null;const vf=()=>Qu!==null?Qu:Qu=typeof navigator<"u"&&navigator.userAgent?.includes("Firefox"),vv=function*(i){for(const a in i){const o=i[a];o!==void 0&&(yield{key:a,value:o})}},gS=()=>{Symbol.dispose??=Symbol("Symbol.dispose")};class yv{constructor(a,o){if(this.data=a,this.mimeType=o,!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(typeof o!="string")throw new TypeError("mimeType must be a string.")}}class vS{constructor(a,o,l,s){if(this.data=a,this.mimeType=o,this.name=l,this.description=s,!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(o!==void 0&&typeof o!="string")throw new TypeError("mimeType, when provided, must be a string.");if(l!==void 0&&typeof l!="string")throw new TypeError("name, when provided, must be a string.");if(s!==void 0&&typeof s!="string")throw new TypeError("description, when provided, must be a string.")}}const yS=i=>{if(!i||typeof i!="object")throw new TypeError("tags must be an object.");if(i.title!==void 0&&typeof i.title!="string")throw new TypeError("tags.title, when provided, must be a string.");if(i.description!==void 0&&typeof i.description!="string")throw new TypeError("tags.description, when provided, must be a string.");if(i.artist!==void 0&&typeof i.artist!="string")throw new TypeError("tags.artist, when provided, must be a string.");if(i.album!==void 0&&typeof i.album!="string")throw new TypeError("tags.album, when provided, must be a string.");if(i.albumArtist!==void 0&&typeof i.albumArtist!="string")throw new TypeError("tags.albumArtist, when provided, must be a string.");if(i.trackNumber!==void 0&&(!Number.isInteger(i.trackNumber)||i.trackNumber<=0))throw new TypeError("tags.trackNumber, when provided, must be a positive integer.");if(i.tracksTotal!==void 0&&(!Number.isInteger(i.tracksTotal)||i.tracksTotal<=0))throw new TypeError("tags.tracksTotal, when provided, must be a positive integer.");if(i.discNumber!==void 0&&(!Number.isInteger(i.discNumber)||i.discNumber<=0))throw new TypeError("tags.discNumber, when provided, must be a positive integer.");if(i.discsTotal!==void 0&&(!Number.isInteger(i.discsTotal)||i.discsTotal<=0))throw new TypeError("tags.discsTotal, when provided, must be a positive integer.");if(i.genre!==void 0&&typeof i.genre!="string")throw new TypeError("tags.genre, when provided, must be a string.");if(i.date!==void 0&&(!(i.date instanceof Date)||Number.isNaN(i.date.getTime())))throw new TypeError("tags.date, when provided, must be a valid Date.");if(i.lyrics!==void 0&&typeof i.lyrics!="string")throw new TypeError("tags.lyrics, when provided, must be a string.");if(i.images!==void 0){if(!Array.isArray(i.images))throw new TypeError("tags.images, when provided, must be an array.");for(const a of i.images){if(!a||typeof a!="object")throw new TypeError("Each image in tags.images must be an object.");if(!(a.data instanceof Uint8Array))throw new TypeError("Each image.data must be a Uint8Array.");if(typeof a.mimeType!="string")throw new TypeError("Each image.mimeType must be a string.");if(!["coverFront","coverBack","unknown"].includes(a.kind))throw new TypeError("Each image.kind must be 'coverFront', 'coverBack', or 'unknown'.")}}if(i.comment!==void 0&&typeof i.comment!="string")throw new TypeError("tags.comment, when provided, must be a string.");if(i.raw!==void 0){if(!i.raw||typeof i.raw!="object")throw new TypeError("tags.raw, when provided, must be an object.");for(const a of Object.values(i.raw))if(a!==null&&typeof a!="string"&&!(a instanceof Uint8Array)&&!(a instanceof yv)&&!(a instanceof vS))throw new TypeError("Each value in tags.raw must be a string, Uint8Array, RichImageData, AttachedFile, or null.")}},xS=i=>{if(!i||typeof i!="object")throw new TypeError("disposition must be an object.");if(i.default!==void 0&&typeof i.default!="boolean")throw new TypeError("disposition.default must be a boolean.");if(i.forced!==void 0&&typeof i.forced!="boolean")throw new TypeError("disposition.forced must be a boolean.");if(i.original!==void 0&&typeof i.original!="boolean")throw new TypeError("disposition.original must be a boolean.");if(i.commentary!==void 0&&typeof i.commentary!="boolean")throw new TypeError("disposition.commentary must be a boolean.");if(i.hearingImpaired!==void 0&&typeof i.hearingImpaired!="boolean")throw new TypeError("disposition.hearingImpaired must be a boolean.");if(i.visuallyImpaired!==void 0&&typeof i.visuallyImpaired!="boolean")throw new TypeError("disposition.visuallyImpaired must be a boolean.")};const aa=["avc","hevc","vp9","av1","vp8"],ra=["pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be","pcm-u8","pcm-s8","ulaw","alaw"],xv=["aac","opus","mp3","vorbis","flac"],os=[...xv,...ra],ls=["webvtt"],Gp=[{maxMacroblocks:99,maxBitrate:64e3,level:10},{maxMacroblocks:396,maxBitrate:192e3,level:11},{maxMacroblocks:396,maxBitrate:384e3,level:12},{maxMacroblocks:396,maxBitrate:768e3,level:13},{maxMacroblocks:396,maxBitrate:2e6,level:20},{maxMacroblocks:792,maxBitrate:4e6,level:21},{maxMacroblocks:1620,maxBitrate:4e6,level:22},{maxMacroblocks:1620,maxBitrate:1e7,level:30},{maxMacroblocks:3600,maxBitrate:14e6,level:31},{maxMacroblocks:5120,maxBitrate:2e7,level:32},{maxMacroblocks:8192,maxBitrate:2e7,level:40},{maxMacroblocks:8192,maxBitrate:5e7,level:41},{maxMacroblocks:8704,maxBitrate:5e7,level:42},{maxMacroblocks:22080,maxBitrate:135e6,level:50},{maxMacroblocks:36864,maxBitrate:24e7,level:51},{maxMacroblocks:36864,maxBitrate:24e7,level:52},{maxMacroblocks:139264,maxBitrate:24e7,level:60},{maxMacroblocks:139264,maxBitrate:48e7,level:61},{maxMacroblocks:139264,maxBitrate:8e8,level:62}],Xp=[{maxPictureSize:36864,maxBitrate:128e3,tier:"L",level:30},{maxPictureSize:122880,maxBitrate:15e5,tier:"L",level:60},{maxPictureSize:245760,maxBitrate:3e6,tier:"L",level:63},{maxPictureSize:552960,maxBitrate:6e6,tier:"L",level:90},{maxPictureSize:983040,maxBitrate:1e7,tier:"L",level:93},{maxPictureSize:2228224,maxBitrate:12e6,tier:"L",level:120},{maxPictureSize:2228224,maxBitrate:3e7,tier:"H",level:120},{maxPictureSize:2228224,maxBitrate:2e7,tier:"L",level:123},{maxPictureSize:2228224,maxBitrate:5e7,tier:"H",level:123},{maxPictureSize:8912896,maxBitrate:25e6,tier:"L",level:150},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:150},{maxPictureSize:8912896,maxBitrate:4e7,tier:"L",level:153},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:153},{maxPictureSize:8912896,maxBitrate:6e7,tier:"L",level:156},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:156},{maxPictureSize:35651584,maxBitrate:6e7,tier:"L",level:180},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:180},{maxPictureSize:35651584,maxBitrate:12e7,tier:"L",level:183},{maxPictureSize:35651584,maxBitrate:48e7,tier:"H",level:183},{maxPictureSize:35651584,maxBitrate:24e7,tier:"L",level:186},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:186}],Qp=[{maxPictureSize:36864,maxBitrate:2e5,level:10},{maxPictureSize:73728,maxBitrate:8e5,level:11},{maxPictureSize:122880,maxBitrate:18e5,level:20},{maxPictureSize:245760,maxBitrate:36e5,level:21},{maxPictureSize:552960,maxBitrate:72e5,level:30},{maxPictureSize:983040,maxBitrate:12e6,level:31},{maxPictureSize:2228224,maxBitrate:18e6,level:40},{maxPictureSize:2228224,maxBitrate:3e7,level:41},{maxPictureSize:8912896,maxBitrate:6e7,level:50},{maxPictureSize:8912896,maxBitrate:12e7,level:51},{maxPictureSize:8912896,maxBitrate:18e7,level:52},{maxPictureSize:35651584,maxBitrate:18e7,level:60},{maxPictureSize:35651584,maxBitrate:24e7,level:61},{maxPictureSize:35651584,maxBitrate:48e7,level:62}],Zp=[{maxPictureSize:147456,maxBitrate:15e5,tier:"M",level:0},{maxPictureSize:278784,maxBitrate:3e6,tier:"M",level:1},{maxPictureSize:665856,maxBitrate:6e6,tier:"M",level:4},{maxPictureSize:1065024,maxBitrate:1e7,tier:"M",level:5},{maxPictureSize:2359296,maxBitrate:12e6,tier:"M",level:8},{maxPictureSize:2359296,maxBitrate:3e7,tier:"H",level:8},{maxPictureSize:2359296,maxBitrate:2e7,tier:"M",level:9},{maxPictureSize:2359296,maxBitrate:5e7,tier:"H",level:9},{maxPictureSize:8912896,maxBitrate:3e7,tier:"M",level:12},{maxPictureSize:8912896,maxBitrate:1e8,tier:"H",level:12},{maxPictureSize:8912896,maxBitrate:4e7,tier:"M",level:13},{maxPictureSize:8912896,maxBitrate:16e7,tier:"H",level:13},{maxPictureSize:8912896,maxBitrate:6e7,tier:"M",level:14},{maxPictureSize:8912896,maxBitrate:24e7,tier:"H",level:14},{maxPictureSize:35651584,maxBitrate:6e7,tier:"M",level:15},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:15},{maxPictureSize:35651584,maxBitrate:6e7,tier:"M",level:16},{maxPictureSize:35651584,maxBitrate:24e7,tier:"H",level:16},{maxPictureSize:35651584,maxBitrate:1e8,tier:"M",level:17},{maxPictureSize:35651584,maxBitrate:48e7,tier:"H",level:17},{maxPictureSize:35651584,maxBitrate:16e7,tier:"M",level:18},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:18},{maxPictureSize:35651584,maxBitrate:16e7,tier:"M",level:19},{maxPictureSize:35651584,maxBitrate:8e8,tier:"H",level:19}],bS=(i,a,o,l)=>{if(i==="avc"){const f=Math.ceil(a/16)*Math.ceil(o/16),d=Gp.find(y=>f<=y.maxMacroblocks&&l<=y.maxBitrate)??xn(Gp),h=d?d.level:0,p="64".padStart(2,"0"),m="00",v=h.toString(16).padStart(2,"0");return`avc1.${p}${m}${v}`}else if(i==="hevc"){const h=a*o,p=Xp.find(v=>h<=v.maxPictureSize&&l<=v.maxBitrate)??xn(Xp);return`hev1.1.6.${p.tier}${p.level}.B0`}else{if(i==="vp8")return"vp8";if(i==="vp9"){const f=a*o;return`vp09.00.${(Qp.find(p=>f<=p.maxPictureSize&&l<=p.maxBitrate)??xn(Qp)).level.toString().padStart(2,"0")}.08`}else if(i==="av1"){const f=a*o,d=Zp.find(m=>f<=m.maxPictureSize&&l<=m.maxBitrate)??xn(Zp);return`av01.0.${d.level.toString().padStart(2,"0")}${d.tier}.08`}}throw new TypeError(`Unhandled codec '${i}'.`)},wS=i=>{const a=i.split("."),s=(1<<7)+1,f=Number(a[1]),d=a[2],h=Number(d.slice(0,-1)),p=(f<<5)+h,m=d.slice(-1)==="H"?1:0,y=Number(a[3])===8?0:1,b=0,w=a[4]?Number(a[4]):0,E=a[5]?Number(a[5][0]):1,_=a[5]?Number(a[5][1]):1,S=a[5]?Number(a[5][2]):0,T=(m<<7)+(y<<6)+(b<<5)+(w<<4)+(E<<3)+(_<<2)+S;return[s,p,T,0]},bv=/^pcm-([usf])(\d+)+(be)?$/,wo=i=>{if(te(ra.includes(i)),i==="ulaw")return{dataType:"ulaw",sampleSize:1,littleEndian:!0,silentValue:255};if(i==="alaw")return{dataType:"alaw",sampleSize:1,littleEndian:!0,silentValue:213};const a=bv.exec(i);te(a);let o;a[1]==="u"?o="unsigned":a[1]==="s"?o="signed":o="float";const l=Number(a[2])/8,s=a[3]!=="be",f=i==="pcm-u8"?2**7:0;return{dataType:o,sampleSize:l,littleEndian:s,silentValue:f}},SS=i=>i.startsWith("avc1")||i.startsWith("avc3")?"avc":i.startsWith("hev1")||i.startsWith("hvc1")?"hevc":i==="vp8"?"vp8":i.startsWith("vp09")?"vp9":i.startsWith("av01")?"av1":i.startsWith("mp4a.40")||i==="mp4a.67"?"aac":i==="mp3"||i==="mp4a.69"||i==="mp4a.6B"||i==="mp4a.6b"?"mp3":i==="opus"?"opus":i==="vorbis"?"vorbis":i==="flac"?"flac":i==="ulaw"?"ulaw":i==="alaw"?"alaw":bv.test(i)?i:i==="webvtt"?"webvtt":null,ES=i=>i==="avc"?{avc:{format:"avc"}}:i==="hevc"?{hevc:{format:"hevc"}}:{},_S=["avc1","avc3","hev1","hvc1","vp8","vp09","av01"],TS=/^(avc1|avc3)\.[0-9a-fA-F]{6}$/,CS=/^(hev1|hvc1)\.(?:[ABC]?\d+)\.[0-9a-fA-F]{1,8}\.[LH]\d+(?:\.[0-9a-fA-F]{1,2}){0,6}$/,zS=/^vp09(?:\.\d{2}){3}(?:(?:\.\d{2}){5})?$/,AS=/^av01\.\d\.\d{2}[MH]\.\d{2}(?:\.\d\.\d{3}\.\d{2}\.\d{2}\.\d{2}\.\d)?$/,RS=i=>{if(!i)throw new TypeError("Video chunk metadata must be provided.");if(typeof i!="object")throw new TypeError("Video chunk metadata must be an object.");if(!i.decoderConfig)throw new TypeError("Video chunk metadata must include a decoder configuration.");if(typeof i.decoderConfig!="object")throw new TypeError("Video chunk metadata decoder configuration must be an object.");if(typeof i.decoderConfig.codec!="string")throw new TypeError("Video chunk metadata decoder configuration must specify a codec string.");if(!_S.some(a=>i.decoderConfig.codec.startsWith(a)))throw new TypeError("Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(i.decoderConfig.codedWidth)||i.decoderConfig.codedWidth<=0)throw new TypeError("Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).");if(!Number.isInteger(i.decoderConfig.codedHeight)||i.decoderConfig.codedHeight<=0)throw new TypeError("Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).");if(i.decoderConfig.description!==void 0&&!If(i.decoderConfig.description))throw new TypeError("Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(i.decoderConfig.colorSpace!==void 0){const{colorSpace:a}=i.decoderConfig;if(typeof a!="object")throw new TypeError("Video chunk metadata decoder configuration colorSpace, when provided, must be an object.");const o=Object.keys(Ff);if(a.primaries!=null&&!o.includes(a.primaries))throw new TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of ${o.join(", ")}.`);const l=Object.keys(kf);if(a.transfer!=null&&!l.includes(a.transfer))throw new TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of ${l.join(", ")}.`);const s=Object.keys(Hf);if(a.matrix!=null&&!s.includes(a.matrix))throw new TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of ${s.join(", ")}.`);if(a.fullRange!=null&&typeof a.fullRange!="boolean")throw new TypeError("Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.")}if(i.decoderConfig.codec.startsWith("avc1")||i.decoderConfig.codec.startsWith("avc3")){if(!TS.test(i.decoderConfig.codec))throw new TypeError("Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as specified in Section 3.4 of RFC 6381.")}else if(i.decoderConfig.codec.startsWith("hev1")||i.decoderConfig.codec.startsWith("hvc1")){if(!CS.test(i.decoderConfig.codec))throw new TypeError("Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as specified in Section E.3 of ISO 14496-15.")}else if(i.decoderConfig.codec.startsWith("vp8")){if(i.decoderConfig.codec!=="vp8")throw new TypeError('Video chunk metadata decoder configuration codec string for VP8 must be "vp8".')}else if(i.decoderConfig.codec.startsWith("vp09")){if(!zS.test(i.decoderConfig.codec))throw new TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as specified in Section "Codecs Parameter String" of https://www.webmproject.org/vp9/mp4/.')}else if(i.decoderConfig.codec.startsWith("av01")&&!AS.test(i.decoderConfig.codec))throw new TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as specified in Section "Codecs Parameter String" of https://aomediacodec.github.io/av1-isobmff/.')},OS=["mp4a","mp3","opus","vorbis","flac","ulaw","alaw","pcm"],MS=i=>{if(!i)throw new TypeError("Audio chunk metadata must be provided.");if(typeof i!="object")throw new TypeError("Audio chunk metadata must be an object.");if(!i.decoderConfig)throw new TypeError("Audio chunk metadata must include a decoder configuration.");if(typeof i.decoderConfig!="object")throw new TypeError("Audio chunk metadata decoder configuration must be an object.");if(typeof i.decoderConfig.codec!="string")throw new TypeError("Audio chunk metadata decoder configuration must specify a codec string.");if(!OS.some(a=>i.decoderConfig.codec.startsWith(a)))throw new TypeError("Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in the WebCodecs Codec Registry.");if(!Number.isInteger(i.decoderConfig.sampleRate)||i.decoderConfig.sampleRate<=0)throw new TypeError("Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).");if(!Number.isInteger(i.decoderConfig.numberOfChannels)||i.decoderConfig.numberOfChannels<=0)throw new TypeError("Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).");if(i.decoderConfig.description!==void 0&&!If(i.decoderConfig.description))throw new TypeError("Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an ArrayBuffer view.");if(i.decoderConfig.codec.startsWith("mp4a")&&i.decoderConfig.codec!=="mp4a.69"&&i.decoderConfig.codec!=="mp4a.6B"&&i.decoderConfig.codec!=="mp4a.6b"){if(!["mp4a.40.2","mp4a.40.02","mp4a.40.5","mp4a.40.05","mp4a.40.29","mp4a.67"].includes(i.decoderConfig.codec))throw new TypeError("Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.");if(!i.decoderConfig.description)throw new TypeError("Audio chunk metadata decoder configuration for AAC must include a description, which is expected to be an AudioSpecificConfig as specified in ISO 14496-3.")}else if(i.decoderConfig.codec.startsWith("mp3")||i.decoderConfig.codec.startsWith("mp4a")){if(i.decoderConfig.codec!=="mp3"&&i.decoderConfig.codec!=="mp4a.69"&&i.decoderConfig.codec!=="mp4a.6B"&&i.decoderConfig.codec!=="mp4a.6b")throw new TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be "mp3", "mp4a.69" or "mp4a.6B".')}else if(i.decoderConfig.codec.startsWith("opus")){if(i.decoderConfig.codec!=="opus")throw new TypeError('Audio chunk metadata decoder configuration codec string for Opus must be "opus".');if(i.decoderConfig.description&&i.decoderConfig.description.byteLength<18)throw new TypeError("Audio chunk metadata decoder configuration description, when specified, is expected to be an Identification Header as specified in Section 5.1 of RFC 7845.")}else if(i.decoderConfig.codec.startsWith("vorbis")){if(i.decoderConfig.codec!=="vorbis")throw new TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be "vorbis".');if(!i.decoderConfig.description)throw new TypeError("Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.")}else if(i.decoderConfig.codec.startsWith("flac")){if(i.decoderConfig.codec!=="flac")throw new TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be "flac".');if(!i.decoderConfig.description||i.decoderConfig.description.byteLength<42)throw new TypeError("Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.")}else if((i.decoderConfig.codec.startsWith("pcm")||i.decoderConfig.codec.startsWith("ulaw")||i.decoderConfig.codec.startsWith("alaw"))&&!ra.includes(i.decoderConfig.codec))throw new TypeError(`Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM codecs (${ra.join(", ")}).`)},BS=i=>{if(!i)throw new TypeError("Subtitle metadata must be provided.");if(typeof i!="object")throw new TypeError("Subtitle metadata must be an object.");if(!i.config)throw new TypeError("Subtitle metadata must include a config object.");if(typeof i.config!="object")throw new TypeError("Subtitle metadata config must be an object.");if(typeof i.config.description!="string")throw new TypeError("Subtitle metadata config description must be a string.")};class NS{constructor(a){this.mutex=new pv,this.firstMediaStreamTimestamp=null,this.trackTimestampInfo=new WeakMap,this.output=a}onTrackClose(a){}validateAndNormalizeTimestamp(a,o,l){o+=a.source._timestampOffset;let s=this.trackTimestampInfo.get(a);if(!s){if(!l)throw new Error("First packet must be a key packet.");s={maxTimestamp:o,maxTimestampBeforeLastKeyPacket:o},this.trackTimestampInfo.set(a,s)}if(o<0)throw new Error(`Timestamps must be non-negative (got ${o}s).`);if(l&&(s.maxTimestampBeforeLastKeyPacket=s.maxTimestamp),o<s.maxTimestampBeforeLastKeyPacket)throw new Error(`Timestamps cannot be smaller than the largest timestamp of the previous GOP (a GOP begins with a key packet and ends right before the next key packet). Got ${o}s, but largest timestamp is ${s.maxTimestampBeforeLastKeyPacket}s.`);return s.maxTimestamp=Math.max(s.maxTimestamp,o),o}}var mo;(function(i){i[i.IDR=5]="IDR",i[i.SPS=7]="SPS",i[i.PPS=8]="PPS",i[i.SPS_EXT=13]="SPS_EXT"})(mo||(mo={}));var vn;(function(i){i[i.RASL_N=8]="RASL_N",i[i.RASL_R=9]="RASL_R",i[i.BLA_W_LP=16]="BLA_W_LP",i[i.RSV_IRAP_VCL23=23]="RSV_IRAP_VCL23",i[i.VPS_NUT=32]="VPS_NUT",i[i.SPS_NUT=33]="SPS_NUT",i[i.PPS_NUT=34]="PPS_NUT",i[i.PREFIX_SEI_NUT=39]="PREFIX_SEI_NUT",i[i.SUFFIX_SEI_NUT=40]="SUFFIX_SEI_NUT"})(vn||(vn={}));const Vf=i=>{const a=[];let o=0;for(;o<i.length;){let l=-1,s=0;for(let f=o;f<i.length-3;f++){if(i[f]===0&&i[f+1]===0&&i[f+2]===1){l=f,s=3;break}if(f<i.length-4&&i[f]===0&&i[f+1]===0&&i[f+2]===0&&i[f+3]===1){l=f,s=4;break}}if(l===-1)break;if(o>0&&l>o){const f=i.subarray(o,l);f.length>0&&a.push(f)}o=l+s}if(o<i.length){const l=i.subarray(o);l.length>0&&a.push(l)}return a},yf=i=>{const a=[],o=i.length;for(let l=0;l<o;l++)l+2<o&&i[l]===0&&i[l+1]===0&&i[l+2]===3?(a.push(0,0),l+=2):a.push(i[l]);return new Uint8Array(a)},US=i=>{const o=Vf(i);if(o.length===0)return null;let l=0;for(const h of o)l+=4+h.byteLength;const s=new Uint8Array(l),f=new DataView(s.buffer);let d=0;for(const h of o){const p=h.byteLength;f.setUint32(d,p,!1),d+=4,s.set(h,d),d+=h.byteLength}return s},Zu=i=>i[0]&31,DS=i=>{try{const a=Vf(i),o=a.filter(p=>Zu(p)===mo.SPS),l=a.filter(p=>Zu(p)===mo.PPS),s=a.filter(p=>Zu(p)===mo.SPS_EXT);if(o.length===0||l.length===0)return null;const f=o[0],d=LS(f);te(d!==null);const h=d.profileIdc===100||d.profileIdc===110||d.profileIdc===122||d.profileIdc===144;return{configurationVersion:1,avcProfileIndication:d.profileIdc,profileCompatibility:d.constraintFlags,avcLevelIndication:d.levelIdc,lengthSizeMinusOne:3,sequenceParameterSets:o,pictureParameterSets:l,chromaFormat:h?d.chromaFormatIdc:null,bitDepthLumaMinus8:h?d.bitDepthLumaMinus8:null,bitDepthChromaMinus8:h?d.bitDepthChromaMinus8:null,sequenceParameterSetExt:h?s:null}}catch(a){return console.error("Error building AVC Decoder Configuration Record:",a),null}},jS=i=>{const a=[];a.push(i.configurationVersion),a.push(i.avcProfileIndication),a.push(i.profileCompatibility),a.push(i.avcLevelIndication),a.push(252|i.lengthSizeMinusOne&3),a.push(224|i.sequenceParameterSets.length&31);for(const o of i.sequenceParameterSets){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let s=0;s<l;s++)a.push(o[s])}a.push(i.pictureParameterSets.length);for(const o of i.pictureParameterSets){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let s=0;s<l;s++)a.push(o[s])}if(i.avcProfileIndication===100||i.avcProfileIndication===110||i.avcProfileIndication===122||i.avcProfileIndication===144){te(i.chromaFormat!==null),te(i.bitDepthLumaMinus8!==null),te(i.bitDepthChromaMinus8!==null),te(i.sequenceParameterSetExt!==null),a.push(252|i.chromaFormat&3),a.push(248|i.bitDepthLumaMinus8&7),a.push(248|i.bitDepthChromaMinus8&7),a.push(i.sequenceParameterSetExt.length);for(const o of i.sequenceParameterSetExt){const l=o.byteLength;a.push(l>>8),a.push(l&255);for(let s=0;s<l;s++)a.push(o[s])}}return new Uint8Array(a)},LS=i=>{try{const a=new yo(yf(i));if(a.skipBits(1),a.skipBits(2),a.readBits(5)!==7)return null;const l=a.readAlignedByte(),s=a.readAlignedByte(),f=a.readAlignedByte();ne(a);let d=null,h=null,p=null;if((l===100||l===110||l===122||l===244||l===44||l===83||l===86||l===118||l===128)&&(d=ne(a),d===3&&a.skipBits(1),h=ne(a),p=ne(a),a.skipBits(1),a.readBits(1))){for(let b=0;b<(d!==3?8:12);b++)if(a.readBits(1)){const E=b<6?16:64;let _=8,S=8;for(let T=0;T<E;T++){if(S!==0){const A=Xn(a);S=(_+A+256)%256}_=S===0?_:S}}}ne(a);const m=ne(a);if(m===0)ne(a);else if(m===1){a.skipBits(1),Xn(a),Xn(a);const y=ne(a);for(let b=0;b<y;b++)Xn(a)}ne(a),a.skipBits(1),ne(a),ne(a);const v=a.readBits(1);return{profileIdc:l,constraintFlags:s,levelIdc:f,frameMbsOnlyFlag:v,chromaFormatIdc:d,bitDepthLumaMinus8:h,bitDepthChromaMinus8:p}}catch(a){return console.error("Error parsing AVC SPS:",a),null}},$a=i=>i[0]>>1&63,PS=i=>{try{const a=Vf(i),o=a.filter(ae=>$a(ae)===vn.VPS_NUT),l=a.filter(ae=>$a(ae)===vn.SPS_NUT),s=a.filter(ae=>$a(ae)===vn.PPS_NUT),f=a.filter(ae=>$a(ae)===vn.PREFIX_SEI_NUT||$a(ae)===vn.SUFFIX_SEI_NUT);if(l.length===0||s.length===0)return null;const d=l[0],h=new yo(yf(d));h.skipBits(16),h.readBits(4);const p=h.readBits(3),m=h.readBits(1),{general_profile_space:v,general_tier_flag:y,general_profile_idc:b,general_profile_compatibility_flags:w,general_constraint_indicator_flags:E,general_level_idc:_}=FS(h,p);ne(h);const S=ne(h);S===3&&h.skipBits(1),ne(h),ne(h),h.readBits(1)&&(ne(h),ne(h),ne(h),ne(h));const T=ne(h),A=ne(h);ne(h);const U=h.readBits(1)?0:p;for(let ae=U;ae<=p;ae++)ne(h),ne(h),ne(h);ne(h),ne(h),ne(h),ne(h),ne(h),ne(h),h.readBits(1)&&h.readBits(1)&&kS(h),h.skipBits(1),h.skipBits(1),h.readBits(1)&&(h.skipBits(4),h.skipBits(4),ne(h),ne(h),h.skipBits(1));const H=ne(h);if(HS(h,H),h.readBits(1)){const ae=ne(h);for(let Q=0;Q<ae;Q++)ne(h),h.skipBits(1)}h.skipBits(1),h.skipBits(1);let X=0;h.readBits(1)&&(X=VS(h,p));let k=0;if(s.length>0){const ae=s[0],Q=new yo(yf(ae));Q.skipBits(16),ne(Q),ne(Q),Q.skipBits(1),Q.skipBits(1),Q.skipBits(3),Q.skipBits(1),Q.skipBits(1),ne(Q),ne(Q),Xn(Q),Q.skipBits(1),Q.skipBits(1),Q.readBits(1)&&ne(Q),Xn(Q),Xn(Q),Q.skipBits(1),Q.skipBits(1),Q.skipBits(1),Q.skipBits(1);const se=Q.readBits(1),xe=Q.readBits(1);!se&&!xe?k=0:se&&!xe?k=2:!se&&xe?k=3:k=0}const W=[...o.length?[{arrayCompleteness:1,nalUnitType:vn.VPS_NUT,nalUnits:o}]:[],...l.length?[{arrayCompleteness:1,nalUnitType:vn.SPS_NUT,nalUnits:l}]:[],...s.length?[{arrayCompleteness:1,nalUnitType:vn.PPS_NUT,nalUnits:s}]:[],...f.length?[{arrayCompleteness:1,nalUnitType:$a(f[0]),nalUnits:f}]:[]];return{configurationVersion:1,generalProfileSpace:v,generalTierFlag:y,generalProfileIdc:b,generalProfileCompatibilityFlags:w,generalConstraintIndicatorFlags:E,generalLevelIdc:_,minSpatialSegmentationIdc:X,parallelismType:k,chromaFormatIdc:S,bitDepthLumaMinus8:T,bitDepthChromaMinus8:A,avgFrameRate:0,constantFrameRate:0,numTemporalLayers:p+1,temporalIdNested:m,lengthSizeMinusOne:3,arrays:W}}catch(a){return console.error("Error building HEVC Decoder Configuration Record:",a),null}},FS=(i,a)=>{const o=i.readBits(2),l=i.readBits(1),s=i.readBits(5);let f=0;for(let v=0;v<32;v++)f=f<<1|i.readBits(1);const d=new Uint8Array(6);for(let v=0;v<6;v++)d[v]=i.readBits(8);const h=i.readBits(8),p=[],m=[];for(let v=0;v<a;v++)p.push(i.readBits(1)),m.push(i.readBits(1));if(a>0)for(let v=a;v<8;v++)i.skipBits(2);for(let v=0;v<a;v++)p[v]&&i.skipBits(88),m[v]&&i.skipBits(8);return{general_profile_space:o,general_tier_flag:l,general_profile_idc:s,general_profile_compatibility_flags:f,general_constraint_indicator_flags:d,general_level_idc:h}},kS=i=>{for(let a=0;a<4;a++)for(let o=0;o<(a===3?2:6);o++)if(!i.readBits(1))ne(i);else{const s=Math.min(64,1<<4+(a<<1));a>1&&Xn(i);for(let f=0;f<s;f++)Xn(i)}},HS=(i,a)=>{const o=[];for(let l=0;l<a;l++)o[l]=IS(i,l,a,o)},IS=(i,a,o,l)=>{let s=0,f=0,d=0;if(a!==0&&(f=i.readBits(1)),f){if(a===o){const p=ne(i);d=a-(p+1)}else d=a-1;i.readBits(1),ne(i);const h=l[d]??0;for(let p=0;p<=h;p++)i.readBits(1)||i.readBits(1);s=l[d]}else{const h=ne(i),p=ne(i);for(let m=0;m<h;m++)ne(i),i.readBits(1);for(let m=0;m<p;m++)ne(i),i.readBits(1);s=h+p}return s},VS=(i,a)=>{if(i.readBits(1)&&i.readBits(8)===255&&(i.readBits(16),i.readBits(16)),i.readBits(1)&&i.readBits(1),i.readBits(1)&&(i.readBits(3),i.readBits(1),i.readBits(1)&&(i.readBits(8),i.readBits(8),i.readBits(8))),i.readBits(1)&&(ne(i),ne(i)),i.readBits(1),i.readBits(1),i.readBits(1),i.readBits(1)&&(ne(i),ne(i),ne(i),ne(i)),i.readBits(1)&&(i.readBits(32),i.readBits(32),i.readBits(1)&&ne(i),i.readBits(1)&&YS(i,!0,a)),i.readBits(1)){i.readBits(1),i.readBits(1),i.readBits(1);const o=ne(i);return ne(i),ne(i),ne(i),ne(i),o}return 0},YS=(i,a,o)=>{let l=!1,s=!1,f=!1;l=i.readBits(1)===1,s=i.readBits(1)===1,(l||s)&&(f=i.readBits(1)===1,f&&(i.readBits(8),i.readBits(5),i.readBits(1),i.readBits(5)),i.readBits(4),i.readBits(4),f&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5));for(let d=0;d<=o;d++){const h=i.readBits(1)===1;let p=!0;h||(p=i.readBits(1)===1);let m=!1;p?ne(i):m=i.readBits(1)===1;let v=1;m||(v=ne(i)+1),l&&Wp(i,v,f),s&&Wp(i,v,f)}},Wp=(i,a,o)=>{for(let l=0;l<a;l++)ne(i),ne(i),o&&(ne(i),ne(i)),i.readBits(1)},qS=i=>{const a=[];a.push(i.configurationVersion),a.push((i.generalProfileSpace&3)<<6|(i.generalTierFlag&1)<<5|i.generalProfileIdc&31),a.push(i.generalProfileCompatibilityFlags>>>24&255),a.push(i.generalProfileCompatibilityFlags>>>16&255),a.push(i.generalProfileCompatibilityFlags>>>8&255),a.push(i.generalProfileCompatibilityFlags&255),a.push(...i.generalConstraintIndicatorFlags),a.push(i.generalLevelIdc&255),a.push(240|i.minSpatialSegmentationIdc>>8&15),a.push(i.minSpatialSegmentationIdc&255),a.push(252|i.parallelismType&3),a.push(252|i.chromaFormatIdc&3),a.push(248|i.bitDepthLumaMinus8&7),a.push(248|i.bitDepthChromaMinus8&7),a.push(i.avgFrameRate>>8&255),a.push(i.avgFrameRate&255),a.push((i.constantFrameRate&3)<<6|(i.numTemporalLayers&7)<<3|(i.temporalIdNested&1)<<2|i.lengthSizeMinusOne&3),a.push(i.arrays.length&255);for(const o of i.arrays){a.push((o.arrayCompleteness&1)<<7|0|o.nalUnitType&63),a.push(o.nalUnits.length>>8&255),a.push(o.nalUnits.length&255);for(const l of o.nalUnits){a.push(l.length>>8&255),a.push(l.length&255);for(let s=0;s<l.length;s++)a.push(l[s])}}return new Uint8Array(a)},GS=i=>{const a=sS(i),o=a.getUint8(9),l=a.getUint16(10,!0),s=a.getUint32(12,!0),f=a.getInt16(16,!0),d=a.getUint8(18);let h=null;return d&&(h=i.subarray(19,21+o)),{outputChannelCount:o,preSkip:l,inputSampleRate:s,outputGain:f,channelMappingFamily:d,channelMappingTable:h}};var Kp;(function(i){i[i.STREAMINFO=0]="STREAMINFO",i[i.VORBIS_COMMENT=4]="VORBIS_COMMENT",i[i.PICTURE=6]="PICTURE"})(Kp||(Kp={}));const XS=[];const $p=new Uint8Array(0);class xo{constructor(a,o,l,s,f=-1,d,h){if(this.data=a,this.type=o,this.timestamp=l,this.duration=s,this.sequenceNumber=f,a===$p&&d===void 0)throw new Error("Internal error: byteLength must be explicitly provided when constructing metadata-only packets.");if(d===void 0&&(d=a.byteLength),!(a instanceof Uint8Array))throw new TypeError("data must be a Uint8Array.");if(o!=="key"&&o!=="delta")throw new TypeError('type must be either "key" or "delta".');if(!Number.isFinite(l))throw new TypeError("timestamp must be a number.");if(!Number.isFinite(s)||s<0)throw new TypeError("duration must be a non-negative number.");if(!Number.isFinite(f))throw new TypeError("sequenceNumber must be a number.");if(!Number.isInteger(d)||d<0)throw new TypeError("byteLength must be a non-negative integer.");if(h!==void 0&&(typeof h!="object"||!h))throw new TypeError("sideData, when provided, must be an object.");if(h?.alpha!==void 0&&!(h.alpha instanceof Uint8Array))throw new TypeError("sideData.alpha, when provided, must be a Uint8Array.");if(h?.alphaByteLength!==void 0&&(!Number.isInteger(h.alphaByteLength)||h.alphaByteLength<0))throw new TypeError("sideData.alphaByteLength, when provided, must be a non-negative integer.");this.byteLength=d,this.sideData=h??{},this.sideData.alpha&&this.sideData.alphaByteLength===void 0&&(this.sideData.alphaByteLength=this.sideData.alpha.byteLength)}get isMetadataOnly(){return this.data===$p}get microsecondTimestamp(){return Math.trunc(er*this.timestamp)}get microsecondDuration(){return Math.trunc(er*this.duration)}toEncodedVideoChunk(){if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to a video chunk.");if(typeof EncodedVideoChunk>"u")throw new Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}alphaToEncodedVideoChunk(a=this.type){if(!this.sideData.alpha)throw new TypeError("This packet does not contain alpha side data.");if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to a video chunk.");if(typeof EncodedVideoChunk>"u")throw new Error("Your browser does not support EncodedVideoChunk.");return new EncodedVideoChunk({data:this.sideData.alpha,type:a,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}toEncodedAudioChunk(){if(this.isMetadataOnly)throw new TypeError("Metadata-only packets cannot be converted to an audio chunk.");if(typeof EncodedAudioChunk>"u")throw new Error("Your browser does not support EncodedAudioChunk.");return new EncodedAudioChunk({data:this.data,type:this.type,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration})}static fromEncodedChunk(a,o){if(!(a instanceof EncodedVideoChunk||a instanceof EncodedAudioChunk))throw new TypeError("chunk must be an EncodedVideoChunk or EncodedAudioChunk.");const l=new Uint8Array(a.byteLength);return a.copyTo(l),new xo(l,a.type,a.timestamp/1e6,(a.duration??0)/1e6,void 0,void 0,o)}clone(a){if(a!==void 0&&(typeof a!="object"||a===null))throw new TypeError("options, when provided, must be an object.");if(a?.timestamp!==void 0&&!Number.isFinite(a.timestamp))throw new TypeError("options.timestamp, when provided, must be a number.");if(a?.duration!==void 0&&!Number.isFinite(a.duration))throw new TypeError("options.duration, when provided, must be a number.");return new xo(this.data,this.type,a?.timestamp??this.timestamp,a?.duration??this.duration,this.sequenceNumber,this.byteLength)}}gS();class na{get displayWidth(){return this.rotation%180===0?this.codedWidth:this.codedHeight}get displayHeight(){return this.rotation%180===0?this.codedHeight:this.codedWidth}get microsecondTimestamp(){return Math.trunc(er*this.timestamp)}get microsecondDuration(){return Math.trunc(er*this.duration)}get hasAlpha(){return this.format&&this.format.includes("A")}constructor(a,o){if(this._closed=!1,a instanceof ArrayBuffer||ArrayBuffer.isView(a)){if(!o||typeof o!="object")throw new TypeError("init must be an object.");if(!("format"in o)||typeof o.format!="string")throw new TypeError("init.format must be a string.");if(!Number.isInteger(o.codedWidth)||o.codedWidth<=0)throw new TypeError("init.codedWidth must be a positive integer.");if(!Number.isInteger(o.codedHeight)||o.codedHeight<=0)throw new TypeError("init.codedHeight must be a positive integer.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(o.timestamp))throw new TypeError("init.timestamp must be a number.");if(o.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");this._data=Mi(a).slice(),this.format=o.format,this.codedWidth=o.codedWidth,this.codedHeight=o.codedHeight,this.rotation=o.rotation??0,this.timestamp=o.timestamp,this.duration=o.duration??0,this.colorSpace=new VideoColorSpace(o.colorSpace)}else if(typeof VideoFrame<"u"&&a instanceof VideoFrame){if(o?.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(o?.timestamp!==void 0&&!Number.isFinite(o?.timestamp))throw new TypeError("init.timestamp, when provided, must be a number.");if(o?.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");this._data=a,this.format=a.format,this.codedWidth=a.displayWidth,this.codedHeight=a.displayHeight,this.rotation=o?.rotation??0,this.timestamp=o?.timestamp??a.timestamp/1e6,this.duration=o?.duration??(a.duration??0)/1e6,this.colorSpace=a.colorSpace}else if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof SVGImageElement<"u"&&a instanceof SVGImageElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap||typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas){if(!o||typeof o!="object")throw new TypeError("init must be an object.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("init.rotation, when provided, must be 0, 90, 180, or 270.");if(!Number.isFinite(o.timestamp))throw new TypeError("init.timestamp must be a number.");if(o.duration!==void 0&&(!Number.isFinite(o.duration)||o.duration<0))throw new TypeError("init.duration, when provided, must be a non-negative number.");if(typeof VideoFrame<"u")return new na(new VideoFrame(a,{timestamp:Math.trunc(o.timestamp*er),duration:Math.trunc((o.duration??0)*er)||void 0}),o);let l=0,s=0;if("naturalWidth"in a?(l=a.naturalWidth,s=a.naturalHeight):"videoWidth"in a?(l=a.videoWidth,s=a.videoHeight):"width"in a&&(l=Number(a.width),s=Number(a.height)),!l||!s)throw new TypeError("Could not determine dimensions.");const f=new OffscreenCanvas(l,s),d=f.getContext("2d",{alpha:vf(),willReadFrequently:!0});te(d),d.drawImage(a,0,0),this._data=f,this.format="RGBX",this.codedWidth=l,this.codedHeight=s,this.rotation=o.rotation??0,this.timestamp=o.timestamp,this.duration=o.duration??0,this.colorSpace=new VideoColorSpace({matrix:"rgb",primaries:"bt709",transfer:"iec61966-2-1",fullRange:!0})}else throw new TypeError("Invalid data type: Must be a BufferSource or CanvasImageSource.")}clone(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),co(this._data)?new na(this._data.clone(),{timestamp:this.timestamp,duration:this.duration,rotation:this.rotation}):this._data instanceof Uint8Array?new na(this._data.slice(),{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation}):new na(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.timestamp,duration:this.duration,colorSpace:this.colorSpace,rotation:this.rotation})}close(){this._closed||(co(this._data)?this._data.close():this._data=null,this._closed=!0)}allocationSize(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),co(this._data)?this._data.allocationSize():this._data instanceof Uint8Array?this._data.byteLength:this.codedWidth*this.codedHeight*4}async copyTo(a){if(!If(a))throw new TypeError("destination must be an ArrayBuffer or an ArrayBuffer view.");if(this._closed)throw new Error("VideoSample is closed.");if(te(this._data!==null),co(this._data))await this._data.copyTo(a);else if(this._data instanceof Uint8Array)Mi(a).set(this._data);else{const l=this._data.getContext("2d");te(l);const s=l.getImageData(0,0,this.codedWidth,this.codedHeight);Mi(a).set(s.data)}}toVideoFrame(){if(this._closed)throw new Error("VideoSample is closed.");return te(this._data!==null),co(this._data)?new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0}):this._data instanceof Uint8Array?new VideoFrame(this._data,{format:this.format,codedWidth:this.codedWidth,codedHeight:this.codedHeight,timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0,colorSpace:this.colorSpace}):new VideoFrame(this._data,{timestamp:this.microsecondTimestamp,duration:this.microsecondDuration||void 0})}draw(a,o,l,s,f,d,h,p,m){let v=0,y=0,b=this.displayWidth,w=this.displayHeight,E=0,_=0,S=this.displayWidth,T=this.displayHeight;if(d!==void 0?(v=o,y=l,b=s,w=f,E=d,_=h,p!==void 0?(S=p,T=m):(S=b,T=w)):(E=o,_=l,s!==void 0&&(S=s,T=f)),!(typeof CanvasRenderingContext2D<"u"&&a instanceof CanvasRenderingContext2D||typeof OffscreenCanvasRenderingContext2D<"u"&&a instanceof OffscreenCanvasRenderingContext2D))throw new TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!Number.isFinite(v))throw new TypeError("sx must be a number.");if(!Number.isFinite(y))throw new TypeError("sy must be a number.");if(!Number.isFinite(b)||b<0)throw new TypeError("sWidth must be a non-negative number.");if(!Number.isFinite(w)||w<0)throw new TypeError("sHeight must be a non-negative number.");if(!Number.isFinite(E))throw new TypeError("dx must be a number.");if(!Number.isFinite(_))throw new TypeError("dy must be a number.");if(!Number.isFinite(S)||S<0)throw new TypeError("dWidth must be a non-negative number.");if(!Number.isFinite(T)||T<0)throw new TypeError("dHeight must be a non-negative number.");if(this._closed)throw new Error("VideoSample is closed.");({sx:v,sy:y,sWidth:b,sHeight:w}=this._rotateSourceRegion(v,y,b,w,this.rotation));const A=this.toCanvasImageSource();a.save();const B=E+S/2,U=_+T/2;a.translate(B,U),a.rotate(this.rotation*Math.PI/180);const H=this.rotation%180===0?1:S/T;a.scale(1/H,H),a.drawImage(A,v,y,b,w,-S/2,-T/2,S,T),a.restore()}drawWithFit(a,o){if(!(typeof CanvasRenderingContext2D<"u"&&a instanceof CanvasRenderingContext2D||typeof OffscreenCanvasRenderingContext2D<"u"&&a instanceof OffscreenCanvasRenderingContext2D))throw new TypeError("context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.");if(!o||typeof o!="object")throw new TypeError("options must be an object.");if(!["fill","contain","cover"].includes(o.fit))throw new TypeError("options.fit must be 'fill', 'contain', or 'cover'.");if(o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError("options.rotation, when provided, must be 0, 90, 180, or 270.");o.crop!==void 0&&ZS(o.crop,"options.");const l=a.canvas.width,s=a.canvas.height,f=o.rotation??this.rotation,[d,h]=f%180===0?[this.codedWidth,this.codedHeight]:[this.codedHeight,this.codedWidth];o.crop&&QS(o.crop,d,h);let p,m,v,y;const{sx:b,sy:w,sWidth:E,sHeight:_}=this._rotateSourceRegion(o.crop?.left??0,o.crop?.top??0,o.crop?.width??d,o.crop?.height??h,f);if(o.fit==="fill")p=0,m=0,v=l,y=s;else{const[T,A]=o.crop?[o.crop.width,o.crop.height]:[d,h],B=o.fit==="contain"?Math.min(l/T,s/A):Math.max(l/T,s/A);v=T*B,y=A*B,p=(l-v)/2,m=(s-y)/2}a.save();const S=f%180===0?1:v/y;a.translate(l/2,s/2),a.rotate(f*Math.PI/180),a.scale(1/S,S),a.translate(-l/2,-s/2),a.drawImage(this.toCanvasImageSource(),b,w,E,_,p,m,v,y),a.restore()}_rotateSourceRegion(a,o,l,s,f){return f===90?[a,o,l,s]=[o,this.codedHeight-a-l,s,l]:f===180?[a,o]=[this.codedWidth-a-l,this.codedHeight-o-s]:f===270&&([a,o,l,s]=[this.codedWidth-o-s,a,s,l]),{sx:a,sy:o,sWidth:l,sHeight:s}}toCanvasImageSource(){if(this._closed)throw new Error("VideoSample is closed.");if(te(this._data!==null),this._data instanceof Uint8Array){const a=this.toVideoFrame();return queueMicrotask(()=>a.close()),a}else return this._data}setRotation(a){if(![0,90,180,270].includes(a))throw new TypeError("newRotation must be 0, 90, 180, or 270.");this.rotation=a}setTimestamp(a){if(!Number.isFinite(a))throw new TypeError("newTimestamp must be a number.");this.timestamp=a}setDuration(a){if(!Number.isFinite(a)||a<0)throw new TypeError("newDuration must be a non-negative number.");this.duration=a}[Symbol.dispose](){this.close()}}const co=i=>typeof VideoFrame<"u"&&i instanceof VideoFrame,QS=(i,a,o)=>{i.left=Math.min(i.left,a),i.top=Math.min(i.top,o),i.width=Math.min(i.width,a-i.left),i.height=Math.min(i.height,o-i.top),te(i.width>=0),te(i.height>=0)},ZS=(i,a)=>{if(!i||typeof i!="object")throw new TypeError(a+"crop, when provided, must be an object.");if(!Number.isInteger(i.left)||i.left<0)throw new TypeError(a+"crop.left must be a non-negative integer.");if(!Number.isInteger(i.top)||i.top<0)throw new TypeError(a+"crop.top must be a non-negative integer.");if(!Number.isInteger(i.width)||i.width<0)throw new TypeError(a+"crop.width must be a non-negative integer.");if(!Number.isInteger(i.height)||i.height<0)throw new TypeError(a+"crop.height must be a non-negative integer.")};const WS=i=>{let o=(i.hasVideo?"video/":i.hasAudio?"audio/":"application/")+(i.isQuickTime?"quicktime":"mp4");if(i.codecStrings.length>0){const l=[...new Set(i.codecStrings)];o+=`; codecs="${l.join(", ")}"`}return o};const Wu=8,Jp=16;const eg=/<(?:(\d{2}):)?(\d{2}):(\d{2}).(\d{3})>/g,KS=i=>{const a=Math.floor(i/36e5),o=Math.floor(i%(3600*1e3)/(60*1e3)),l=Math.floor(i%(60*1e3)/1e3),s=i%1e3;return a.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+"."+s.toString().padStart(3,"0")};class tg{constructor(a){this.writer=a,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap}writeU32(a){this.helperView.setUint32(0,a,!1),this.writer.write(this.helper.subarray(0,4))}writeU64(a){this.helperView.setUint32(0,Math.floor(a/2**32),!1),this.helperView.setUint32(4,a,!1),this.writer.write(this.helper.subarray(0,8))}writeAscii(a){for(let o=0;o<a.length;o++)this.helperView.setUint8(o%8,a.charCodeAt(o)),o%8===7&&this.writer.write(this.helper);a.length%8!==0&&this.writer.write(this.helper.subarray(0,a.length%8))}writeBox(a){if(this.offsets.set(a,this.writer.getPos()),a.contents&&!a.children)this.writeBoxHeader(a,a.size??a.contents.byteLength+8),this.writer.write(a.contents);else{const o=this.writer.getPos();if(this.writeBoxHeader(a,0),a.contents&&this.writer.write(a.contents),a.children)for(const f of a.children)f&&this.writeBox(f);const l=this.writer.getPos(),s=a.size??l-o;this.writer.seek(o),this.writeBoxHeader(a,s),this.writer.seek(l)}}writeBoxHeader(a,o){this.writeU32(a.largeSize?1:o),this.writeAscii(a.type),a.largeSize&&this.writeU64(o)}measureBoxHeader(a){return 8+(a.largeSize?8:0)}patchBox(a){const o=this.offsets.get(a);te(o!==void 0);const l=this.writer.getPos();this.writer.seek(o),this.writeBox(a),this.writer.seek(l)}measureBox(a){if(a.contents&&!a.children)return this.measureBoxHeader(a)+a.contents.byteLength;{let o=this.measureBoxHeader(a);if(a.contents&&(o+=a.contents.byteLength),a.children)for(const l of a.children)l&&(o+=this.measureBox(l));return o}}}const Ae=new Uint8Array(8),Tn=new DataView(Ae.buffer),Xe=i=>[(i%256+256)%256],ce=i=>(Tn.setUint16(0,i,!1),[Ae[0],Ae[1]]),wv=i=>(Tn.setInt16(0,i,!1),[Ae[0],Ae[1]]),Sv=i=>(Tn.setUint32(0,i,!1),[Ae[1],Ae[2],Ae[3]]),Z=i=>(Tn.setUint32(0,i,!1),[Ae[0],Ae[1],Ae[2],Ae[3]]),zi=i=>(Tn.setInt32(0,i,!1),[Ae[0],Ae[1],Ae[2],Ae[3]]),oa=i=>(Tn.setUint32(0,Math.floor(i/2**32),!1),Tn.setUint32(4,i,!1),[Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],Ae[7]]),Ev=i=>(Tn.setInt16(0,2**8*i,!1),[Ae[0],Ae[1]]),Gn=i=>(Tn.setInt32(0,2**16*i,!1),[Ae[0],Ae[1],Ae[2],Ae[3]]),Ku=i=>(Tn.setInt32(0,2**30*i,!1),[Ae[0],Ae[1],Ae[2],Ae[3]]),$u=(i,a)=>{const o=[];let l=i;do{let s=l&127;l>>=7,o.length>0&&(s|=128),o.push(s)}while(l>0||a);return o.reverse()},gt=(i,a=!1)=>{const o=Array(i.length).fill(null).map((l,s)=>i.charCodeAt(s));return a&&o.push(0),o},Yf=i=>{let a=null;for(const o of i)(!a||o.timestamp>a.timestamp)&&(a=o);return a},_v=i=>{const a=i*(Math.PI/180),o=Math.round(Math.cos(a)),l=Math.round(Math.sin(a));return[o,l,0,-l,o,0,0,0,1]},Tv=_v(0),Cv=i=>[Gn(i[0]),Gn(i[1]),Ku(i[2]),Gn(i[3]),Gn(i[4]),Ku(i[5]),Gn(i[6]),Gn(i[7]),Ku(i[8])],ue=(i,a,o)=>({type:i,contents:a&&new Uint8Array(a.flat(10)),children:o}),Be=(i,a,o,l,s)=>ue(i,[Xe(a),Sv(o),l??[]],s),$S=i=>i.isQuickTime?ue("ftyp",[gt("qt  "),Z(512),gt("qt  ")]):i.fragmented?ue("ftyp",[gt("iso5"),Z(512),gt("iso5"),gt("iso6"),gt("mp41")]):ue("ftyp",[gt("isom"),Z(512),gt("isom"),i.holdsAvc?gt("avc1"):[],gt("mp41")]),Xl=i=>({type:"mdat",largeSize:i}),JS=i=>({type:"free",size:i}),uo=i=>ue("moov",void 0,[eE(i.creationTime,i.trackDatas),...i.trackDatas.map(a=>tE(a,i.creationTime)),i.isFragmented?jE(i.trackDatas):null,ZE(i)]),eE=(i,a)=>{const o=ot(Math.max(0,...a.filter(d=>d.samples.length>0).map(d=>{const h=Yf(d.samples);return h.timestamp+h.duration})),xf),l=Math.max(0,...a.map(d=>d.track.id))+1,s=!lr(i)||!lr(o),f=s?oa:Z;return Be("mvhd",+s,0,[f(i),f(i),Z(xf),f(o),Gn(1),Ev(1),Array(10).fill(0),Cv(Tv),Array(24).fill(0),Z(l)])},tE=(i,a)=>{const o=o_(i);return ue("trak",void 0,[nE(i,a),iE(i,a),o.name!==void 0?ue("udta",void 0,[ue("name",[...wn.encode(o.name)])]):null])},nE=(i,a)=>{const o=Yf(i.samples),l=ot(o?o.timestamp+o.duration:0,xf),s=!lr(a)||!lr(l),f=s?oa:Z;let d;if(i.type==="video"){const p=i.track.metadata.rotation;d=_v(p??0)}else d=Tv;let h=2;return i.track.metadata.disposition?.default!==!1&&(h|=1),Be("tkhd",+s,h,[f(a),f(a),Z(i.track.id),Z(0),f(l),Array(8).fill(0),ce(0),ce(i.track.id),Ev(i.type==="audio"?1:0),ce(0),Cv(d),Gn(i.type==="video"?i.info.width:0),Gn(i.type==="video"?i.info.height:0)])},iE=(i,a)=>ue("mdia",void 0,[aE(i,a),qf(!0,rE[i.type],oE[i.type]),lE(i)]),aE=(i,a)=>{const o=Yf(i.samples),l=ot(o?o.timestamp+o.duration:0,i.timescale),s=!lr(a)||!lr(l),f=s?oa:Z;return Be("mdhd",+s,0,[f(a),f(a),Z(i.timescale),f(l),ce(Ov(i.track.metadata.languageCode??fS)),ce(0)])},rE={video:"vide",audio:"soun",subtitle:"text"},oE={video:"MediabunnyVideoHandler",audio:"MediabunnySoundHandler",subtitle:"MediabunnyTextHandler"},qf=(i,a,o,l="\0\0\0\0")=>Be("hdlr",0,0,[i?gt("mhlr"):Z(0),gt(a),gt(l),Z(0),Z(0),gt(o,!0)]),lE=i=>ue("minf",void 0,[fE[i.type](),dE(),pE(i)]),sE=()=>Be("vmhd",0,1,[ce(0),ce(0),ce(0),ce(0)]),cE=()=>Be("smhd",0,0,[ce(0),ce(0)]),uE=()=>Be("nmhd",0,0),fE={video:sE,audio:cE,subtitle:uE},dE=()=>ue("dinf",void 0,[hE()]),hE=()=>Be("dref",0,0,[Z(1)],[mE()]),mE=()=>Be("url ",0,1),pE=i=>{const a=i.compositionTimeOffsetTable.length>1||i.compositionTimeOffsetTable.some(o=>o.sampleCompositionTimeOffset!==0);return ue("stbl",void 0,[gE(i),RE(i),a?UE(i):null,a?DE(i):null,ME(i),BE(i),NE(i),OE(i)])},gE=i=>{let a;if(i.type==="video")a=vE(JE(i.track.source._codec,i.info.decoderConfig.codec),i);else if(i.type==="audio"){const o=Rv(i.track.source._codec,i.muxer.isQuickTime);te(o),a=SE(o,i)}else i.type==="subtitle"&&(a=zE(n_[i.track.source._codec],i));return te(a),Be("stsd",0,0,[Z(1)],[a])},vE=(i,a)=>ue(i,[Array(6).fill(0),ce(1),ce(0),ce(0),Array(12).fill(0),ce(a.info.width),ce(a.info.height),Z(4718592),Z(4718592),Z(0),ce(1),Array(32).fill(0),ce(24),wv(65535)],[e_[a.track.source._codec](a),cS(a.info.decoderConfig.colorSpace)?yE(a):null]),yE=i=>ue("colr",[gt("nclx"),ce(Ff[i.info.decoderConfig.colorSpace.primaries]),ce(kf[i.info.decoderConfig.colorSpace.transfer]),ce(Hf[i.info.decoderConfig.colorSpace.matrix]),Xe((i.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),xE=i=>i.info.decoderConfig&&ue("avcC",[...Mi(i.info.decoderConfig.description)]),bE=i=>i.info.decoderConfig&&ue("hvcC",[...Mi(i.info.decoderConfig.description)]),ng=i=>{if(!i.info.decoderConfig)return null;const a=i.info.decoderConfig,o=a.codec.split("."),l=Number(o[1]),s=Number(o[2]),f=Number(o[3]),d=o[4]?Number(o[4]):1,h=o[8]?Number(o[8]):Number(a.colorSpace?.fullRange??0),p=(f<<4)+(d<<1)+h,m=o[5]?Number(o[5]):a.colorSpace?.primaries?Ff[a.colorSpace.primaries]:2,v=o[6]?Number(o[6]):a.colorSpace?.transfer?kf[a.colorSpace.transfer]:2,y=o[7]?Number(o[7]):a.colorSpace?.matrix?Hf[a.colorSpace.matrix]:2;return Be("vpcC",1,0,[Xe(l),Xe(s),Xe(p),Xe(m),Xe(v),Xe(y),ce(0)])},wE=i=>ue("av1C",wS(i.info.decoderConfig.codec)),SE=(i,a)=>{let o=0,l,s=16;if(ra.includes(a.track.source._codec)){const f=a.track.source._codec,{sampleSize:d}=wo(f);s=8*d,s>16&&(o=1)}return o===0?l=[Array(6).fill(0),ce(1),ce(o),ce(0),Z(0),ce(a.info.numberOfChannels),ce(s),ce(0),ce(0),ce(a.info.sampleRate<2**16?a.info.sampleRate:0),ce(0)]:l=[Array(6).fill(0),ce(1),ce(o),ce(0),Z(0),ce(a.info.numberOfChannels),ce(Math.min(s,16)),ce(0),ce(0),ce(a.info.sampleRate<2**16?a.info.sampleRate:0),ce(0),Z(1),Z(s/8),Z(a.info.numberOfChannels*s/8),Z(2)],ue(i,l,[t_(a.track.source._codec,a.muxer.isQuickTime)?.(a)??null])},Ju=i=>{let a;switch(i.track.source._codec){case"aac":a=64;break;case"mp3":a=107;break;case"vorbis":a=221;break;default:throw new Error(`Unhandled audio codec: ${i.track.source._codec}`)}let o=[...Xe(a),...Xe(21),...Sv(0),...Z(0),...Z(0)];if(i.info.decoderConfig.description){const l=Mi(i.info.decoderConfig.description);o=[...o,...Xe(5),...$u(l.byteLength),...l]}return o=[...ce(1),...Xe(0),...Xe(4),...$u(o.length),...o,...Xe(6),...Xe(1),...Xe(2)],o=[...Xe(3),...$u(o.length),...o],Be("esds",0,0,o)},Ti=i=>ue("wave",void 0,[EE(i),_E(i),ue("\0\0\0\0")]),EE=i=>ue("frma",[gt(Rv(i.track.source._codec,i.muxer.isQuickTime))]),_E=i=>{const{littleEndian:a}=wo(i.track.source._codec);return ue("enda",[ce(+a)])},TE=i=>{let a=i.info.numberOfChannels,o=3840,l=i.info.sampleRate,s=0,f=0,d=new Uint8Array(0);const h=i.info.decoderConfig?.description;if(h){te(h.byteLength>=18);const p=Mi(h),m=GS(p);a=m.outputChannelCount,o=m.preSkip,l=m.inputSampleRate,s=m.outputGain,f=m.channelMappingFamily,m.channelMappingTable&&(d=m.channelMappingTable)}return ue("dOps",[Xe(0),Xe(a),ce(o),Z(l),wv(s),Xe(f),...d])},CE=i=>{const a=i.info.decoderConfig?.description;te(a);const o=Mi(a);return Be("dfLa",0,0,[...o.subarray(4)])},pn=i=>{const{littleEndian:a,sampleSize:o}=wo(i.track.source._codec),l=+a;return Be("pcmC",0,0,[Xe(l),Xe(8*o)])},zE=(i,a)=>ue(i,[Array(6).fill(0),ce(1)],[i_[a.track.source._codec](a)]),AE=i=>ue("vttC",[...wn.encode(i.info.config.description)]),RE=i=>Be("stts",0,0,[Z(i.timeToSampleTable.length),i.timeToSampleTable.map(a=>[Z(a.sampleCount),Z(a.sampleDelta)])]),OE=i=>{if(i.samples.every(o=>o.type==="key"))return null;const a=[...i.samples.entries()].filter(([,o])=>o.type==="key");return Be("stss",0,0,[Z(a.length),a.map(([o])=>Z(o+1))])},ME=i=>Be("stsc",0,0,[Z(i.compactlyCodedChunkTable.length),i.compactlyCodedChunkTable.map(a=>[Z(a.firstChunk),Z(a.samplesPerChunk),Z(1)])]),BE=i=>{if(i.type==="audio"&&i.info.requiresPcmTransformation){const{sampleSize:a}=wo(i.track.source._codec);return Be("stsz",0,0,[Z(a*i.info.numberOfChannels),Z(i.samples.reduce((o,l)=>o+ot(l.duration,i.timescale),0))])}return Be("stsz",0,0,[Z(0),Z(i.samples.length),i.samples.map(a=>Z(a.size))])},NE=i=>i.finalizedChunks.length>0&&xn(i.finalizedChunks).offset>=2**32?Be("co64",0,0,[Z(i.finalizedChunks.length),i.finalizedChunks.map(a=>oa(a.offset))]):Be("stco",0,0,[Z(i.finalizedChunks.length),i.finalizedChunks.map(a=>Z(a.offset))]),UE=i=>Be("ctts",1,0,[Z(i.compositionTimeOffsetTable.length),i.compositionTimeOffsetTable.map(a=>[Z(a.sampleCount),zi(a.sampleCompositionTimeOffset)])]),DE=i=>{let a=1/0,o=-1/0,l=1/0,s=-1/0;te(i.compositionTimeOffsetTable.length>0),te(i.samples.length>0);for(let d=0;d<i.compositionTimeOffsetTable.length;d++){const h=i.compositionTimeOffsetTable[d];a=Math.min(a,h.sampleCompositionTimeOffset),o=Math.max(o,h.sampleCompositionTimeOffset)}for(let d=0;d<i.samples.length;d++){const h=i.samples[d];l=Math.min(l,ot(h.timestamp,i.timescale)),s=Math.max(s,ot(h.timestamp+h.duration,i.timescale))}const f=Math.max(-a,0);return s>=2**31?null:Be("cslg",0,0,[zi(f),zi(a),zi(o),zi(l),zi(s)])},jE=i=>ue("mvex",void 0,i.map(LE)),LE=i=>Be("trex",0,0,[Z(i.track.id),Z(1),Z(0),Z(0),Z(0)]),ig=(i,a)=>ue("moof",void 0,[PE(i),...a.map(FE)]),PE=i=>Be("mfhd",0,0,[Z(i)]),zv=i=>{let a=0,o=0;const l=0,s=0,f=i.type==="delta";return o|=+f,f?a|=1:a|=2,a<<24|o<<16|l<<8|s},FE=i=>ue("traf",void 0,[kE(i),HE(i),IE(i)]),kE=i=>{te(i.currentChunk);let a=0;a|=8,a|=16,a|=32,a|=131072;const o=i.currentChunk.samples[1]??i.currentChunk.samples[0],l={duration:o.timescaleUnitsToNextSample,size:o.size,flags:zv(o)};return Be("tfhd",0,a,[Z(i.track.id),Z(l.duration),Z(l.size),Z(l.flags)])},HE=i=>(te(i.currentChunk),Be("tfdt",1,0,[oa(ot(i.currentChunk.startTimestamp,i.timescale))])),IE=i=>{te(i.currentChunk);const a=i.currentChunk.samples.map(_=>_.timescaleUnitsToNextSample),o=i.currentChunk.samples.map(_=>_.size),l=i.currentChunk.samples.map(zv),s=i.currentChunk.samples.map(_=>ot(_.timestamp-_.decodeTimestamp,i.timescale)),f=new Set(a),d=new Set(o),h=new Set(l),p=new Set(s),m=h.size===2&&l[0]!==l[1],v=f.size>1,y=d.size>1,b=!m&&h.size>1,w=p.size>1||[...p].some(_=>_!==0);let E=0;return E|=1,E|=4*+m,E|=256*+v,E|=512*+y,E|=1024*+b,E|=2048*+w,Be("trun",1,E,[Z(i.currentChunk.samples.length),Z(i.currentChunk.offset-i.currentChunk.moofOffset||0),m?Z(l[0]):[],i.currentChunk.samples.map((_,S)=>[v?Z(a[S]):[],y?Z(o[S]):[],b?Z(l[S]):[],w?zi(s[S]):[]])])},VE=i=>ue("mfra",void 0,[...i.map(YE),qE()]),YE=(i,a)=>Be("tfra",1,0,[Z(i.track.id),Z(63),Z(i.finalizedChunks.length),i.finalizedChunks.map(l=>[oa(ot(l.samples[0].timestamp,i.timescale)),oa(l.moofOffset),Z(a+1),Z(1),Z(1)])]),qE=()=>Be("mfro",0,0,[Z(0)]),GE=()=>ue("vtte"),XE=(i,a,o,l,s)=>ue("vttc",void 0,[s!==null?ue("vsid",[zi(s)]):null,o!==null?ue("iden",[...wn.encode(o)]):null,a!==null?ue("ctim",[...wn.encode(KS(a))]):null,l!==null?ue("sttg",[...wn.encode(l)]):null,ue("payl",[...wn.encode(i)])]),QE=i=>ue("vtta",[...wn.encode(i)]),ZE=i=>{const a=[],o=i.format._options.metadataFormat??"auto",l=i.output._metadataTags;if(o==="mdir"||o==="auto"&&!i.isQuickTime){const s=KE(l);s&&a.push(s)}else if(o==="mdta"){const s=$E(l);s&&a.push(s)}else(o==="udta"||o==="auto"&&i.isQuickTime)&&WE(a,i.output._metadataTags);return a.length===0?null:ue("udta",void 0,a)},WE=(i,a)=>{for(const{key:o,value:l}of vv(a))switch(o){case"title":i.push(gn("nam",l));break;case"description":i.push(gn("des",l));break;case"artist":i.push(gn("ART",l));break;case"album":i.push(gn("alb",l));break;case"albumArtist":i.push(gn("albr",l));break;case"genre":i.push(gn("gen",l));break;case"date":i.push(gn("day",l.toISOString().slice(0,10)));break;case"comment":i.push(gn("cmt",l));break;case"lyrics":i.push(gn("lyr",l));break;case"raw":break;case"discNumber":case"discsTotal":case"trackNumber":case"tracksTotal":case"images":break;default:gv(o)}if(a.raw)for(const o in a.raw){const l=a.raw[o];l==null||o.length!==4||i.some(s=>s.type===o)||(typeof l=="string"?i.push(gn(o,l)):l instanceof Uint8Array&&i.push(ue(o,Array.from(l))))}},gn=(i,a)=>{const o=wn.encode(a);return ue(i,[ce(o.length),ce(Ov("und")),Array.from(o)])},ag={"image/jpeg":13,"image/png":14,"image/bmp":27},Av=(i,a)=>{const o=[];for(const{key:l,value:s}of vv(i))switch(l){case"title":o.push({key:a?"title":"nam",value:rn(s)});break;case"description":o.push({key:a?"description":"des",value:rn(s)});break;case"artist":o.push({key:a?"artist":"ART",value:rn(s)});break;case"album":o.push({key:a?"album":"alb",value:rn(s)});break;case"albumArtist":o.push({key:a?"album_artist":"aART",value:rn(s)});break;case"comment":o.push({key:a?"comment":"cmt",value:rn(s)});break;case"genre":o.push({key:a?"genre":"gen",value:rn(s)});break;case"lyrics":o.push({key:a?"lyrics":"lyr",value:rn(s)});break;case"date":o.push({key:a?"date":"day",value:rn(s.toISOString().slice(0,10))});break;case"images":for(const f of s)f.kind==="coverFront"&&o.push({key:"covr",value:ue("data",[Z(ag[f.mimeType]??0),Z(0),Array.from(f.data)])});break;case"trackNumber":if(a){const f=i.tracksTotal!==void 0?`${s}/${i.tracksTotal}`:s.toString();o.push({key:"track",value:rn(f)})}else o.push({key:"trkn",value:ue("data",[Z(0),Z(0),ce(0),ce(s),ce(i.tracksTotal??0),ce(0)])});break;case"discNumber":a||o.push({key:"disc",value:ue("data",[Z(0),Z(0),ce(0),ce(s),ce(i.discsTotal??0),ce(0)])});break;case"tracksTotal":case"discsTotal":break;case"raw":break;default:gv(l)}if(i.raw)for(const l in i.raw){const s=i.raw[l];s==null||!a&&l.length!==4||o.some(f=>f.key===l)||(typeof s=="string"?o.push({key:l,value:rn(s)}):s instanceof Uint8Array?o.push({key:l,value:ue("data",[Z(0),Z(0),Array.from(s)])}):s instanceof yv&&o.push({key:l,value:ue("data",[Z(ag[s.mimeType]??0),Z(0),Array.from(s.data)])}))}return o},KE=i=>{const a=Av(i,!1);return a.length===0?null:Be("meta",0,0,void 0,[qf(!1,"mdir","","appl"),ue("ilst",void 0,a.map(o=>ue(o.key,void 0,[o.value])))])},$E=i=>{const a=Av(i,!0);return a.length===0?null:ue("meta",void 0,[qf(!1,"mdta",""),Be("keys",0,0,[Z(a.length)],a.map(o=>ue("mdta",[...wn.encode(o.key)]))),ue("ilst",void 0,a.map((o,l)=>{const s=String.fromCharCode(...Z(l+1));return ue(s,void 0,[o.value])}))])},rn=i=>ue("data",[Z(1),Z(0),...wn.encode(i)]),JE=(i,a)=>{switch(i){case"avc":return a.startsWith("avc3")?"avc3":"avc1";case"hevc":return"hvc1";case"vp8":return"vp08";case"vp9":return"vp09";case"av1":return"av01"}},e_={avc:xE,hevc:bE,vp8:ng,vp9:ng,av1:wE},Rv=(i,a)=>{switch(i){case"aac":return"mp4a";case"mp3":return"mp4a";case"opus":return"Opus";case"vorbis":return"mp4a";case"flac":return"fLaC";case"ulaw":return"ulaw";case"alaw":return"alaw";case"pcm-u8":return"raw ";case"pcm-s8":return"sowt"}if(a)switch(i){case"pcm-s16":return"sowt";case"pcm-s16be":return"twos";case"pcm-s24":return"in24";case"pcm-s24be":return"in24";case"pcm-s32":return"in32";case"pcm-s32be":return"in32";case"pcm-f32":return"fl32";case"pcm-f32be":return"fl32";case"pcm-f64":return"fl64";case"pcm-f64be":return"fl64"}else switch(i){case"pcm-s16":return"ipcm";case"pcm-s16be":return"ipcm";case"pcm-s24":return"ipcm";case"pcm-s24be":return"ipcm";case"pcm-s32":return"ipcm";case"pcm-s32be":return"ipcm";case"pcm-f32":return"fpcm";case"pcm-f32be":return"fpcm";case"pcm-f64":return"fpcm";case"pcm-f64be":return"fpcm"}},t_=(i,a)=>{switch(i){case"aac":return Ju;case"mp3":return Ju;case"opus":return TE;case"vorbis":return Ju;case"flac":return CE}if(a)switch(i){case"pcm-s24":return Ti;case"pcm-s24be":return Ti;case"pcm-s32":return Ti;case"pcm-s32be":return Ti;case"pcm-f32":return Ti;case"pcm-f32be":return Ti;case"pcm-f64":return Ti;case"pcm-f64be":return Ti}else switch(i){case"pcm-s16":return pn;case"pcm-s16be":return pn;case"pcm-s24":return pn;case"pcm-s24be":return pn;case"pcm-s32":return pn;case"pcm-s32be":return pn;case"pcm-f32":return pn;case"pcm-f32be":return pn;case"pcm-f64":return pn;case"pcm-f64be":return pn}return null},n_={webvtt:"wvtt"},i_={webvtt:AE},Ov=i=>{te(i.length===3);let a=0;for(let o=0;o<3;o++)a<<=5,a+=i.charCodeAt(o)-96;return a};class a_{constructor(){this.ensureMonotonicity=!1,this.trackedWrites=null,this.trackedStart=-1,this.trackedEnd=-1}start(){}maybeTrackWrites(a){if(!this.trackedWrites)return;let o=this.getPos();if(o<this.trackedStart){if(o+a.byteLength<=this.trackedStart)return;a=a.subarray(this.trackedStart-o),o=0}const l=o+a.byteLength-this.trackedStart;let s=this.trackedWrites.byteLength;for(;s<l;)s*=2;if(s!==this.trackedWrites.byteLength){const f=new Uint8Array(s);f.set(this.trackedWrites,0),this.trackedWrites=f}this.trackedWrites.set(a,o-this.trackedStart),this.trackedEnd=Math.max(this.trackedEnd,o+a.byteLength)}startTrackingWrites(){this.trackedWrites=new Uint8Array(2**10),this.trackedStart=this.getPos(),this.trackedEnd=this.trackedStart}stopTrackingWrites(){if(!this.trackedWrites)throw new Error("Internal error: Can't get tracked writes since nothing was tracked.");const o={data:this.trackedWrites.subarray(0,this.trackedEnd-this.trackedStart),start:this.trackedStart,end:this.trackedEnd};return this.trackedWrites=null,o}}const ef=2**16,tf=2**32;class Mv extends a_{constructor(a){if(super(),this.pos=0,this.maxPos=0,this.target=a,this.supportsResize="resize"in new ArrayBuffer(0),this.supportsResize)try{this.buffer=new ArrayBuffer(ef,{maxByteLength:tf})}catch{this.buffer=new ArrayBuffer(ef),this.supportsResize=!1}else this.buffer=new ArrayBuffer(ef);this.bytes=new Uint8Array(this.buffer)}ensureSize(a){let o=this.buffer.byteLength;for(;o<a;)o*=2;if(o!==this.buffer.byteLength){if(o>tf)throw new Error(`ArrayBuffer exceeded maximum size of ${tf} bytes. Please consider using another target.`);if(this.supportsResize)this.buffer.resize(o);else{const l=new ArrayBuffer(o),s=new Uint8Array(l);s.set(this.bytes,0),this.buffer=l,this.bytes=s}}}write(a){this.maybeTrackWrites(a),this.ensureSize(this.pos+a.byteLength),this.bytes.set(a,this.pos),this.target.onwrite?.(this.pos,this.pos+a.byteLength),this.pos+=a.byteLength,this.maxPos=Math.max(this.maxPos,this.pos)}seek(a){this.pos=a}getPos(){return this.pos}async flush(){}async finalize(){this.ensureSize(this.pos),this.target.buffer=this.buffer.slice(0,Math.max(this.maxPos,this.pos))}async close(){}getSlice(a,o){return this.bytes.slice(a,o)}}class Bv{constructor(){this._output=null,this.onwrite=null}}class Nv extends Bv{constructor(){super(...arguments),this.buffer=null}_createWriter(){return new Mv(this)}}const xf=1e3,r_=2082844800,o_=i=>{const a={},o=i.track;return o.metadata.name!==void 0&&(a.name=o.metadata.name),a},ot=(i,a,o=!0)=>{const l=i*a;return o?Math.round(l):l};class l_ extends NS{constructor(a,o){super(a),this.auxTarget=new Nv,this.auxWriter=this.auxTarget._createWriter(),this.auxBoxWriter=new tg(this.auxWriter),this.mdat=null,this.ftypSize=null,this.trackDatas=[],this.allTracksKnown=uS(),this.creationTime=Math.floor(Date.now()/1e3)+r_,this.finalizedChunks=[],this.nextFragmentNumber=1,this.maxWrittenTimestamp=-1/0,this.format=o,this.writer=a._writer,this.boxWriter=new tg(this.writer),this.isQuickTime=o instanceof Lv;const l=this.writer instanceof Mv?"in-memory":!1;this.fastStart=o._options.fastStart??l,this.isFragmented=this.fastStart==="fragmented",(this.fastStart==="in-memory"||this.isFragmented)&&(this.writer.ensureMonotonicity=!0),this.minimumFragmentDuration=o._options.minimumFragmentDuration??1}async start(){const a=await this.mutex.acquire(),o=this.output._tracks.some(l=>l.type==="video"&&l.source._codec==="avc");if(this.format._options.onFtyp&&this.writer.startTrackingWrites(),this.boxWriter.writeBox($S({isQuickTime:this.isQuickTime,holdsAvc:o,fragmented:this.isFragmented})),this.format._options.onFtyp){const{data:l,start:s}=this.writer.stopTrackingWrites();this.format._options.onFtyp(l,s)}if(this.ftypSize=this.writer.getPos(),this.fastStart!=="in-memory")if(this.fastStart==="reserve"){for(const l of this.output._tracks)if(l.metadata.maximumPacketCount===void 0)throw new Error("All tracks must specify maximumPacketCount in their metadata when using fastStart: 'reserve'.")}else this.isFragmented||(this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=Xl(!0),this.boxWriter.writeBox(this.mdat));await this.writer.flush(),a()}allTracksAreKnown(){for(const a of this.output._tracks)if(!a.source._closed&&!this.trackDatas.some(o=>o.track===a))return!1;return!0}async getMimeType(){await this.allTracksKnown.promise;const a=this.trackDatas.map(o=>o.type==="video"||o.type==="audio"?o.info.decoderConfig.codec:{webvtt:"wvtt"}[o.track.source._codec]);return WS({isQuickTime:this.isQuickTime,hasVideo:this.trackDatas.some(o=>o.type==="video"),hasAudio:this.trackDatas.some(o=>o.type==="audio"),codecStrings:a})}getVideoTrackData(a,o,l){const s=this.trackDatas.find(m=>m.track===a);if(s)return s;RS(l),te(l),te(l.decoderConfig);const f={...l.decoderConfig};te(f.codedWidth!==void 0),te(f.codedHeight!==void 0);let d=!1;if(a.source._codec==="avc"&&!f.description){const m=DS(o.data);if(!m)throw new Error("Couldn't extract an AVCDecoderConfigurationRecord from the AVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.264) when not providing a description, or provide a description (must be an AVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in AVCC format.");f.description=jS(m),d=!0}else if(a.source._codec==="hevc"&&!f.description){const m=PS(o.data);if(!m)throw new Error("Couldn't extract an HEVCDecoderConfigurationRecord from the HEVC packet. Make sure the packets are in Annex B format (as specified in ITU-T-REC-H.265) when not providing a description, or provide a description (must be an HEVCDecoderConfigurationRecord as specified in ISO 14496-15) and ensure the packets are in HEVC format.");f.description=qS(m),d=!0}const h=mS(1/(a.metadata.frameRate??57600),1e6).denominator,p={muxer:this,track:a,type:"video",info:{width:f.codedWidth,height:f.codedHeight,decoderConfig:f,requiresAnnexBTransformation:d},timescale:h,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(p),this.trackDatas.sort((m,v)=>m.track.id-v.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),p}getAudioTrackData(a,o){const l=this.trackDatas.find(f=>f.track===a);if(l)return l;MS(o),te(o),te(o.decoderConfig);const s={muxer:this,track:a,type:"audio",info:{numberOfChannels:o.decoderConfig.numberOfChannels,sampleRate:o.decoderConfig.sampleRate,decoderConfig:o.decoderConfig,requiresPcmTransformation:!this.isFragmented&&ra.includes(a.source._codec)},timescale:o.decoderConfig.sampleRate,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[]};return this.trackDatas.push(s),this.trackDatas.sort((f,d)=>f.track.id-d.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),s}getSubtitleTrackData(a,o){const l=this.trackDatas.find(f=>f.track===a);if(l)return l;BS(o),te(o),te(o.config);const s={muxer:this,track:a,type:"subtitle",info:{config:o.config},timescale:1e3,samples:[],sampleQueue:[],timestampProcessingQueue:[],timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,finalizedChunks:[],currentChunk:null,compactlyCodedChunkTable:[],lastCueEndTimestamp:0,cueQueue:[],nextSourceId:0,cueToSourceId:new WeakMap};return this.trackDatas.push(s),this.trackDatas.sort((f,d)=>f.track.id-d.track.id),this.allTracksAreKnown()&&this.allTracksKnown.resolve(),s}async addEncodedVideoPacket(a,o,l){const s=await this.mutex.acquire();try{const f=this.getVideoTrackData(a,o,l);let d=o.data;if(f.info.requiresAnnexBTransformation){const m=US(d);if(!m)throw new Error("Failed to transform packet data. Make sure all packets are provided in Annex B format, as specified in ITU-T-REC-H.264 and ITU-T-REC-H.265.");d=m}const h=this.validateAndNormalizeTimestamp(f.track,o.timestamp,o.type==="key"),p=this.createSampleForTrack(f,d,h,o.duration,o.type);await this.registerSample(f,p)}finally{s()}}async addEncodedAudioPacket(a,o,l){const s=await this.mutex.acquire();try{const f=this.getAudioTrackData(a,l),d=this.validateAndNormalizeTimestamp(f.track,o.timestamp,o.type==="key"),h=this.createSampleForTrack(f,o.data,d,o.duration,o.type);f.info.requiresPcmTransformation&&await this.maybePadWithSilence(f,d),await this.registerSample(f,h)}finally{s()}}async maybePadWithSilence(a,o){const l=xn(a.samples),s=l?l.timestamp+l.duration:0,f=o-s,d=ot(f,a.timescale);if(d>0){const{sampleSize:h,silentValue:p}=wo(a.info.decoderConfig.codec),m=d*a.info.numberOfChannels,v=new Uint8Array(h*m).fill(p),y=this.createSampleForTrack(a,new Uint8Array(v.buffer),s,f,"key");await this.registerSample(a,y)}}async addSubtitleCue(a,o,l){const s=await this.mutex.acquire();try{const f=this.getSubtitleTrackData(a,l);this.validateAndNormalizeTimestamp(f.track,o.timestamp,!0),a.source._codec==="webvtt"&&(f.cueQueue.push(o),await this.processWebVTTCues(f,o.timestamp))}finally{s()}}async processWebVTTCues(a,o){for(;a.cueQueue.length>0;){const l=new Set([]);for(const m of a.cueQueue)te(m.timestamp<=o),te(a.lastCueEndTimestamp<=m.timestamp+m.duration),l.add(Math.max(m.timestamp,a.lastCueEndTimestamp)),l.add(m.timestamp+m.duration);const s=[...l].sort((m,v)=>m-v),f=s[0],d=s[1]??f;if(o<d)break;if(a.lastCueEndTimestamp<f){this.auxWriter.seek(0);const m=GE();this.auxBoxWriter.writeBox(m);const v=this.auxWriter.getSlice(0,this.auxWriter.getPos()),y=this.createSampleForTrack(a,v,a.lastCueEndTimestamp,f-a.lastCueEndTimestamp,"key");await this.registerSample(a,y),a.lastCueEndTimestamp=f}this.auxWriter.seek(0);for(let m=0;m<a.cueQueue.length;m++){const v=a.cueQueue[m];if(v.timestamp>=d)break;eg.lastIndex=0;const y=eg.test(v.text),b=v.timestamp+v.duration;let w=a.cueToSourceId.get(v);if(w===void 0&&d<b&&(w=a.nextSourceId++,a.cueToSourceId.set(v,w)),v.notes){const _=QE(v.notes);this.auxBoxWriter.writeBox(_)}const E=XE(v.text,y?f:null,v.identifier??null,v.settings??null,w??null);this.auxBoxWriter.writeBox(E),b===d&&a.cueQueue.splice(m--,1)}const h=this.auxWriter.getSlice(0,this.auxWriter.getPos()),p=this.createSampleForTrack(a,h,f,d-f,"key");await this.registerSample(a,p),a.lastCueEndTimestamp=d}}createSampleForTrack(a,o,l,s,f){return{timestamp:l,decodeTimestamp:l,duration:s,data:o,size:o.byteLength,type:f,timescaleUnitsToNextSample:ot(s,a.timescale)}}processTimestamps(a,o){if(a.timestampProcessingQueue.length===0)return;if(a.type==="audio"&&a.info.requiresPcmTransformation){let s=0;for(let f=0;f<a.timestampProcessingQueue.length;f++){const d=a.timestampProcessingQueue[f],h=ot(d.duration,a.timescale);s+=h}if(a.timeToSampleTable.length===0)a.timeToSampleTable.push({sampleCount:s,sampleDelta:1});else{const f=xn(a.timeToSampleTable);f.sampleCount+=s}a.timestampProcessingQueue.length=0;return}const l=a.timestampProcessingQueue.map(s=>s.timestamp).sort((s,f)=>s-f);for(let s=0;s<a.timestampProcessingQueue.length;s++){const f=a.timestampProcessingQueue[s];f.decodeTimestamp=l[s],!this.isFragmented&&a.lastTimescaleUnits===null&&(f.decodeTimestamp=0);const d=ot(f.timestamp-f.decodeTimestamp,a.timescale),h=ot(f.duration,a.timescale);if(a.lastTimescaleUnits!==null){te(a.lastSample);const p=ot(f.decodeTimestamp,a.timescale,!1),m=Math.round(p-a.lastTimescaleUnits);if(te(m>=0),a.lastTimescaleUnits+=m,a.lastSample.timescaleUnitsToNextSample=m,!this.isFragmented){let v=xn(a.timeToSampleTable);if(te(v),v.sampleCount===1){v.sampleDelta=m;const b=a.timeToSampleTable[a.timeToSampleTable.length-2];b&&b.sampleDelta===m&&(b.sampleCount++,a.timeToSampleTable.pop(),v=b)}else v.sampleDelta!==m&&(v.sampleCount--,a.timeToSampleTable.push(v={sampleCount:1,sampleDelta:m}));v.sampleDelta===h?v.sampleCount++:a.timeToSampleTable.push({sampleCount:1,sampleDelta:h});const y=xn(a.compositionTimeOffsetTable);te(y),y.sampleCompositionTimeOffset===d?y.sampleCount++:a.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:d})}}else a.lastTimescaleUnits=ot(f.decodeTimestamp,a.timescale,!1),this.isFragmented||(a.timeToSampleTable.push({sampleCount:1,sampleDelta:h}),a.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset:d}));a.lastSample=f}if(a.timestampProcessingQueue.length=0,te(a.lastSample),te(a.lastTimescaleUnits!==null),o!==void 0&&a.lastSample.timescaleUnitsToNextSample===0){te(o.type==="key");const s=ot(o.timestamp,a.timescale,!1),f=Math.round(s-a.lastTimescaleUnits);a.lastSample.timescaleUnitsToNextSample=f}}async registerSample(a,o){o.type==="key"&&this.processTimestamps(a,o),a.timestampProcessingQueue.push(o),this.isFragmented?(a.sampleQueue.push(o),await this.interleaveSamples()):this.fastStart==="reserve"?await this.registerSampleFastStartReserve(a,o):await this.addSampleToTrack(a,o)}async addSampleToTrack(a,o){if(!this.isFragmented&&(a.samples.push(o),this.fastStart==="reserve")){const s=a.track.metadata.maximumPacketCount;if(te(s!==void 0),a.samples.length>s)throw new Error(`Track #${a.track.id} has already reached the maximum packet count (${s}). Either add less packets or increase the maximum packet count.`)}let l=!1;if(!a.currentChunk)l=!0;else{a.currentChunk.startTimestamp=Math.min(a.currentChunk.startTimestamp,o.timestamp);const s=o.timestamp-a.currentChunk.startTimestamp;if(this.isFragmented){const f=this.trackDatas.every(d=>{if(a===d)return o.type==="key";const h=d.sampleQueue[0];return h?h.type==="key":d.track.source._closed});s>=this.minimumFragmentDuration&&f&&o.timestamp>this.maxWrittenTimestamp&&(l=!0,await this.finalizeFragment())}else l=s>=.5}l&&(a.currentChunk&&await this.finalizeCurrentChunk(a),a.currentChunk={startTimestamp:o.timestamp,samples:[],offset:null,moofOffset:null}),te(a.currentChunk),a.currentChunk.samples.push(o),this.isFragmented&&(this.maxWrittenTimestamp=Math.max(this.maxWrittenTimestamp,o.timestamp))}async finalizeCurrentChunk(a){if(te(!this.isFragmented),!a.currentChunk)return;a.finalizedChunks.push(a.currentChunk),this.finalizedChunks.push(a.currentChunk);let o=a.currentChunk.samples.length;if(a.type==="audio"&&a.info.requiresPcmTransformation&&(o=a.currentChunk.samples.reduce((l,s)=>l+ot(s.duration,a.timescale),0)),(a.compactlyCodedChunkTable.length===0||xn(a.compactlyCodedChunkTable).samplesPerChunk!==o)&&a.compactlyCodedChunkTable.push({firstChunk:a.finalizedChunks.length,samplesPerChunk:o}),this.fastStart==="in-memory"){a.currentChunk.offset=0;return}a.currentChunk.offset=this.writer.getPos();for(const l of a.currentChunk.samples)te(l.data),this.writer.write(l.data),l.data=null;await this.writer.flush()}async interleaveSamples(a=!1){if(te(this.isFragmented),!(!a&&!this.allTracksAreKnown()))e:for(;;){let o=null,l=1/0;for(const f of this.trackDatas){if(!a&&f.sampleQueue.length===0&&!f.track.source._closed)break e;f.sampleQueue.length>0&&f.sampleQueue[0].timestamp<l&&(o=f,l=f.sampleQueue[0].timestamp)}if(!o)break;const s=o.sampleQueue.shift();await this.addSampleToTrack(o,s)}}async finalizeFragment(a=!0){te(this.isFragmented);const o=this.nextFragmentNumber++;if(o===1){this.format._options.onMoov&&this.writer.startTrackingWrites();const w=uo(this);if(this.boxWriter.writeBox(w),this.format._options.onMoov){const{data:E,start:_}=this.writer.stopTrackingWrites();this.format._options.onMoov(E,_)}}const l=this.trackDatas.filter(w=>w.currentChunk),s=ig(o,l),f=this.writer.getPos(),d=f+this.boxWriter.measureBox(s);let h=d+Wu,p=1/0;for(const w of l){w.currentChunk.offset=h,w.currentChunk.moofOffset=f;for(const E of w.currentChunk.samples)h+=E.size;p=Math.min(p,w.currentChunk.startTimestamp)}const m=h-d,v=m>=2**32;if(v)for(const w of l)w.currentChunk.offset+=Jp-Wu;this.format._options.onMoof&&this.writer.startTrackingWrites();const y=ig(o,l);if(this.boxWriter.writeBox(y),this.format._options.onMoof){const{data:w,start:E}=this.writer.stopTrackingWrites();this.format._options.onMoof(w,E,p)}te(this.writer.getPos()===d),this.format._options.onMdat&&this.writer.startTrackingWrites();const b=Xl(v);b.size=m,this.boxWriter.writeBox(b),this.writer.seek(d+(v?Jp:Wu));for(const w of l)for(const E of w.currentChunk.samples)this.writer.write(E.data),E.data=null;if(this.format._options.onMdat){const{data:w,start:E}=this.writer.stopTrackingWrites();this.format._options.onMdat(w,E)}for(const w of l)w.finalizedChunks.push(w.currentChunk),this.finalizedChunks.push(w.currentChunk),w.currentChunk=null;a&&await this.writer.flush()}async registerSampleFastStartReserve(a,o){if(this.allTracksAreKnown()){if(!this.mdat){const l=uo(this),f=this.boxWriter.measureBox(l)+this.computeSampleTableSizeUpperBound()+4096;te(this.ftypSize!==null),this.writer.seek(this.ftypSize+f),this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat=Xl(!0),this.boxWriter.writeBox(this.mdat);for(const d of this.trackDatas){for(const h of d.sampleQueue)await this.addSampleToTrack(d,h);d.sampleQueue.length=0}}await this.addSampleToTrack(a,o)}else a.sampleQueue.push(o)}computeSampleTableSizeUpperBound(){te(this.fastStart==="reserve");let a=0;for(const o of this.trackDatas){const l=o.track.metadata.maximumPacketCount;te(l!==void 0),a+=8*Math.ceil(2/3*l),a+=4*l,a+=8*Math.ceil(2/3*l),a+=12*Math.ceil(2/3*l),a+=4*l,a+=8*l}return a}async onTrackClose(a){const o=await this.mutex.acquire();if(a.type==="subtitle"&&a.source._codec==="webvtt"){const l=this.trackDatas.find(s=>s.track===a);l&&await this.processWebVTTCues(l,1/0)}this.allTracksAreKnown()&&this.allTracksKnown.resolve(),this.isFragmented&&await this.interleaveSamples(),o()}async finalize(){const a=await this.mutex.acquire();this.allTracksKnown.resolve();for(const o of this.trackDatas)o.type==="subtitle"&&o.track.source._codec==="webvtt"&&await this.processWebVTTCues(o,1/0);if(this.isFragmented){await this.interleaveSamples(!0);for(const o of this.trackDatas)this.processTimestamps(o);await this.finalizeFragment(!1)}else for(const o of this.trackDatas)this.processTimestamps(o),await this.finalizeCurrentChunk(o);if(this.fastStart==="in-memory"){this.mdat=Xl(!1);let o;for(let s=0;s<2;s++){const f=uo(this),d=this.boxWriter.measureBox(f);o=this.boxWriter.measureBox(this.mdat);let h=this.writer.getPos()+d+o;for(const p of this.finalizedChunks){p.offset=h;for(const{data:m}of p.samples)te(m),h+=m.byteLength,o+=m.byteLength}if(h<2**32)break;o>=2**32&&(this.mdat.largeSize=!0)}this.format._options.onMoov&&this.writer.startTrackingWrites();const l=uo(this);if(this.boxWriter.writeBox(l),this.format._options.onMoov){const{data:s,start:f}=this.writer.stopTrackingWrites();this.format._options.onMoov(s,f)}this.format._options.onMdat&&this.writer.startTrackingWrites(),this.mdat.size=o,this.boxWriter.writeBox(this.mdat);for(const s of this.finalizedChunks)for(const f of s.samples)te(f.data),this.writer.write(f.data),f.data=null;if(this.format._options.onMdat){const{data:s,start:f}=this.writer.stopTrackingWrites();this.format._options.onMdat(s,f)}}else if(this.isFragmented){const o=this.writer.getPos(),l=VE(this.trackDatas);this.boxWriter.writeBox(l);const s=this.writer.getPos()-o;this.writer.seek(this.writer.getPos()-4),this.boxWriter.writeU32(s)}else{te(this.mdat);const o=this.boxWriter.offsets.get(this.mdat);te(o!==void 0);const l=this.writer.getPos()-o;if(this.mdat.size=l,this.mdat.largeSize=l>=2**32,this.boxWriter.patchBox(this.mdat),this.format._options.onMdat){const{data:f,start:d}=this.writer.stopTrackingWrites();this.format._options.onMdat(f,d)}const s=uo(this);if(this.fastStart==="reserve"){te(this.ftypSize!==null),this.writer.seek(this.ftypSize),this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(s);const f=this.boxWriter.offsets.get(this.mdat)-this.writer.getPos();this.boxWriter.writeBox(JS(f))}else this.format._options.onMoov&&this.writer.startTrackingWrites(),this.boxWriter.writeBox(s);if(this.format._options.onMoov){const{data:f,start:d}=this.writer.stopTrackingWrites();this.format._options.onMoov(f,d)}}a()}}class Uv{getSupportedVideoCodecs(){return this.getSupportedCodecs().filter(a=>aa.includes(a))}getSupportedAudioCodecs(){return this.getSupportedCodecs().filter(a=>os.includes(a))}getSupportedSubtitleCodecs(){return this.getSupportedCodecs().filter(a=>ls.includes(a))}_codecUnsupportedHint(a){return""}}class Dv extends Uv{constructor(a={}){if(!a||typeof a!="object")throw new TypeError("options must be an object.");if(a.fastStart!==void 0&&![!1,"in-memory","reserve","fragmented"].includes(a.fastStart))throw new TypeError("options.fastStart, when provided, must be false, 'in-memory', 'reserve', or 'fragmented'.");if(a.minimumFragmentDuration!==void 0&&(!Number.isFinite(a.minimumFragmentDuration)||a.minimumFragmentDuration<0))throw new TypeError("options.minimumFragmentDuration, when provided, must be a non-negative number.");if(a.onFtyp!==void 0&&typeof a.onFtyp!="function")throw new TypeError("options.onFtyp, when provided, must be a function.");if(a.onMoov!==void 0&&typeof a.onMoov!="function")throw new TypeError("options.onMoov, when provided, must be a function.");if(a.onMdat!==void 0&&typeof a.onMdat!="function")throw new TypeError("options.onMdat, when provided, must be a function.");if(a.onMoof!==void 0&&typeof a.onMoof!="function")throw new TypeError("options.onMoof, when provided, must be a function.");if(a.metadataFormat!==void 0&&!["mdir","mdta","udta","auto"].includes(a.metadataFormat))throw new TypeError("options.metadataFormat, when provided, must be either 'auto', 'mdir', 'mdta', or 'udta'.");super(),this._options=a}getSupportedTrackCounts(){return{video:{min:0,max:1/0},audio:{min:0,max:1/0},subtitle:{min:0,max:1/0},total:{min:1,max:2**32-1}}}get supportsVideoRotationMetadata(){return!0}_createMuxer(a){return new l_(a,this)}}class jv extends Dv{constructor(a){super(a)}get _name(){return"MP4"}get fileExtension(){return".mp4"}get mimeType(){return"video/mp4"}getSupportedCodecs(){return[...aa,...xv,"pcm-s16","pcm-s16be","pcm-s24","pcm-s24be","pcm-s32","pcm-s32be","pcm-f32","pcm-f32be","pcm-f64","pcm-f64be",...ls]}_codecUnsupportedHint(a){return new Lv().getSupportedCodecs().includes(a)?" Switching to MOV will grant support for this codec.":""}}class Lv extends Dv{constructor(a){super(a)}get _name(){return"MOV"}get fileExtension(){return".mov"}get mimeType(){return"video/quicktime"}getSupportedCodecs(){return[...aa,...os]}_codecUnsupportedHint(a){return new jv().getSupportedCodecs().includes(a)?" Switching to MP4 will grant support for this codec.":""}}const s_=i=>{if(!i||typeof i!="object")throw new TypeError("Encoding config must be an object.");if(!aa.includes(i.codec))throw new TypeError(`Invalid video codec '${i.codec}'. Must be one of: ${aa.join(", ")}.`);if(!(i.bitrate instanceof Gf)&&(!Number.isInteger(i.bitrate)||i.bitrate<=0))throw new TypeError("config.bitrate must be a positive integer or a quality.");if(i.keyFrameInterval!==void 0&&(!Number.isFinite(i.keyFrameInterval)||i.keyFrameInterval<0))throw new TypeError("config.keyFrameInterval, when provided, must be a non-negative number.");if(i.sizeChangeBehavior!==void 0&&!["deny","passThrough","fill","contain","cover"].includes(i.sizeChangeBehavior))throw new TypeError("config.sizeChangeBehavior, when provided, must be 'deny', 'passThrough', 'fill', 'contain' or 'cover'.");if(i.onEncodedPacket!==void 0&&typeof i.onEncodedPacket!="function")throw new TypeError("config.onEncodedChunk, when provided, must be a function.");if(i.onEncoderConfig!==void 0&&typeof i.onEncoderConfig!="function")throw new TypeError("config.onEncoderConfig, when provided, must be a function.");c_(i.codec,i)},c_=(i,a)=>{if(!a||typeof a!="object")throw new TypeError("Encoding options must be an object.");if(a.alpha!==void 0&&!["discard","keep"].includes(a.alpha))throw new TypeError("options.alpha, when provided, must be 'discard' or 'keep'.");if(a.bitrateMode!==void 0&&!["constant","variable"].includes(a.bitrateMode))throw new TypeError("bitrateMode, when provided, must be 'constant' or 'variable'.");if(a.latencyMode!==void 0&&!["quality","realtime"].includes(a.latencyMode))throw new TypeError("latencyMode, when provided, must be 'quality' or 'realtime'.");if(a.fullCodecString!==void 0&&typeof a.fullCodecString!="string")throw new TypeError("fullCodecString, when provided, must be a string.");if(a.fullCodecString!==void 0&&SS(a.fullCodecString)!==i)throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${i}).`);if(a.hardwareAcceleration!==void 0&&!["no-preference","prefer-hardware","prefer-software"].includes(a.hardwareAcceleration))throw new TypeError("hardwareAcceleration, when provided, must be 'no-preference', 'prefer-hardware' or 'prefer-software'.");if(a.scalabilityMode!==void 0&&typeof a.scalabilityMode!="string")throw new TypeError("scalabilityMode, when provided, must be a string.");if(a.contentHint!==void 0&&typeof a.contentHint!="string")throw new TypeError("contentHint, when provided, must be a string.")},u_=i=>{const a=i.bitrate instanceof Gf?i.bitrate._toVideoBitrate(i.codec,i.width,i.height):i.bitrate;return{codec:i.fullCodecString??bS(i.codec,i.width,i.height,a),width:i.width,height:i.height,bitrate:a,bitrateMode:i.bitrateMode,alpha:i.alpha??"discard",framerate:i.framerate,latencyMode:i.latencyMode,hardwareAcceleration:i.hardwareAcceleration,scalabilityMode:i.scalabilityMode,contentHint:i.contentHint,...ES(i.codec)}};class Gf{constructor(a){this._factor=a}_toVideoBitrate(a,o,l){const s=o*l,f={avc:1,hevc:.6,vp9:.6,av1:.4,vp8:1.2},d=1920*1080,h=3e6,p=Math.pow(s/d,.95),y=h*p*f[a]*this._factor;return Math.ceil(y/1e3)*1e3}_toAudioBitrate(a){if(ra.includes(a)||a==="flac")return;const l={aac:128e3,opus:64e3,mp3:16e4,vorbis:64e3}[a];if(!l)throw new Error(`Unhandled codec: ${a}`);let s=l*this._factor;return a==="aac"?s=[96e3,128e3,16e4,192e3].reduce((d,h)=>Math.abs(h-s)<Math.abs(d-s)?h:d):a==="opus"||a==="vorbis"?s=Math.max(6e3,s):a==="mp3"&&(s=[8e3,16e3,24e3,32e3,4e4,48e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4].reduce((d,h)=>Math.abs(h-s)<Math.abs(d-s)?h:d)),Math.round(s/1e3)*1e3}}const f_=new Gf(2);class Xf{constructor(){this._connectedTrack=null,this._closingPromise=null,this._closed=!1,this._timestampOffset=0}_ensureValidAdd(){if(!this._connectedTrack)throw new Error("Source is not connected to an output track.");if(this._connectedTrack.output.state==="canceled")throw new Error("Output has been canceled.");if(this._connectedTrack.output.state==="finalizing"||this._connectedTrack.output.state==="finalized")throw new Error("Output has been finalized.");if(this._connectedTrack.output.state==="pending")throw new Error("Output has not started.");if(this._closed)throw new Error("Source is closed.")}async _start(){}async _flushAndClose(a){}close(){if(this._closingPromise)return;const a=this._connectedTrack;if(!a)throw new Error("Cannot call close without connecting the source to an output track.");if(a.output.state==="pending")throw new Error("Cannot call close before output has been started.");this._closingPromise=(async()=>{await this._flushAndClose(!1),this._closed=!0,!(a.output.state==="finalizing"||a.output.state==="finalized")&&a.output._muxer.onTrackClose(a)})()}async _flushOrWaitForOngoingClose(a){return this._closingPromise?this._closingPromise:this._flushAndClose(a)}}class Pv extends Xf{constructor(a){if(super(),this._connectedTrack=null,!aa.includes(a))throw new TypeError(`Invalid video codec '${a}'. Must be one of: ${aa.join(", ")}.`);this._codec=a}}class d_{constructor(a,o){this.source=a,this.encodingConfig=o,this.ensureEncoderPromise=null,this.encoderInitialized=!1,this.encoder=null,this.muxer=null,this.lastMultipleOfKeyFrameInterval=-1,this.codedWidth=null,this.codedHeight=null,this.resizeCanvas=null,this.customEncoder=null,this.customEncoderCallSerializer=new pS,this.customEncoderQueueSize=0,this.alphaEncoder=null,this.splitter=null,this.splitterCreationFailed=!1,this.alphaFrameQueue=[],this.error=null,this.errorNeedsNewStack=!0}async add(a,o,l){try{if(this.checkForEncoderError(),this.source._ensureValidAdd(),this.codedWidth!==null&&this.codedHeight!==null){if(a.codedWidth!==this.codedWidth||a.codedHeight!==this.codedHeight){const h=this.encodingConfig.sizeChangeBehavior??"deny";if(h!=="passThrough"){if(h==="deny")throw new Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight}, got ${a.codedWidth}x${a.codedHeight}. To allow the sample size to change over time, set \`sizeChangeBehavior\` to a value other than 'strict' in the encoding options.`);{let p=!1;this.resizeCanvas||(typeof document<"u"?(this.resizeCanvas=document.createElement("canvas"),this.resizeCanvas.width=this.codedWidth,this.resizeCanvas.height=this.codedHeight):this.resizeCanvas=new OffscreenCanvas(this.codedWidth,this.codedHeight),p=!0);const m=this.resizeCanvas.getContext("2d",{alpha:vf()});te(m),p||(vf()?(m.fillStyle="black",m.fillRect(0,0,this.codedWidth,this.codedHeight)):m.clearRect(0,0,this.codedWidth,this.codedHeight)),a.drawWithFit(m,{fit:h}),o&&a.close(),a=new na(this.resizeCanvas,{timestamp:a.timestamp,duration:a.duration,rotation:a.rotation}),o=!0}}}}else this.codedWidth=a.codedWidth,this.codedHeight=a.codedHeight;this.encoderInitialized||(this.ensureEncoderPromise||this.ensureEncoder(a),this.encoderInitialized||await this.ensureEncoderPromise),te(this.encoderInitialized);const s=this.encodingConfig.keyFrameInterval??5,f=Math.floor(a.timestamp/s),d={...l,keyFrame:l?.keyFrame||s===0||f!==this.lastMultipleOfKeyFrameInterval};if(this.lastMultipleOfKeyFrameInterval=f,this.customEncoder){this.customEncoderQueueSize++;const h=a.clone(),p=this.customEncoderCallSerializer.call(()=>this.customEncoder.encode(h,d)).then(()=>this.customEncoderQueueSize--).catch(m=>this.error??=m).finally(()=>{h.close()});this.customEncoderQueueSize>=4&&await p}else{te(this.encoder);const h=a.toVideoFrame();if(!this.alphaEncoder)this.encoder.encode(h,d),h.close();else if(!!h.format&&!h.format.includes("A")||this.splitterCreationFailed)this.alphaFrameQueue.push(null),this.encoder.encode(h,d),h.close();else{const m=h.displayWidth,v=h.displayHeight;if(!this.splitter)try{this.splitter=new h_(m,v)}catch(y){console.error("Due to an error, only color data will be encoded.",y),this.splitterCreationFailed=!0,this.alphaFrameQueue.push(null),this.encoder.encode(h,d),h.close()}if(this.splitter){const y=this.splitter.extractColor(h),b=this.splitter.extractAlpha(h);this.alphaFrameQueue.push(b),this.encoder.encode(y,d),y.close(),h.close()}}o&&a.close(),this.encoder.encodeQueueSize>=4&&await new Promise(p=>this.encoder.addEventListener("dequeue",p,{once:!0}))}await this.muxer.mutex.currentPromise}finally{o&&a.close()}}ensureEncoder(a){const o=new Error;this.ensureEncoderPromise=(async()=>{const l=u_({width:a.codedWidth,height:a.codedHeight,...this.encodingConfig,framerate:this.source._connectedTrack?.metadata.frameRate});this.encodingConfig.onEncoderConfig?.(l);const s=XS.find(f=>f.supports(this.encodingConfig.codec,l));if(s)this.customEncoder=new s,this.customEncoder.codec=this.encodingConfig.codec,this.customEncoder.config=l,this.customEncoder.onPacket=(f,d)=>{if(!(f instanceof xo))throw new TypeError("The first argument passed to onPacket must be an EncodedPacket.");if(d!==void 0&&(!d||typeof d!="object"))throw new TypeError("The second argument passed to onPacket must be an object or undefined.");this.encodingConfig.onEncodedPacket?.(f,d),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,f,d).catch(h=>{this.error??=h,this.errorNeedsNewStack=!1})},await this.customEncoder.init();else{if(typeof VideoEncoder>"u")throw new Error("VideoEncoder is not supported by this browser.");if(l.alpha="discard",this.encodingConfig.alpha==="keep"&&(l.latencyMode="quality"),(l.width%2===1||l.height%2===1)&&(this.encodingConfig.codec==="avc"||this.encodingConfig.codec==="hevc"))throw new Error(`The dimensions ${l.width}x${l.height} are not supported for codec '${this.encodingConfig.codec}'; both width and height must be even numbers. Make sure to round your dimensions to the nearest even number.`);if(!(await VideoEncoder.isConfigSupported(l)).supported)throw new Error(`This specific encoder configuration (${l.codec}, ${l.bitrate} bps, ${l.width}x${l.height}, hardware acceleration: ${l.hardwareAcceleration??"no-preference"}) is not supported by this browser. Consider using another codec or changing your video parameters.`);const h=[],p=[];let m=0,v=0;const y=(b,w,E)=>{const _={};if(w){const T=new Uint8Array(w.byteLength);w.copyTo(T),_.alpha=T}const S=xo.fromEncodedChunk(b,_);this.encodingConfig.onEncodedPacket?.(S,E),this.muxer.addEncodedVideoPacket(this.source._connectedTrack,S,E).catch(T=>{this.error??=T,this.errorNeedsNewStack=!1})};this.encoder=new VideoEncoder({output:(b,w)=>{if(!this.alphaEncoder){y(b,null,w);return}const E=this.alphaFrameQueue.shift();te(E!==void 0),E?(this.alphaEncoder.encode(E,{keyFrame:b.type==="key"}),v++,E.close(),h.push({chunk:b,meta:w})):v===0?y(b,null,w):(p.push(m+v),h.push({chunk:b,meta:w}))},error:b=>{b.stack=o.stack,this.error??=b}}),this.encoder.configure(l),this.encodingConfig.alpha==="keep"&&(this.alphaEncoder=new VideoEncoder({output:(b,w)=>{v--;const E=h.shift();for(te(E!==void 0),y(E.chunk,b,E.meta),m++;p.length>0&&p[0]===m;){p.shift();const _=h.shift();te(_!==void 0),y(_.chunk,null,_.meta)}},error:b=>{b.stack=o.stack,this.error??=b}}),this.alphaEncoder.configure(l))}te(this.source._connectedTrack),this.muxer=this.source._connectedTrack.output._muxer,this.encoderInitialized=!0})()}async flushAndClose(a){a||this.checkForEncoderError(),this.customEncoder?(a||this.customEncoderCallSerializer.call(()=>this.customEncoder.flush()),await this.customEncoderCallSerializer.call(()=>this.customEncoder.close())):this.encoder&&(a||(await this.encoder.flush(),await this.alphaEncoder?.flush()),this.encoder.state!=="closed"&&this.encoder.close(),this.alphaEncoder&&this.alphaEncoder.state!=="closed"&&this.alphaEncoder.close(),this.alphaFrameQueue.forEach(o=>o?.close()),this.splitter?.close()),a||this.checkForEncoderError()}getQueueSize(){return this.customEncoder?this.customEncoderQueueSize:this.encoder?.encodeQueueSize??0}checkForEncoderError(){if(this.error)throw this.errorNeedsNewStack&&(this.error.stack=new Error().stack),this.error}}class h_{constructor(a,o){this.lastFrame=null,typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(a,o):(this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=o);const l=this.canvas.getContext("webgl2",{alpha:!0});if(!l)throw new Error("Couldn't acquire WebGL 2 context.");this.gl=l,this.colorProgram=this.createColorProgram(),this.alphaProgram=this.createAlphaProgram(),this.vao=this.createVAO(),this.sourceTexture=this.createTexture(),this.alphaResolutionLocation=this.gl.getUniformLocation(this.alphaProgram,"u_resolution"),this.gl.useProgram(this.colorProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.colorProgram,"u_sourceTexture"),0),this.gl.useProgram(this.alphaProgram),this.gl.uniform1i(this.gl.getUniformLocation(this.alphaProgram,"u_sourceTexture"),0)}createVertexShader(){return this.createShader(this.gl.VERTEX_SHADER,`#version 300 es
			in vec2 a_position;
			in vec2 a_texCoord;
			out vec2 v_texCoord;
			
			void main() {
				gl_Position = vec4(a_position, 0.0, 1.0);
				v_texCoord = a_texCoord;
			}
		`)}createColorProgram(){const a=this.createVertexShader(),o=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			in vec2 v_texCoord;
			out vec4 fragColor;
			
			void main() {
				vec4 source = texture(u_sourceTexture, v_texCoord);
				fragColor = vec4(source.rgb, 1.0);
			}
		`),l=this.gl.createProgram();return this.gl.attachShader(l,a),this.gl.attachShader(l,o),this.gl.linkProgram(l),l}createAlphaProgram(){const a=this.createVertexShader(),o=this.createShader(this.gl.FRAGMENT_SHADER,`#version 300 es
			precision highp float;
			
			uniform sampler2D u_sourceTexture;
			uniform vec2 u_resolution; // The width and height of the canvas
			in vec2 v_texCoord;
			out vec4 fragColor;

			// This function determines the value for a single byte in the YUV stream
			float getByteValue(float byteOffset) {
				float width = u_resolution.x;
				float height = u_resolution.y;

				float yPlaneSize = width * height;

				if (byteOffset < yPlaneSize) {
					// This byte is in the luma plane. Find the corresponding pixel coordinates to sample from
					float y = floor(byteOffset / width);
					float x = mod(byteOffset, width);
					
					// Add 0.5 to sample the center of the texel
					vec2 sampleCoord = (vec2(x, y) + 0.5) / u_resolution;
					
					// The luma value is the alpha from the source texture
					return texture(u_sourceTexture, sampleCoord).a;
				} else {
					// Write a fixed value for chroma and beyond
					return 128.0 / 255.0;
				}
			}
			
			void main() {
				// Each fragment writes 4 bytes (R, G, B, A)
				float pixelIndex = floor(gl_FragCoord.y) * u_resolution.x + floor(gl_FragCoord.x);
				float baseByteOffset = pixelIndex * 4.0;

				vec4 result;
				for (int i = 0; i < 4; i++) {
					float currentByteOffset = baseByteOffset + float(i);
					result[i] = getByteValue(currentByteOffset);
				}
				
				fragColor = result;
			}
		`),l=this.gl.createProgram();return this.gl.attachShader(l,a),this.gl.attachShader(l,o),this.gl.linkProgram(l),l}createShader(a,o){const l=this.gl.createShader(a);return this.gl.shaderSource(l,o),this.gl.compileShader(l),this.gl.getShaderParameter(l,this.gl.COMPILE_STATUS)||console.error("Shader compile error:",this.gl.getShaderInfoLog(l)),l}createVAO(){const a=this.gl.createVertexArray();this.gl.bindVertexArray(a);const o=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),l=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW);const s=this.gl.getAttribLocation(this.colorProgram,"a_position"),f=this.gl.getAttribLocation(this.colorProgram,"a_texCoord");return this.gl.enableVertexAttribArray(s),this.gl.vertexAttribPointer(s,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(f,2,this.gl.FLOAT,!1,16,8),a}createTexture(){const a=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a}updateTexture(a){this.lastFrame!==a&&((a.displayWidth!==this.canvas.width||a.displayHeight!==this.canvas.height)&&(this.canvas.width=a.displayWidth,this.canvas.height=a.displayHeight),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,a),this.lastFrame=a)}extractColor(a){return this.updateTexture(a),this.gl.useProgram(this.colorProgram),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),new VideoFrame(this.canvas,{timestamp:a.timestamp,duration:a.duration??void 0,alpha:"discard"})}extractAlpha(a){this.updateTexture(a),this.gl.useProgram(this.alphaProgram),this.gl.uniform2f(this.alphaResolutionLocation,this.canvas.width,this.canvas.height),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindVertexArray(this.vao),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const{width:o,height:l}=this.canvas,s=Math.ceil(o/2)*Math.ceil(l/2),f=o*l+s*2,d=Math.ceil(f/(o*4));let h=new Uint8Array(4*o*d);this.gl.readPixels(0,0,o,d,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h),h=h.subarray(0,f),te(h[o*l]===128),te(h[h.length-1]===128);const p={format:"I420",codedWidth:o,codedHeight:l,timestamp:a.timestamp,duration:a.duration??void 0,transfer:[h.buffer]};return new VideoFrame(h,p)}close(){this.gl.getExtension("WEBGL_lose_context")?.loseContext(),this.gl=null}}class m_ extends Pv{constructor(a,o){if(!(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)&&!(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas))throw new TypeError("canvas must be an HTMLCanvasElement or OffscreenCanvas.");s_(o),super(o.codec),this._encoder=new d_(this,o),this._canvas=a}add(a,o=0,l){if(!Number.isFinite(a)||a<0)throw new TypeError("timestamp must be a non-negative number.");if(!Number.isFinite(o)||o<0)throw new TypeError("duration must be a non-negative number.");const s=new na(this._canvas,{timestamp:a,duration:o});return this._encoder.add(s,!0,l)}_flushAndClose(a){return this._encoder.flushAndClose(a)}}class p_ extends Xf{constructor(a){if(super(),this._connectedTrack=null,!os.includes(a))throw new TypeError(`Invalid audio codec '${a}'. Must be one of: ${os.join(", ")}.`);this._codec=a}}class g_ extends Xf{constructor(a){if(super(),this._connectedTrack=null,!ls.includes(a))throw new TypeError(`Invalid subtitle codec '${a}'. Must be one of: ${ls.join(", ")}.`);this._codec=a}}const v_=["video","audio","subtitle"],nf=i=>{if(!i||typeof i!="object")throw new TypeError("metadata must be an object.");if(i.languageCode!==void 0&&!hS(i.languageCode))throw new TypeError("metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.");if(i.name!==void 0&&typeof i.name!="string")throw new TypeError("metadata.name, when provided, must be a string.");if(i.disposition!==void 0&&xS(i.disposition),i.maximumPacketCount!==void 0&&(!Number.isInteger(i.maximumPacketCount)||i.maximumPacketCount<0))throw new TypeError("metadata.maximumPacketCount, when provided, must be a non-negative integer.")};class y_{constructor(a){if(this.state="pending",this._tracks=[],this._startPromise=null,this._cancelPromise=null,this._finalizePromise=null,this._mutex=new pv,this._metadataTags={},!a||typeof a!="object")throw new TypeError("options must be an object.");if(!(a.format instanceof Uv))throw new TypeError("options.format must be an OutputFormat.");if(!(a.target instanceof Bv))throw new TypeError("options.target must be a Target.");if(a.target._output)throw new Error("Target is already used for another output.");a.target._output=this,this.format=a.format,this.target=a.target,this._writer=a.target._createWriter(),this._muxer=a.format._createMuxer(this)}addVideoTrack(a,o={}){if(!(a instanceof Pv))throw new TypeError("source must be a VideoSource.");if(nf(o),o.rotation!==void 0&&![0,90,180,270].includes(o.rotation))throw new TypeError(`Invalid video rotation: ${o.rotation}. Has to be 0, 90, 180 or 270.`);if(!this.format.supportsVideoRotationMetadata&&o.rotation)throw new Error(`${this.format._name} does not support video rotation metadata.`);if(o.frameRate!==void 0&&(!Number.isFinite(o.frameRate)||o.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${o.frameRate}. Must be a positive number.`);this._addTrack("video",a,o)}addAudioTrack(a,o={}){if(!(a instanceof p_))throw new TypeError("source must be an AudioSource.");nf(o),this._addTrack("audio",a,o)}addSubtitleTrack(a,o={}){if(!(a instanceof g_))throw new TypeError("source must be a SubtitleSource.");nf(o),this._addTrack("subtitle",a,o)}setMetadataTags(a){if(yS(a),this.state!=="pending")throw new Error("Cannot set metadata tags after output has been started or canceled.");this._metadataTags=a}_addTrack(a,o,l){if(this.state!=="pending")throw new Error("Cannot add track after output has been started or canceled.");if(o._connectedTrack)throw new Error("Source is already used for a track.");const s=this.format.getSupportedTrackCounts(),f=this._tracks.reduce((m,v)=>m+(v.type===a?1:0),0),d=s[a].max;if(f===d)throw new Error(d===0?`${this.format._name} does not support ${a} tracks.`:`${this.format._name} does not support more than ${d} ${a} track${d===1?"":"s"}.`);const h=s.total.max;if(this._tracks.length===h)throw new Error(`${this.format._name} does not support more than ${h} tracks${h===1?"":"s"} in total.`);const p={id:this._tracks.length+1,output:this,type:a,source:o,metadata:l};if(p.type==="video"){const m=this.format.getSupportedVideoCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support video tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported video codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}else if(p.type==="audio"){const m=this.format.getSupportedAudioCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support audio tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported audio codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}else if(p.type==="subtitle"){const m=this.format.getSupportedSubtitleCodecs();if(m.length===0)throw new Error(`${this.format._name} does not support subtitle tracks.`+this.format._codecUnsupportedHint(p.source._codec));if(!m.includes(p.source._codec))throw new Error(`Codec '${p.source._codec}' cannot be contained within ${this.format._name}. Supported subtitle codecs are: ${m.map(v=>`'${v}'`).join(", ")}.`+this.format._codecUnsupportedHint(p.source._codec))}this._tracks.push(p),o._connectedTrack=p}async start(){const a=this.format.getSupportedTrackCounts();for(const l of v_){const s=this._tracks.reduce((d,h)=>d+(h.type===l?1:0),0),f=a[l].min;if(s<f)throw new Error(f===a[l].max?`${this.format._name} requires exactly ${f} ${l} track${f===1?"":"s"}.`:`${this.format._name} requires at least ${f} ${l} track${f===1?"":"s"}.`)}const o=a.total.min;if(this._tracks.length<o)throw new Error(o===a.total.max?`${this.format._name} requires exactly ${o} track${o===1?"":"s"}.`:`${this.format._name} requires at least ${o} track${o===1?"":"s"}.`);if(this.state==="canceled")throw new Error("Output has been canceled.");return this._startPromise?(console.warn("Output has already been started."),this._startPromise):this._startPromise=(async()=>{this.state="started",this._writer.start();const l=await this._mutex.acquire();await this._muxer.start();const s=this._tracks.map(f=>f.source._start());await Promise.all(s),l()})()}getMimeType(){return this._muxer.getMimeType()}async cancel(){if(this._cancelPromise)return console.warn("Output has already been canceled."),this._cancelPromise;if(this.state==="finalizing"||this.state==="finalized"){console.warn("Output has already been finalized.");return}return this._cancelPromise=(async()=>{this.state="canceled";const a=await this._mutex.acquire(),o=this._tracks.map(l=>l.source._flushOrWaitForOngoingClose(!0));await Promise.all(o),await this._writer.close(),a()})()}async finalize(){if(this.state==="pending")throw new Error("Cannot finalize before starting.");if(this.state==="canceled")throw new Error("Cannot finalize after canceling.");return this._finalizePromise?(console.warn("Output has already been finalized."),this._finalizePromise):this._finalizePromise=(async()=>{this.state="finalizing";const a=await this._mutex.acquire(),o=this._tracks.map(l=>l.source._flushOrWaitForOngoingClose(!1));await Promise.all(o),await this._muxer.finalize(),await this._writer.flush(),await this._writer.finalize(),this.state="finalized",a()})()}}class x_{constructor(a){this.onFinishCallback=a}output=null;canvas=null;canvasSource=null;async startExport(a){this.output=new y_({format:new jv,target:new Nv}),this.canvas=document.createElement("canvas"),this.canvas.width=a.width,this.canvas.height=a.height,this.canvasSource=new m_(this.canvas,{codec:"avc",bitrate:f_}),this.output.addVideoTrack(this.canvasSource),await this.output.start()}working=!1;async addFrame(a,o,l,s){if(this.working)return;if(this.working=!0,!this.canvas||!this.output||!this.canvasSource){console.error("VideoExporter: output or canvas not initialized");return}const f=a.capture("renderTexture"),d=this.canvas.width,h=this.canvas.height,p=this.canvas.getContext("2d");if(!p)throw new Error("Unable to create 2D context for rendering");const m=p.createImageData(d,h);m.data.set(f),p.putImageData(m,0,0),await this.canvasSource.add(o,l),s(),this.working=!1}done=!1;async finishExport(){if(!this.output||this.done||this.working)return;this.working=!0,await this.output?.finalize(),this.onFinishCallback(),this.done=!0,this.working=!1;const a=this.output.target.buffer;if(a){const o=new Blob([a],{type:"video/mp4"}),l=URL.createObjectURL(o),s=document.createElement("a");s.style.display="none",s.href=l,s.download="liquidlissajous.mp4",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(l)}}}function b_(){const i=Ci(A=>A.renderingInProgress),[a,o]=C.useState(0),[l,s]=C.useState(null),f=Ci(A=>A.updateStore),d=Ci(A=>A),h=Kl(d),p=d.exportPerfectLoop?1:d.exportDuration*Ja/h,m=i?a/h/p:0,v=C.useRef(null),y=Ci(A=>A.width),b=Ci(A=>A.height),w=C.useRef(null),[E,_]=C.useState({width:0,height:0});C.useEffect(()=>{function A(){if(w.current){const B=w.current.getBoundingClientRect();_({width:B.width,height:B.height})}}return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const[S,T]=(()=>{const A=Math.min(E.width/y,E.height/b);return[y*A,b*A]})();return M.jsxs("div",{style:{backgroundColor:"#101214",width:"100%",height:"100%",padding:"2rem",overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr"},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"flex-end"},children:[M.jsx(af,{onClick:async()=>{v.current.takeScreenshot()},text:"export frame",iconName:"camera"}),M.jsx(af,{onClick:async()=>{f({renderingInProgress:!0});const A=new x_(()=>{f({renderingInProgress:!1}),s(null),o(0)});s(A),A.startExport({width:y,height:b})},text:"export as .mp4",iconName:"movie"})]}),M.jsxs("div",{ref:w,style:{width:"calc(100vw - 700px - 4rem)",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[M.jsx(lS,{scaledWidth:S,scaledHeight:T,width:y,height:b,renderObject:{renderingInProgress:i,targetRenderFrame:a,setTargetRenderFrame:o,videoExporter:l},screenshotRef:v}),i&&M.jsxs("div",{style:{color:"var(--danger)",marginTop:"1rem",fontSize:"1.25rem",fontWeight:500},children:["Rendering...",Math.floor(m*100),"%"]})]})]})}function w_(){return M.jsx(M.Fragment,{children:M.jsxs("div",{style:{width:"100vw",height:"100vh",display:"grid",gridTemplateColumns:"700px 1fr",gridTemplateRows:"1fr",backgroundColor:"var(--gray1)",overflow:"hidden"},children:[M.jsx("div",{children:M.jsx(W2,{})}),M.jsx("div",{children:M.jsx(b_,{})})]})})}lx.createRoot(document.getElementById("root")).render(M.jsx(C.StrictMode,{children:M.jsx(w_,{})}));
